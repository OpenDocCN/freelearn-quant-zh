- en: Chapter 10. Options and Futures
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章 期权与期货
- en: 'In modern finance, the option theory (including futures and forwards) and its
    applications play an important role. Many trading strategies, corporate incentive
    plans, and hedging strategies include various types of options. For example, many
    executive incentive plans are based on stock options. Assume that an importer
    located in the US has just ordered a piece of machinery from England with a payment
    of £10 million in three months. The importer has a currency risk (or exchange
    rate risk). If the pound depreciates against the US dollar, the importer would
    be better off since he/she pays less US dollars to buy £10 million. On the contrary,
    if the pound appreciates against the US dollar, then the importer would suffer
    a loss. There are several ways that the importer could avoid or reduce such a
    risk: buy pounds right now, enter a futures market to buy pounds with a fixed
    exchange rate determined today, or long a call option with a fixed exercise price.
    In this chapter, we will explain the option theory and its related applications.
    In particular, the following topics will be covered:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在现代金融中，期权理论（包括期货和远期合约）及其应用发挥着重要作用。许多交易策略、公司激励计划和对冲策略都包含各种类型的期权。例如，许多高管激励计划都基于股票期权。假设一家位于美国的进口商刚刚从英国订购了一台机器，三个月后需支付1000万英镑。进口商面临货币风险（或汇率风险）。如果英镑对美元贬值，进口商将受益，因为他/她用更少的美元买入1000万英镑。相反，如果英镑对美元升值，那么进口商将遭受损失。进口商可以通过几种方式避免或减少这种风险：立即购买英镑、进入期货市场按今天确定的汇率买入英镑，或者购买一个有固定行使价格的认购期权。在本章中，我们将解释期权理论及其相关应用。特别地，以下主题将被涵盖：
- en: How to hedge currency risk, a market-wide short-term downturn
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何对冲货币风险以及市场普遍的短期下跌
- en: Payoff and profit/loss functions for calls and puts and their graphical representations
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 认购期权和认沽期权的支付和盈亏函数及其图形表示
- en: European versus American options
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 欧洲期权与美洲期权
- en: Normal distribution, standard normal distribution, and cumulative normal distribution
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 正态分布、标准正态分布和累积正态分布
- en: Black-Scholes-Merton option model with/without dividend
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布莱克-斯科尔斯-默顿期权模型（有/无股息）
- en: Various trading strategies and their visual presentations, such as covered call,
    straddle, butterfly, and calendar spread
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 各种交易策略及其可视化呈现，例如备兑认购期权、跨式期权、蝶式期权和日历差价期权
- en: Delta, gamma, and other Greeks
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 德尔塔、伽马以及其他希腊字母
- en: The put-call parity and its graphical representation
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 认购期权和认沽期权的平价关系及其图形表示
- en: Graphical representation for a one-step and a two-step binomial tree model
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一步和两步二叉树模型的图形表示
- en: Using the binomial tree method to price both European and American options
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用二叉树方法定价欧洲和美洲期权
- en: Implied volatility, volatility smile and skewness
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隐含波动率、波动率微笑和偏斜
- en: Options theory is an integral part of finance theory. It is difficult to image
    that a finance student would not understand it. However, it is quite demanding
    to comprehend the theory thoroughly. Many finance-major students view options
    theory as rocket science, since it involves how to solve various differential
    equations. In order to satisfy as many readers as possible, in this chapter we
    avoid complex mathematical derivations.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 期权理论是金融理论的重要组成部分。很难想象一位金融学学生无法理解它。然而，深入理解这一理论是非常具有挑战性的。许多金融专业的学生认为期权理论就像火箭科学一样复杂，因为它涉及到如何解决各种微分方程。为了满足尽可能多的读者需求，本章避免了复杂的数学推导。
- en: An option would give the option buyer a right to buy or sell something in the
    future with a fixed price determined today. If the buyer has a right to buy something
    in the future, it is called a call option. If the option buyer is entitled to
    sell something, it is called a put option. Since there are two persons (sides)
    for each transaction, the buyer pays to acquire a right, while the seller receives
    cash inflow today to bear an obligation. Unlike options, a futures contract would
    give the buyer and seller both rights and obligations. Unlike options with an
    initial cash flow from buyer to seller, for a futures contract, usually there
    is no initial cash flow. Forward contracts are quite similar to future contracts
    with a few exceptions. In this chapter, these two types of contracts (futures
    and forwards) are not distinguished. A forward contract is easier to analyze than
    a future contract. If a reader wants a more in-depth analysis, he/she should consult
    other related textbooks.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 一种期权将赋予期权买方在未来以今天确定的固定价格买入或卖出某物的权利。如果买方有权在未来购买某物，则称为认购期权。如果期权买方有权卖出某物，则称为认沽期权。由于每个交易涉及两方（买方和卖方），买方支付以获得某项权利，而卖方则收到现金流入以承担义务。与期权不同，期货合约赋予买卖双方权利和义务。与期权中买方向卖方支付初始现金流不同，期货合约通常没有初始现金流。远期合约与期货合约非常相似，只有少数例外。在本章中，这两种合约（期货和远期合约）没有做区分。远期合约比期货合约更容易分析。如果读者希望进行更深入的分析，应参考其他相关教材。
- en: Introducing futures
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍期货
- en: 'Before discussing the basic concepts and formulas related to futures, let''s
    review the concept of continuously compounded interest rates. In [Chapter 3](ch03.html
    "Chapter 3. Time Value of Money"), *Time Value of Money*, we learned that the
    following formula could be applied to estimate the future value of a given present
    value:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在讨论与期货相关的基本概念和公式之前，我们先回顾一下连续复利利率的概念。在[第 3 章](ch03.html "第 3 章. 货币的时间价值")，*货币的时间价值*，我们学到以下公式可以用来估算给定现值的未来价值：
- en: '![Introducing futures](img/B06175_10_19.jpg)'
  id: totrans-17
  prefs: []
  type: TYPE_IMG
  zh: '![介绍期货](img/B06175_10_19.jpg)'
- en: 'Here, *FV* is the future value, *PV* is the present value, *R* is the effective
    period rate and *n* is the number of periods. For example, assume that the **Annual
    Percentage Rate** (**APR**) is 8%, compounded semiannually. If we deposit $100
    today, what is its future value in two years? The following code shows the result:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*FV* 是未来价值，*PV* 是现值，*R* 是有效期利率，*n* 是期数。例如，假设**年利率**（**APR**）为 8%，按半年复利计算。如果我们今天存入
    $100，两年后的未来价值是多少？以下代码显示了结果：
- en: '[PRE0]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The output is shown here:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下所示：
- en: '[PRE1]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The future value is $116.99\. In the preceding program, the effective semiannual
    rate is 4% since the APR is 8% compounded semiannually. In options theory, risk-free
    rates and dividend yields are defined as continuously compounded. It is easy to
    derive the relationship between an effective (or APR) rate and a continuously
    compounded rate. The second way to estimate a future value for a given present
    value is shown here:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 未来价值是 $116.99。在前面的程序中，有效半年利率为 4%，因为年利率为 8%，并按半年复利计算。在期权理论中，无风险利率和股息收益率定义为连续复利率。推导有效利率（或年利率）与连续复利率之间的关系是很容易的。估算给定现值的未来价值的第二种方法如下：
- en: '![Introducing futures](img/B06175_10_20.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![介绍期货](img/B06175_10_20.jpg)'
- en: 'Here, *Rc* is the continuously compounded rate and *T* is the number of years.
    In other words, when applying Equation (1), we could have many combinations, such
    as annual effective rate and the number of years, effective monthly rate and number
    of months, and the like. However, this is not true for Equation (2), which has
    only one pair: continuously compounded rate and the number of years. To derive
    the relationship between one effective rate and its corresponding continuously
    compounded rate, we recommend the following simple approach: choose $1 as our
    present value and 1 year as our investment horizon. Then apply the previous two
    equations and set them equal. Assume that we know that the effective semiannual
    rate is given, 4% in the preceding case. What is its equivalent *Rc*?'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*Rc* 是连续复利率，*T* 是年份数。换句话说，在应用公式（1）时，我们可以有许多组合，例如年有效利率和年份数、有效月利率和月数等。然而，公式（2）并非如此，它只有一对：连续复利率和年份数。为了推导一个有效利率与其对应的连续复利率之间的关系，我们推荐以下简单方法：选择
    $1 作为当前值，1 年作为投资期限。然后应用前两个公式并将其设为相等。假设我们知道有效半年利率为前述案例中的 4%。那么其等效的 *Rc* 是多少？
- en: '![Introducing futures](img/B06175_10_21.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_21.jpg)'
- en: 'We equate them to have the following equation:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将它们等同，得到以下方程：
- en: '![Introducing futures](img/B06175_10_22.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_22.jpg)'
- en: 'Taking the natural log on both sides of the previous equation, we have the
    following solution:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 对前一个方程两边取自然对数，我们得到以下解：
- en: '![Introducing futures](img/B06175_10_23.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_23.jpg)'
- en: 'With a simple generalization of the preceding approach, we end up with the
    following formula to convert an effective rate to its corresponding continuously
    compounded rate:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 对前述方法进行简单的推广，我们得出以下公式，将有效利率转换为对应的连续复利利率：
- en: '![Introducing futures](img/B06175_10_24.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_24.jpg)'
- en: 'Here, *m* is the compounding frequency per year: *m=1, 2, 4, 12, 52, 365* for
    annual, semiannual, quarterly, monthly, weekly, and daily, respectively. *Reffective*
    is APR divided by *m*. If an APR with related compounding frequency is given,
    we have the following equivalent converting formula:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*m* 是每年的复利频率：*m=1, 2, 4, 12, 52, 365* 分别对应年复利、半年复利、季复利、月复利、周复利和日复利。*Reffective*
    是APR除以*m*。如果给定一个带有相关复利频率的APR，我们可以使用以下等效转换公式：
- en: '![Introducing futures](img/B06175_10_25.jpg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_25.jpg)'
- en: 'On the other hand, it is quite easy to derive the formula to estimate an effective
    rate from a given continuous rate:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，从给定的连续利率推导出有效利率的公式是相当简单的：
- en: '![Introducing futures](img/B06175_10_26.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_26.jpg)'
- en: 'To verify the preceding equation, see the following codes:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 为了验证前面的方程，请查看以下代码：
- en: '[PRE2]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Similarly, we have the following formula to estimate the APR from an *Rc*:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，我们得出以下公式来估算从*Rc*计算得到的APR：
- en: '![Introducing futures](img/B06175_10_27.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_27.jpg)'
- en: 'For a futures contract, let''s use the preceding example of an importer in
    the US who is going to pay £10 million in three months. Usually, there are two
    ways to present an exchange rate: value of the first currency per unit of the
    second currency, and the opposite. Let''s treat US as domestic and England as
    foreign, and the exchange rate is quoted in dollars per pound. Assume that today
    the exchange rate is £1 = 1.25 USD, the domestic interest rate is 1% and the foreign
    interest rate (in England) is 2%. The following codes show how much we need today
    in terms of pounds and US dollars:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 对于期货合约，我们以之前的例子为例，假设一个美国进口商将在三个月后支付1000万英镑。通常，汇率有两种表示方式：第一种货币与第二种货币的比值，或者相反的比值。我们假设美国为国内，英国为外国，汇率以美元/英镑表示。假设今天的汇率为1英镑
    = 1.25美元，国内利率为1%，外国利率（在英国）为2%。以下代码展示了我们今天需要多少英镑和美元：
- en: '[PRE3]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The result shows that we would need £4.975 million today to satisfy the payment
    of £5 million in three months, since we could deposit £4.975 million in a bank
    to earn extra interest (at 1%). If the importer has no pounds, they could spend
    $6.2188 million US dollars to purchase the amount of pounds today. Alternatively,
    the importer could long a future contract (or a few future contracts) to purchase
    pounds in three months with a fixed exchange rate determined today. The forward
    rate (future exchange rate) is given here:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 结果显示，为了满足三个月后支付500万英镑的需求，我们今天需要497.5万英镑，因为我们可以将497.5万英镑存入银行以赚取额外的利息（按1%的利率）。如果进口商没有英镑，他们可以花费621.88万美元来购买今天所需的英镑。或者，进口商可以通过购买期货合约（或几个期货合约）来锁定一个固定的汇率，在三个月后购买英镑。此处给出的远期汇率（未来汇率）如下：
- en: '![Introducing futures](img/B06175_10_28.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![引入期货](img/B06175_10_28.jpg)'
- en: 'Here, *F* is the future price (in this case future exchange rate determined
    today), *S0* is the spot price (in this case today''s exchange rate), *Rd* is
    the domestic risk-free rate compounded continuously, *Rf* is the foreign deposit
    rate compounded continuously and *T* is the maturity in years. The following Python
    program shows the future price today:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*F* 是期货价格（在本例中是今天确定的未来汇率），*S0* 是现货价格（在本例中是今天的汇率），*Rd* 是国内的连续复利无风险利率，*Rf*
    是外国的连续复利存款利率，*T* 是年化期限。以下Python程序显示了今天的期货价格：
- en: '[PRE4]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The output is shown here:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE5]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Based on the result, the exchange rate in three months should be 1.2468789
    US dollars per pound. In other words, US dollars should have depreciated against
    the British pound. The reason is based on the two interest rates. Here is the
    logic based on the no arbitrage principle. Assume that we have $1.25 USD today.
    We have two choices: deposit in a US bank to enjoy 2%, or exchange it for 1 pound
    and deposit it in a foreign bank, enjoying 1%. Assume further, if the future exchange
    rate is not 1.246879, we would have an arbitrate opportunity. Just assume that
    the futures price (for exchange rate) is $1.26 indicating that the pound is overvalued
    relative to the US dollar. An arbitrator would buy low and sell high, that is,
    short futures. Assume that we have one pound obligation in three months. Here
    is the arbitrage strategy: borrow $1.25 (USD) and sell one pound in three months
    with a future price of $1.26\. At the end of three months, here is the profit
    of our arbitrage:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 根据结果，三个月后的汇率应该是每英镑1.2468789美元。换句话说，美元应该会相对于英镑贬值。其原因基于两种利率。以下是基于无套利原则的逻辑。假设我们今天有1.25美元。我们有两种选择：将其存入美国银行享受2%的利息，或将其兑换成1英镑并存入外资银行，享受1%的利息。进一步假设，如果未来的汇率不是1.246879，我们将面临套利机会。假设期货价格（汇率）为1.26美元，表示英镑相对于美元被高估了。套利者将低买高卖，也就是做空期货。假设我们有一个三个月到期的1英镑的义务。以下是套利策略：借入1.25美元（USD），并在三个月后以1.26美元的期货价格卖出1英镑。三个月后，我们的套利利润如下：
- en: '[PRE6]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The output is shown here:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下：
- en: '[PRE7]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The profit is 0.15 USD. If the future price is lower than 1.246878902996825,
    an arbitrager would take an opposite position, that is, long a future contract.
    For stocks with no dividend payment before the expiry date, we have the following
    future price:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 利润为0.15美元。如果期货价格低于1.246878902996825，套利者将采取相反的头寸，即做多期货合约。对于到期日前没有股息支付的股票，我们有以下期货价格：
- en: '![Introducing futures](img/B06175_10_29.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![介绍期货](img/B06175_10_29.jpg)'
- en: 'Here *F* is the futures price, *S0* is the current stock price, *Rf* is the
    continuously compounded risk-free rate, yield is the dividend yield continuously
    compounded. For known discrete dividends before a maturity date, we have the following
    formula:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*F*是期货价格，*S0*是当前股票价格，*Rf*是持续复利的无风险利率，yield是持续复利的股息收益率。对于已知到期日前的离散股息，我们有以下公式：
- en: '![Introducing futures](img/B06175_10_30.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![介绍期货](img/B06175_10_30.jpg)'
- en: 'Here, *PV(D)* is the present value of all dividends before the expiry date.
    Futures could be used as a hedging tool or for speculation. Assume that a mutual
    fund manager is worried about the market''s potential negative movement in a short
    term. Assume further that his/her portfolio is positively correlated with the
    market portfolio, such as S&P500 index. Thus, he/she should short futures on S&P500\.
    Here is a related formula:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*PV(D)*是到期日前所有股息的现值。期货可以作为对冲工具或投机工具。假设某个共同基金经理担心市场可能在短期内出现负面波动。进一步假设他/她的投资组合与市场投资组合（如标准普尔500指数）正相关。因此，他/她应该做空标准普尔500指数的期货。以下是相关的公式：
- en: '![Introducing futures](img/B06175_10_31.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![介绍期货](img/B06175_10_31.jpg)'
- en: 'Here, *n* is the number of futures contracts to long or short, *βtarget* is
    the target beta, *βp* is the beta of our current portfolio, *Vp* is the value
    of the portfolio, and *VF* is the value of one futures contract. If *n* is less
    (bigger) than zero, it means a short (long) position. Here is an example. Assume
    John Doe is managing a portfolio worth $50 million today and his portfolio has
    a beta of 1.10 with S&P500\. He is worried that the market might go down in the
    next six months. It is not feasible to sell his portfolio or part of it because
    of the transaction costs. Assume that in the short term, his target beta is zero.
    For each point of S&P500, the price is $250\. Since today''s S&P500 is 2297.41,
    the value of one futures contract is $5,743,550\. The number of contracts John
    should short (or long) is given here:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*n*是做多或做空的期货合约数量，*βtarget*是目标贝塔值，*βp*是当前投资组合的贝塔值，*Vp*是投资组合的价值，*VF*是一个期货合约的价值。如果*n*小于（大于）零，表示做空（做多）头寸。以下是一个例子。假设John
    Doe今天管理着一只价值5000万美元的投资组合，他的投资组合与标准普尔500指数的贝塔值为1.10。他担心市场可能在未来六个月内下跌。由于交易成本，他/她无法出售其投资组合或其一部分。假设短期内他的目标贝塔值为零。每个标准普尔500指数点的价格是250美元。由于今天标准普尔500指数为2297.41点，一个期货合约的价值为5,743,550美元。John应当做空（或做多）的合约数量如下：
- en: '[PRE8]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The output is shown here:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下：
- en: '[PRE9]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'A negative value indicates a short position. John Doe should short 96 S&P500
    futures contracts. This is consistent with common sense, since the portfolio is
    positively correlated with the S&P500 index. The following program shows the profit
    or loss with and without hedging when the S&P500 index level falls 97 points:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 负值表示做空头寸。John Doe 应该做空96份S&P500期货合约。这与常识一致，因为投资组合与S&P500指数正相关。以下程序展示了当S&P500指数下跌97点时，是否对冲的盈亏情况：
- en: '[PRE10]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The related output is shown here:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 相关输出如下所示：
- en: '[PRE11]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: From the last three lines, we know that without hedging, the loss in portfolio
    value would be $2.12 million. On the other hand, after shorting 96 S&P500 futures
    contracts, the net loss is only $217,876 after the S&P500 index falls 98 points
    in six months. With a few different potential S&P500 index levels, we could find
    out their related hedging and no-hedging results. Such a hedging strategy is usually
    called portfolio insurance.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 从最后三行可以知道，如果不对冲，投资组合的损失将为$212万。另一方面，在做空96份S&P500期货合约后，在S&P500指数下跌98点的六个月后，净损失仅为$217,876。通过不同的潜在S&P500指数水平，我们可以找出其相关的对冲和不对冲结果。这样的对冲策略通常被称为投资组合保险。
- en: Payoff and profit/loss functions for call and put options
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 看涨和看跌期权的回报和盈亏函数
- en: 'An option gives its buyer the right to buy (call option) or sell (put option)
    something in the future to the option seller at a predetermined price (exercise
    price). For example, if we buy a European call option to acquire a stock for X
    dollars, such as $30, at the end of three months our payoff on maturity day will
    be the one calculated using the following formula:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 一个期权赋予其买方在未来以预定价格（行使价）购买（看涨期权）或出售（看跌期权）某物给期权卖方的权利。例如，如果我们购买一个欧式看涨期权，以X美元（如$30）在三个月后获得某个股票，那么在到期日我们的回报将按照以下公式计算：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_32.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![看涨和看跌期权的回报和盈亏函数](img/B06175_10_32.jpg)'
- en: 'Here, ![Payoff and profit/loss functions for call and put options](img/B06175_10_56.jpg)
    is the stock price at the maturity date (T), the exercise price is X (X=30 in
    this case). Assume that three months later the stock price is $25\. We would not
    exercise our call option to pay $30 in exchange for the stock since we could buy
    the same stock with $25 in the open market. On the other hand, if the stock price
    is $40, we will exercise our right to reap a payoff of $10, that is, buy the stock
    at $30 and sell it at $40\. The following program presents the payoff function
    for a call:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，![看涨和看跌期权的回报和盈亏函数](img/B06175_10_56.jpg)是到期日（T）的股票价格，行使价为X（此例中X=30）。假设三个月后股票价格为$25。我们不会行使看涨期权以$30的价格购买股票，因为我们可以在公开市场上以$25购买相同的股票。另一方面，如果股票价格为$40，我们将行使我们的权利以获取$10的回报，即以$30买入股票并以$40卖出股票。以下程序展示了看涨期权的回报函数：
- en: '[PRE12]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Applying the `payoff` function is straightforward:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 应用`payoff`函数是直接的：
- en: '[PRE13]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The first input variable, stock price at the maturity *T*, could be an array
    as well:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个输入变量，即到期时的股票价格*T*，也可以是一个数组：
- en: '[PRE14]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'To create a graphic presentation, we have the following codes:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 为了创建图形化展示，我们有以下代码：
- en: '[PRE15]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The graph is shown here:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 这里显示了图形：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_01.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![看涨和看跌期权的回报和盈亏函数](img/B06175_10_01.jpg)'
- en: 'The payoff for a call option seller is the opposite of its buyer. It is important
    to remember that this is a zero-sum game: you win, I lose. For example, an investor
    sold three call options with an exercise price of $10\. When the stock price is
    $15 on the maturity, the option buyer''s payoff is $15, while the total loss to
    the option writer is $15 as well. If the call premium (option price) is c, the
    profit/loss function for a call option buyer is the difference between her payoff
    and her initial investment (c). Obviously, the timing of cash-flows of paying
    an option premium upfront and its payoff at maturity day is different. Here, we
    ignore the time value of money since maturities are usually quite short.'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 看涨期权卖方的回报与买方相反。需要记住的是，这是一个零和游戏：你赢了，我输了。例如，一位投资者以$10的行使价卖出三个看涨期权。当股价在到期时为$15时，期权买方的回报是$15，而期权卖方的总损失也是$15。如果看涨期权的溢价（期权价格）为c，则看涨期权买方的盈亏函数是其回报与初始投资（c）之间的差异。显然，期权溢价提前支付与到期日回报的现金流时间不同。在这里，我们忽略了货币的时间价值，因为到期通常相当短。
- en: 'For a call option buyer:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 对于看涨期权买方：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_33.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![看涨期权和看跌期权的盈亏函数](img/B06175_10_33.jpg)'
- en: 'For a call option seller:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 对于看涨期权卖方：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_34.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![看涨期权和看跌期权的盈亏函数](img/B06175_10_34.jpg)'
- en: 'The following graph shows the profit/loss functions for call option buyer and
    seller:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表展示了看涨期权买方和卖方的盈亏函数：
- en: '[PRE16]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'A graphical representation is shown here:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这里展示了一个图形表示：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_02.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![看涨期权和看跌期权的盈亏函数](img/B06175_10_02.jpg)'
- en: 'A put option gives its buyer a right to sell a security (commodity) to the
    put option buyer in the future at a predetermined price, *X*. Here is its payoff
    function:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 看跌期权赋予其买方在未来以预定价格 *X* 向看跌期权卖方出售证券（商品）的权利。其盈亏函数如下：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_35.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![看涨期权和看跌期权的盈亏函数](img/B06175_10_35.jpg)'
- en: 'Here, *ST* is the stock price at maturity and *X* is the exercise price (strike
    price). For a put option buyer, the profit/loss function is given here:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*ST* 是到期时的股票价格，*X* 是行使价格（执行价格）。对于看跌期权买方，盈亏函数如下：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_87.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![看涨期权和看跌期权的盈亏函数](img/B06175_10_87.jpg)'
- en: 'The profit/loss function for a put option seller is just the opposite:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 卖出看跌期权的盈亏函数正好相反：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_88.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![看涨期权和看跌期权的盈亏函数](img/B06175_10_88.jpg)'
- en: 'The related program and graph for the profit and loss functions for a put option
    buyer and a seller are shown here:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是看跌期权买方和卖方盈亏函数的相关程序和图形：
- en: '[PRE17]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The graph is shown here:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 该图形如下：
- en: '![Payoff and profit/loss functions for call and put options](img/B06175_10_03.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![看涨期权和看跌期权的盈亏函数](img/B06175_10_03.jpg)'
- en: European versus American options
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 欧洲期权与美国期权
- en: 'A European option can be exercised only on maturity day, while an American
    option can be exercised any time before or on its maturity day. Since an American
    option could be held until it matures, its price (option premium) should be higher
    than or equal to its European counterpart:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 欧洲期权只能在到期日行使，而美国期权可以在到期日前或到期日当天任何时间行使。由于美国期权可以持有至到期，其价格（期权溢价）应该高于或等于相应的欧洲期权价格：
- en: '![European versus American options](img/B06175_10_38.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![欧洲期权与美国期权对比](img/B06175_10_38.jpg)'
- en: An import difference is that for a European option, we have a close form solution,
    that is, the Black-Scholes-Merton option model. However, we don't have a close-form
    solution for an American option. Fortunately, we have several ways to price an
    American option. Later in the chapter, we show how to use the Binomial-tree method,
    also called the CRR method, to price an American option.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 一个重要的区别是，对于欧洲期权，我们有一个封闭解，即布莱克-斯科尔斯-梅顿期权模型。然而，对于美国期权，我们没有封闭解。幸运的是，我们有几种方法可以定价美国期权。后续章节中，我们将展示如何使用二叉树方法，也称为CRR方法，来定价美国期权。
- en: Understanding cash flows, types of options, rights and obligations
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 理解现金流、期权类型、权利和义务
- en: 'We know that for each business contract, we have two sides: buyer versus seller.
    This is true for an option contract as well. A call buyer will pay upfront (cash
    output) to acquire a right. Since this is a zero-sum game, a call option seller
    would enjoy an upfront cash inflow and assumes an obligation.'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道，对于每个商业合同，我们有买方和卖方两个方面。期权合同也是如此。看涨期权买方将预付现金（现金流出）以获得一个权利。由于这是一个零和博弈，看涨期权卖方将享有预付现金流入，并承担相应的义务。
- en: 'The following table presents those positions (buyer or seller), directions
    of the initial cash flows (inflow or outflow), the option buyer''s rights (buy
    or sell) and the option seller''s obligations (that is, to satisfy the option
    seller''s desires):'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 下表列出了这些头寸（买方或卖方）、初始现金流的方向（流入或流出）、期权买方的权利（买或卖）以及期权卖方的义务（即满足期权卖方的需求）：
- en: '|   | Buyer(long position) | Seller(short position) | EuropeanOptions | AmericanOptions
    |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '|   | 买方（多头头寸） | 卖方（空头头寸） | 欧洲期权 | 美国期权 |'
- en: '| Call | A right to buy a security (commodity) at a pre-fixed price | An obligation
    to sell a security (commodity) at a pre-fixed price | Can be exercised on maturity
    day only | Can beexercised any time before or on maturity day |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 看涨期权 | 以预定价格购买证券（商品）的权利 | 以预定价格出售证券（商品）的义务 | 只能在到期日行使 | 可以在到期日前或到期日当天任何时间行使
    |'
- en: '| Put | A right to sell a security with a pre-fixed price | An obligation to
    buy |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 看跌期权 | 在预定价格下出售证券的权利 | 购买的义务 |'
- en: '| CashFlow | Upfront cash outflow | Upfront cash inflow |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| 现金流 | 前期现金流出 | 前期现金流入 |'
- en: Table 10.1 Long, short positions, initial cash flows, and right versus obligation
  id: totrans-110
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 表 10.1 多头、空头头寸，初始现金流，以及权利与义务
- en: Black-Scholes-Merton option model on non-dividend paying stocks
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 非分红股票的 Black-Scholes-Merton 期权模型
- en: 'The **Black-Scholes-Merton option** model is a closed-form solution to price
    a European option on a stock which does not pay any dividends before its maturity
    date. If we use ![Black-Scholes-Merton option model on non-dividend paying stocks](img/B06175_10_54.jpg)
    or the price today, X for the exercise price, *r* for the continuously compounded
    risk-free rate, T for the maturity in years, ![Black-Scholes-Merton option model
    on non-dividend paying stocks](img/B06175_10_55.jpg) for the volatility of the
    stock, the closed-form formulae for a European call (c) and put (p) are:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '**Black-Scholes-Merton 期权**模型是一个封闭式解，用于为一个没有分红支付的股票定价欧式期权。如果我们使用 ![非分红股票的 Black-Scholes-Merton
    期权模型](img/B06175_10_54.jpg) 或今天的价格，X 为执行价格，*r* 为连续复利的无风险利率，T 为到期年数，![非分红股票的 Black-Scholes-Merton
    期权模型](img/B06175_10_55.jpg) 为股票的波动率，则欧式看涨期权 (c) 和看跌期权 (p) 的封闭式公式为：'
- en: '![Black-Scholes-Merton option model on non-dividend paying stocks](img/B06175_10_39.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![非分红股票的 Black-Scholes-Merton 期权模型](img/B06175_10_39.jpg)'
- en: 'Here, `N()` is the cumulative standard normal distribution. The following Python
    codes represent the preceding equations to evaluate a European call:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，`N()` 是累积分布标准正态分布。以下 Python 代码表示前述方程，用于评估一个欧式看涨期权：
- en: '[PRE18]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'In the preceding program, the `stats.norm.cdf()` is the cumulative normal distribution,
    that is, `N()` in the Black-Scholes-Merton option model. The current stock price
    is $40, the strike price is $42, the time to maturity is six months, the risk-free
    rate is 1.5% compounded continuously, and the volatility of the underlying stock
    is 20% (compounded continuously). Based on the preceding codes, the European call
    is worth $1.56:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的程序中，`stats.norm.cdf()` 是累积正态分布，也就是 Black-Scholes-Merton 期权模型中的 `N()`。当前股票价格为
    40 美元，行使价格为 42 美元，到期时间为六个月，无风险利率为 1.5%（连续复利），基础股票的波动率为 20%（连续复利）。基于前述代码，欧式看涨期权的价值为
    1.56 美元：
- en: '[PRE19]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Generating our own module p4f
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 生成我们自己的模块 p4f
- en: 'We could combine many small Python progams as one program, such as `p4f.py`.
    For instance, the preceding Python program called `bs_call()` function is included.
    Such a collection of programs offers several benefits. First, when we use the
    `bs_call()` function, we don''t have to type those five lines. To save space,
    we only show a few functions included in `p4f.py`. For brevity, we remove all
    comments included for each function. Those comments are designed to help future
    users when issuing the `help()` function, such as `help(bs_call())`:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以将许多小的 Python 程序组合成一个程序，例如 `p4f.py`。例如，前面的 Python 程序中包含的 `bs_call()` 函数。这样的一组程序提供了多个好处。首先，当我们使用
    `bs_call()` 函数时，不需要重新输入那五行代码。为了节省空间，我们仅展示了 `p4f.py` 中包含的几个函数。为了简洁起见，我们去除了每个函数中的所有注释。这些注释是为了帮助未来的用户在调用
    `help()` 函数时，例如 `help(bs_call())`：
- en: '[PRE20]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'To apply the Black-Scholes-Merton call option model, we simply use the following
    codes:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要应用 Black-Scholes-Merton 看涨期权模型，我们只需使用以下代码：
- en: '[PRE21]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The second advantage is to save space and make our programming simpler. Later
    in the chapter, this point will become clearer when we use a function called `binomial_grid()`.
    From now onward, when a function is discussed the first time, we will offer the
    complete codes. However, when the program is used again and the program is quite
    complex, we will call it indirectly via `p4f`. To find out our working directory,
    use the following codes:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个优点是节省空间并使编程更加简洁。在本章后续内容中，当我们使用一个名为 `binomial_grid()` 的函数时，这一点将变得更加明确。从现在开始，每当首次讨论某个函数时，我们会提供完整的代码。然而，当该程序再次使用且程序比较复杂时，我们会通过
    `p4f` 间接调用它。要查找我们的工作目录，使用以下代码：
- en: '[PRE22]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: European options with known dividends
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 具有已知股息的欧式期权
- en: 'Assume that we have a known dividend *d1* distributed at time T1, T1<T, where
    T is our maturity date. We can modify the original Black-Scholes-Merton option
    model by replacing *S0* with *S*, where ![European options with known dividends](img/B06175_10_57.jpg):'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们知道在时间 T1（T1 < T）时分发的股息 *d1*，其中 T 为到期日。我们可以通过将 *S0* 替换为 *S* 来修改原始的 Black-Scholes-Merton
    期权模型，其中 ![具有已知股息的欧式期权](img/B06175_10_57.jpg)：
- en: '![European options with known dividends](img/B06175_10_40.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![具有已知股息的欧式期权](img/B06175_10_40.jpg)'
- en: In the preceding example, if we have a known dividend of $1.5 delivered in one
    month, what is the price of the call?
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的例子中，如果我们有已知的$1.5股息将在一个月内支付，那么认购期权的价格是多少？
- en: '[PRE23]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: The first line of the program imports the module called `p4f` which contains
    the call option model. The result shows that the price of the call is $1.18, which
    is lower than the previous value ($1.56). It is understandable since the price
    of the underlying stock would drop roughly by $1.5 in one month. Because of this,
    the chance that we could exercise our call option will be smaller, that is, less
    likely to go beyond $42\. The preceding argument is true for multiple known dividends
    distributed before T, that is, ![European options with known dividends](img/B06175_10_85.jpg).
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 程序的第一行导入了名为`p4f`的模块，该模块包含了认购期权模型。结果显示，认购期权的价格为$1.18，低于之前的值（$1.56）。这是可以理解的，因为标的股票在一个月内大约会下跌$1.5。由于这个原因，我们行使认购期权的机会会变小，也就是说，股票价格不太可能超过$42。前述论点适用于在T之前分配的已知股息，即![已知股息的欧式期权](img/B06175_10_85.jpg)。
- en: Various trading strategies
  id: totrans-131
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 各种交易策略
- en: 'In the following table, we summarize several commonly used trading strategies
    involving various types of options:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在下表中，我们总结了几种常用的期权交易策略：
- en: '| Names | Description | Direction of initial cash-flow | Expectation of future
    price movement |'
  id: totrans-133
  prefs: []
  type: TYPE_TB
  zh: '| 名称 | 描述 | 初始现金流方向 | 未来价格变动预期 |'
- en: '| --- | --- | --- | --- |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- |'
- en: '| Bull spread with calls | Buy a call (x1) sell a call (x2) [ x1< x2 ] | Outflow
    | Rise |'
  id: totrans-135
  prefs: []
  type: TYPE_TB
  zh: '| 看涨价差（认购期权） | 买入一个认购期权（x1），卖出一个认购期权（x2）[x1 < x2] | 支出 | 上涨 |'
- en: '| Bull spread with puts | Buy a put (x1), sell a put (x2) [ x1< x2 ] | Inflow
    | Rise |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '| 看涨价差（看跌期权） | 买入一个看跌期权（x1），卖出一个看跌期权（x2）[x1 < x2] | 进账 | 上涨 |'
- en: '| Bear spread with puts | Buy a put (x2), sell a put (x1) [ x1 < x2 ] | Outflow
    | Fall |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '| 熊市价差（看跌期权） | 买入一个看跌期权（x2），卖出一个看跌期权（x1）[x1 < x2] | 支出 | 下跌 |'
- en: '| Bear spread with calls | Buy a call (x2), sell a call (x1) [x1 < x2 ] | Inflow
    | Fall |'
  id: totrans-138
  prefs: []
  type: TYPE_TB
  zh: '| 看跌价差（认购期权） | 买入一个认购期权（x2），卖出一个认购期权（x1）[x1 < x2] | 进账 | 下跌 |'
- en: '| Straddle | Buy a call & sell a put with the same x | Outflow | Rise or fall
    |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| 交易策略 | 买入认购期权并卖出看跌期权（相同执行价格） | 支出 | 上涨或下跌 |'
- en: '| Strip | Buy two puts and a call (with the same x) | Outflow | Prob (fall)
    > prob (rise) |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| 条带策略 | 买入两个看跌期权和一个认购期权（相同的执行价格） | 支出 | 下跌的概率 > 上涨的概率 |'
- en: '| Strap | Buy two calls and one put (with the same x) | Outflow | Prob (rise)>
    prob(fall) |'
  id: totrans-141
  prefs: []
  type: TYPE_TB
  zh: '| 踏带策略 | 买入两个认购期权和一个看跌期权（相同的执行价格） | 支出 | 上涨的概率 > 下跌的概率 |'
- en: '| Strangle | Buy a call (x2) and buy a put (x1) [x1 < x2 ] | Outflow | Rise
    or fall |'
  id: totrans-142
  prefs: []
  type: TYPE_TB
  zh: '| 脱口而出策略 | 买入一个认购期权（x2）并买入一个看跌期权（x1）[x1 < x2] | 支出 | 上涨或下跌 |'
- en: '| Butterfly with calls | Buy two calls (x1,x3) and sell two calls (x2) [x2=(x1+x3)/2]
    | Outflow | Stay around x2 |'
  id: totrans-143
  prefs: []
  type: TYPE_TB
  zh: '| 蝴蝶策略（认购期权） | 买入两个认购期权（x1, x3），卖出两个认购期权（x2）[x2=(x1+x3)/2] | 支出 | 保持在x2附近 |'
- en: '| Butterfly with puts | Buy two puts (x1,x3) and sell two puts (x2) [x2=(x1+x3)/2]
    |   | Stay around x2 |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '| 蝴蝶策略（看跌期权） | 买入两个看跌期权（x1, x3），卖出两个看跌期权（x2）[x2=(x1+x3)/2] |   | 保持在x2附近 |'
- en: '| Calendar spread | Sell a call (T1) and buy a call (T2) with the same strike
    price and T1<T2 | Outflow |   |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '| 日历价差 | 卖出一个认购期权（T1），买入一个认购期权（T2），具有相同的执行价格，且T1<T2 | 支出 |   |'
- en: Table 10.2 Various trading strategies
  id: totrans-146
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 表10.2 各种交易策略
- en: Covered-call – long a stock and short a call
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 覆盖认购期权 – 持有股票并卖出认购期权
- en: 'Assume that we purchase 100 shares of stock A, with a price of $10 each. Thus,
    the total cost is $1,000\. If at the same time we write a call contract, one contract
    is worth 100 shares, at a price of $20\. Thus, our total cost will be reduced
    by $20\. Assume further that the exercise price is $12\. The graphic presentation
    of our profit and loss function is given here:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们购买了100股A股票，每股价格为$10。那么，总成本为$1,000。如果我们同时写出一个认购期权合同，一个合同对应100股，价格为$20。那么，我们的总成本将减少$20。再假设行权价格为$12。以下是我们盈亏函数的图示：
- en: '[PRE24]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'The related graph showing the positions of a stock only, call, and covered-call
    is given here. Obviously, when the stock price is under $17 (15 +2), the covered-call
    is better than long a share:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 这里给出了一个图示，展示了仅持有股票、认购期权和覆盖认购期权的位置。显然，当股票价格低于$17（15 + 2）时，覆盖认购期权优于单纯持有股票：
- en: '![Covered-call – long a stock and short a call](img/B06175_10_04.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![覆盖认购期权 – 持有股票并卖出认购期权](img/B06175_10_04.jpg)'
- en: Straddle – buy a call and a put with the same exercise prices
  id: totrans-152
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 跨式策略 – 买入认购期权和看跌期权，且行权价格相同
- en: 'Let''s look at the simplest scenario. A firm faces an uncertain event next
    month. The issue is that we are not sure about its direction, that is, a good
    event or bad one. To take advantage of such an opportunity, we could u a call
    and buy a put with the same exercise prices. This means that we will benefit either
    way: the stock moves up or down. Assume further that the exercise price is $30\.
    The payoff of such a strategy is given here:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我们来看最简单的情形。一家公司面临下个月的不确定事件，问题在于我们不确定事件的方向，是好事还是坏事。为了利用这样的机会，我们可以同时购买看涨期权和看跌期权，且它们的行使价格相同。这意味着无论股票是上涨还是下跌，我们都将受益。进一步假设行使价格为
    $30。此策略的收益如下所示：
- en: '[PRE25]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '![Straddle – buy a call and a put with the same exercise prices](img/B06175_10_05.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![Straddle – 购买具有相同行使价格的看涨期权和看跌期权](img/B06175_10_05.jpg)'
- en: The preceding graph shows whichever way the stock goes, we would profit. Could
    we lose? Obviously, when the stock does not change much, our expectation fails
    to materialize.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 上图显示了无论股票如何波动，我们都会获利。我们会亏损吗？显然，当股票变化不大时，我们的预期未能实现。
- en: Butterfly with calls
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用看涨期权的蝶式交易
- en: 'When buying two calls with the exercises price of `x1` and `x3` and selling
    two calls with the exercise price of `x2`, where *x2=(x1+x2)/2*, with the same
    maturity for the same stock, we call it a butterfly. Its profit-loss function
    is shown here:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 当购买两个行使价格为 `x1` 和 `x3` 的看涨期权，并卖出两个行使价格为 `x2` 的看涨期权时，其中 *x2=(x1+x2)/2*，且期权到期日相同，标的股票也相同，我们称之为蝶式交易。其盈亏函数如下所示：
- en: '[PRE26]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The related graph is shown here:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 相关图表如下所示：
- en: '![Butterfly with calls](img/B06175_10_06.jpg)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![使用看涨期权的蝶式交易](img/B06175_10_06.jpg)'
- en: The relationship between input values and option values
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 输入值与期权值之间的关系
- en: 'When the volatility of an underlying stock increases, both its call and put
    values increase. The logic is that when a stock becomes more volatile, we have
    a better chance to observe extreme values, that is, we have a better chance to
    exercise our option. The following Python program shows this relationship:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 当标的股票的波动性增加时，其看涨期权和看跌期权的价值都会增加。其逻辑是，当股票变得更具波动性时，我们有更好的机会观察到极端值，也就是说，我们有更大的机会行使我们的期权。以下
    Python 程序展示了这一关系：
- en: '[PRE27]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The corresponding graph is shown here:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 相应的图表如下所示：
- en: '![The relationship between input values and option values](img/B06175_10_07.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![输入值与期权值之间的关系](img/B06175_10_07.jpg)'
- en: Greeks
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 希腊字母
- en: 'Delta ![Greeks](img/B06175_10_58.jpg) is defined as the derivative of the option
    to its underlying security price. The delta of a call is defined here:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: Delta ![Greeks](img/B06175_10_58.jpg) 定义为期权对其标的证券价格的导数。看涨期权的 delta 定义如下：
- en: '![Greeks](img/B06175_10_41.jpg)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![Greeks](img/B06175_10_41.jpg)'
- en: 'The delta of a European call on a non-dividend-paying stock is defined as:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 欧式看涨期权在没有分红的股票上的 delta 定义为：
- en: '![Greeks](img/B06175_10_42.jpg)'
  id: totrans-171
  prefs: []
  type: TYPE_IMG
  zh: '![Greeks](img/B06175_10_42.jpg)'
- en: 'The program of `delta_call()` is quite simple. Since it is included in the
    `p4f.py`, we could call it easily:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '`delta_call()` 的程序非常简单。由于它包含在 `p4f.py` 中，我们可以轻松地调用它：'
- en: '[PRE28]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The delta for a European put on a non-dividend-paying stock is:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 欧式看跌期权在无分红的股票上的 delta 为：
- en: '![Greeks](img/B06175_10_43.jpg)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![Greeks](img/B06175_10_43.jpg)'
- en: '[PRE29]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Gamma is the rate of change of delta with respect to price, as shown in this
    formula:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: Gamma 是 delta 对价格的变化率，如下公式所示：
- en: '![Greeks](img/B06175_10_44.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_IMG
  zh: '![Greeks](img/B06175_10_44.jpg)'
- en: 'For a European call (or put), its gamma is shown here, where ![Greeks](img/B06175_10_59.jpg):'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 对于欧式看涨期权（或看跌期权），其 gamma 如下所示，其中 ![Greeks](img/B06175_10_59.jpg)：
- en: '![Greeks](img/B06175_10_45.jpg)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![Greeks](img/B06175_10_45.jpg)'
- en: 'The mathematical definitions of Greek letters for a European call and put are
    given in the following table:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 欧式看涨期权和看跌期权的希腊字母的数学定义如下表所示：
- en: '![Greeks](img/B06175_10_89.jpg)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![Greeks](img/B06175_10_89.jpg)'
- en: Table 10.1 Mathematical definitions of Greek letters
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 表 10.1 希腊字母的数学定义
- en: Note that in the table, ![Greeks](img/B06175_10_68.jpg)
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，在表格中，![Greeks](img/B06175_10_68.jpg)
- en: 'Obviously, very few people can remember these formulae. Here is a very simple
    approach, based on their definition:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，很少有人能记住这些公式。这里有一个非常简单的方法，基于它们的定义：
- en: '![Greeks](img/B06175_10_86.jpg)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![Greeks](img/B06175_10_86.jpg)'
- en: Table 10.2 A simple approach to estimating Greek letters
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 表 10.2 估算希腊字母的简单方法
- en: How to remember?
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 如何记住？
- en: '**Delta**: First order derivative'
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Delta**：一阶导数'
- en: '**Gamma**: Second order derivative'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Gamma**：二阶导数'
- en: '**Theta**: Time (T)'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Theta**：时间（T）'
- en: '**Vega**: Volatility (V)'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Vega**：波动性（V）'
- en: '**Rho**: Rate (R)'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Rho**：利率（R）'
- en: 'For example, based on delta''s definition, we know that it is the ratio of
    `c2 - c1` and `s2 - s1`. Thus, we could generate a small number to generate those
    two pairs; see the following codes:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，根据delta的定义，我们知道它是`c2 - c1`和`s2 - s1`的比率。因此，我们可以生成一个小的数值来生成这两个对；见以下代码：
- en: '[PRE30]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Based on the last two values, the difference is quite small. We could apply
    this method to other Greek letters, see one end of chapter problems.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 根据最后两个值，差异非常小。我们可以将此方法应用于其他希腊字母，参见章节末尾的问题。
- en: Put-call parity and its graphic presentation
  id: totrans-197
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 看跌-看涨平价及其图示
- en: 'Let''s look at a call with an exercise price of $20, a maturity of three months
    and a risk-free rate of 5%. The present value of this future $20 is given here:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一个行使价格为$20，期限为三个月，风险自由利率为5%的看涨期权。这个未来$20的现值如下面所示：
- en: '[PRE31]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'In three months, what will be the wealth of our portfolio which consists of
    a call on the same stock plus $19.75 cash today? If the stock price is below $20,
    we don''t exercise the call and keep the cash. If the stock price is above $20,
    we use our cash of $20 to exercise our call option to own the stock. Thus, our
    portfolio value will be the maximum of those two values: stock price in three
    months or $20, that is, *max(s,20)*.'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在三个月后，由一个看涨期权和今天$19.75现金组成的投资组合的财富将是多少？如果股票价格低于$20，我们不会行使看涨期权，而是保留现金。如果股票价格高于$20，我们用$20现金行使看涨期权以拥有股票。因此，我们的投资组合价值将是这两者中的最大值：三个月后的股票价格或$20，即*max(s,20)*。
- en: 'On the other hand, how about a portfolio with a stock plus a put option with
    an exercise price of $20? If the stock price falls by $20, we exercise the put
    option and get $20\. If the stock price is above $20, we simply keep the stock.
    Thus, our portfolio value will be the maximum of those two values: stock price
    in three months or $20, that is, *max(s,20)*.'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，假设有一个由股票和一个行使价格为$20的看跌期权组成的投资组合。如果股票价格下跌$20，我们行使看跌期权并获得$20。如果股票价格高于$20，我们就直接持有股票。因此，我们的投资组合价值将是这两者中的最大值：三个月后的股票价格或$20，即*max(s,20)*。
- en: 'Thus, for both portfolios we have the same terminal wealth of *max(s,20)*.
    Based on the no-arbitrage principle, the present values of those two portfolios
    should be equal. We call this put-call parity:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，对于这两个投资组合，我们都有相同的最终财富*max(s,20)*。根据无套利原理，这两个投资组合的现值应该相等。我们称之为看跌-看涨平价：
- en: '![Put-call parity and its graphic presentation](img/B06175_10_46.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![看跌-看涨平价及其图示](img/B06175_10_46.jpg)'
- en: 'When the stock has known dividend payments before its maturity date, we have
    the following equality:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 当股票在到期日之前有已知的股息支付时，我们有以下等式：
- en: '![Put-call parity and its graphic presentation](img/B06175_10_47.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![看跌-看涨平价及其图示](img/B06175_10_47.jpg)'
- en: 'Here, *D* is the present value of all dividends before their maturity date
    (*T*). The following Python program offers a graphic presentation of the put-call
    parity:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*D*是所有股息支付在其到期日之前的现值（*T*）。以下Python程序提供了看跌-看涨平价的图示：
- en: '[PRE32]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'The output is shown here:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下：
- en: '![Put-call parity and its graphic presentation](img/B06175_10_08.jpg)'
  id: totrans-209
  prefs: []
  type: TYPE_IMG
  zh: '![看跌-看涨平价及其图示](img/B06175_10_08.jpg)'
- en: The put-call ratio represents the perception of investors jointly towards the
    future. If there is no obvious trend, that is, we expect a normal future, then
    the put-call ratio should be close to one. On the other hand, if we expect a much
    brighter future, the ratio should be lower than one.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 看跌-看涨比率代表了投资者对未来的共同预期。如果没有明显的趋势，也就是说，我们预期未来是正常的，那么看跌-看涨比率应该接近1。另一方面，如果我们预期未来会更加光明，那么比率应该低于1。
- en: The following code shows a ratio of this type over the years. First, we have
    to download the data from CBOE.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码显示了这种类型的比率在多年的变化。首先，我们必须从CBOE下载数据。
- en: 'Perform the following steps:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: Go to [http://www.cboe.com/](http://www.cboe.com/).
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问[http://www.cboe.com/](http://www.cboe.com/)。
- en: Click on **Quotes & Data** in the menu bar.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击菜单栏中的**报价与数据**。
- en: Find `put call ratio`, that is, [http://www.cboe.com/data/putcallratio.aspx](http://www.cboe.com/data/putcallratio.aspx).
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查找`put call ratio`，即，[http://www.cboe.com/data/putcallratio.aspx](http://www.cboe.com/data/putcallratio.aspx)。
- en: Click on **CBOE Total Exchange Volume and Put/Call Ratios (11-01-2006 to present)**
    under **Current**.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**当前**下的**CBOE总交易量和看涨/看跌比率（2006年11月1日至今）**。
- en: Note
  id: totrans-217
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For the data, readers can download it at [http://canisius.edu/~yany/data/totalpc.csv](http://canisius.edu/~yany/data/totalpc.csv).
  id: totrans-218
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 对于数据，读者可以在[http://canisius.edu/~yany/data/totalpc.csv](http://canisius.edu/~yany/data/totalpc.csv)下载。
- en: 'The following codes shows the trends of a call-put ratio:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码显示了看跌-看涨比率的趋势：
- en: '[PRE33]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'The related graph is shown here:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 相关图表如下所示：
- en: '![Put-call parity and its graphic presentation](img/B06175_10_09.jpg)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![看涨看跌期权平价及其图形展示](img/B06175_10_09.jpg)'
- en: The put-call ratio for a short period with a trend
  id: totrans-223
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 带趋势的短期看跌期权与看涨期权比率
- en: 'Based on the preceding program, we could choose a shorter period with a trend,
    as shown in the following code:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 基于前面的程序，我们可以选择一个带趋势的较短时期，如以下代码所示：
- en: '[PRE34]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'The corresponding graph is shown here:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 相应的图表如下所示：
- en: '![The put-call ratio for a short period with a trend](img/B06175_10_10.jpg)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![带趋势的短期看跌期权与看涨期权比率](img/B06175_10_10.jpg)'
- en: Binomial tree and its graphic presentation
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 二项树及其图形展示
- en: 'The binomial tree method was proposed by Cox, Ross, and Robinstein in 1979\.
    Because of this, it is also called the CRR method. Based on the CRR method, we
    have the following two-step approach. First, we draw a tree, such as the following
    one-step tree. Assume that our current stock value is S. Then, there are two outcomes
    of `Su` and `Sd`, where *u>1* and *d<1*, see the following code:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 二项树方法是由Cox、Ross和Robinstein于1979年提出的。因此，它也被称为CRR方法。基于CRR方法，我们有以下两步方法。首先，我们绘制一棵树，例如以下的一步树。假设我们当前的股票价值是S。那么，结果有两个，`Su`和`Sd`，其中*u>1*且*d<1*，请参见以下代码：
- en: '[PRE35]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The graph is shown here:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 图表如下所示：
- en: '![Binomial tree and its graphic presentation](img/B06175_10_11.jpg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![二项树及其图形展示](img/B06175_10_11.jpg)'
- en: 'Obviously, the simplest tree is a one-step tree. Assume that today''s price
    is $10, the exercise price is $11, and a call option will mature in six months.
    In addition, assume that we know that the price will have two outcomes: moving
    up (*u=1.15*) or moving down (d=0.9). In other words, the final values are either
    $11 or $9\. Based on such information, we have the following graph showing the
    prices for such a one-step binomial tree:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，最简单的树是一棵一步树。假设今天的价格为10美元，行权价为11美元，且一个看涨期权将在六个月后到期。此外，假设我们知道价格将有两个结果：上涨(*u=1.15*)或下跌(d=0.9)。换句话说，最终的价格要么是11美元，要么是9美元。基于这些信息，我们有以下图表，展示了这种一步二项树的价格：
- en: '![Binomial tree and its graphic presentation](img/B06175_10_12.jpg)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![二项树及其图形展示](img/B06175_10_12.jpg)'
- en: The codes to generate the preceding graph are shown here.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 生成前面图表的代码如下所示。
- en: 'The codes are based on the codes at [https://pypi.python.org/pypi/PyFi](https://pypi.python.org/pypi/PyFi):'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 这些代码基于[https://pypi.python.org/pypi/PyFi](https://pypi.python.org/pypi/PyFi)的代码：
- en: '[PRE36]'
  id: totrans-237
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: In the preceding program, we generate a function called `binomial_grid()` since
    we will call this function many times later in the chapter. Since we know beforehand
    that we will have two outcomes, we can choose an appropriate combination of stock
    and call options to make our final outcome with certainty, that is, the same terminal
    values. Assume that we choose an appropriate delta shares of underlying security
    plus one call to have the same terminal value at the end of one period, that is,
    ![Binomial tree and its graphic presentation](img/B06175_10_74.jpg).
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的程序中，我们生成了一个名为`binomial_grid()`的函数，因为我们将在本章后面多次调用此函数。由于我们事先知道会有两个结果，因此我们可以选择一个合适的股票和看涨期权组合，以确保我们的最终结果是确定的，即相同的终端值。假设我们选择合适的delta份额的基础证券，并加上一份看涨期权，以确保在一个时期结束时具有相同的终端值，即！[二项树及其图形展示](img/B06175_10_74.jpg)。
- en: 'Thus, ![Binomial tree and its graphic presentation](img/B06175_10_75.jpg) .
    This means that if we long *0.4* shares and short one call option, our final wealth
    will be the same, *0.4*11.5-1 =3.6* when stock moves up or *0.4*9=3.6* when the
    stock moves down. Assume further that if the continuously compounded risk-free
    is 0.12%, then the value of today''s portfolio will be equivalent to the discounted
    future certain value of *4.5*, that is, *0.4*10 – c=pv(3.6)*. That is, ![Binomial
    tree and its graphic presentation](img/B06175_10_76.jpg). If using Python, we
    have the following result:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，![二项树及其图形展示](img/B06175_10_75.jpg)。这意味着，如果我们持有*0.4*股并卖空一份看涨期权，那么当股票上涨时，我们的最终财富将相同，即*0.4*11.5-1
    =3.6*；而当股票下跌时，则为*0.4*9=3.6*。进一步假设，如果持续复利的无风险利率为0.12%，则今天的投资组合的价值将相当于未来确定值的折现值，即*0.4*10
    – c=pv(3.6)*。也就是说，![二项树及其图形展示](img/B06175_10_76.jpg)。如果使用Python，我们将得到以下结果：
- en: '[PRE37]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'For a two-step binomial tree, we have the following codes:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 对于二步二项树，我们有以下代码：
- en: '[PRE38]'
  id: totrans-242
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Based on the CRR method, we have the following procedure:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 基于CRR方法，我们有以下程序：
- en: Draw a *n*-step tree.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制一个*n*步树。
- en: At the end of *n*-step, estimate terminal prices.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在*n*步结束时，估算终端价格。
- en: Calculate the option value at each node based on the terminal price, exercise,
    call or put.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据终端价格、行权、看涨或看跌期权，在每个节点计算期权值。
- en: Discount it back one step, that is, from nth to nth-1, according to the risk-neutral
    probability.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照风险中性概率将其向后折现一步，即从第n步到第n-1步。
- en: Repeat the previous step until we find the final value at step 0\. The formulas
    for *u*, *d*, *p* are given here:![Binomial tree and its graphic presentation](img/B06175_10_48.jpg)
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复前一步骤，直到找到第0步的最终值。*u*、*d*、*p*的公式如下所示：![二项树及其图示](img/B06175_10_48.jpg)
- en: 'Here, *u* is the up movement, *d* is the down movement, ![Binomial tree and
    its graphic presentation](img/B06175_10_77.jpg) is the volatility of the underlying
    security, r is the risk-free rate, ![Binomial tree and its graphic presentation](img/B06175_10_78.jpg)
    is the step, that is, ![Binomial tree and its graphic presentation](img/B06175_10_79.jpg),
    *T* is the maturity in years, *n* is the number of steps, *q* is the dividend
    yield, and p is the risk-neutral probability of an up movement. The `binomial_grid()`
    function is based on the functions shown under the one-step binomial tree graphic
    presentation. Again, as we mentioned before, this function is included in the
    grand master file called `p4fy.py`. The output graph is shown here. One obvious
    result is that the preceding Python program is very simple and straight forward.
    Here, let us use a two-step binomial tree to explain the whole process. Assume
    that the current stock price is $10, the exercise price is $10, the maturity is
    three months, the number of steps is two, the risk-free rate is 2%, and the volatility
    of the underlying security is 0.2\. The following Python codes would generate
    a two-step tree:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*u*是向上波动，*d*是向下波动，![二项树及其图示](img/B06175_10_77.jpg)是标的证券的波动率，r是无风险利率，![二项树及其图示](img/B06175_10_78.jpg)是步长，即![二项树及其图示](img/B06175_10_79.jpg)，*T*是到期时间（以年为单位），*n*是步数，*q*是股息收益率，p是向上波动的风险中性概率。`binomial_grid()`函数基于一步二项树图示中的函数。如前所述，该函数包含在名为`p4fy.py`的总主文件中。输出图形如下所示。一个明显的结果是，前面的Python程序非常简单且直接。接下来，我们使用一个两步二项树来解释整个过程。假设当前股票价格为10美元，行权价格为10美元，到期时间为三个月，步数为二，风险自由利率为2%，标的证券的波动率为0.2。以下Python代码将生成一个两步二项树：
- en: '[PRE39]'
  id: totrans-250
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'The tree is shown here:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 树形结构如下所示：
- en: '![Binomial tree and its graphic presentation](img/B06175_10_13.jpg)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![二项树及其图示](img/B06175_10_13.jpg)'
- en: 'Now, we use the risk-neutral probability to discount each value one step backward.
    The codes and the graph are given here:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们使用风险中性概率将每个值向后折现一步。代码和图形如下所示：
- en: '[PRE40]'
  id: totrans-254
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'The tree is shown here:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 树形结构如下所示：
- en: '![Binomial tree and its graphic presentation](img/B06175_10_14.jpg)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![二项树及其图示](img/B06175_10_14.jpg)'
- en: 'Here, we explain a few values shown in the preceding graph. At the highest
    node (**s*u*u**), since the terminal stock price is 11.52 and the exercise price
    is 10, the call value is 1.52 (11.52-10). Similarly, at node **s*u*d=s** the call
    value is 0 since 10-10=0\. For a call value of 0.8, we have the following verification:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，我们解释图中显示的一些值。在最高节点（**s*u*u**）处，由于终端股票价格为11.52，行权价格为10，故看涨期权的价值为1.52（11.52-10）。类似地，在节点**s*u*d=s**处，看涨期权的价值为0，因为10-10=0。对于看涨期权值为0.8，我们进行如下验证：
- en: '[PRE41]'
  id: totrans-258
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Binomial tree (CRR) method for European options
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 欧洲期权的二项树（CRR）方法
- en: 'The following codes are for the binomial-tree method to price a European option:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码是用于使用二项树法定价欧洲期权的：
- en: '[PRE42]'
  id: totrans-261
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: 'To apply the function, we give it a set of input values. For comparison, the
    result based on the *Black-Scholes-Merton option* model is shown here as well:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 为了应用这个函数，我们给它一组输入值。为了比较，基于*Black-Scholes-Merton期权*模型的结果也在这里显示：
- en: '[PRE43]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: Binomial tree (CRR) method for American options
  id: totrans-264
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 美国期权的二项树（CRR）方法
- en: 'Unlike the Black-Scholes-Merton option model, which can only be applied to
    European options, the binomial tree (CRR method) can be used to price American
    options. The only difference is that we have to consider the early exercise:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 与只能应用于欧洲期权的Black-Scholes-Merton期权模型不同，二项树（CRR方法）可以用来定价美国期权。唯一的区别是我们必须考虑提前行权：
- en: '[PRE44]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'The key difference between pricing an American call option and pricing a European
    is its early exercise opportunity. In the preceding program, the last several
    lines reflect this. For each node, we estimate two values: `v1` is for the discounted
    value and `v2` is the payoff from an early exercise. We choose a higher value,
    `max(v1, v2)`. If using the same set of values to apply this binomial tree to
    price an American call, we have the following value. It is understandable the
    final result is higher than a European call counterpart:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 定价美国看涨期权与定价欧洲看涨期权的关键区别在于其提前行权的机会。在前面的程序中，最后几行反映了这一点。对于每个节点，我们估算两个值：`v1`是折现后的值，`v2`是提前行权的支付。如果使用相同的数值集来应用此二项树定价美国看涨期权，我们会得到以下值。可以理解，最终结果会高于欧洲看涨期权的对应值：
- en: '[PRE45]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: Hedging strategies
  id: totrans-269
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 对冲策略
- en: 'After selling a European call, we could hold ![Hedging strategies](img/B06175_10_80.jpg)
    shares of the same stock to hedge our position. This is named a delta hedge. Since
    the delta ![Hedging strategies](img/B06175_10_81.jpg) is a function of the underlying
    stock (S), to maintain an effective hedge we have to rebalance our holding constantly.
    This is called dynamic hedging. The delta of a portfolio is the weighted deltas
    of individual securities in the portfolio. Note that when we short a security,
    its weight will be negative:'
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 在卖出欧洲看涨期权后，我们可以持有![对冲策略](img/B06175_10_80.jpg)同一只股票的股份来对冲我们的仓位。这被称为 delta 对冲。由于
    delta![对冲策略](img/B06175_10_81.jpg)是标的股票（S）的一个函数，为了保持有效的对冲，我们必须不断地重新平衡我们的持仓。这就是动态对冲。一个投资组合的
    delta 是该投资组合中各个证券的加权 delta。需要注意的是，当我们做空某个证券时，其权重将为负值：
- en: '![Hedging strategies](img/B06175_10_49.jpg)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![对冲策略](img/B06175_10_49.jpg)'
- en: 'Assume that a US importer will pay £10 million in three months. He or she is
    concerned with a potential depreciation of the US dollar against the pound. There
    are several ways to hedge such a risk: buy pounds now, enter a futures contract
    to buy £10 million in three months with a fixed exchange rate, or buy call options
    with a fixed exchange rate as its exercise price. The first choice is costly since
    the importer does not need pounds today. Entering a future contract is risky as
    well since an appreciation of the US dollar would cost the importer extra money.
    On the other hand, entering a call option will guarantee a maximum exchange rate
    today. At the same time, if the pound depreciates, the importer will reap the
    benefits. Such activities are called hedging since we take the opposite position
    of our risks.'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 假设一个美国进口商将在三个月后支付 1000 万英镑。他或她担心美元对英镑的潜在贬值。有几种方法可以对冲这种风险：现在购买英镑，进入期货合约以固定汇率在三个月后购买
    1000 万英镑，或者购买以固定汇率为行权价格的看涨期权。第一种选择成本高，因为进口商今天并不需要英镑。进入期货合约也有风险，因为如果美元升值，进口商将面临额外的费用。另一方面，进入看涨期权将保证今天的最大汇率。同时，如果英镑贬值，进口商将获得收益。这种活动被称为对冲，因为我们采取了与我们的风险相反的立场。
- en: 'For the currency options, we have the following equations:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 对于货币期权，我们有以下方程：
- en: '![Hedging strategies](img/B06175_10_50.jpg)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![对冲策略](img/B06175_10_50.jpg)'
- en: Here, ![Hedging strategies](img/B06175_10_82.jpg) is the exchange rate in US
    dollars per foreign currency, ![Hedging strategies](img/B06175_10_83.jpg) is the
    domestic risk-free, rate and ![Hedging strategies](img/B06175_10_84.jpg) is the
    foreign country's risk-free rate.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，![对冲策略](img/B06175_10_82.jpg)是外币的美元汇率，![对冲策略](img/B06175_10_83.jpg)是国内无风险利率，![对冲策略](img/B06175_10_84.jpg)是外国的无风险利率。
- en: Implied volatility
  id: totrans-276
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 隐含波动率
- en: 'From the previous sections, we know that for a set of input variables—`S` (the
    present stock price), `X` (the exercise price), `T` (the maturity date in years),
    `r` (the continuously compounded risk-free rate), and `sigma` (the volatility
    of the stock, that is, the annualized standard deviation of its returns)—we could
    estimate the price of a call option based on the Black-Scholes-Merton option model.
    Recall that to price a European call option, we have the following Python code
    of five lines:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的部分我们知道，对于一组输入变量——`S`（当前股票价格）、`X`（行权价格）、`T`（到期日，单位为年）、`r`（连续复利的无风险利率）以及 `sigma`（股票的波动率，即其收益的年化标准差）——我们可以根据
    Black-Scholes-Merton 期权模型来估算看涨期权的价格。回想一下，为了定价欧洲看涨期权，我们有以下五行 Python 代码：
- en: '[PRE46]'
  id: totrans-278
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'After entering a set of five values, we can estimate the call price as follows:'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 在输入一组五个数值后，我们可以按照以下方式估算看涨期权的价格：
- en: '[PRE47]'
  id: totrans-280
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'On the other hand, if we know `S`, `X`, `T`, `r`, and `c`, how can we estimate
    sigma? Here, `sigma` is our implied volatility. In other words, if we are given
    a set values such as S=40, X=40, T=0.5, r=0.05, and c=3.30, we should find out
    the value of sigma, and it should be equal to 0.25\. In this chapter, we will
    learn how to estimate the implied volatility. Actually, the underlying logic to
    figure out the implied volatility is very simple: trial and error. Let''s use
    the previous example as an illustration. We have five values—*S=40*, *X=40*, *T=0.5*,
    *r=0.05*, and *c=3.30*. The basic design is that after inputting 100 different
    sigmas, plus the first four input values shown earlier, we have 100 call prices.
    The implied volatility is the sigma that achieves the smallest absolute difference
    between the estimated call price and 3.30\. Of course, we could increase the number
    of trials to achieve a higher precision, that is, more decimal places.'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，如果我们知道`S`、`X`、`T`、`r`和`c`，我们如何估算sigma呢？这里，`sigma`是我们的隐含波动率。换句话说，如果我们给定一组值，如S=40、X=40、T=0.5、r=0.05和c=3.30，我们应该找出sigma的值，并且它应该等于0.25。在本章中，我们将学习如何估算隐含波动率。实际上，计算隐含波动率的基本逻辑非常简单：试错法。让我们以之前的例子为例进行说明。我们有五个值——*S=40*、*X=40*、*T=0.5*、*r=0.05*和*c=3.30*。基本设计是，在输入100个不同的sigma值后，加上之前提到的四个输入值，我们将得到100个看涨期权价格。隐含波动率就是通过最小化估算的看涨期权价格与3.30之间的绝对差值来得到的sigma值。当然，我们可以增加试验的次数，以获得更高的精度，也就是更多的小数位。
- en: 'Alternatively, we could adopt another conversion criterion: we stop when the
    absolute difference between our estimated call price and the given call value
    is less than a critical value, such as 1 cent, that is, |c-3.30|<0.01\. Since
    it is not a good idea to randomly pick up 100 or 1,000 different sigmas, we systematically
    choose those values, that is, use a loop by selecting those sigmas systematically.
    Next, we will discuss two types of loops: a for loop and a while loop. Implied
    volatility function based on a European call. Ultimately, we could write a function
    to estimate the implied volatility based on a European call. To save space, we
    remove all comments and examples from the program as shown:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 另外，我们可以采用另一种转换标准：当估算的看涨期权价格与给定的看涨期权值之间的绝对差值小于某个临界值时停止，例如1美分，即|c-3.30|<0.01。由于随机选择100个或1,000个不同的sigma值并不是一个好主意，我们将系统地选择这些值，也就是通过循环来系统地选择这些sigma值。接下来，我们将讨论两种类型的循环：for循环和while循环。基于欧洲看涨期权的隐含波动率函数。最终，我们可以编写一个基于欧洲看涨期权的隐含波动率估算函数。为了节省空间，我们从程序中移除所有注释和示例，如下所示：
- en: '[PRE48]'
  id: totrans-283
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'With a set of input values, we could apply the previous program easily as follows:'
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 使用一组输入值，我们可以像下面这样轻松地应用之前的程序：
- en: '[PRE49]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'Similarly, we could estimate an implied volatility based on a European put
    option model. In the following program, we design a function named `implied_vol_put_min()`.
    There are several differences between this function and the previous one. First,
    the current function depends on a put option instead of a call. Thus, the last
    input value is a put premium instead of a call premium. Second, the conversion
    criterion is that an estimated price and the given put price have the smallest
    difference. In the previous function, the conversion criterion is when the absolute
    difference is less than 0.01\. In a sense, the current program will guarantee
    an implied volatility while the previous program does not guarantee an output:'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，我们可以基于欧洲看跌期权模型来估算隐含波动率。在以下程序中，我们设计了一个名为`implied_vol_put_min()`的函数。这个函数与之前的函数有几个区别。首先，当前的函数依赖于看跌期权，而不是看涨期权。因此，最后一个输入值是看跌期权的溢价，而不是看涨期权的溢价。其次，转换标准是估算的价格与给定的看跌期权价格之间的差值最小。在之前的函数中，转换标准是当绝对差值小于0.01时。在某种意义上，当前程序将保证输出隐含波动率，而之前的程序则不能保证输出：
- en: '[PRE50]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'Let''s use a set of input values to estimate the implied volatility. After
    that, we will explain the logic behind the previous program. Assume *S=40*, *X=40*,
    *T=12* months, *r=0.1*, and the put price is $1.50, as shown in the following
    code:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用一组输入值来估算隐含波动率。之后，我们将解释前面程序的逻辑。假设*S=40*、*X=40*、*T=12*个月、*r=0.1*，并且看跌期权价格为$1.50，如以下代码所示：
- en: '[PRE51]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'The implied volatility is 20 percent. The logic is that we assign a big value,
    such as 100, to a variable called `min_value`. For the first sigma with a value
    of 0.0002, we have an almost zero put value. Thus, the absolute difference is
    1.50, which is smaller than 100\. Because of this, our `min_value` variable will
    be replaced with the value 1.50\. We continue this way until we go through the
    loop. For the recorded minimum value, its corresponding sigma will be our implied
    volatility. We could optimize the previous program by defining some intermediate
    values. For example, in the previous program, we estimate *ln(S/X)* 10,000 times.
    Actually, we define a new variable such as `log_S_over_X`, estimate its value
    just once, and use it 10,000 times. This is true for `sigma*sigma/2.`, and `sigman*sqrt(T)`:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 隐含波动率为 20%。其逻辑是我们为一个变量 `min_value` 赋予一个较大的值，例如 100。对于第一个 sigma 值 0.0002，我们几乎得到零的卖出期权值。因此，绝对差值为
    1.50，这小于 100。所以，我们的 `min_value` 变量将被 1.50 替换。我们继续这样做，直到完成循环。记录下来的最小值对应的 sigma
    就是我们的隐含波动率。我们可以通过定义一些中间值来优化前面的程序。例如，在之前的程序中，我们估算了 *ln(S/X)* 10,000 次。实际上，我们定义一个新变量
    `log_S_over_X`，只估算一次，然后在 10,000 次中使用这个值。对于 `sigma*sigma/2.` 和 `sigman*sqrt(T)`
    也是如此：
- en: Binary-search
  id: totrans-291
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 二分查找
- en: 'To estimate the implied volatility, the logic underlying the earlier methods
    is to run the Black-Scholes-Merton option model 100 times and choose the sigma
    value that achieves the smallest difference between the estimated option price
    and the observed price. Although the logic is easy to understand, such an approach
    is not efficient since we need to call the Black-Scholes-Merton option model a
    few hundred times. To estimate a few implied volatilities, such an approach would
    not pose any problems. However, under two scenarios, such an approach is problematic.
    First, if we need higher precision, such as *sigma=0.25333*, or we have to estimate
    several million implied volatilities, we need to optimize our approach. Let''s
    look at a simple example. Assume that we randomly pick up a value between one
    and 5,000\. How many steps do we need to match this value if we sequentially run
    a loop from one to 5,000? A binomial search is the *log(n)* worst-case scenario
    when linear search is the n worst case scenario. Thus, to search a value from
    one to 5,000, a linear search would need 5,000 steps (average 2,050) in a worst-case
    scenario, while a binary search would need 12 steps (average six) in a worst-case
    scenario. The following Python program performs a binary search:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 为了估算隐含波动率，早期方法背后的逻辑是运行 100 次 Black-Scholes-Merton 期权模型，并选择能使估算期权价格与观察价格之间差异最小的
    sigma 值。尽管这个逻辑易于理解，但这种方法效率不高，因为我们需要调用几百次 Black-Scholes-Merton 期权模型。为了估算少量的隐含波动率，这种方法不会带来问题。然而，在两种情况下，这种方法会遇到问题。首先，如果我们需要更高的精度，比如
    *sigma=0.25333*，或者必须估算几百万个隐含波动率，那么我们需要优化方法。让我们看一个简单的例子。假设我们随机选择一个 1 到 5,000 之间的数。如果我们从
    1 到 5,000 顺序地运行循环，需要多少步才能找到这个数？二分查找是 *log(n)* 的最坏情况，而线性查找则是 n 的最坏情况。因此，在 1 到 5,000
    范围内搜索一个值时，线性查找在最坏情况下需要 5,000 步（平均 2,050 步），而二分查找在最坏情况下只需 12 步（平均 6 步）。以下是一个实现二分查找的
    Python 程序：
- en: '[PRE52]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'The following program shows its application for searching an implied volatility:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 以下程序展示了其在搜索隐含波动率中的应用：
- en: '[PRE53]'
  id: totrans-295
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Based on the result, the implied volatility is 16.17%. In the preceding program,
    the conversion condition, when the program should stop, is the difference between
    two call options. Readers could set up other conversion conditions. To avoid an
    infinitive loop, we have a screen condition of:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 根据结果，隐含波动率为 16.17%。在前面的程序中，转换条件，即程序应该停止的条件，是两个看涨期权之间的差异。读者可以设置其他转换条件。为了避免无限循环，我们设置了一个屏幕条件：
- en: '[PRE54]'
  id: totrans-297
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: Retrieving option data from Yahoo! Finance
  id: totrans-298
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从 Yahoo! 财经获取期权数据
- en: There are many sources of option data that we can use for our investments, research
    or teaching. One of them is Yahoo! Finance.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多期权数据来源可以用于我们的投资、研究或教学。其中一个来源是 Yahoo! 财经。
- en: 'To retrieve option data for IBM, we have the following procedure:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 为了检索 IBM 的期权数据，我们有以下程序：
- en: Go to [http://finance.yahoo.com](http://finance.yahoo.com).
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问 [http://finance.yahoo.com](http://finance.yahoo.com)。
- en: Type `IBM` in the search box.
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在搜索框中输入 `IBM`。
- en: Click on **Options** in the navigation bar.
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击导航栏中的 **期权**。
- en: 'The related page is [http://finance.yahoo.com/quote/IBM/options?p=IBM](http://finance.yahoo.com/quote/IBM/options?p=IBM).
    A screenshot of this web page is as follows:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 相关页面是 [http://finance.yahoo.com/quote/IBM/options?p=IBM](http://finance.yahoo.com/quote/IBM/options?p=IBM)。该网页的截图如下：
- en: '![Retrieving option data from Yahoo! Finance](img/B06175_10_15.jpg)'
  id: totrans-305
  prefs: []
  type: TYPE_IMG
  zh: '![从Yahoo! Finance获取期权数据](img/B06175_10_15.jpg)'
- en: Volatility smile and skewness
  id: totrans-306
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 波动率微笑与偏斜
- en: 'Obviously, each stock should possess one value for its volatility. However,
    when estimating implied volatility, different strike prices might offer us different
    implied volatilities. More specifically, the implied volatility based on out-of-the-money
    options, at-the-money options, and in-the-money options might be quite different.
    Volatility smile is the shape going down then up with the exercise prices, while
    the volatility skewness is downward or upward sloping. The key is that investors''
    sentiments and the supply and demand relationship have a fundamental impact on
    the volatility skewness. Thus, such a smile or skewness provides information on
    whether investors, such as fund managers, prefer to write calls or puts, as shown
    in the following code:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，每只股票应有一个波动率值。然而，在估算隐含波动率时，不同的行权价格可能会提供不同的隐含波动率。更具体来说，基于虚值期权、平值期权和实值期权的隐含波动率可能会有显著差异。波动率微笑是指随着行权价格的变化，波动率先下降后上升，而波动率偏斜则表现为向下或向上倾斜。关键在于投资者情绪以及供求关系对波动率偏斜的根本影响。因此，这种微笑或偏斜提供了关于投资者（例如基金经理）是更倾向于卖出看涨期权还是看跌期权的信息，如以下代码所示：
- en: '[PRE55]'
  id: totrans-308
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: Note
  id: totrans-309
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意事项
- en: Note that the `.pickle` dataset can be downloaded at [http://canisus.edu/~yan/python/callsFeb2014.pkl](http://canisus.edu/~yan/python/callsFeb2014.pkl).
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，`.pickle`数据集可以在 [http://canisus.edu/~yan/python/callsFeb2014.pkl](http://canisus.edu/~yan/python/callsFeb2014.pkl)
    下载。
- en: 'The graph related to volatility smile is shown here:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 与波动率微笑相关的图表如下：
- en: '![Volatility smile and skewness](img/B06175_10_16.jpg)'
  id: totrans-312
  prefs: []
  type: TYPE_IMG
  zh: '![波动率微笑与偏斜](img/B06175_10_16.jpg)'
- en: References
  id: totrans-313
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: 'Please refer to the following articles:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考以下文章：
- en: '*Black, F., M. Scholes, 1973, The pricing of options and corporate liab**ilities,
    Journal of Political Economy 81,3,637-654*, [https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf](https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf)'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Black, F., M. Scholes, 1973, 期权和公司负债定价，《政治经济学杂志》，81(3)，637-654*， [https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf](https://www.cs.princeton.edu/courses/archive/fall09/cos323/papers/black_scholes73.pdf)'
- en: '*Cox, J. C., Ross, S. A., Rubinstein, M, 1979, Option pricing: A simplified
    appro**ach, Journal of Financial Economics, 7(3), 229-263*, [http://www.sciencedirect.com/science/article/pii/0304405X79900151](http://www.sciencedirect.com/science/article/pii/0304405X79900151)'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Cox, J. C., Ross, S. A., Rubinstein, M, 1979, 期权定价：简化方法，《金融经济学杂志》，7(3)，229-263*，
    [http://www.sciencedirect.com/science/article/pii/0304405X79900151](http://www.sciencedirect.com/science/article/pii/0304405X79900151)'
- en: 'Appendix A – data case 6: portfolio insurance'
  id: totrans-317
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录A – 数据案例6：投资组合保险
- en: Portfolio insurance is a method of hedging a portfolio of stocks against market
    risk by short selling stock index futures. This hedging technique is frequently
    used by institutional investors when the market direction is uncertain or volatile.
    Assume that you manage one of the industry portfolios with a current value of
    $50 million. If you expect the whole market to be quite volatile in next three
    months--in other words, the market might go down significantly--what might be
    our choices at the moment?
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 投资组合保险是一种通过卖空股指期货来对冲股票投资组合市场风险的方法。当市场方向不确定或波动较大时，机构投资者常常使用这种对冲技术。假设你管理着一个价值5000万美元的行业投资组合。如果你预计未来三个月整个市场将非常波动——换句话说，市场可能会大幅下跌——此时我们可能有哪些选择？
- en: '**Alternative #1**: Sell stocks right now and buy them back in a few months'
  id: totrans-319
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选项 #1**：立即卖出股票，并在几个月后再买回来'
- en: '**Alternative #2**: Sell S&P500 index futures'
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**选项 #2**：卖出S&P500指数期货'
- en: 'Obviously, the first alternative is costly because of the transaction cost:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，第一个选择因交易成本而昂贵：
- en: 'Get five industry portfolios:'
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 获取五个行业投资组合：
- en: To retrieve Fama-French five-industry portfolio, go to Prof. French's Data Library.
  id: totrans-323
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要获取Fama-French五行业投资组合，请访问French教授的数据图书馆。
- en: Go to [http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html).
  id: totrans-324
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请访问 [http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html)。
- en: 'Search for the keyword `Industry`; see the following screenshot:![Appendix
    A – data case 6: portfolio insurance](img/B06175_10_17.jpg)'
  id: totrans-325
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索关键词`Industry`；见下方截图：![附录A – 数据案例6：投资组合保险](img/B06175_10_17.jpg)
- en: 'Download the data and estimate beta for those five industries. Let''s see what
    happens when the market is down one point. Here is today''s S&P500 level:![Appendix
    A – data case 6: portfolio insurance](img/B06175_10_18.jpg)'
  id: totrans-326
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载数据并估算这五个行业的贝塔值。让我们看看当市场下跌一个点时会发生什么。今天的S&P500水平如下：![附录A – 数据案例6：投资组合保险](img/B06175_10_18.jpg)
- en: If the market goes down one point, the long position (S&P500 futures contract)
    would lose $250, while the short position would gain $250\. The size of one futures
    contract on S&P500 is index level *250.
  id: totrans-327
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果市场下跌一个点，多头头寸（S&P500期货合约）将损失250美元，而空头头寸将获得250美元。一个S&P500期货合约的规模是指数水平 *250。
- en: 'If we want to hedge our $5 portfolio, we should short n futures contracts.
    For the specification, see [http://www3.canisius.edu/~yany/doc/sp500futures.pdf](http://www3.canisius.edu/~yany/doc/sp500futures.pdf):'
  id: totrans-328
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们想对冲我们的5美元投资组合，应该空头n个期货合约。具体说明见[http://www3.canisius.edu/~yany/doc/sp500futures.pdf](http://www3.canisius.edu/~yany/doc/sp500futures.pdf)：
- en: '![Appendix A – data case 6: portfolio insurance](img/B06175_10_51.jpg)'
  id: totrans-329
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![附录A – 数据案例6：投资组合保险](img/B06175_10_51.jpg)'
- en: Here, *Vp* is the portfolio value, *βp* is the portfolio beta, and the index
    level is the S&P500 index level. Applying the preceding formula, we should short
    ten futures contracts. Assume, in three months, it is 2090.4, that is, ten points
    down. Since we know that beta is a measure of market risk, assume that annul risk-free
    rate is 1%, that is, 0.25% for three months.
  id: totrans-330
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这里，*Vp*是投资组合价值，*βp*是投资组合贝塔值，指数水平是S&P500指数水平。应用上述公式，我们应空头十个期货合约。假设三个月后指数为2090.4，即下跌了十个点。由于我们知道贝塔值是衡量市场风险的指标，假设年化无风险利率为1%，即三个月的利率为0.25%。
- en: 'Estimate the portfolio beta by applying the following linear regression:![Appendix
    A – data case 6: portfolio insurance](img/B06175_10_52.jpg)'
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过应用以下线性回归来估计投资组合的贝塔值：![附录A – 数据案例6：投资组合保险](img/B06175_10_52.jpg)
- en: Identify several moments when the market falls dramatically.
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确定市场大幅下跌的几个时刻。
- en: 'You can use a business cycle Python dataset called:'
  id: totrans-333
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以使用一个名为Business Cycle的Python数据集：
- en: '[PRE56]'
  id: totrans-334
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: Tip
  id: totrans-335
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Note that -1 means deep in recession, while 1 means the economy is expanding.
  id: totrans-336
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意，-1表示经济处于深度衰退，而1表示经济在扩张。
- en: Estimate the loss with and without a hedging strategy. What is the loss of your
    portfolio? What is the gain if you short one future contract of S&P500 future?
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 估算有无对冲策略时的损失。你的投资组合损失是多少？如果你空头一个S&P500期货合约，收益是多少？
- en: Repeat the whole processing that we have 1,000 shares of IBM, 2,000 shares of
    DELL, and 5,000 shares of Citi Group, and 7,000 shares of IBM.
  id: totrans-338
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复整个过程，假设我们持有1,000股IBM，2,000股DELL，5,000股Citi Group和7,000股IBM。
- en: What is the total market value today?
  id: totrans-339
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 今天的总市值是多少？
- en: 'What is the portfolio beta? [note: you can use the latest five-year monthly
    data to estimate beta]'
  id: totrans-340
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 投资组合的贝塔值是多少？[注：你可以使用最新的五年月度数据来估算贝塔值]
- en: If we want to hedge our portfolio by using S&P500 futures contracts, how many
    contracts should we long (short)?
  id: totrans-341
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们想通过使用S&P500期货合约来对冲投资组合，应该做多（做空）多少合约？
- en: If the market down by 5%, what is our portfolio loss and what is the gain in
    terms of our hedging position?
  id: totrans-342
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果市场下跌5%，我们的投资组合损失是多少，套期保值头寸的收益是多少？
- en: 'The following formula is a general one:'
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 以下公式是通用公式：
- en: '![Appendix A – data case 6: portfolio insurance](img/B06175_10_53.jpg)'
  id: totrans-344
  prefs: []
  type: TYPE_IMG
  zh: '![附录A – 数据案例6：投资组合保险](img/B06175_10_53.jpg)'
- en: Here, *n* is the number of contracts, *β** is our target beta, *VF* is the value
    of one futures contract. *Vp* and *βp* are defined previously. If n is positive
    (negative), it means a long (short) position. In the preceding case for using
    S&P500 futures, VF=S&P500 index level *250.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*n*是合约数，*β*是我们的目标贝塔值，*VF*是一个期货合约的价值。*Vp*和*βp*在前文已定义。如果n为正（负），则表示多头（空头）头寸。在前面的S&P500期货使用案例中，VF=S&P500指数水平
    *250。
- en: Tip
  id: totrans-346
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: Think about market timing by using S&P500 futures to change your portfolio beta
    for bad times.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用S&P500期货来改变投资组合贝塔值以应对市场不利时机，考虑市场时机。
- en: Exercises
  id: totrans-348
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 练习
- en: If the APR is 5% compounded quarterly, what is its equivalent continuously compounded
    rate?
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果年利率为5%，按季度复利计算，其等效的连续复利利率是多少？
- en: The value of a portfolio is $4.77 million today with a beta of 0.88\. If the
    portfolio manager explains the market will surge in the next three months and
    s/he intends to increase her/ his portfolio beta from 0.88 to 1.20 in just three
    months by using S&P500 futures, how many contracts should s/he long or short?
    If the S&P500 index increases by 70 points what will be her/his gain or loss?
    How about if the S&P500 falls by 50 points instead?
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个投资组合今天的价值为 477 万美元，β值为 0.88。如果投资组合经理解释市场将在未来三个月上涨，并且他/她打算在仅三个月内通过使用 S&P500
    期货将投资组合的 β 值从 0.88 提高到 1.20，那么他/她应该做多少合约的多头或空头？如果 S&P500 指数上涨 70 点，他/她的盈亏是多少？如果
    S&P500 下跌 50 点呢？
- en: Write a Python program to price a call option.
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个 Python 程序来定价一个看涨期权。
- en: Explain the empty shell method when writing a complex Python program.
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解释在编写复杂的 Python 程序时，“空壳方法”的含义。
- en: Explain the logic behind the so-called comment-all-out method when writing a
    complex Python program.
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解释在编写复杂的 Python 程序时，所谓的“注释掉所有代码”方法背后的逻辑。
- en: Explain the usage of the return value when we debug a program.
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解释当我们调试程序时，返回值的用途。
- en: When we write the CND (cumulative standard normal distribution), we could define
    a1, a2, a3, a4, and a5 separately. What are the differences between the following
    two approaches?
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当我们编写 CND（累积分布标准正态分布）时，我们可以单独定义 a1、a2、a3、a4 和 a5。以下两种方法有何不同？
- en: 'Current approach: (a1,a2,a3,a4,a5)=(0.31938153,-0.356563782,1.781477937,-1.821255978,1.330274429)'
  id: totrans-356
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当前方法：（a1,a2,a3,a4,a5）=(0.31938153,-0.356563782,1.781477937,-1.821255978,1.330274429)
- en: 'An alternative approach:'
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一种替代方法：
- en: a1=0.31938153
  id: totrans-358
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: a1=0.31938153
- en: a2=-0.356563782
  id: totrans-359
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: a2=-0.356563782
- en: a3=1.781477937
  id: totrans-360
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: a3=1.781477937
- en: a4=-1.821255978
  id: totrans-361
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: a4=-1.821255978
- en: a5=1.330274429
  id: totrans-362
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: a5=1.330274429
- en: What is the difference between an American call and a European call?
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 美式看涨期权和欧式看涨期权有什么区别？
- en: What is the unit of rf in the Black-Scholes-Merton option model?
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Black-Scholes-Merton 期权模型中，rf 的单位是什么？
- en: If we are given an annual rate of 3.4% compounded semi-annually, what is the
    value of rf we should use for the Black-Scholes-Merton option model?
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果给定年利率为 3.4%，半年复利，我们应该在 Black-Scholes-Merton 期权模型中使用哪个 rf 值？
- en: How do you use options to hedge?
  id: totrans-366
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如何使用期权进行对冲？
- en: How do you treat predetermined cash dividends to price a European call?
  id: totrans-367
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在定价欧洲看涨期权时，如何处理预定的现金股息？
- en: Why is an American call worth more than a European call?
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为什么美式看涨期权比欧式看涨期权更有价值？
- en: Assume you are a mutual manager and your portfolio's β is strongly correlated
    with the market. You are worried about the short-term fall of the market. What
    could you do to protect your portfolio?
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 假设你是一个共同基金经理，且你的投资组合的β值与市场高度相关。你担心市场会短期下跌，你可以采取什么措施来保护你的投资组合？
- en: The current price of stock A is $38.5, the strike prices for a call and a put
    are both $37\. If the continuously compounded risk-free rate is 3.2%, maturity
    is three months, and the volatility of stock A is 0.25, what are the prices for
    a European call and put?
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 股票 A 的当前价格为 38.5 美元，看涨期权和看跌期权的行使价格均为 37 美元。如果无风险利率为 3.2%，到期时间为三个月，股票 A 的波动率为
    0.25，那么欧洲看涨期权和看跌期权的价格是多少？
- en: Use the put-call parity to verify the preceding solutions.
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用买卖平价验证上述解决方案。
- en: When the strike prices for call and put in 9.11) are different, can we apply
    the put-call parity?
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 9.11) 中，当看涨期权和看跌期权的行使价格不同，我们还能应用买卖平价吗？
- en: For a set of input values, such as S=40, X=40, T=3/12=0.25, r=0.05 and sigma=0.20,
    using the Black-Scholes-Merton option model, we can estimate the value of the
    call. Now keep all parameters constant except S (current price of a stocks); show
    the relationship, a graph is better, between calls and S.
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于一组输入值，如 S=40、X=40、T=3/12=0.25、r=0.05 和 sigma=0.20，使用 Black-Scholes-Merton
    期权模型，我们可以估算看涨期权的价值。现在保持所有参数不变，除了 S（股票的当前价格）；请展示看涨期权和 S 之间的关系，最好以图表形式展示。
- en: What are the definitions of effective annual rate, effect semi annual rate,
    and risk-free rate for the call option model? Assume the current annual risk-free
    rate is 5 percent, compounded semi annually, which value should we use as our
    input value for the Black-Scholes-Merton call option model?
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在看涨期权模型中，有效年利率、半年有效利率和无风险利率的定义是什么？假设当前年化无风险利率为 5%，半年复利，应该使用哪个值作为 Black-Scholes-Merton
    看涨期权模型的输入值？
- en: What is the call premium when the stock is traded at $39, the exercise price
    is $40, the maturity date is three months, the risk-free rate is 3.5 percent,
    compounding continuously, and the volatility is 0.15 per year?
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当股票交易价格为 39 美元，行使价格为 40 美元，到期日为三个月，无风险利率为 3.5%，连续复利，年波动率为 0.15 时，期权的权利金是多少？
- en: Repeat the previous exercise for when the risk-free rate is still 3.5 percent
    per year but compounded semi annually.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于风险无关利率仍为每年 3.5% 但按半年复利的情况，重复之前的练习。
- en: What are the advantages and disadvantages of using others' programs?
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用他人的程序有哪些优点和缺点？
- en: How do you debug others' programs?
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你如何调试他人的程序？
- en: Write a Python program to convert any given APR compounded m times per year,
    to a continuously compounded interest rate.
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个 Python 程序，将任何给定的按每年 m 次复利计算的 APR 转换为连续复利利率。
- en: How do you improve the accuracy of the cumulative normal distribution?
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你如何提高累积正态分布的准确性？
- en: What is the relationship between APR and Rc, a continuously compounded rate?
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: APR 和 Rc（连续复利率）之间的关系是什么？
- en: For a stock with the current stock price of $52.34, what is its call price if
    the exercise price is the same as its current stock price, matures in six months
    with a 0.16 annual volatility, and the risk-free rate is 3.1 percent, compounded
    continuously?
  id: totrans-382
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于当前股价为 52.34 美元的股票，如果行使价格与当前股价相同，期满时间为六个月，年波动率为 0.16，风险无关利率为 3.1%，且按连续复利计算，计算其看涨期权的价格。
- en: For a set of *S*, *X*, *T*, *r*, and sigma, we could estimate a European call
    option by using those 13 lines of Python codes. When the current stock price,
    *S*, increases while other input values are the same, will the call price increase
    or decrease? Why?
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于一组 *S*、*X*、*T*、*r* 和 sigma，我们可以使用这 13 行 Python 代码来估算一个欧洲看涨期权。当当前股价 *S* 增加，而其他输入值不变时，看涨期权的价格会增加还是减少？为什么？
- en: Show the preceding result graphically.
  id: totrans-384
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以图形方式展示前述结果。
- en: When the exercise price, *X*, increases, the value of a call will fall. Is this
    true? Why?
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当行使价格 *X* 增加时，看涨期权的价值会下降。这个说法对吗？为什么？
- en: If other input values are constant, the value of the call premium will increase
    if the sigma of the stock increases. Is this true? Why?
  id: totrans-386
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果其他输入值保持不变，股票的 sigma 增加时，看涨期权溢价会增加。这个说法对吗？为什么？
- en: For a set of input values of *S*, *X*, *T*, *r*, and sigma, we could use the
    codes in this chapter to price a European call option, that is, *C*. On the other
    hand, if we observe a real-world price of a call premium (Cobs) with a set of
    values *S*, *X*, *T*, and *r*, we could estimate an implied volatility (sigma).
    Specify a trial-and-error method to roughly estimate the implied volatility (if
    a new learner does not get this question, it is perfectly fine since we will devote
    a whole chapter to discussing how to do it).
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于一组输入值 *S*、*X*、*T*、*r* 和 sigma，我们可以使用本章中的代码来定价欧洲看涨期权，即 *C*。另一方面，如果我们观察到一个实际的看涨期权溢价（Cobs），并且拥有一组值
    *S*、*X*、*T* 和 *r*，我们可以估计出隐含波动率（sigma）。指定一个试错法来粗略估计隐含波动率（如果一个新手没有解答这个问题是完全可以的，因为我们会
    dedicating 一整章来讨论如何做到这一点）。
- en: According to so-called put-call parity, which holds that a call option with
    enough cash at maturity (X dollar) is equivalent to holding a put option with
    a share of the underlying stock in hand--here, both call and put options have
    the same exercise price (X) with the same maturity (T) and both are European options--if
    the stock price is $10, exercise price is $11, maturity is six months, and risk-free
    rate is 2.9 percent, compounded semi annually, what is the price of a European
    put option?
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据所谓的看涨看跌平价公式，它表明一个到期时持有足够现金的看涨期权（X 美元）与持有一只标的股票的看跌期权是等价的——在此，两者的行使价格（X）和到期时间（T）相同，且均为欧洲期权——如果股票价格为
    10 美元，行使价格为 11 美元，到期时间为六个月，风险无关利率为 2.9%，且按半年复利计算，那么该欧洲看跌期权的价格是多少？
- en: Summary
  id: totrans-389
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, first we have explained many basic concepts related to portfolio
    theory, such as covariance,correlation, the formulas on how to calculate variance
    of a 2-stock portfolio and variance of an n-stock portfolio. After that, we have
    discussed various risk measures for individual stocks or portfolios, such as Sharpe
    ratio, Treynor ratio, Sortino ratio, how to minimize portfolio risk based on those
    measures (ratios), how to setup an objective function, how to choose an efficient
    portfolio for a given set of stocks, and how to construct an efficient frontier.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们首先解释了许多与投资组合理论相关的基本概念，例如协方差、相关性，如何计算二股票投资组合的方差以及 n 股票投资组合的方差公式。接着，我们讨论了针对个别股票或投资组合的各种风险衡量标准，如夏普比率、特雷诺比率、索提诺比率，如何基于这些衡量标准（比率）来最小化投资组合风险，如何设置目标函数，如何为给定的股票集选择一个有效的投资组合，以及如何构建有效前沿。
- en: 'In the next chapter, we will discuss one of the most important theory in modern
    finance: options and futures. We will start from the basic concepts such as payoff
    functions for a call and for a put. Then we explain the related applications such
    as various trading strategies, corporate incentive plans, and hedging strategies
    including different types of options and futures.'
  id: totrans-391
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论现代金融中最重要的理论之一：期权和期货。我们将从基本概念入手，例如看涨期权和看跌期权的收益函数。接着，我们将解释相关的应用，如各种交易策略、公司激励计划以及对冲策略，包括不同类型的期权和期货。
