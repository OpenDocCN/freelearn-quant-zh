- en: Chapter 14. Exotic Options
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第14章. 另类期权
- en: In [Chapter 10](ch10.html "Chapter 10. Options and Futures"), *Options and Futures*,
    we have discussed the famous Black-Scholes-Merton option model and various trading
    strategies involving various types of options, futures, and underlying securities.
    The Black-Scholes-Merton closed-form solution is for European options that could
    be exercised only on maturity dates. American options could be exercised before
    or on a maturity date. Usually, those types of options are called vanilla options.
    On the other hand, there exist various types of exotic options that have all sorts
    of features making them more complex than commonly traded vanilla options.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第10章](ch10.html "第10章. 期权与期货")，*期权与期货*中，我们讨论了著名的布莱克-斯科尔斯-梅顿期权模型以及涉及各种类型期权、期货和基础证券的各种交易策略。布莱克-斯科尔斯-梅顿的闭式解法适用于只能在到期日行使的欧式期权。美式期权可以在到期日之前或当天行使。通常，这些类型的期权被称为香草期权。另一方面，也存在各种类型的另类期权，它们具有各种特性，使其比常见的香草期权更为复杂。
- en: For example, if an option buyer could exercise their right several times before
    the maturity date, it is called a Bermudan option. In [Chapter 12](ch12.html "Chapter 12. Monte
    Carlo Simulation"), *Monte Carlo Simulation*, two types of exotic options are
    discussed. Many exotic options (derivatives) may have several triggers relating
    to their payoffs. An exotic option may also include non-standard underlying security
    or instrument, developed for a specific client or for a particular market. Exotic
    options are generally traded **over the counter** (**OTC**).
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果期权买方可以在到期日前的多个时刻行使权利，那么它就是一个百慕大期权。在[第12章](ch12.html "第12章. 蒙特卡洛模拟")，*蒙特卡洛模拟*中，讨论了两种类型的另类期权。许多另类期权（衍生品）可能有多个触发条件与其支付有关。另类期权还可能包括非标准的基础证券或工具，专为特定客户或特定市场开发。另类期权通常是**场外交易**（**OTC**）。
- en: 'In this chapter, the following topics will be covered:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，将涵盖以下主题：
- en: European, American, and Bermudan options
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 欧式、美式和百慕大期权
- en: Simple chooser options
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简单选择期权
- en: Shout, rainbow, and binary options
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 喊叫期权、彩虹期权和双向期权
- en: Average price option
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 平均价格期权
- en: Barrier options – up-and-in options and up-and-out option
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 障碍期权——上涨入场期权和上涨退出期权
- en: Barrier options – down-and-in and down-and-out options
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 障碍期权——下跌入场期权和下跌退出期权
- en: European, American, and Bermuda options
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 欧式、美式和百慕大期权
- en: 'In [Chapter 10](ch10.html "Chapter 10. Options and Futures"), *Options and
    Futures*, we have learnt that for a European option, the option buyer could exercise
    their right only on maturity dates, while for an American option buyer, they could
    exercise their right any time before and on maturity dates. Thus, an American
    option would be more valuable than its counterparty of European option. Bermudan
    options could be exercised once or several times on a few predetermined dates.
    Consequently, the price of a Bermudan option should be between a European and
    an American option with the same features, such as the same maturity dates and
    the same exercises prices, see the following two inequalities for call options:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第10章](ch10.html "第10章. 期权与期货")，*期权与期货*中，我们已经学习了对于欧式期权，期权买方只能在到期日行使权利，而对于美式期权买方，他们可以在到期日之前的任何时候行使权利。因此，美式期权的价值通常高于其对应的欧式期权。百慕大期权可以在几个预定的日期内行使一次或多次。因此，百慕大期权的价格应介于欧式期权和美式期权之间，前提是它们具有相同的特征，例如相同的到期日和相同的行权价格，见以下两个关于看涨期权的不等式：
- en: '![European, American, and Bermuda options](img/B06175_14_01.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![欧式、美式和百慕大期权](img/B06175_14_01.jpg)'
- en: Here is an example for a Bermudan option. Assume that a company issues a 10-year
    bond. After seven years, the company could call back, that is, retire, the bond
    at the end of each year for the next three years. This callable property is eventually
    an embedded Bermudan option with exercise dates in December of years 8, 9, and
    10.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个关于百慕大期权的例子。假设一家公司发行了一张10年期债券。七年后，公司可以在接下来的三年中的每年年底，选择赎回即退还债券。这种可赎回特性最终形成了一个嵌入式百慕大期权，其行使日期为第8、9和10年的12月。
- en: 'First, let''s look at the Python program for an American call by using the
    binomial model:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们来看一下使用二项模型的美式看涨期权的Python程序：
- en: '[PRE0]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The price of this American call is $2.75\. The key for modifying the previous
    program to satisfy only a few exercise prices is the following two lines:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这个美式看涨期权的价格是$2.75。为了修改之前的程序以仅满足少数几个行权价格，以下两行是关键：
- en: '[PRE1]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Here is the Python program for a Bermudan call option. The key different is
    the variable called T2, which contains the dates when the Bermudan option could
    be exercised:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个适用于伯穆达看涨期权的 Python 程序。关键的不同点是名为 T2 的变量，它包含伯穆达期权可以行权的日期：
- en: '[PRE2]'
  id: totrans-19
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Chooser options
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 选择权选项
- en: For a chooser option, it allows the option buyer to choose, at a predetermined
    point of time before the option matures whether it is a European call or a European
    put. For a simple chooser option, the underlying call and put options have the
    same maturities and exercise prices. Let's look at two extreme cases. The option
    buyer has to make a decision today, that is, when they make such a purchase. The
    price of this chooser option should be the maximum of call and put options since
    the option buyer does not have more information. The second extreme case is the
    investor could make a decision on the maturity date. Since the call and put have
    the same exercise prices, if the call is in the money, the put should be out of
    money. The opposite is true. Thus, the price of a chooser option should be the
    summation of the call and the put. This is equivalent to buy a call and a put
    with the same exercise prices and maturity dates. In [Chapter 10](ch10.html "Chapter 10. Options
    and Futures"), *Options and Futures* we know such a trading strategy is called
    Straddle. With such a trading strategy, we bet that the underlying security would
    move away from our current position. However, we are not sure about the direction.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 对于选择权期权，它允许期权买方在期权到期之前的某个预定时间点选择是欧洲看涨期权还是欧洲看跌期权。对于一个简单的选择权期权，标的的看涨和看跌期权具有相同的到期日和行权价格。我们来看两个极端案例。期权买方必须在今天做出决策，即当他们进行此类购买时。这个选择权期权的价格应当是看涨和看跌期权的最大值，因为期权买方没有更多的信息。第二个极端情况是投资者可以在到期日做出决策。由于看涨和看跌期权具有相同的行权价格，如果看涨期权处于价内，看跌期权应该是价外的，反之亦然。因此，选择权期权的价格应当是看涨期权和看跌期权的总和。这相当于购买一个看涨期权和一个看跌期权，行权价格和到期日相同。在[第10章](ch10.html
    "第10章 期权与期货")《期权与期货》中，我们知道这样的交易策略被称为跨式期权（Straddle）。通过这种交易策略，我们押注标的资产会偏离当前的价格，但我们不确定其方向。
- en: 'First, let''s look at the pricing formula for a simple chooser option, both
    call and put have the same maturity dates and exercise prices. Assume that there
    is no dividend before maturity. A simple chooser option has the following pricing
    formula:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们来看一个简单的选择权期权的定价公式，假设看涨和看跌期权有相同的到期日和行权价格，并假设到期之前没有股息。一个简单的选择权期权的定价公式如下：
- en: '![Chooser options](img/B06175_14_04.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![选择权选项](img/B06175_14_04.jpg)'
- en: 'Here, *Pchooer* is the price or premium for a chooser option, *call (T)* is
    a European call with a maturity T. *put(τ)* will be defined soon. For the first
    *call (T)* option, we have the following pricing formula:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*Pchooer* 是选择权的价格或溢价，*call (T)* 是一个到期日为T的欧洲看涨期权，*put(τ)* 将很快定义。对于第一个 *call
    (T)* 期权，我们有以下定价公式：
- en: '![Chooser options](img/B06175_14_05.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![选择权选项](img/B06175_14_05.jpg)'
- en: 'Here, *call (T)* is the call premium, *S* is today''s price, *K* is the exercise
    price, *T* is the maturity in years, σ is the volatility, and *N()* is the cumulative
    standard normal distribution. Actually, this is exactly the same as the Black-Scholes-Merton
    call option model. *put (τ)* has the following formula:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*call (T)* 是看涨期权的溢价，*S* 是今天的价格，*K* 是行权价格，*T* 是到期日（年），σ 是波动率，*N()* 是累积标准正态分布。实际上，这与
    Black-Scholes-Merton 看涨期权模型完全相同。*put (τ)* 的公式如下：
- en: '![Chooser options](img/B06175_14_06.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![选择权选项](img/B06175_14_06.jpg)'
- en: 'Again, *put(τ)* is the put premium and *τ* is when the chooser option buyer
    could make a decision. To make *d1* and d2 distinguishable from those two values
    in the previous equation, ![Chooser options](img/B06175_14_26.jpg) and ![Chooser
    options](img/B06175_14_27.jpg)are used instead of *d1* and *d2*. Note that the
    preceding equation is different from the Black-Scholes-Merton put option model
    since we have both T and τ instead of just T. Now, let''s look at one extreme
    case: the option buyer could make their decision at maturity date, that is, *τ=T*.
    From the preceding equation, obviously the price of the chooser option will be
    the summation of those two options:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，*put(τ)* 是看跌期权的溢价，*τ* 是选择权买方可以做出决策的时刻。为了使 *d1* 和 *d2* 与前面公式中的两个值有所区分，使用了
    ![选择权选项](img/B06175_14_26.jpg) 和 ![选择权选项](img/B06175_14_27.jpg) 来代替 *d1* 和 *d2*。请注意，前面的公式与
    Black-Scholes-Merton 看跌期权模型不同，因为我们有 T 和 τ 而不仅仅是 T。现在，我们来看一个极端情况：期权买方可以在到期日做出决策，即
    *τ=T*。从前面的公式可以明显看出，选择权的价格将是这两种期权的总和：
- en: '![Chooser options](img/B06175_14_07.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![选择期权](img/B06175_14_07.jpg)'
- en: 'The following Python program is for the choose options. To save space, we could
    combine both a call with a put, see the following Python codes. In order to do
    so, we have two time variable input called `T` and `tao`:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 以下Python程序是针对选择期权的。为了节省空间，我们可以将看涨期权和看跌期权合并，见下文Python代码。为此，我们有两个时间变量输入，分别是`T`和`tao`：
- en: '[PRE3]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The price of this chooser option is $2.26.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 这个选择权的价格是$2.26。
- en: Shout options
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 呼叫期权
- en: 'A shout option is a standard European option except that the option buyer can
    *shout* to the option seller before maturity date to set the minimum payoff as
    *Sτ-X*, where *Sτ* is the stock price at time *τ* when the buyer shouts and *X*
    is the exercise price. The level of the strike could be set at a specific relation
    to the spot price, such as 3% or 5% above (or below). The Python codes are given
    here:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 呼叫期权是一种标准的欧洲期权，不同之处在于，期权买方可以在到期日前对期权卖方*呼叫*，将最小支付设置为*Sτ-X*，其中*Sτ*是买方呼叫时的股票价格，*X*是行权价。行权价的设定可以与现货价格的特定关系相关，例如设定为现货价的3%或5%（高于或低于）。Python代码如下：
- en: '[PRE4]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Binary options
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 二元期权
- en: 'A binary option, or asset-or-nothing option, is a type of options in which
    the payoff is structured to be either a fixed amount of compensation if the option
    expires in the money, or nothing at all if the option expires out of the money.
    Because of this property, we could apply Monte Carlo Simulation to find a solution.
    The Python codes are given here:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 二元期权，或资产无条件期权，是一种期权类型，其支付结构为：若期权到期时处于实值，则支付固定金额的补偿；若期权到期时处于虚值，则支付零。由于这个特性，我们可以应用蒙特卡洛模拟来找到解决方案。Python代码如下：
- en: '[PRE5]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Note that since the preceding program does not fix the seed, for each run, users
    should get different results.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，由于前述程序未固定种子，因此每次运行时，用户应获得不同的结果。
- en: Rainbow options
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 彩虹期权
- en: 'Many financial problems could be summarized as or associated with the maximum
    or minimum of several assets. Let''s look at a simple one: options on the maximum
    or minimum of two assets. These type of options are called rainbow options. Since
    two assets are involved, we have to get familiar with a so-called bivariate normal
    distribution. The following codes show its graph. The original codes are at the
    website of [http://scipython.com/blog/visualizing-the-bivariate-gaussian-distribution/](http://scipython.com/blog/visualizing-the-bivariate-gaussian-distribution/):'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 许多金融问题可以总结为或与多项资产的最大值或最小值相关。我们来看一个简单的例子：基于两个资产最大值或最小值的期权。这种类型的期权称为彩虹期权。由于涉及两项资产，我们需要熟悉所谓的二元正态分布。以下代码展示了其图形。原始代码可以在[http://scipython.com/blog/visualizing-the-bivariate-gaussian-distribution/](http://scipython.com/blog/visualizing-the-bivariate-gaussian-distribution/)网站找到：
- en: '[PRE6]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The graph is shown here:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 图形如下：
- en: '![Rainbow options](img/B06175_14_02.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![彩虹期权](img/B06175_14_02.jpg)'
- en: 'Assume that returns of those two assets follow a bivariate normal distribution
    with a correlation of ρ. To make our estimation a little bit easier, we assume
    that there is no dividend before maturity date. The payoff for a call on the minimum
    of two assets will be:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 假设这两项资产的收益率遵循具有相关系数ρ的二元正态分布。为了简化我们的估算，我们假设在到期日前没有分红。对于基于两个资产最小值的看涨期权，其支付为：
- en: '![Rainbow options](img/B06175_14_08.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![彩虹期权](img/B06175_14_08.jpg)'
- en: 'Here, ![Rainbow options](img/B06175_14_24.jpg) is the terminal stock price
    for stock 1 (2) and T is the maturity date in years. The pricing formula for a
    call based on the minimum of two assets is given here:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，![彩虹期权](img/B06175_14_24.jpg)是股票1（2）的终值股价，T是到期日（以年为单位）。基于两项资产最小值的看涨期权定价公式如下：
- en: '![Rainbow options](img/B06175_14_09.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![彩虹期权](img/B06175_14_09.jpg)'
- en: 'Here, S1 (S2) is the current stock price for stock 1 (2), N2(a,b,ρ) is the
    cumulative bivariate normal distribution with the upper bounds of a and b, correlation
    of ρ between those two assets, and *K* is the exercise price. The parameters of
    *d11*, *d12*, *d21*, *d22*, *ρ1*, and *ρ2* are defined here:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，S1（S2）是股票1（2）的当前股价，N2(a,b,ρ)是具有上限a和b、资产间相关系数ρ的二元正态分布，*K*是行权价。*d11*、*d12*、*d21*、*d22*、*ρ1*和*ρ2*的参数在此定义：
- en: '![Rainbow options](img/B06175_14_10.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![彩虹期权](img/B06175_14_10.jpg)'
- en: 'First, we should study the bivariate cumulative normal distribution `N2_f(d1,d2,rho)`
    described here:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们应学习这里描述的二元累积正态分布`N2_f(d1,d2,rho)`：
- en: '[PRE7]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Let''s look at some special cases. From univariate standard normal distribution,
    we know that when input value is `0`, we expected the cumulative standard normal
    distribution is `0.5` since the underlying normal distribution is symmetric. When
    two time series are perfectly positively correlated, the cumulative standard normal
    distribution should be `0.5` as well, see the preceding result. On the other hand,
    if two time series are not correlated, their cumulative standard normal distribution
    when the inputs are both zero, then we expected the overlapping, that is, *0.5
    *0.5=0.25*. This is true by calling the preceding `N2_f()` function. For the exotic,
    option, the related Python program is given here:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一些特殊情况。从单变量标准正态分布中，我们知道当输入值为`0`时，我们期望累积标准正态分布为`0.5`，因为基础正态分布是对称的。当两个时间序列完全正相关时，累积标准正态分布也应该为`0.5`，请参见前面的结果。另一方面，如果两个时间序列不相关，当输入都为零时，它们的累积标准正态分布期望为重叠，即，*0.5
    * 0.5 = 0.25*。这一点通过调用之前的`N2_f()`函数得到验证。对于这一类期权，相关的Python程序如下：
- en: '[PRE8]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Another way to price various types of rainbow options is using Monte Carlo
    Simulation. As we mentioned in [Chapter 12](ch12.html "Chapter 12. Monte Carlo
    Simulation"), *Monte Carlo Simulation*, we can generate two correlated random
    number time series. There are two step involved: generate two random time series
    *x1* and *x2* with a zero-correlation; and then apply the following formula:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种定价各种类型彩虹期权的方法是使用蒙特卡洛模拟。如我们在[第12章](ch12.html "第12章. 蒙特卡洛模拟")中提到的，*蒙特卡洛模拟*，我们可以生成两个相关的随机数时间序列。这个过程分为两步：生成两个零相关的随机时间序列*x1*和*x2*；然后应用以下公式：
- en: '![Rainbow options](img/B06175_14_11.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![彩虹期权](img/B06175_14_11.jpg)'
- en: 'Here, ρ is the predetermined correlation between those two time series. Now,
    *y1* and *y2* are correlated with a predetermined correlation. The following Python
    program would implement the preceding approach:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，ρ是这两个时间序列之间的预定相关性。现在，*y1*和*y2*具有预定的相关性。以下Python程序将实现上述方法：
- en: '[PRE9]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Next, we apply the same technique we know in [Chapter 12](ch12.html "Chapter 12. Monte
    Carlo Simulation"), *Monte Carlo Simulation* to price a rainbow option call on
    the minimum of two assets:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们应用我们在[第12章](ch12.html "第12章. 蒙特卡洛模拟")中所学的同样技术，*蒙特卡洛模拟*，来定价两个资产最小值的彩虹期权看涨：
- en: '[PRE10]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'If we add more assets, it becomes more difficult to have a close-form solution.
    Here we show how to use Monte Carlo Simulation to price a rainbow call option
    based on the maximum terminal stock price. The basic logic is quite straight:
    generate three terminal stock prices, and then record the call payoff by applying
    the following formula:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们增加更多的资产，获得封闭式解将变得更加困难。这里我们展示如何使用蒙特卡洛模拟来定价基于最大终端股价的彩虹看涨期权。基本逻辑相当简单：生成三个终端股价，然后应用以下公式计算看涨期权收益：
- en: '![Rainbow options](img/B06175_14_12.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![彩虹期权](img/B06175_14_12.jpg)'
- en: 'The final price would be the average of the discounted payoffs. The key is
    how to generate a correlated three set of random numbers. Here, the famous Cholesky
    decomposition is applied. Assume that we have a correlation matrix called *C*.
    A Cholesky decomposition matrix *L* that makes ![Rainbow options](img/B06175_14_25.jpg).
    Assume further that the uncorrelated return matrix is called *U*. Now, the correlated
    return matrix *R = UL*. The Python code is shown here:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 最终价格将是折现收益的平均值。关键是如何生成一组三个相关的随机数。这里，我们应用了著名的乔尔斯基分解。假设我们有一个相关矩阵叫做*C*，一个使得![彩虹期权](img/B06175_14_25.jpg)的乔尔斯基分解矩阵*L*。进一步假设无关的回报矩阵叫做*U*。现在，相关回报矩阵*R
    = UL*。以下是对应的Python代码：
- en: '[PRE11]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Pricing average options
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定价平均期权
- en: In [Chapter 12](ch12.html "Chapter 12. Monte Carlo Simulation"), *Monte Carlo
    Simulation*, we discussed two exotic options. For convenience, we will include
    them in this chapter as well. Because of this, readers will find some duplicates.
    European and American options are path-independent options. This means that an
    option's payoff depends only on the terminal stock price and strike price. One
    related issue for path-dependent options is market manipulation at the maturity
    date. Another issue is that some investors or hedgers might care more about the
    average price instead of a terminal price.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第12章](ch12.html "第12章. 蒙特卡罗模拟")，*蒙特卡罗模拟*中，我们讨论了两种奇异期权。为了方便起见，我们也将它们包括在这一章中。因此，读者可能会看到一些重复的内容。欧洲期权和美式期权是路径无关的期权。这意味着期权的支付仅取决于终端股票价格和执行价格。路径相关期权的一个相关问题是到期日的市场操控。另一个问题是，一些投资者或对冲者可能更关注平均价格而非终端价格。
- en: 'For example, a refinery is worried about oil, its major raw material, and price
    movement in the next three months. They plan to hedge the potential price jumps
    in crude oil. The company could buy a call option. However, since the firm consumes
    a huge amount of crude oil every day, naturally it cares more about the average
    price instead of just the terminal price on which a vanilla call option depends.
    For such cases, average options will be more effective. Average options are a
    type of Asian option. For an average option, its payoff is determined by the average
    underlying prices over some predetermined period of time. There are two types
    of averages: arithmetic average and geometric average. The payoff function of
    an Asian call (average price) is given as follows:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，一家炼油厂担心其主要原料——石油的价格波动，尤其是在接下来的三个月内。他们计划对冲原油价格的潜在跳动。该公司可能会购买看涨期权。然而，由于公司每天消耗大量的原油，它显然更关心的是平均价格，而不是仅仅依赖于普通看涨期权的终端价格。在这种情况下，平均期权会更加有效。平均期权是一种亚洲期权。对于平均期权，其支付取决于某一预定时间段内的基础资产价格的平均值。平均数有两种类型：算术平均数和几何平均数。以下给出了亚洲看涨期权（平均价格）的支付函数：
- en: '![Pricing average options](img/B06175_14_13.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![定价平均期权](img/B06175_14_13.jpg)'
- en: 'The payoff function of an Asian put (average price) is given here:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 这里给出了亚洲看跌期权（平均价格）的支付函数：
- en: '![Pricing average options](img/B06175_14_14.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![定价平均期权](img/B06175_14_14.jpg)'
- en: 'Asian options are one of the basic forms of exotic options. Another advantage
    of Asian options is that their costs are cheaper compared to European and American
    vanilla options since the variation of an average will be much smaller than a
    terminal price. The following Python program is for an Asian option with an arithmetic
    average price:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 亚洲期权是奇异期权的一种基本形式。亚洲期权的另一个优点是，相比于欧洲和美式的普通期权，它们的成本更低，因为平均价格的波动会比终端价格的小得多。以下Python程序适用于一个具有算术平均价格的亚洲期权：
- en: '[PRE12]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Pricing barrier options
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 定价障碍期权
- en: 'Unlike the Black-Scholes-Merton option model''s call and put options, which
    are path-independent, a barrier option is path-dependent. A barrier option is
    similar in many ways to an ordinary option, except a trigger exists. An *in* option
    starts its life worthless unless the underlying stock reaches a predetermined
    knock-in barrier. On the contrary, an *out* barrier option starts its life active
    and turns useless when a knock-out barrier price is breached. In addition, if
    a barrier option expires inactive, it may be worthless, or there may be a cash
    rebate paid out as a fraction of the premium. The four types of barrier options
    are given as follows:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 不同于Black-Scholes-Merton期权模型中的看涨和看跌期权，这些期权是路径无关的，障碍期权是路径相关的。障碍期权与普通期权在许多方面相似，唯一的区别是存在一个触发条件。*敲入*期权在基础资产触及预定的敲入障碍之前是无效的。相反，*敲出*障碍期权在其生命周期一开始是有效的，只有当价格突破敲出障碍价时，它才变得无效。此外，如果障碍期权到期时未激活，它可能一文不值，或者会按溢价的一定比例支付现金回扣。四种类型的障碍期权如下：
- en: '**Up-and-out**: In this barrier option, the price starts from below a barrier
    level. If it reaches the barrier, it is knocked out.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**上涨敲出**：在这种障碍期权中，价格从障碍下方开始。如果价格触及障碍，则会被敲出。'
- en: '**Down-and-out**: In this barrier option, the price starts from above a barrier.
    If it reaches the barrier, it is knocked out.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**下跌敲出**：在这种障碍期权中，价格从障碍上方开始。如果价格触及障碍，则会被敲出。'
- en: '**Up-and-in**: In this barrier option, the price starts down a barrier and
    has to reach the barrier to be activated.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**敲入上涨**：在这种障碍期权中，价格从障碍下方开始，必须触及障碍才能激活。'
- en: '**Down-and-in**: In this barrier option, the price starts over a barrier and
    has to reach the barrier to be activated.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**下行入场**：在这种障碍期权中，价格始于一个障碍点，并且必须达到该障碍点才能被激活。'
- en: 'The following Python program is for an up-and-out barrier option with a European
    call:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 以下Python程序适用于一个带有欧洲看涨期权的上行出场障碍期权：
- en: '[PRE13]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The basic design is that we simulate the stock movement n times, such as 100
    times. For each simulation, we have 100 steps. Whenever the stock price reaches
    the barrier, the payoff will be zero. Otherwise, the payoff will be a vanilla
    European call. The final value will be the summation of all call prices that are
    not knocked out, divided by the number of simulations, as shown in the following
    code:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 基本设计是模拟股票运动n次，例如100次。对于每次模拟，我们有100步。每当股票价格达到障碍点时，收益为零。否则，收益将是一个普通的欧洲看涨期权。最终的值将是所有未被打击的看涨期权价格的总和，再除以模拟次数，如下代码所示：
- en: '[PRE14]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The Python code for the down-and-in put option is shown as follows:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 下述是下行入场看跌期权的Python代码：
- en: '[PRE15]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Barrier in-and-out parity
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进出障碍平价
- en: 'If we buy an up-and-out European call and an up-and-in European call, then
    the following parity should hold good:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们购买一个上行出场的欧洲看涨期权和一个上行入场的欧洲看涨期权，则应满足以下平价关系：
- en: '![Barrier in-and-out parity](img/B06175_14_15.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![进出障碍平价](img/B06175_14_15.jpg)'
- en: 'The logic is very simple—if the stock price reaches the barrier, then the first
    call is worthless and the second call will be activated. If the stock price never
    touches the barrier, the first call will remain active, while the second one is
    never activated. Either way, one of them is active. The following Python program
    illustrates such scenarios:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 逻辑非常简单——如果股票价格触及障碍点，则第一个看涨期权失效，第二个看涨期权被激活。如果股票价格从未触及障碍点，第一个看涨期权保持有效，而第二个则永远不会被激活。无论哪种情况，其中一个期权是有效的。以下Python程序演示了这种情境：
- en: '[PRE16]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'We input a set of values to test whether the summation of an up-and-out call
    and an up-and-in call will be the same as a vanilla call:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 我们输入一组值来测试一个上行出场看涨期权与一个上行入场看涨期权的总和是否与一个普通看涨期权相同：
- en: '[PRE17]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The related output is shown here:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 相关的输出如下所示：
- en: '[PRE18]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Graph of up-and-out and up-and-in parity
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 上行出场与上行入场平价图
- en: 'It is a good idea to use the Monte Carlo simulation to present such parity.
    The following code is designed to achieve this. To make our simulation clearer,
    we deliberately choose just five simulations:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 使用蒙特卡罗模拟来呈现这种平价是一个不错的主意。以下代码旨在实现这一点。为了让我们的模拟更清晰，我们故意选择了仅进行五次模拟：
- en: '[PRE19]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The corresponding graph is shown as follows. Note that in the preceding program,
    since the seed is used, different users should get the same graphs if the same
    seed is applied:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 对应的图形如下所示。请注意，在前面的程序中，由于使用了种子，若使用相同的种子，不同的用户应该得到相同的图形：
- en: '![Graph of up-and-out and up-and-in parity](img/B06175_14_03.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![上行出场与上行入场平价图](img/B06175_14_03.jpg)'
- en: Pricing lookback options with floating strikes
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用浮动行权价定价回望期权
- en: 'The lookback options depend on the paths (history) travelled by the underlying
    security. Thus, they are also called path-dependent exotic options. One of them
    is named floating strikes. The payoff function of a call when the exercise price
    is the minimum price achieved during the life of the option is given as follows:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 回望期权取决于标的资产所经历的路径（历史）。因此，它们也被称为路径依赖的奇异期权。其中一种被称为浮动行权价。当行使价格为期权生命周期内达到的最低价格时，给定的看涨期权的收益函数如下所示：
- en: '![Pricing lookback options with floating strikes](img/B06175_14_16.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![使用浮动行权价定价回望期权](img/B06175_14_16.jpg)'
- en: 'The Python code for this lookback option is shown as follows:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 这是该回望期权的Python代码：
- en: '[PRE20]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Remember that the previous function needs two modules. Thus, we have to import
    those modules before we call the function, as shown in the following code:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，前面的函数需要两个模块。因此，我们必须在调用函数之前导入这些模块，如下代码所示：
- en: '[PRE21]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The result for one run is shown as follows:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 一次运行的结果如下所示：
- en: '[PRE22]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Appendix A – data case 7 – hedging crude oil
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录A – 数据案例7 – 对冲原油
- en: 'Assume that a refinery is using crude oil every day. Thus, they have to face
    the risk of price uncertainty of their main raw materials: crude oil. There is
    a tradeoff between protecting their bottom line and running production smoothly;
    the company studies all possible outcomes, such as hedge the oil price or not
    hedge at all. Assume that the total annual crude oil consumption is 20 million
    gallons. Again, the company has to operate every day. Compare the following several
    strategies and point out their advantages and disadvantages:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 假设一家炼油厂每天使用原油。因此，他们必须面对主要原材料——原油价格的不确定性风险。保护底线和确保生产顺利之间存在权衡；公司研究所有可能的结果，例如是否对冲油价，或者完全不对冲。假设总的年原油消耗量为2000万加仑。再次强调，公司每天都必须运营。比较以下几种策略，并指出其优缺点：
- en: No hedging
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不进行对冲
- en: Use futures
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用期货
- en: Use options
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用期权
- en: Use exotic option
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用外汇期权
- en: 'Several strategies exist, such as American options; see its specification in
    the following table. Some of the crude oil options contract specifications are
    shown in the following table:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 存在几种策略，例如美国式期权；请参见下表中的规格。以下表格展示了部分原油期权合约的规格：
- en: '| **Contract unit** | A Light Sweet Crude Oil Put (Call) Option traded on the
    Exchange represents an option to assume a short (long) position in the underlying
    Light Sweet Crude Oil Futures traded on the Exchange. |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| **合约单位** | 在交易所交易的轻质甜油看跌（看涨）期权代表着在交易所交易的轻质甜油期货中持有空头（多头）仓位的期权。 |'
- en: '| **Minimum price fluctuation** | $0.01 per barrel. |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| **最小价格波动** | 每桶$0.01。 |'
- en: '| **Price quotation** | U.S. dollars and cents per barrel. |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| **价格报价** | 每桶以美元和美分计。 |'
- en: '| **Product code** | CME Globex: LO, CME ClearPort: LO, Clearing: LO. |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| **产品代码** | CME Globex: LO, CME ClearPort: LO, 清算: LO。 |'
- en: '| **Listed contracts** | Monthly contracts listed for the current year and
    the next five calendar years, and June and December contracts for three additional
    years. Monthly contracts for the balance of a new calendar year will be added
    following the termination of trading in the December contract of the current year.
    |'
  id: totrans-119
  prefs: []
  type: TYPE_TB
  zh: '| **上市合约** | 当前年份和接下来五个日历年份的每月合约，以及三个额外年份的6月和12月合约。新日历年的剩余每月合约将在当前年12月合约交易终止后加入。
    |'
- en: '| **Termination of trading** | Trading terminates three business days before
    the termination of trading in the underlying futures contract. |'
  id: totrans-120
  prefs: []
  type: TYPE_TB
  zh: '| **交易终止** | 交易在相关期货合约的交易终止前三个工作日终止。 |'
- en: '| **Exercise style** | American. |'
  id: totrans-121
  prefs: []
  type: TYPE_TB
  zh: '| **交易风格** | 美国式。 |'
- en: '| **Settlement method** | Deliverable. |'
  id: totrans-122
  prefs: []
  type: TYPE_TB
  zh: '| **结算方式** | 可交割。 |'
- en: '| **Underlying** | Light Sweet Crude Oil Futures. |'
  id: totrans-123
  prefs: []
  type: TYPE_TB
  zh: '| **标的** | 轻质甜油期货。 |'
- en: 'Table 1: Some specification for crude oil options contract'
  id: totrans-124
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 表1：原油期权合约的一些规格
- en: 'If we use futures to hedge, we have the following formula:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们使用期货进行对冲，我们有以下公式：
- en: '![Appendix A – data case 7 – hedging crude oil](img/B06175_14_17.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![附录A – 数据案例7 – 对冲原油](img/B06175_14_17.jpg)'
- en: '*N* is the number of futures contract, *VA* is the value of our portfolio (amount
    we want to hedge), β is the slope of a regression based on our material and the
    underlying instruments (note if our material is the same as the underlying hedging
    instrument, then beta is 1), and *VF* is the value of one futures contract:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '*N* 是期货合约的数量，*VA* 是我们的投资组合价值（我们想要对冲的金额），β 是基于我们材料和标的工具的回归斜率（注意如果我们的材料与标的对冲工具相同，那么
    β 等于 1），*VF* 是一个期货合约的价值：'
- en: 'Source: [http://www.cmegroup.com/trading/energy/crude-oil/light-sweet-crude_contractSpecs_options.html?gclid=CLjWq92Yx9ICFU1MDQodP5EDLg&gclsrc=aw.ds](http://www.cmegroup.com/trading/energy/crude-oil/light-sweet-crude_contractSpecs_options.html?gclid=CLjWq92Yx9ICFU1MDQodP5EDLg&gclsrc=aw.ds)'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '来源: [http://www.cmegroup.com/trading/energy/crude-oil/light-sweet-crude_contractSpecs_options.html?gclid=CLjWq92Yx9ICFU1MDQodP5EDLg&gclsrc=aw.ds](http://www.cmegroup.com/trading/energy/crude-oil/light-sweet-crude_contractSpecs_options.html?gclid=CLjWq92Yx9ICFU1MDQodP5EDLg&gclsrc=aw.ds)'
- en: 'Source of data: *Crude Oil Prices: West Texas Intermediate (WTI) - Cushing,
    Oklahoma (DCOILWTICO)*, [https://fred.stlouisfed.org/series/DCOILWTICO/downloaddata](https://fred.stlouisfed.org/series/DCOILWTICO/downloaddata)'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '数据来源: *原油价格：西德克萨斯中质油（WTI）- 俄克拉荷马州库欣（DCOILWTICO）*，[https://fred.stlouisfed.org/series/DCOILWTICO/downloaddata](https://fred.stlouisfed.org/series/DCOILWTICO/downloaddata)'
- en: 'One related dataset is called `crudeOilPriceDaily.pkl`. The first and last
    several observations are shown here. The dataset is downloadable at [http://canisius.edu/~yany/python/crudeOilPriceDaily.pkl](http://canisius.edu/~yany/python/crudeOilPriceDaily.pkl):'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个相关的数据集叫做`crudeOilPriceDaily.pkl`。这里显示的是该数据集的前几条和最后几条观测值。该数据集可以在[http://canisius.edu/~yany/python/crudeOilPriceDaily.pkl](http://canisius.edu/~yany/python/crudeOilPriceDaily.pkl)下载：
- en: '[PRE23]'
  id: totrans-131
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: References
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: '*Clewlow, Les and Chris Strickland,1997*, *Exotic Options, the state of the
    art, Thomaston Business Press*'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Clewlow，Les和Chris Strickland，1997年*，*《异型期权，技术前沿》，Thomaston Business Press*'
- en: '*Kurtverstegen*, *Simulation: simulating uncorrelated and correlated random
    variables*, [https://kurtverstegen.wordpress.com/2013/12/07/simulation/](https://kurtverstegen.wordpress.com/2013/12/07/simulation)'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Kurtverstegen*，*《模拟：模拟无相关和相关的随机变量》*， [https://kurtverstegen.wordpress.com/2013/12/07/simulation/](https://kurtverstegen.wordpress.com/2013/12/07/simulation)'
- en: '*Zhang, Peter, 1998*, *Exotic Options, World Scientific, the 2nd edition*'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*张，彼得，1998年*，*《异型期权》，世界科学出版社，第2版*'
- en: Exercises
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 练习
- en: What is the definition of exotic options?
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 异型期权的定义是什么？
- en: Why is it claimed that a callable bond is equivalent to a normal bond plus a
    Bermudan option (the issuing company is the buyer of this Bermudan option while
    the bond buyer is the seller)?
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为什么有人说可赎回债券相当于普通债券加上一种Bermudan期权（发行公司是这个Bermudan期权的买方，而债券买方是卖方）？
- en: Write a Python program to price an Asian average price put based on the arithmetic
    mean.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，根据算术平均数定价一个亚洲平均价格看跌期权。
- en: Write a Python program to price an Asian average price put based on the geometric
    mean.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，根据几何平均数定价一个亚洲平均价格看跌期权。
- en: Write a Python program to price an up-and-in call (barrier option).
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，定价一个向上障碍期权（up-and-in call）。
- en: Write a Python program to price a down-and-out put (barrier option).
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，定价一个向下障碍期权（down-and-out put）。
- en: Write a Python program to show the down-and-out and down-and-in parity.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，展示向下障碍期权和向下敲入期权的平价关系。
- en: Write a Python program to use `permutation()` from SciPy to select 12 monthly
    returns randomly from the past five-year data without placement. To test your
    program, you can use Citigroup and the time period January 1, 2009 to December
    31, 2014 from Yahoo Finance.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，使用SciPy中的`permutation()`函数，从过去五年的数据中随机选择12个月的回报，并且不放回。测试程序时，可以使用花旗银行的数据，时间段为2009年1月1日到2014年12月31日，数据来自Yahoo
    Finance。
- en: Write a Python program to run bootstrapping with n given returns. For each time,
    we select m returns where m>n.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，使用n个给定的回报进行自助法。每次选择m个回报，其中m>n。
- en: In this chapter, we have learned that a simple chooser option has the following
    price formula:![Exercises](img/B06175_14_18.jpg)
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了一个简单的chooser期权的定价公式：![Exercises](img/B06175_14_18.jpg)
- en: Here, T is the maturity date (in years) and τ is the time when the option makes
    its decision whether it prefers a call or a put. Is it possible to have the following
    formula?
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这里，T是到期日（以年为单位），τ是期权决定选择看涨还是看跌的时间。是否可以使用以下公式？
- en: '![Exercises](img/B06175_14_19.jpg)'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![Exercises](img/B06175_14_19.jpg)'
- en: When the stock pays a continuously compounded dividend, dividend yield δ, we
    have the following pricing formula for Chooser options:![Exercises](img/B06175_14_20.jpg)
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当股票支付连续复利的股息，股息收益率为δ时，我们有以下的Chooser期权定价公式：![Exercises](img/B06175_14_20.jpg)
- en: 'Where *Pchooser* is the price or premium for a chooser option, *call (T)* is
    a European call with a maturity T. *put(τ)* will be defined soon. For the first
    *call (T)* option, we have the following pricing formula:'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 其中*Pchooser*是chooser期权的价格或溢价，*call (T)*是到期时间为T的欧洲看涨期权，*put(τ)*将在后续定义。对于第一个*call
    (T)*期权，我们有以下定价公式：
- en: '![Exercises](img/B06175_14_21.jpg)'
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![Exercises](img/B06175_14_21.jpg)'
- en: 'Where *call(T)* is the call price or premium, *S* is today''s price, *K* is
    the exercise price, T is the maturity in years, σ is the volatility, and *N()*
    is the cumulative standard normal distribution. Actually, this is exactly the
    Black-Scholes-Merton call option model. Put (τ) has the following formula:'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 其中*call(T)*是看涨期权价格或期权溢价，*S*是今天的价格，*K*是执行价格，T是期权到期时间（以年为单位），σ是波动率，*N()*是累积分布函数。实际上，这正是Black-Scholes-Merton看涨期权模型。看跌期权(τ)的公式如下：
- en: '![Exercises](img/B06175_14_22.jpg)'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![Exercises](img/B06175_14_22.jpg)'
- en: Write a related Python program.
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 编写一个相关的Python程序。
- en: If two stocks prices are $40 and $55 today, the standard deviations of returns
    for those two stocks are 0.1 and 0.2, respectively. Their correlation is 0.45\.
    What is the price of the rainbow call options based on the maximum of the terminal
    stock price of those two stocks? The exercise price is $60 and maturity is six
    months and the risk-free rate is 4.5%.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果今天两只股票的价格分别是 $40 和 $55，这两只股票的收益率标准差分别为 0.1 和 0.2。它们的相关系数为 0.45。基于这两只股票终端股价的最大值，彩虹看涨期权的价格是多少？行权价为
    $60，期限为六个月，无风险利率为 4.5%。
- en: 'Explain the differences and similarities between the univariate cumulative
    standard normal distribution and the bivariate cumulative standard normal distribution.
    For both univariate cumulative standard normal distribution, `N_f()` and the bivariate
    cumulative standard normal distribution, `N2_f()`, we have the following codes:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解释单变量累积标准正态分布与双变量累积标准正态分布之间的异同。对于单变量累积标准正态分布 `N_f()` 和双变量累积标准正态分布 `N2_f()`，我们有以下代码：
- en: '[PRE24]'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Write a Python program to price a call option on the maximum of two terminal
    prices of two assets that are correlated:![Exercises](img/B06175_14_23.jpg)
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个 Python 程序来定价基于两只相关资产终端价格最大值的看涨期权：![练习](img/B06175_14_23.jpg)
- en: Note
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The definitions of *S1*, *S2*, *d1*, *d2*, *d11*, *d12*, *d21*, *d22*, and the
    `N2()` function are defined in the chapter.
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*S1*、*S2*、*d1*、*d2*、*d11*、*d12*、*d21*、*d22* 和 `N2()` 函数的定义在本章中有说明。'
- en: Based on Monte Carlo simulation, write a Python program to price a put option
    on the minimum of two terminal prices of two assets that are correlated.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 基于蒙特卡洛模拟，编写一个 Python 程序来定价两只相关资产的最小终端价格的卖出期权。
- en: In this chapter, two programs related to American and Bermudan options, with
    the set of inputs of *s=40*, *x=40*, *T=6./12*, *r=0.05*, *sigma=0.2*, *n=1000*,
    *T2=(3./12.,4./1)*; a few dates for potential early exercise offer the same results.
    Why?
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在本章中，涉及美式期权和百慕大期权的两个程序，其输入集为 *s=40*、*x=40*、*T=6./12*、*r=0.05*、*sigma=0.2*、*n=1000*、*T2=(3./12.,4./1)*；对于潜在的提前行使日期，提供相同的结果。为什么？
- en: Write a Python program to price Bermudan put options.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个 Python 程序来定价百慕大卖出期权。
- en: Write a Python program to price a Rainbow call option based on the minimum terminal
    prices of five assets.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个 Python 程序来定价基于五个资产最小终端价格的彩虹看涨期权。
- en: Summary
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: The options we've discussed in [Chapter 10](ch10.html "Chapter 10. Options and
    Futures"), *Options and Futures* are usually called vanilla options that have
    a close-form solution, that is, the Black-Scholes-Merton option model. In addition
    to those vanilla options, many exotic options exist. In this chapter, we have
    discussed several types of exotic options, such as Bermudan options, simple chooser
    options, shout and binary options, average price options, Up-and-in options, up-and-out
    options, and down-and-in and down-and-out options. For a European call, the option
    buyer could exercise their right at the maturity date, while for an American option
    buyer, they could exercise their right any time before or on the maturity date.
    A Bermudan option could be exercised a few times before maturity.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在[第10章](ch10.html "第10章。期权与期货")中讨论的期权，*期权与期货* 通常称为普通期权，它们有封闭形式的解，即 Black-Scholes-Merton
    期权模型。除了这些普通期权外，还有许多异域期权存在。在本章中，我们讨论了几种类型的异域期权，如百慕大期权、简单选择期权、喊叫期权和二元期权、平均价格期权、上进期权、上出期权、下进期权和下出期权。对于欧式看涨期权，期权买方只能在到期日行使权利，而对于美式期权买方，他们可以在到期日前或到期日当天随时行使权利。百慕大期权可以在到期前的几个时间点行使。
- en: In the next chapter, we will discuss various volatility measures, such as our
    conventional standard deviation, **Lower Partial Standard Deviation** (**LPSD**).
    Using the standard deviation of returns as a risk measure is based on a critical
    assumption that stock returns follow a normal distribution. Because of this, we
    introduce several normality tests. In addition, we graphically show volatility
    clustering—high volatility is usually followed by a high-volatility period, while
    low volatility is usually followed by a low-volatility period. To deal with this
    phenomenon, the **Autoregressive Conditional Heteroskedasticity** (**ARCH**) process
    was developed by Angel (1982), and the **Generalized AutoRegressive Conditional
    Heteroskedasticity** (**GARCH**) processes, which are extensions of ARCH, were
    developed by Bollerslev (1986). Their graphical presentations and related Python
    programs will also be covered in the next chapter.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将讨论各种波动性度量方法，例如我们常用的标准差，**下偏标准差**（**LPSD**）。将收益的标准差作为风险度量依据了一个关键假设，即股票收益服从正态分布。基于这一点，我们引入了几种正态性检验。此外，我们还通过图示展示了波动性聚集现象——高波动性通常会跟随一个高波动期，而低波动性则通常会跟随一个低波动期。为了解决这一现象，Angel（1982）提出了**自回归条件异方差**（**ARCH**）过程，Bollerslev（1986）则提出了**广义自回归条件异方差**（**GARCH**）过程，这些是ARCH过程的扩展。它们的图示及相关的Python程序将在下一章中讨论。
