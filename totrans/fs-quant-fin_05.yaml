- en: Chapter 5. Learning Option Pricing
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, you will learn how to get started with option pricing using
    the Black-Scholes formula and the Monte Carlo method. We'll compare the two methods
    and see where they are most suitable in real-world applications.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
- en: 'In this chapter you will learn:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
- en: The Black-Scholes option pricing formula
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to use the Monte Carlo method to price options
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: European, American, and Exotic options
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: How to use real market data from Yahoo! Finance in option pricing
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Plotting the greeks in F#
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The basics of Wiener processes and the Brownian motion
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The basics of stochastic differential equations
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction to options
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Options come in two variants, puts and calls. The call option gives the owner
    of the option the right, but not the obligation, to buy the underlying asset at
    the strike price. The `put` option gives the holder of the contract the right,
    but not the obligation, to sell the underlying asset. The Black-Scholes formula
    describes the European option, which can only be exercised on the maturity date,
    in contrast to, for example, American options. The buyer of the option pays a
    premium for this in order to cover the risk taken from the counterpart's side.
    Options have become very popular and they are used in the major exchanges throughout
    the world, covering most asset classes.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
- en: The theory behind options can become complex pretty quickly. In this chapter,
    we'll look at the basics of options and how to explore them using the code written
    in F#.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
- en: Looking into contract specifications
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Options come in a wide number of variations, some of which will be covered
    briefly in this section. The contract specifications for options will also depend
    on their type. Generally, there are some properties that are more or less general
    to all of them. The general specifications are as follows:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
- en: Side
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Quantity
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Strike price
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Expiration date
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Settlement terms
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The contract specifications, or known variables, are used when we valuate options.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
- en: European options
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: European options are the basic form of options that other types of options extend.
    American options and Exotic options are some examples. We'll stick to European
    options in this chapter.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
- en: American options
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: American options are options that may be exercised on any trading day on or
    before expiry.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
- en: Exotic options
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Exotic options are options belonging to the broad category of options, which
    may include complex financial structures, and may be combinations of other instruments
    as well.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
- en: Learning about Wiener processes
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Wiener processes are closely related to stochastic differential equations and
    volatility. A Wiener process, or the geometric Brownian motion, is defined as
    follows:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
- en: '![Learning about Wiener processes](img/4623OS_05_01.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
- en: The preceding formula describes the change in the stock price or the underlying
    asset with a drift, µ, and a volatility, σ, and the Wiener process, *Wt*. This
    process is used to model the prices in Black-Scholes.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
- en: 'We''ll simulate market data using a Brownian motion or a Wiener process implemented
    in F# as a sequence. Sequences can be infinite and only the values used are evaluated,
    which suits our needs. We''ll implement a generator function to generate the Wiener
    process as a sequence as follows:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Here, we use the random function in `normd.Sample()`. Let's explain the parameters
    and the theory behind the Brownian motion before looking at the implementation.
    The parameter `T` is the time used to create a discrete time increment `dt`. Notice
    that `dt` will assume there are 500 `N`:`s`, 500 items in the sequence; this of
    course is not always the case, but it will do fine here. Next, we use recursion
    to create the sequence, where we add an increment to the previous value *(x+...)*,
    where x corresponds to *xt-1*.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
- en: 'We can easily generate an arbitrary length of the sequence as follows:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Here, we create a sequence of length `50`. Let''s plot the sequence to get
    a better understanding about the process as shown in the following screenshot:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
- en: '![Learning about Wiener processes](img/4623OS_05_02.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
- en: A Wiener process generated from the preceding sequence generator
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
- en: 'Next, we''ll look at the following code to generate the graph shown in the
    preceding screenshot:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Most of the code will be familiar to you at this stage, but the interesting
    part is the last line, where we can simply feed a chosen number of elements from
    the sequence into `Seq.iter`, which will plot the values elegantly and efficiently.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
- en: Learning the Black-Scholes formula
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Black-Scholes formula was developed by *Fischer Black* and *Myron Scholes*
    in the 1970s. The Black-Scholes formula is a stochastic partial differential equation
    which estimates the price of an option. The main idea behind the formula is the
    delta neutral portfolio. They created the theoretical delta neutral portfolio
    to reduce the uncertainty involved.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
- en: 'This was a necessary step to be able to come to the analytical formula, which
    we''ll cover in this section. The following are the assumptions made under the
    Black-Scholes formula:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
- en: No arbitrage
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Possible to borrow money at a constant risk-free interest rate (throughout the
    holding of the option)
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Possible to buy, sell, and shortlist fractional amounts of underlying assets
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: No transaction costs
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Price of the underlying asset follows a Brownian motion, constant drift, and
    volatility
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: No dividends paid from underlying security
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The simplest of the two variants is the one for `call` options. First, the
    stock price is scaled using the cumulative distribution function with `d1` as
    a parameter. Then, the stock price is reduced by the discounted strike price scaled
    by the cumulative distribution function of `d2`. In other words, it''s the difference
    between the stock price and the strike price using probability scaling of each
    and discounting the strike price:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
- en: '![Learning the Black-Scholes formula](img/4623OS_05_03.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
- en: 'The formula for the `put` option is a little more involved, but follows the
    same principles, shown as follows:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
- en: '![Learning the Black-Scholes formula](img/4623OS_05_04.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
- en: 'The Black-Scholes formula is often separated into parts, where `d1` and `d2`
    are the probability factors describing the probability of the stock price being
    related to the strike price:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
- en: '![Learning the Black-Scholes formula](img/4623OS_05_05.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
- en: 'The parameters used in the preceding formula can be summarized as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
- en: '**N**: The cumulative distribution function'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**T**: Time to maturity, expressed in years'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**S**: The stock price or other underlying assets'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**K**: The strike price'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**r**: The risk-free interest rate'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**σ**: The volatility of the underlying assets'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Implementing Black-Scholes in F#
  id: totrans-64
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now that we''ve looked at the basics behind the Black-Scholes formula and the
    parameters involved, we can implement it ourselves. The cumulative distribution
    function is implemented here to avoid dependencies and to illustrate that it''s
    quite simple to implement it yourself too. The Black-Scholes formula is implemented
    in F# by using the following code. It takes six arguments; the first is a call-put-flag
    that determines if it''s a `call` or `put` option. The constants `a1` to `a5`
    are the Taylor series coefficients used in the approximation for the numerical
    implementation:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Let''s use the `black_scholes` function using some numbers for the `call` and
    `put` options. Suppose we want to know the price of an option where the underlying
    asset is a stock traded at $58.60 with an annual volatility of 30 percent. The
    risk-free interest rate is, let''s say, one percent. We can use our formula that
    we defined previously to get the theoretical price according to the Black-Scholes
    formula of a `call` option with six months to maturity (0.5 years):'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'We will get the value for the `put` option just by changing the flag of the
    function:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Sometimes, it''s more convenient to express the time to maturity in number
    of days instead of years. Let''s introduce a helper function for that purpose:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Note the number `365.25`, which includes the factor for leap years. This is
    not necessary in our examples, but is used for correctness. We can now use this
    function instead when we know the time in days:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Let''s use the same preceding example, but now with `20` days to maturity:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Using Black-Scholes together with charts
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Sometimes, it''s useful to be able to plot the price of an option until expiration.
    We can use our previously defined functions and vary the time left and plot the
    values coming out. In this example, we''ll make a program that outputs the graph
    shown in the following screenshot:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
- en: '![Using Black-Scholes together with charts](img/4623OS_05_06.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
- en: A chart showing prices for call and put options as a function of time
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
- en: 'The following code is used to generate the graph in the preceding screenshot:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The preceding code is just a modified version of the code shown in the previous
    chapter with the options parts added. We have two series in this chart, one for
    `call` options and one for `put` options. We also add a legend for each of the
    series. The last part is the calculation of the prices and the actual plotting.
    List comprehensions are used for compact code, and the Black-Scholes formula is
    called everyday until expiration, where the days are counted down by one day at
    each step.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
- en: It's up to you as the reader to modify the code to plot various aspects of the
    option, such as the option price as a function of an increase in the underlying
    stock price, and so on.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
- en: Introducing the greeks
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The **greeks** are partial derivatives of the Black-Scholes formula with respect
    to a particular parameter, such as time, rate, volatility, or stock price. The
    greeks can be divided into two or more categories with respect to the order of
    the derivatives. In this section, we'll look at the first-order and second-order
    greeks.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
- en: First-order greeks
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this section, we''ll present the first-order greeks using the following
    table:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
- en: '| Name | Symbol | Description |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
- en: '| Delta | Δ | Rate of change of option value with respect to the change in
    the price of the underlying asset. |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
- en: '| Vega | ν | Rate of change of option value with respect to the change in the
    volatility of the underlying asset. It is referred to as the volatility sensitivity.
    |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
- en: '| Theta | Θ | Rate of change of option value with respect to time. The sensitivity
    with respect to time will decay as time elapses, and this phenomenon is referred
    to as the time decay. |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
- en: '| Rho | ρ | Rate of change of option value with respect to the interest rate.
    |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
- en: Second-order greeks
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'In this section, we''ll present the second-order greeks using the following
    table:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
- en: '| Name | Symbol | Description |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
- en: '| Gamma | Γ | Rate of change of delta with respect to a change in the price
    of the underlying asset. |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
- en: '| Veta | - | Rate of change in Vega with respect to time. |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
- en: '| Vera | - | Rate of change in Rho with respect to volatility. |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
- en: Tip
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Some of the second-order greeks are omitted for clarity; we'll not cover these
    in this book.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
- en: Implementing the greeks in F#
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Let''s implement the greeks: Delta, Gamma, Vega, Theta, and Rho. First, we
    look at the formulas for each greek. In some of the cases, they vary for calls
    and puts respectively as shown in the following table:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
- en: '![Implementing the greeks in F#](img/4623OS_05_07.jpg)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
- en: 'We need the derivative of the cumulative distribution function, which in fact
    is the normal distribution with a mean of 0 and standard deviation of 1:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Delta
  id: totrans-109
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Delta** is the rate of change of the option price with respect to the change
    in the price of the underlying asset:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Gamma
  id: totrans-112
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Gamma** is the rate of change of delta with respect to the change in the
    price of the underlying asset. This is the second derivative with respect to the
    price of the underlying asset. It measures the acceleration of the price of the
    option with respect to the underlying price:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Vega
  id: totrans-115
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Vega** is the rate of change of the option value with respect to the change
    in the volatility of the underlying asset. It is referred to as the sensitivity
    of the volatility:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Theta
  id: totrans-118
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Theta** is the rate of change of the option value with respect to time. The
    sensitivity with respect to time will decay as time elapses, and this phenomenon
    is referred to as the time decay:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Rho
  id: totrans-121
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: '**Rho** is the rate of change of the option value with respect to the interest
    rate:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Investigating the sensitivity of the greeks
  id: totrans-124
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Now that we have all the greeks implemented, we'll investigate the sensitivity
    of some of them and see how they vary when the underlying stock price changes.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
- en: 'The following screenshot is a surface plot with four of the greeks where the
    time and the underlying price is changing. This figure is generated in MATLAB,
    and will not be generated in F#. We''ll use a 2D version of the graph to study
    the greeks as shown in the following screenshot:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
- en: '![Investigating the sensitivity of the greeks](img/4623OS_05_08.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
- en: The surface plot of Delta, Gamma, Theta, and Rho of a call option
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section, we''ll start by plotting the value of Delta for a `call` option
    where we vary the price of the underlying asset. This will result in the following
    2D plot as shown in the following screenshot:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
- en: .
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
- en: '![Investigating the sensitivity of the greeks](img/4623OS_05_09.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
- en: A plot of call option delta versus the price of the underlying asset
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
- en: 'The result in the plot shown in the preceding screenshot will be generated
    by the code presented next. We''ll reuse most of the code from the example where
    we looked at the option prices for calls and puts. A slightly modified version
    is presented in the following code, where the price of the underlying asset varies
    from $10.0 to $70.0:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'We can extend the code to plot all four greeks, as shown in the screenshot
    with the 2D surface plots. The result will be a graph as shown in the following
    screenshot:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
- en: '![Investigating the sensitivity of the greeks](img/4623OS_05_10.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
- en: A graph showing greeks for a call option with respect to a price change (x axis)
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
- en: Code listing for visualizing the four greeks
  id: totrans-138
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The following is the code listing for the entire program used to create the
    preceding graph:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'We''ll create a series for each greek as follows:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Next, we''ll calculate the values to plot for each greek:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: The Monte Carlo method
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The Monte Carlo method is used to sample numerical integration using random
    numbers and to study the mean value of a large number of samples. The Monte Carlo
    method is especially useful when there is no closed form solution available.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
- en: 'In this section, we''ll look at the simplest case, where we have path-dependent
    European options. We are going to sample numerical integration using a random
    drifting parameter. This will lead to various average values for the stochastic
    process, which makes up the movement of the underlying asset. We''ll do this using
    1,000 and 1,000,000 samples respectively and compare the results. Let''s dig into
    the following code:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将研究最简单的情况，其中我们有路径依赖的欧洲期权。我们将使用随机漂移参数来进行数值积分采样。这将导致随机过程的各种平均值，构成了基础资产的运动。我们将分别使用1,000和1,000,000个样本进行计算，并比较结果。让我们深入研究以下代码：
- en: '[PRE20]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Let''s test it with the same values used for the Black-Scholes formula for
    a `put` option:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们用与`put`期权的Black-Scholes公式相同的数值来测试它：
- en: '[PRE21]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'This is close to being spot on; we can increase the number of samples and see
    if we get another value:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 这个结果接近准确；我们可以增加样本数，看看是否得到另一个值：
- en: '[PRE22]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The preceding code uses the following formula to accomplish the task of estimating
    the price. In a short summary, the Monte Carlo method here can be thought of as
    a random pick of the drifting parameter `σ*rnd*sqrt(t)`. The mean of all these
    samples generated will then represent the estimated value of the option at maturity.
    In reality, the Monte Carlo method is not used for European options, in contrast
    to what''s illustrated in this section. The choice of European options was mainly
    due to simplicity, to illustrate the concepts:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 上述代码使用以下公式来完成估算价格的任务。简而言之，这里的蒙特卡罗方法可以看作是随机选择漂移参数`σ*rnd*sqrt(t)`。所有这些生成的样本的平均值将代表期权到期时的估算值。实际上，蒙特卡罗方法并不用于欧洲期权，这与本节中所展示的情况相反。选择欧洲期权主要是出于简单性考虑，用以说明这些概念：
- en: '![The Monte Carlo method](img/4623OS_05_11.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![蒙特卡罗方法](img/4623OS_05_11.jpg)'
- en: The formula to estimate the sample value of a price at maturity for an asset
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 用于估算资产到期时价格样本值的公式
- en: Summary
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we looked at option pricing in F# using the famous Black-Scholes
    formula together with the Monte Carlo method for European options. Once again,
    F# has proven itself powerful, and in numerical implementations, this is especially
    true. The code is almost identical to the mathematical functions, which makes
    it easy to implement without any extra ceremony needed. The lessons learned in
    this chapter will be used in the next chapter to dig deeper into options and volatility.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们使用著名的Black-Scholes公式结合蒙特卡罗方法研究了F#中的期权定价。F#再次证明了其强大的功能，特别是在数值实现方面。这段代码几乎与数学公式完全相同，因此很容易实现，无需额外的繁琐步骤。本章中学到的知识将在下一章中用于深入探讨期权和波动性。
