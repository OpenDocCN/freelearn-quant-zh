- en: Chapter 11. Asset and Liability Management
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第11章 资产负债管理
- en: This chapter introduces the usage of R for commercial bank **asset and liability
    management (ALM)** purposes. The ALM function in a bank is traditionally associated
    with interest rate risk and liquidity risk management of banking book positions.
    Both of the interest rate positioning and liquidity risk management require the
    modeling of banking products. Nowadays, professional ALM units use complex **Enterprise
    Risk Management (ERM)** frameworks, which are able to incorporate the management
    of all risk types and provide an adequate tool for ALM to steer the balance sheet.
    Our general objective is to set up a simplified framework of ALM to illustrate
    the use of R for certain ALM tasks. These tasks are based on the interest rate
    and liquidity risk management and the modeling of non-maturing accounts.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了R在商业银行**资产负债管理（ALM）**中的应用。银行的ALM职能传统上与银行账本头寸的利率风险和流动性风险管理相关。利率定位和流动性风险管理都需要对银行产品进行建模。如今，专业的ALM部门使用复杂的**企业风险管理（ERM）**框架，这些框架能够整合各种风险类型的管理，并为ALM提供适当的工具，以指导资产负债表的管理。我们的总体目标是建立一个简化的ALM框架，展示如何使用R完成某些ALM任务。这些任务基于利率和流动性风险管理以及非到期账户的建模。
- en: This chapter is structured as follows. We start with the data-preparation process
    of ALM analysis. The process of planning and measurement needs special information
    about the banking book, market conditions, and the business strategy. This part
    establishes a data-management tool that consists of the major input datasets,
    and extracts data into the form that we use in the rest of this chapter.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章结构如下。我们从ALM分析的数据准备过程开始。规划和度量过程需要关于银行账本、市场状况和商业战略的特殊信息。本部分建立了一个数据管理工具，由主要的输入数据集组成，并将数据提取成我们在本章其余部分使用的形式。
- en: Next, we will be dealing with the measurement of the interest rate risk. There
    are two common approaches in the banking industry to quantify interest rate risk
    in the banking book. Simpler techniques use repricing gap table analysis to manage
    the interest rate risk exposure and calculate parallel yield curve shocks to forecast
    the **net interest income (NII)** and calculate the **market value of equity (MVoE)**.
    More advanced methods use dynamic simulation of balance sheets and stochastic
    simulation of interest rate development. Choosing which tool to use depends on
    the targets and the balance sheet structure.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将处理利率风险的度量。在银行业中，量化银行账本中的利率风险有两种常见方法。较简单的技术使用重新定价缺口表分析来管理利率风险敞口，并计算平行收益曲线冲击以预测**净利息收入（NII）**并计算**股本市场价值（MVoE）**。更先进的方法使用资产负债表的动态模拟和利率发展的随机模拟。选择使用哪种工具取决于目标和资产负债表的结构。
- en: For example, a savings bank (with client term deposits on the liability side
    and fix bond investments on the asset side) focuses on its market value of equity
    risk, while a corporate bank (with floating interest position) concentrates on
    the net interest income risk. We illustrate how to efficiently provide a repricing
    gap table and net interest income forecasts with R.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，一家储蓄银行（负债方有客户定期存款，资产方有固定收益债券投资）关注其股本市场价值风险，而一家企业银行（拥有浮动利率头寸）则专注于净利息收入风险。我们将演示如何使用R有效地提供重新定价缺口表和净利息收入预测。
- en: 'Our third topic is related to the liquidity risk. We define three types of
    liquidity risks: structural, funding, and contingency risks. Structural liquidity
    risks arise from the different contractual maturities on the asset and liability
    side. Commercial banks usually collect short-term client deposits and place the
    acquired funding into long-term client loans. As a result, the bank is exposed
    to a roll-over risk on the liability side as it is uncertain how much of the maturing
    short term client funding will be rolled over, which endangers the solvency of
    the bank. Funding liquidity risks occur during the roll-overs; it refers to the
    uncertainty of the cost of renewed funding. In ordinary course of business, even
    though a bank can roll over its maturing interbank deposits, the cost of the deals
    highly depends on the available liquidity on the market. Contingency risk refers
    to the behavior of the clients in unforeseen scenarios. For example, a contingency
    risk appears as sudden withdrawals of term deposits or premature repayments among
    the client loans. While ALM appropriately handles the structural and funding liquidity
    risks by regulating bank positions, contingency liquidity risks can only be hedged
    by buffering liquid assets. We show how to build up liquidity gap tables and forecast
    net financing needs.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的第三个主题与流动性风险有关。我们定义了三种类型的流动性风险：结构性、资金性和应急性风险。结构性流动性风险源于资产和负债方不同的合同到期。商业银行通常收集短期客户存款，并将获得的资金投入到长期客户贷款中。因此，银行面临负债方的滚动风险，因为无法确定有多少到期的短期客户资金将被展期，这可能危及银行的偿付能力。资金流动性风险发生在展期过程中；它指的是更新资金成本的不确定性。在日常业务中，即使银行能够展期到期的同业存款，交易成本也高度依赖市场上的流动性状况。应急性风险指的是客户在不可预见情境下的行为。例如，应急性风险可能表现为定期存款的突然提取或客户贷款的提前偿还。虽然ALM可以通过调节银行的头寸适当处理结构性和资金性流动性风险，但应急性流动性风险只能通过储备流动性资产来对冲。我们展示了如何建立流动性缺口表并预测净融资需求。
- en: In the last section of this chapter, we will concentrate on the modeling of
    non-maturing products. Client products can be classified by their maturity structure
    and interest rate behavior. Examples of typical non-maturing liability products
    are on-demand deposits and savings accounts without any notice period of withdrawal.
    The clients can withdraw their money at any time, while the bank has the right
    to modify the offered interest rate. On the asset side, overdrafts and credit
    cards show quite similar characteristics. The complex models of non-maturing products
    make the work of ALM quite challenging. Practically, the modeling of non-maturing
    products means the mapping of the cash-flow profiles, estimating the interest
    rate elasticity of the demand, and analyzing the liquidity-related costs in the
    internal **funds transfer pricing (FTP)** system. Here, we demonstrate how to
    measure the interest sensitivity of the non-maturing deposits.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的最后一节，我们将重点讨论非到期产品的建模。客户产品可以根据其到期结构和利率行为进行分类。典型的非到期负债产品示例包括活期存款和没有提前通知期的储蓄账户。客户可以随时提取他们的资金，而银行则有权调整提供的利率。在资产端，透支和信用卡具有类似的特征。非到期产品的复杂模型使得资产负债管理（ALM）工作变得相当具有挑战性。实际上，非到期产品的建模意味着现金流配置的映射、需求的利率弹性估算，以及在内部**资金转移定价（FTP）**系统中分析流动性相关的成本。这里，我们展示了如何衡量非到期存款的利率敏感性。
- en: Data preparation
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据准备
- en: Complex ERM software are essential tools in the banking industry to quantify
    the net interest income and the market value of equity risks, and to prepare reports
    particularly on the asset and liability portfolio, the re-pricing gaps, and the
    liquidity positions. We set up a simplified simulation and reporting environment
    using R, which reproduces the key features of the commercially used ALM software
    solutions.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 复杂的ERM软件是银行业必不可少的工具，用于量化净利息收入和股本市场风险，并特别准备有关资产负债组合、再定价缺口和流动性头寸的报告。我们使用R语言设置了一个简化的模拟和报告环境，重现了商业使用的ALM软件解决方案的关键特性。
- en: Typical ALM data processes follow the so-called **extract, transform, and load
    (ETL)** logic.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 典型的ALM数据处理流程遵循所谓的**提取、转换和加载（ETL）**逻辑。
- en: '![Data preparation](img/2078OT_11_01.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![数据准备](img/2078OT_11_01.jpg)'
- en: Extraction, which is the first phase, means that the bank has already collected
    the deal-level and account-based source data from the local **data warehouse (DWH)**,
    the mid-office, the controlling or the accounting systems. The source data of
    the total balance sheet (here called a portfolio) is also extracted in order to
    save calculation time, memory and storage space. Moreover, single deal-level data
    is aggregated by the given dimensions (for example, by currency denomination,
    interest behavior, amortization structure, and so on). Market data (such as yield
    curves, market prices, and volatility surfaces) is also prepared in a raw dataset.
    The next step is to set the simulation parameters (for example, yield curve shocks
    and volume increments of the renewed business), in which we call strategy. For
    the sake of simplicity, here we reduce this strategy to keep the existing portfolio
    therefore the balance sheet remains the same forecasted period.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 提取（这是第一阶段）意味着银行已经从本地**数据仓库（DWH）**、中台、控制系统或会计系统中收集了交易级别和账户级别的源数据。整个资产负债表的源数据（在这里称为组合）也被提取，以节省计算时间、内存和存储空间。此外，单笔交易级别数据按给定维度（例如，按货币面额、利率行为、摊销结构等）进行了汇总。市场数据（如收益曲线、市场价格和波动率表面）也被准备为原始数据集。下一步是设置模拟参数（例如，收益曲线冲击和续期业务的交易量增量），我们称之为策略。为了简化起见，这里我们将策略简化为保持现有组合，因此资产负债表在预测期内保持不变。
- en: At the stage of transformation, the portfolio, market, and strategy datasets
    are combined and used for further analysis, and are transformed into new structures.
    In our terms, this means that the cash-flow table is generated by using the portfolio
    and market descriptors, and it is converted into a narrow data form.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在转换阶段，组合、市场和策略数据集被结合在一起用于进一步分析，并转化为新的结构。用我们的话来说，这意味着现金流表是通过使用组合和市场描述符生成的，并且它被转化为一种狭义的数据形式。
- en: At the time of loading, the results are written into a reporting table. Usually,
    users can define what dimensions of the portfolio and values of risk measures
    should be loaded into the result database. We will show how liquidity risk and
    interest rate risk can be measured and documented in the following sections.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在加载时，结果被写入到报告表格中。通常，用户可以定义哪些组合维度和风险度量的值应被加载到结果数据库中。我们将在接下来的章节中展示如何衡量和记录流动性风险和利率风险。
- en: Data source at first glance
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据源初看之下
- en: 'We call the data source that lists the balance sheet items "portfolios". Market
    data (such as yield curves, market prices, and volatility surfaces) is also prepared
    in a raw dataset. Let''s import our initial datasets into R. First of all, we
    need to download the datasets and the functions to be used in this chapter from
    the link of Packt Publishing. Now, let''s import the sample portfolio and market
    datasets that are stored in standard `csv` format in a local folder that is used
    in the code as follows:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将列出资产负债表项目的数据源称为“组合”。市场数据（如收益曲线、市场价格和波动率表面）也被准备为原始数据集。让我们将初始数据集导入R。首先，我们需要从Packt
    Publishing的链接下载本章将使用的数据集和函数。现在，让我们导入存储在本地文件夹中的示例组合和市场数据集，这些数据集以标准`csv`格式存储，并在代码中如下所示使用：
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The selected datasets contain dates that have to be converted into the appropriate
    format. We transform the date formats with the `as.Date` function:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 选定的数据集包含需要转换为适当格式的日期。我们通过`as.Date`函数转换日期格式：
- en: '[PRE1]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Print the first few rows of the imported `portfolio` dataset with the `head(portfolio)`
    command. It results the following output:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`head(portfolio)`命令打印导入的`portfolio`数据集的前几行。其结果如下：
- en: '[PRE2]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The columns of this data frame refer to the identification number (the number
    of the row), the account type, and the product characteristics. The first three
    columns represent the product identifier, the account identifier (or the short
    name), and the long name of the account. Using the `levels` function, we can easily
    list the type of accounts that are related to the typical commercial bank products
    or balance sheet items:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 该数据框的列代表识别号（行号）、账户类型和产品特征。前三列表示产品标识符、账户标识符（或简称）以及账户的长名称。通过使用`levels`函数，我们可以轻松列出与典型商业银行产品或资产负债表项目相关的账户类型：
- en: '[PRE3]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `portfolio` dataset also contains the notional volume in EUR, the type of
    the interest binding (FIX or LIBOR), the repricing frequency of the account in
    the number of months (if the interest binding is LIBOR), and the spread component
    of the interest rate in basis points. Furthermore, other columns describe the
    cash-flow structure of the products. The columns are issue date (this is the first
    repricing day), maturity date, the type of principal repayment structure (bullet,
    linear, or annuity), and the repayment frequency in number of months. The last
    column stores the identifier of the interest rate curve, what we use for the calculation
    of future floating rate payments.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '`portfolio`数据集还包含欧元名义金额、利率绑定类型（固定利率或LIBOR）、账户的重新定价频率（以月为单位，如果利率绑定为LIBOR），以及利率的基点差值。此外，其他列描述了产品的现金流结构。列包括发行日期（即第一次重新定价的日期）、到期日期、本金偿还结构类型（一次性偿还、线性偿还或年金偿还），以及偿还频率（以月为单位）。最后一列存储利率曲线的标识符，用于计算未来浮动利率支付。'
- en: 'Actual interest rates are stored in the `market` dataset. Let''s list some
    of the first few rows to check the content:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 实际的利率存储在`market`数据集中。让我们列出前几行数据来检查其内容：
- en: '[PRE4]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The first column indicates the yield curve type (for example, yields are from
    the bond market or the interbank market). The `type` column has to be the same
    as in `portfolio` to connect the two datasets. The `date` column shows the maturity
    of the current rate, and `rate` indicates the value of the rate in basis points.
    As you can see, the yield curve is very unusual at this time as there are negative
    yield curve points for certain tenors. The last column stores the label of the
    yield curve tenor.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 第一列表示收益率曲线的类型（例如，收益率来自债券市场或银行间市场）。`type`列必须与`portfolio`中的列相同，以便将两个数据集连接起来。`date`列显示当前利率的到期日，`rate`表示利率的基点值。如您所见，此时的收益率曲线非常不寻常，因为某些期限的收益率曲线点为负值。最后一列存储收益率曲线期限的标签。
- en: 'The datasets reflect the current state of the bank portfolio and the current
    market environment. The actual date is September 30, 2014 in our analysis. Let''s
    declare it as a date variable called `NOW`:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 数据集反映了银行投资组合的当前状态以及当前的市场环境。在我们的分析中，实际日期为2014年9月30日。我们将其声明为一个名为`NOW`的日期变量：
- en: '[PRE5]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Now, we finished the preparation of our source data. This is a sample dataset
    created by the authors for illustrative purposes, and demonstrates the simplified
    version of a hypothetical commercial bank balance sheet structure.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经完成了源数据的准备。这是作者为说明目的创建的示例数据集，展示了一个假设的商业银行资产负债表结构的简化版本。
- en: Cash-flow generator functions
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 现金流生成函数
- en: After we import the static data of our balance sheet and the current yield curve,
    we use this information to generate the total cash-flow of the bank. First, we
    calculate the floating interest rates using the forward yield curve; after that,
    we can generate separately the principal and interest cash-flows. For this purpose,
    we predefine the basic functions to calculate principal cash-flows based on payment
    frequencies and to extract floating interest rates for variable interest rate
    products. This script is also available on the link provided by Packt Publishing.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在导入资产负债表的静态数据和当前的收益率曲线后，我们使用这些信息来生成银行的总现金流。首先，我们利用远期收益率曲线计算浮动利率；然后，我们可以分别生成本金和利息现金流。为此，我们预定义了基本函数，以根据支付频率计算本金现金流，并提取浮动利率用于可变利率产品。此脚本也可以在Packt
    Publishing提供的链接中找到。
- en: Copy it into the local folder and run the script of the predefined functions
    from the working directory.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 将其复制到本地文件夹，并从工作目录运行预定义函数的脚本。
- en: '[PRE6]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'This source file loads the `xts`, `zoo`, `YieldCurve`, `reshape`, and `car`
    packages, and if necessary, it installs these required packages. Let''s take a
    look at the most important functions we use from this script file. The `cf` function
    generates a predefined cash-flow structure. For example, generating a bullet payment
    structure loan with the nominal value of EUR 100, a maturity of three years, and
    a fixed interest rate of 10 percent looks like this:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这个源文件加载了`xts`、`zoo`、`YieldCurve`、`reshape`和`car`包，并在必要时安装这些必需的包。让我们看一下这个脚本文件中我们使用的最重要的函数。`cf`函数生成一个预定义的现金流结构。例如，生成一个名义金额为100欧元、到期日为三年、固定利率为10%的一次性偿还贷款结构如下：
- en: '[PRE7]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The function provides the entire cash-flow, the interest and capital repayment
    structure, and the value of the remaining capital in each period. The `get.yieldcurve.spot`
    function provides a fitted spot yield curve on a certain sequence of dates. This
    function uses the `YieldCurve` package, what we have already loaded before. Let''s
    define a test variable of dates, as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 该函数提供了完整的现金流、利息和本金偿还结构，以及每个期间剩余资本的价值。`get.yieldcurve.spot`函数提供了一条在某些日期序列上的拟合现货收益率曲线。该函数使用了我们之前已经加载的`YieldCurve`包。让我们定义一个测试日期变量，如下所示：
- en: '[PRE8]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Get and plot the fitted spot yields on the specified dates using the `market`
    data:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`market`数据获取并绘制指定日期的拟合现货收益率：
- en: '[PRE9]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The following screenshot is the result of the preceding command:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图是前述命令的结果：
- en: '![Cash-flow generator functions](img/2078OT_11_02.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![现金流生成函数](img/2078OT_11_02.jpg)'
- en: The preceding graph draws the observed yield curve (points) and the fitted yield
    curve (line). Looking at the `get.yieldcurve.forward` and `get.floating` functions,
    we see that both of them use the repricing date of the balance sheet product.
    The following example generates a sequence of repricing dates for a period of
    20 timepoints.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 前述图表绘制了观察到的收益率曲线（点）和拟合的收益率曲线（线）。查看`get.yieldcurve.forward`和`get.floating`函数时，我们发现它们都使用了资产负债表产品的重新定价日期。以下示例生成了一个20个时间点的重新定价日期序列。
- en: '[PRE10]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Extract the forward yield curve using the `market` data:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`market`数据提取远期收益率曲线：
- en: '[PRE11]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Now, let's generate the floating rates and illustrate the difference between
    the forward curve and the `test.floating` variable by setting the `showplot` option
    to TRUE.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们生成浮动利率，并通过将`showplot`选项设置为TRUE，展示远期曲线和`test.floating`变量之间的差异。
- en: '[PRE12]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The following screenshot gives the output for the preceding command:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了前述命令的输出结果：
- en: '![Cash-flow generator functions](img/2078OT_11_03.jpg)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![现金流生成函数](img/2078OT_11_03.jpg)'
- en: As you can see, the floating rate forecast consists of a step-wise function.
    For pricing purposes, the floating rate is substituted by the actual forward rate;
    however, the floating rate is only updated at the time of repricing.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，浮动利率预测由阶梯函数组成。为了定价，浮动利率由实际远期利率替代；然而，浮动利率仅在重新定价时更新。
- en: Preparing the cash-flow
  id: totrans-51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备现金流
- en: 'In the next steps, we will demonstrate the cash-flow table that we produce
    from our `portfolio` and `market` datasets. The `cf.table` function calls the
    functions detailed earlier and provides a cash-flow of the exact product, which
    has the `id` identification number. In the `portfolio` dataset, identification
    numbers have to be integers, and they have to be in an increasing order. Practically,
    each of them should be the line number of the given row. Let''s generate the cash-flow
    of all products:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的步骤中，我们将展示从我们的`portfolio`和`market`数据集中生成的现金流表。`cf.table`函数调用了前面详细介绍的函数，并提供了具有`id`标识号的准确产品的现金流。在`portfolio`数据集中，标识号必须是整数，并且必须按升序排列。实际上，每个标识号应该是给定行的行号。让我们生成所有产品的现金流：
- en: '[PRE13]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'As the `portfolio` dataset contains 147 products, the running of this code
    might take a few (10-60) seconds. When we are ready, let''s check the result that
    shows the first few lines:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 由于`portfolio`数据集包含147个产品，运行此代码可能需要几秒钟（10-60秒）。当准备好时，让我们检查显示前几行的结果：
- en: '[PRE14]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Now we are done with the creation of the cash-flow table. We can also calculate
    the present value of the products and, the market value of the equity of the bank.
    Let''s run the `pv.table` function in the following loop:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经完成了现金流表的创建。我们还可以计算产品的现值，以及银行股本的市场价值。让我们在下面的循环中运行`pv.table`函数：
- en: '[PRE15]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Print the initial rows of the table to check the results:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 打印表格的初始行以检查结果：
- en: '[PRE16]'
  id: totrans-59
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: The results might differ slightly because the `Svensson` method may produce
    different outputs. To get the market value of equity, we need to add the present
    values.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 结果可能会略有不同，因为`Svensson`方法可能会产生不同的输出。为了获得股本的市场价值，我们需要将现值相加。
- en: '[PRE17]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The cash-flow table handles liabilities as negative assets; hence, adding up
    all the items provides us with the appropriate results.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 现金流表将负债视为负资产；因此，将所有项相加可以得出合适的结果。
- en: Interest rate risk measurement
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利率风险度量
- en: 'Managing interest rate risk is one of the most important components of asset
    and liability management. Variation of the interest rate could affect both the
    interest earnings and the market value of equity. Interest rate management focuses
    on the sensitivity of net interest income. Net interest income (NII) equals the
    difference between interest revenues and interest expenses:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 管理利率风险是资产负债管理中最重要的组成部分之一。利率的变化可能会影响利息收入和股权的市场价值。利率管理关注的是净利息收入的敏感性。净利息收入（NII）等于利息收入与利息支出的差额：
- en: '![Interest rate risk measurement](img/2078OT_11_04.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![Interest rate risk measurement](img/2078OT_11_04.jpg)'
- en: 'Here, *SA* and *SL* denote the interest sensitive assets and liabilities, and
    *NSA* and *NSL* refer to the non-sensitive ones. Interest rate of assets and liabilities
    are noted with ![Interest rate risk measurement](img/2078OT_11_05.jpg) and ![Interest
    rate risk measurement](img/2078OT_11_06.jpg). The traditional approach of interest
    rate risk positioning of the balance sheet is based on gap models. Interest rate
    gap refers to the net asset position for a certain time period between interest-bearing
    assets and liabilities, which are repriced at the same time. The interest rate
    gap (G) equals:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*SA* 和 *SL* 分别表示利率敏感资产和负债，*NSA* 和 *NSL* 表示非敏感资产和负债。资产和负债的利率分别标注为 ![Interest
    rate risk measurement](img/2078OT_11_05.jpg) 和 ![Interest rate risk measurement](img/2078OT_11_06.jpg)。传统的利率风险定位方法是基于缺口模型。利率缺口指的是在特定时间段内，带息资产和负债的净资产位置，这些资产和负债会同时重新定价。利率缺口（G）等于：
- en: '![Interest rate risk measurement](img/2078OT_11_07.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![Interest rate risk measurement](img/2078OT_11_07.jpg)'
- en: 'The re-pricing gap table shows these interest-bearing items in the balance
    sheet grouped by the time of repricing and the basis of repricing (that is, 3
    months EURIBOR or 6 months EURIBOR). Interest earnings variation can be characterized
    as the risk-bearing items multiplied by the change of interest rate (*Δi*), shown
    as follows:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 重新定价缺口表格显示了资产负债表中按重新定价时间和重新定价基础（即 3 个月 EURIBOR 或 6 个月 EURIBOR）分组的这些带息项目。利息收入的变化可以通过带风险项目与利率变化（*Δi*）的乘积来表征，如下所示：
- en: '![Interest rate risk measurement](img/2078OT_11_08.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![Interest rate risk measurement](img/2078OT_11_08.jpg)'
- en: The sign of the gap is crucial from an interest rate risk point of view. A positive
    gap indicates increasing earnings when interest rates rise, and indicates decreasing
    earnings when interest rates decline. The repricing gap table can also capture
    the basis risk by aggregating the interest-bearing assets and liabilities based
    on their reference interest rate (that is 3 months or 6 months EURIBOR). Interest
    rate gap tables can be sufficient tools to determine the risk exposure from the
    earnings perspective. However, gap models cannot be used as a single risk measure
    to quantify rather the net interest income risk of the total balance sheet. Interest
    rate gaps are management tools, which provide guidance on interest rate risk positioning.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 从利率风险的角度来看，缺口的符号至关重要。正缺口表示当利率上升时收益增加，利率下降时收益减少。重新定价缺口表还可以通过根据参考利率（即 3 个月或 6
    个月 EURIBOR）聚合带息资产和负债来捕捉基差风险。利率缺口表可以作为足够的工具来从收益的角度确定风险敞口。然而，缺口模型不能单独作为量化整个资产负债表净利息收入风险的风险度量。利率缺口是管理工具，为利率风险定位提供指导。
- en: 'Here, we show how to build up net interest income and repricing gap tables
    and how to create figures about the net interest income term structure. Let''s
    construct the interest rate gap table from the `cashflow.table` data. Continuing
    from the previous section, we use the predefined `nii.table` function to produce
    the desired data form:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们展示了如何构建净利息收入和重新定价缺口表格，以及如何创建关于净利息收入期限结构的图表。我们从`cashflow.table`数据构建利率缺口表格。延续上一节，我们使用预定义的`nii.table`函数来生成所需的数据形式：
- en: '[PRE18]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Considering the net interest income table for the next 7 years, we get the
    following table:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到未来 7 年的净利息收入表，我们得到如下表格：
- en: '[PRE19]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'It is easy to read what account brings interest revenues or costs for the bank.
    The net interest rate table can be plotted as follows:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 很容易看出哪个账户为银行带来了利息收入或成本。净利率表可以绘制如下：
- en: '[PRE20]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The result is shown in the following graph:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 结果如下图所示：
- en: '![Interest rate risk measurement](img/2078OT_11_09.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![Interest rate risk measurement](img/2078OT_11_09.jpg)'
- en: Now, we can explore the re-pricing gaps by composing the re-pricing gap table.
    Let's use the predefined `repricing.gap.table` function and get the monthly gaps,
    and then plot the results with `barplot`.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们可以通过编制再定价缺口表来探索再定价缺口。我们使用预定义的`repricing.gap.table`函数获取每月缺口，然后用`barplot`绘制结果。
- en: '[PRE21]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'With the preceding code, we can illustrate the marginal gaps for the next 12
    months:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 使用前面的代码，我们可以说明未来12个月的边际缺口：
- en: '![Interest rate risk measurement](img/2078OT_11_10.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![利率风险测量](img/2078OT_11_10.jpg)'
- en: We have to mention that there are more sophisticated tools for interest rate
    risk management. In practice, simulation models are applied for risk management
    purposes. However, the banking book risks are not explicitly subjected to capital
    charge under Pillar 1 of the Basel II regulations; Pillar 2 covers the interest
    rate risk in the banking book. Regulators lay particular emphasis also on the
    risk assessment regarding the market value of equity. Risk limits are based on
    specific stress scenarios, which could be either deterministic interest rate shocks
    or historical volatility-based earnings at risk concepts. Therefore, risk measurement
    techniques stand for scenario-based or stochastic simulation approaches, focusing
    on the interest earnings or the market value of equity. Net interest income simulation
    is rather a dynamic, forward-looking approach, while calculation of the market
    value of equity provides a static result. Equity duration is also a widely used
    measure for interest rate risk of the banking book. Duration of the assets and
    liabilities are calculated to quantify the duration of equity. ALM professionals
    often use effective duration, which incorporates embedded options (caps, floors,
    and so on) in the interest rate sensitivity calculation.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须提到，对于利率风险管理，还有更复杂的工具。实际上，风险管理中应用了模拟模型。然而，银行账簿风险在《巴塞尔协议II》第一支柱下没有明确地要求资本充足率；第二支柱涵盖了银行账簿中的利率风险。监管机构特别强调市场价值评估的风险。风险限额基于特定的压力情景，这些情景可以是确定性的利率冲击或基于历史波动性的风险收益概念。因此，风险测量技术代表了基于情景或随机模拟的方法，侧重于利息收入或股本的市场价值。净利息收入模拟是一种动态的、前瞻性的方法，而股本市场价值的计算则提供了一个静态的结果。股本久期也是衡量银行账簿利率风险的广泛使用的指标。资产和负债的久期被计算出来，以量化股本的久期。ALM专业人员通常使用有效久期，它在利率敏感度计算中考虑了嵌入期权（如上限、下限等）。
- en: Liquidity risk measurement
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 流动性风险测量
- en: Traditional liquidity risk measurement tools are the so-called static and dynamic
    liquidity gap tables. A liquidity gap table gives a cash-flow view of the balance
    sheet, and organizes the balance sheet items according to their contractual cash-inflows
    and cash-outflows into maturity buckets. The net cash-flow gap in each bucket
    shows the bank structural liquidity position. The static view assumes a rundown
    balance sheet while the dynamic liquidity table also takes into account the cash-flows
    from rollovers and new businesses. For the sake of simplicity, we demonstrate
    here only the static view of the liquidity positions.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 传统的流动性风险测量工具是所谓的静态和动态流动性缺口表。流动性缺口表提供了资产负债表的现金流视图，并根据其合同现金流入和现金流出将资产负债表项目组织成到期时间段。每个时段的净现金流缺口显示了银行的结构性流动性头寸。静态视图假设资产负债表逐步减少，而动态流动性表还考虑了来自展期和新业务的现金流。为了简单起见，这里仅演示了流动性头寸的静态视图。
- en: Starting with the preparation of daily cash-flow positions. Sometimes, we need
    to know what the forecasted liquidity position is on a given date. It is easy
    to aggregate the `cashflow.table` by date.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 从准备日常现金流头寸开始。有时，我们需要知道在某个特定日期的预测流动性头寸。通过日期聚合`cashflow.table`非常容易。
- en: '[PRE22]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Secondly, let's prepare a liquidity gap table and create a chart. We can also
    use a predefined function (`lq.table`) and check the resulting table.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，我们来准备一个流动性缺口表并创建一个图表。我们还可以使用预定义的函数（`lq.table`）并检查生成的表格。
- en: '[PRE23]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'To plot the liquidity gap figure, we can use the `barplot` function, which
    is as follows:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 为了绘制流动性缺口图，我们可以使用`barplot`函数，代码如下：
- en: '[PRE24]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'The output of the `barplot` function is as follows:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '`barplot`函数的输出如下：'
- en: '![Liquidity risk measurement](img/2078OT_11_11.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![流动性风险测量](img/2078OT_11_11.jpg)'
- en: The bars on the plot show the liquidity gap in each time bucket. The dashed
    line with squares represents the net liquidity position (financial need), while
    the solid black line shows the cumulative liquidity gap.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图表中的条形图显示了每个时间段的流动性缺口。带有方块的虚线代表净流动性状况（资金需求），而实线黑线显示的是累积流动性缺口。
- en: Modeling non-maturity deposits
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 非到期存款建模
- en: The importance of **non-maturity deposits (NMD)** in banking is substantially
    high as the large part of commercial banks' balance sheets consist of client products
    with non-contractual cash-flow features. Non-maturity deposits are special financial
    instruments as the bank has an option to change the paid interest on the deposit
    account at any time, and the client has the option to withdraw any amount from
    the account without a period of notice. The liquidity and interest rate risk management
    of these products are a crucial part of ALM analysis; therefore, modeling of non-maturity
    deposits needs special attention. The uncertain maturity and interest rate profile
    generates a high level of complexity in their hedging, internal transfer pricing,
    and risk modeling.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '**非到期存款（NMD）**在银行中的重要性相当高，因为商业银行资产负债表的大部分由具有非合同现金流特征的客户产品组成。非到期存款是特殊的金融工具，因为银行可以随时调整存款账户的利率，而客户则可以随时提取账户中的任何金额，无需提前通知。这些产品的流动性和利率风险管理是资产负债管理（ALM）分析中的关键部分；因此，非到期存款的建模需要特别关注。不确定的到期时间和利率特征使得它们在对冲、内部转移定价和风险建模方面具有较高的复杂性。'
- en: A Model of deposit interest rate development
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 存款利率发展模型
- en: 'In the following code, we use Austrian non-maturity deposit time series data
    that we queried from the ECB Statistical Database, which is publicly available.
    We have monthly deposit interest rates (`cpn`), end-of-month balances (`bal`),
    and the 1 month EURIBOR fixing (`eur1m`) in our dataset. The time series are stored
    in a `csv` file in the local folder. The command for that is ads follows:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下代码中，我们使用了从欧洲中央银行统计数据库查询到的奥地利非到期存款时间序列数据，这些数据是公开可用的。我们的数据集包含每月存款利率（`cpn`）、月末余额（`bal`）和1个月EURIBOR固定利率（`eur1m`）。这些时间序列存储在本地文件夹中的一个`csv`文件里。相应的命令如下：
- en: '[PRE25]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'First, we plot the 1 month EURIBOR rate and the deposit interest rate development
    by using the following command:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们使用以下命令绘制1个月EURIBOR利率和存款利率的发展：
- en: '[PRE26]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The following screenshot displays the graph of **Deposit Coupon vs 1-month
    EURIBOR**:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了**存款息票与1个月EURIBOR**的图表：
- en: '![A Model of deposit interest rate development](img/2078OT_11_12.jpg)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![存款利率发展模型](img/2078OT_11_12.jpg)'
- en: 'Our first goal is to estimate an error correction model (ECM) to describe the
    long-term explanatory power of 1 month EURIBOR rate on the non-maturity deposit
    interest rate. Measuring the pass-through effect of market rates into deposit
    interest rates has gained high importance in recent years from the regulatory
    point of view as well. ECB required euro-zone banks to estimate the pass-through
    effect in certain stress-test scenarios. We use the Engle-Granger two-step method
    to estimate the ECM model. In the first step, we estimate the cointegrating vector
    with a regression model. We take the residuals, and in the second step, we estimate
    the long-term and short-term effects of EURIBOR on deposit rates using the error-correction
    mechanism. Before the first step, we have to test whether both time series are
    integrated in the same order. Therefore, we run Augmented Dickey-Fuller (ADF)
    and the KPSS tests from the `urca` package on the original and the differentiated
    time series. The script is as follows:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的第一个目标是估计误差修正模型（ECM），以描述1个月EURIBOR利率对非到期存款利率的长期解释力。从监管角度来看，近年来，测量市场利率对存款利率的传导效应变得尤为重要。欧洲央行要求欧元区银行在某些压力测试情景中估算这一传导效应。我们使用Engle-Granger两步法来估计ECM模型。在第一步中，我们使用回归模型估计协整向量。然后，我们获取残差，并在第二步中利用误差修正机制估计EURIBOR对存款利率的长期和短期影响。在第一步之前，我们必须测试两个时间序列是否在同一阶数上积分。因此，我们使用`urca`包对原始和差分时间序列运行Augmented
    Dickey-Fuller（ADF）和KPSS测试。脚本如下：
- en: '[PRE27]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'As a result, we get the following summary tables:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 结果，我们得到以下摘要表：
- en: '[PRE28]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The null-hypothesis of the ADF test cannot be refused for the original time
    series, but the test results show that the first difference of the deposit rate
    and 1 month EURIBOR time series does not contain the unit root. This means that
    both series are integrated at the first order, and they are I(1) processes. The
    KPSS test has a similar result. The next step is to test the cointegration of
    the two I(1) series by testing the residuals of the simple regression equation,
    where we regress the deposit interest rates on the 1 month EURIBOR rate. Estimate
    the cointegrating equation:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 对原始时间序列的 ADF 测试的原假设不能拒绝，但测试结果表明存款利率和 1 个月 EURIBOR 时间序列的第一差分不含单位根。这意味着这两个序列都是一阶整合的，它们是
    I(1) 过程。KPSS 测试得出了类似的结果。下一步是通过检验简单回归方程的残差来检验这两个 I(1) 序列的协整性，其中我们将存款利率对 1 个月 EURIBOR
    利率进行回归。估计协整方程：
- en: '[PRE29]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Do the unit root test of residuals as follows:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 对残差进行单位根检验，如下所示：
- en: '[PRE30]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The test statistic of the ADF test is lower than the 1 percent critical value,
    so we can conclude that the residuals are stationary. This means that the deposit
    coupon and 1 month EURIBOR are cointegrated, as the linear combination of the
    two *I(1)* time series gives us a stationary process. The existence of cointegration
    is important because it is a prerequisite for the error-correction model estimation.
    The basic structure of an ECM equation is as follows:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: ADF 测试的统计量低于 1% 的临界值，因此我们可以得出残差是平稳的结论。这意味着存款券和 1 个月 EURIBOR 是协整的，因为这两个 *I(1)*
    时间序列的线性组合给出了一个平稳过程。协整的存在很重要，因为它是误差修正模型估计的前提条件。ECM 方程的基本结构如下：
- en: '![A Model of deposit interest rate development](img/2078OT_11_13.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![存款利率发展模型](img/2078OT_11_13.jpg)'
- en: 'We estimate the long-term and short-term effect of X on Y; the lagged residuals
    from the cointegration equation represent the error-correction mechanism. The
    ![A Model of deposit interest rate development](img/2078OT_11_14.jpg) coefficient
    measures the short-term correction part, while ![A Model of deposit interest rate
    development](img/2078OT_11_15.jpg) is the coefficient of the long-term equilibrium
    relationship, which captures the correction of deviations from the equilibrium
    of X. Now, we estimate the ECM model using the `dynlm` package, which is suitable
    to estimate dynamic linear models with lags:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我们估计 X 对 Y 的长期和短期效应；来自协整方程的滞后残差代表误差修正机制。![存款利率发展模型](img/2078OT_11_14.jpg) 系数衡量短期修正部分，而
    ![存款利率发展模型](img/2078OT_11_15.jpg) 是长期均衡关系的系数，捕捉 X 偏离均衡的修正。现在，我们使用 `dynlm` 包估计
    ECM 模型，该包适用于估计具有滞后的动态线性模型：
- en: '[PRE31]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: The lagged changes in 1 month EURIBOR are corrected in the deposit interest
    rates by 25.7 percent (![A Model of deposit interest rate development](img/2078OT_11_16.jpg))
    on the short run. We cannot conclude that deviations from the long-term equilibrium
    are not corrected as beta2 is not significant and has a positive sign, meaning
    that the errors are not corrected but boosted by 7 percent. The economic interpretation
    of the results is that we cannot identify a long-term relationship between NMD
    coupons and 1 month EURIBOR rate, but deviations in the EURIBOR are reflected
    in the coupons by 25.7 percent in the short term.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 1 个月 EURIBOR 的滞后变化在短期内对存款利率的修正为 25.7% (![存款利率发展模型](img/2078OT_11_16.jpg))。我们不能得出长期均衡偏差没有被修正的结论，因为
    beta2 不显著并且具有正值，这意味着错误并没有被修正，而是被 7% 放大。经济解释是我们无法识别 NMD 票息和 1 个月 EURIBOR 利率之间的长期关系，但
    EURIBOR 的偏差在短期内通过 25.7% 反映在票息中。
- en: Static replication of non-maturity deposits
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 非到期存款的静态复制
- en: A possible method to hedge interest-rate-related risks of non-maturity deposits
    is to construct a replicating portfolio of zero-coupon instruments to mimic the
    interest payment of non-maturity deposits, and earn a margin on the higher-yielding
    replicating instruments over the low interest on deposit accounts.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 对于非到期存款的利率相关风险，一种可能的对冲方法是构建一个复制组合，由零息票工具组成，以模拟非到期存款的利息支付，并通过复制工具的较高收益与存款账户的低利息之间的差额来赚取利润。
- en: 'Let''s assume that we include 1-month and 3-month EUR money market placements
    and 1Y, 5Y, and 10Y government benchmark bonds in our replicating portfolio. We
    queried the historical time series of the yields from ECB Statistical Data Warehouse
    and stored the data in a `csv` file in the local folder. We will call the `csv`
    file using the following command:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们在复制投资组合中包括 1 个月和 3 个月的欧元货币市场工具，以及 1 年、5 年和 10 年的政府基准债券。我们从欧洲央行统计数据仓库查询了收益率的历史时间序列，并将数据存储在本地文件夹中的
    `csv` 文件中。我们将使用以下命令调用该 `csv` 文件：
- en: '[PRE32]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'Plot the results:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 绘制结果：
- en: '[PRE33]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'The following screenshot shows the ECB yield curve:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了欧洲中央银行的收益率曲线：
- en: '![Static replication of non-maturity deposits](img/2078OT_11_17.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![非到期存款的静态复制](img/2078OT_11_17.jpg)'
- en: 'Our goal is to calculate those portfolio weights of the five hedging instruments
    in the replicating portfolio, which ensures that the minimum volatility of the
    margin compared to the deposit coupon (cpn) in the given time horizon. In other
    words, we would like to minimize the tracking error of the interest earning of
    our replicating portfolio. The problem can be formulated in the following least
    squares minimization formula:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的目标是计算复制投资组合中五个对冲工具的投资组合权重，确保在给定的时间范围内，与存款利息（cpn）相比，保证最低波动率。换句话说，我们希望最小化复制投资组合利息收入的跟踪误差。该问题可以通过以下最小二乘法最小化公式来表达：
- en: '![Static replication of non-maturity deposits](img/2078OT_11_18.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![非到期存款的静态复制](img/2078OT_11_18.jpg)'
- en: 'This is subject to:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 这受以下条件的限制：
- en: '![Static replication of non-maturity deposits](img/2078OT_11_19.jpg)![Static
    replication of non-maturity deposits](img/2078OT_11_20.jpg)![Static replication
    of non-maturity deposits](img/2078OT_11_21.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![非到期存款的静态复制](img/2078OT_11_19.jpg)![非到期存款的静态复制](img/2078OT_11_20.jpg)![非到期存款的静态复制](img/2078OT_11_21.jpg)'
- en: Here, ***A*** is the ![Static replication of non-maturity deposits](img/2078OT_11_22.jpg)
    matrix's historical rates, ***b*** is the vector of the deposit coupons, and ***x***
    is the vector of portfolio weights. The function to be minimized is the squared
    difference between the vector ***b*** and the linear combination of ***x*** with
    the columns of matrix ***A***. The first condition is that the portfolio weights
    have to be non-negative and summed up to 1\. We introduce an additional condition
    on the average maturity of the portfolio, which should be equal to the *l* constant.
    The vector ***m*** contains the maturity in months of the five hedging instruments.
    The rationale behind this constraint is that banks usually assume that the core
    base of non-maturity deposit volume stays in the bank for a longer term. The tenor
    of this long-term part is usually derived from a volume model, which could be
    the ARIMA model or a dynamic model with dependency on market rates and the deposit
    coupon.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，***A*** 是 ![非到期存款的静态复制](img/2078OT_11_22.jpg) 矩阵的历史利率，***b*** 是存款利息的向量，***x***
    是投资组合权重的向量。需要最小化的函数是向量 ***b*** 和矩阵 ***A*** 的列与向量 ***x*** 的线性组合之间的平方差。第一个条件是，投资组合权重必须是非负的，并且总和为
    1。我们引入了一个额外条件，即投资组合的平均到期时间应该等于 *l* 常数。向量 ***m*** 包含五个对冲工具的到期时间（月）。这一约束的依据是，银行通常假设非到期存款的核心部分会在银行停留较长时间。这个长期部分的期限通常是通过一个量化模型来推导的，该模型可能是
    ARIMA 模型，或者是一个依赖于市场利率和存款利息的动态模型。
- en: To solve the optimization problem, we use the `solve.QP` function from the `quadprog`
    package. This function is suitable to solve quadratic optimization problems with
    equality and inequality constraints. We reformulate the least squares minimization
    problem in order to derive the proper parameter matrix (***A'A***) and parameter
    vector (***b'A***) of the `solve.QP` function.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决优化问题，我们使用来自 `quadprog` 包的 `solve.QP` 函数。该函数适用于解决具有等式和不等式约束的二次优化问题。我们重新构造了最小二乘法最小化问题，以推导出
    `solve.QP` 函数的适当参数矩阵（***A'A***）和参数向量（***b'A***）。
- en: 'We also set ![Static replication of non-maturity deposits](img/2078OT_11_23.jpg),
    assuming 5 year final maturity for the replicating portfolio, which mimics the
    liquidity characteristics of the core part of the NMD portfolio through the following
    command:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还设置了 ![非到期存款的静态复制](img/2078OT_11_23.jpg)，假设复制投资组合的最终到期时间为 5 年，该投资组合通过以下命令模仿了
    NMD 投资组合核心部分的流动性特征：
- en: '[PRE34]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Our result suggests that based on historical calibration, we should keep 51
    percent in 3 month money market placement and 49 percent in a 10 year government
    bond instrument in our replicating portfolio to replicate the coupon development
    of NMDs with the smallest tracking error. With these portfolio weights, the income
    on our replicating portfolio and the expense on deposit accounts are calculated
    by the following code:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的结果表明，根据历史校准，我们应该在复制组合中保持51%的三个月货币市场投资和49%的十年期政府债券工具，以最小的追踪误差复制非到期存款的票息变化。使用这些投资组合权重，通过以下代码计算我们复制组合的收入和存款账户的支出：
- en: '[PRE35]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'The following graph displays **Margin of static replication**:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了**静态复制的保证金**：
- en: '![Static replication of non-maturity deposits](img/2078OT_11_24.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![非到期存款的静态复制](img/2078OT_11_24.jpg)'
- en: As you can see, due to the replication with this static strategy, a bank was
    able to earn more profit around 2010, when the term spread between the short-
    and long-term interest rates was unusually high.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，由于使用这种静态策略进行复制，银行能够在2010年左右赚取更多利润，那时短期利率和长期利率之间的期限利差异常高。
- en: Summary
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'In this chapter, we demonstrated how R can support the process of asset and
    liability management in a commercial bank. There is a wide range of tasks from
    data preparation to reporting, where the R programming language can help or solve
    repeating problems. However, we only gave a brief introduction about how to solve
    problems of interest rate and liquidity measurement. We also provided some examples
    about the statistical estimation of the interest rate sensitivity of non-maturity
    deposits. You can find practical knowledge about the following:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们展示了如何利用R支持商业银行的资产和负债管理过程。从数据准备到报告的各个任务，R编程语言都可以提供帮助或解决重复性问题。然而，我们仅简要介绍了如何解决利率和流动性测量问题。我们还提供了一些关于非到期存款利率敏感性统计估计的示例。你可以在以下内容中找到实践知识：
- en: Generating cash-flow from bank portfolios and market data
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从银行投资组合和市场数据生成现金流
- en: Measuring and reporting tools for basic interest rate risk management
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本利率风险管理的测量和报告工具
- en: Measuring and reporting tools for basic liquidity risk management
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基本流动性风险管理的测量和报告工具
- en: Modeling the behavior of non-maturity deposits
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 建模非到期存款的行为
- en: We think that this chapter is an organic part of the bank management topics
    in this book. Asset and liability management brings a particular problem set of
    the bank management, and R, as an open-source language with a versatile package
    library, can effectively add valuable tools for practitioners.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们认为，本章是本书中银行管理话题的有机组成部分。资产和负债管理带来了银行管理中的特殊问题集，而R作为一种开源语言，具有多功能的包库，可以有效地为从业者提供有价值的工具。
- en: References
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: '**Bessis, Joel (2011)**: Risk management in banking, *John Wiley & Sons*.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Bessis, Joel (2011)**：银行风险管理，*约翰·威利与子公司*。'
- en: '**Choudhry, Moorad (2011)**: Bank asset and liability management: strategy,
    trading, analysis, *John Wiley & Sons*.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Choudhry, Moorad (2011)**：银行资产和负债管理：战略、交易、分析，*约翰·威利与子公司*。'
- en: '**Matz, Leonard and Neu, Peter (2006)**: Liquidity risk measurement and management:
    A practitioner''s guide to global best practices, *John Wiley & Sons*.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Matz, Leonard 和 Neu, Peter (2006)**：流动性风险测量与管理：全球最佳实践的从业者指南，*约翰·威利与子公司*。'
