- en: '5'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Portfolio Management
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'According to the **Global Industry Classification Standard** (**GICS**), the
    global asset management industry’s total **assets under management** (**AUM**)
    value at the end of 2020 was approximately $91.7 trillion, managed across 84,000
    firms. This consists of the AUM managed by investment firms, pension funds, insurance
    companies, and other international financial institutions. Frequently, asset managers
    utilize portfolio management techniques to manage these assets. Investopedia defines
    portfolio management as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Portfolio management is the art and science of selecting and supervising a portfolio
    to achieve a specific investment goal for the investor’s benefit.
  prefs: []
  type: TYPE_NORMAL
- en: 'This chapter will explore the art of portfolio management using machine learning
    techniques and quantum algorithms. It is divided into five sections:'
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio management
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Financial portfolio diversification
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Financial portfolio simulation
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Portfolio management using traditional machine learning algorithms
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Quantum algorithm portfolio management implementation
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let us begin by understanding the need for portfolio management by defining
    a financial portfolio.
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio management
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A financial portfolio refers to a collection of assets, including stocks, bonds,
    and other securities, that an individual or entity invests in to generate a return
    on investment. Creating a diversified financial portfolio is crucial for investors
    to minimize risk and maximize returns. A financial portfolio requires careful
    analysis, market research, and risk assessment.
  prefs: []
  type: TYPE_NORMAL
- en: One of the essential aspects of creating a financial portfolio is diversification.
    Diversification refers to investing in different types of securities to spread
    the risk. This strategy aims to reduce the impact of any negative events on the
    portfolio’s overall performance. For example, a portfolio entirely invested in
    a single stock or industry may suffer significantly if the company or industry
    faces challenges. However, a diversified portfolio that includes stocks, bonds,
    and other securities can help mitigate such risks. Another important factor to
    consider when building a financial portfolio is risk tolerance. Risk tolerance
    refers to an individual’s ability to handle market volatility and risk. It is
    critical to assess your risk tolerance before investing in securities. A high-risk
    investment may offer higher returns but only suit investors who can tolerate potential
    losses.
  prefs: []
  type: TYPE_NORMAL
- en: Investors should also consider their investment objectives when creating a financial
    portfolio. An investment objective refers to the goal that an investor wishes
    to achieve through their investments, such as long-term growth, income generation,
    or capital preservation. An investor’s investment objectives will influence the
    type of securities they choose for their portfolio. Asset allocation is another
    essential aspect of building a financial portfolio. Asset allocation refers to
    dividing your investment portfolio among asset classes, such as stocks, bonds,
    and cash. This process aims to balance the risk and rewards of different investments.
    For instance, stocks may offer high returns but come with higher risks, while
    bonds may offer lower returns but lower risks.
  prefs: []
  type: TYPE_NORMAL
- en: Moreover, investors need to review and rebalance their portfolios regularly.
    Investment profit objectives and tolerated risk force us to check the configuration
    of our investments regularly to ensure their alignment. A portfolio that is not
    reviewed regularly may become unbalanced over time, leading to higher risks or
    lower returns. Building a financial portfolio is essential for investors who wish
    to generate returns on their investments. Diversification, risk tolerance, investment
    objectives, asset allocation, and portfolio review are critical aspects that investors
    need to consider when building a financial portfolio. By paying attention to these
    factors, investors can create a diversified portfolio that aligns with their investment
    objectives and risk tolerance.
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio diversification
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Financial portfolio diversification is crucial for investors who want to minimize
    risk and maximize returns. Diversification involves investing in various assets,
    including stocks, bonds, and other securities, to spread the risk across different
    markets, sectors, and asset classes. One of the main benefits of financial portfolio
    diversification is risk reduction. By investing in various assets, investors can
    avoid the risk of putting all their eggs in one basket. If one asset class or
    sector performs poorly, other asset classes may perform well, helping to offset
    losses. For example, if a portfolio is heavily invested in stocks and the stock
    market crashes, the portfolio’s value may decline significantly. However, if the
    portfolio also includes bonds, commodities, and real estate, the stock value decline
    may be offset by gains in other asset classes.
  prefs: []
  type: TYPE_NORMAL
- en: Another benefit of financial portfolio diversification is potential returns.
    Investing in a range of assets offers the benefit of potential returns from different
    markets and sectors. For instance, stocks may offer higher returns but have higher
    risks. On the other hand, bonds may offer lower returns, but they come with lower
    risks. By diversifying their portfolio, investors can capture the potential returns
    of different asset classes while mitigating the risks.
  prefs: []
  type: TYPE_NORMAL
- en: When diversifying a financial portfolio, investors should consider several factors,
    including their investment objectives, risk tolerance, and time horizon. Investment
    objectives refer to the goals an investor wishes to achieve through their investments,
    such as long-term growth, income generation, or capital preservation. Risk tolerance
    refers to the level of risk an investor is comfortable with. Time horizon refers
    to the time an investor plans to hold their investments. Investors can create
    a diversified portfolio that aligns with their goals, risk tolerance, and time
    horizon by considering these factors.
  prefs: []
  type: TYPE_NORMAL
- en: By allocating their investments across different asset classes, investors can
    reduce the overall risk of their portfolio while still capturing potential returns.
    Financial portfolio diversification is a critical strategy for investors who want
    to minimize risk and maximize returns. Diversifying a portfolio involves investing
    in various assets, including stocks, bonds, and other securities, to spread the
    risk across different markets, sectors, and asset classes. Investors can create
    a diversified portfolio that aligns with their goals and reduces overall risk
    by considering their investment objectives, risk tolerance, time horizon, and
    asset allocation. The next subsection discusses asset allocation and its need
    and importance.
  prefs: []
  type: TYPE_NORMAL
- en: Financial asset allocation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Financial asset allocation is a key component of portfolio management that involves
    dividing investments among different asset classes to achieve a desired level
    of risk and return. Asset allocation is an important strategy for investors who
    want to build a diversified portfolio and minimize risk. One of the key benefits
    of financial asset allocation is risk reduction. By diversifying investments across
    different asset classes, investors can reduce the risk associated with any particular
    asset class or investment. For example, if an investor invested all their money
    in one stock, they would be subject to the risks of that stock alone. However,
    investing in a mix of stocks, bonds, and other assets can spread their risk across
    different asset classes, reducing the potential for significant losses.
  prefs: []
  type: TYPE_NORMAL
- en: Another benefit of financial asset allocation is the potential for higher returns.
    Different asset classes have different levels of risk and return potential. Stocks,
    for example, offer higher potential returns than bonds but come with higher levels
    of risk. By allocating investments across different asset classes, investors can
    benefit from the potential returns of multiple asset classes while minimizing
    risk.
  prefs: []
  type: TYPE_NORMAL
- en: When allocating assets in a financial portfolio, investors must consider their
    investment goals, time horizon, and risk tolerance. Investment goals may vary
    from one investor to another and include goals such as generating income, growing
    capital, or preserving wealth. Time horizon refers to the time an investor intends
    to hold an investment. Generally, longer time horizons allow for greater risk
    tolerance and potentially higher returns. Risk tolerance refers to an investor’s
    willingness to accept risk in pursuit of higher returns.
  prefs: []
  type: TYPE_NORMAL
- en: There are several different asset classes to which investors can allocate their
    investments, including stocks, bonds, cash, and alternative investments. Stocks
    represent ownership in a company and offer the potential for capital appreciation
    and dividends. Bonds, on the other hand, represent debt and offer fixed-income
    payments. Cash is a low-risk, low-return asset that can provide liquidity and
    stability in a portfolio. Alternative investments include real estate, commodities,
    and private equity.
  prefs: []
  type: TYPE_NORMAL
- en: The optimal asset allocation for a portfolio will depend on the investor’s goals,
    time horizon, and risk tolerance. Younger investors with a longer time horizon
    may be more willing to accept higher levels of risk and allocate a larger portion
    of their portfolio to stocks. Older investors with a shorter time horizon and
    a greater need for income and capital preservation may allocate a larger portion
    of their portfolio to bonds and cash. Thus, financial asset allocation is a critical
    component of portfolio management that allows investors to diversify their investments
    across different asset classes and minimize risk, while potentially increasing
    returns. When determining the optimal asset allocation, investors must consider
    their investment goals, time horizon, and risk tolerance. By allocating investments
    to a mix of stocks, bonds, cash, and alternative investments, investors can build
    a well-diversified portfolio that aligns with their goals and helps them achieve
    financial success. The subsequent subsection discusses the importance of financial
    risk tolerance in financial portfolio optimization.
  prefs: []
  type: TYPE_NORMAL
- en: Financial risk tolerance
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Financial risk tolerance refers to an investor’s willingness to take on risk
    in pursuit of potential returns. It is an important concept for anyone wanting
    to invest their money. Several factors influence an individual’s financial risk
    tolerance. Age, income, net worth, and investment goals are all important considerations.
    Generally, younger investors may be more willing to take on risk, as they have
    a longer time horizon to recover from losses. Higher-income and net-worth individuals
    may also have a higher risk tolerance, as they have more resources to absorb potential
    losses. Investment goals are also a key factor in determining risk tolerance.
    Investors with long-term goals, such as retirement, may be more willing to take
    on risks in pursuit of higher returns. In contrast, investors with short-term
    goals, such as saving for a down payment on a house, may prioritize capital preservation
    over potential returns.
  prefs: []
  type: TYPE_NORMAL
- en: Understanding your financial risk tolerance is important because it can help
    investors make informed investment decisions. Investors who take on too much risk
    may experience significant losses that could impact their financial well-being.
    On the other hand, investors who are too risk-averse may miss out on potential
    returns that could help them achieve their financial goals. There are several
    strategies that investors can use to manage their risk and align their investments
    with their risk tolerance. Diversification is one of the most important strategies.
    By spreading investments across different asset classes, investors can reduce
    the risk of any particular investment. These types of investments offer exposure
    to a diversified portfolio of stocks or bonds and can help reduce risk. Another
    strategy is to use asset allocation to manage risk. Asset allocation involves
    dividing investments among different asset classes to achieve a desired level
    of risk and return. By allocating investments to a mix of stocks, bonds, and other
    assets, investors can benefit from the potential returns of multiple asset classes
    while minimizing risk.
  prefs: []
  type: TYPE_NORMAL
- en: Finally, it is important for investors to regularly review their asset selection
    to make sure that it fulfills their requirements. As an investor’s circumstances
    change, their risk tolerance may also change. Regular portfolio reviews can help
    ensure that an investor’s portfolio remains aligned with their risk tolerance
    and investment goals. Financial risk tolerance is an important concept for investors
    to understand. Age, income, net worth, and investment goals can influence an individual’s
    risk tolerance. Investors need to understand their risk tolerance to make informed
    investment decisions. Strategies such as diversification, low-cost index funds,
    asset allocation, and regular portfolio reviews can help investors manage risk
    and align their investments with risk tolerance and goals. Hence, the following
    subsection talks about optimizing a financial portfolio to align risk tolerance
    and investment goals.
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio optimization
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Financial portfolio optimization maximizes an investor’s returns while minimizing
    risk by selecting an optimal mix of investments. This process involves the identification
    of the investor’s investment objectives, risk tolerance, and constraints, followed
    by developing an investment strategy optimized to meet these objectives. This
    subsection will discuss the key principles of financial portfolio optimization,
    its benefits to investors, and the tools used to optimize financial portfolios.
  prefs: []
  type: TYPE_NORMAL
- en: One of the key principles of financial portfolio optimization is diversification.
    By spreading investments across different asset classes, investors can reduce
    the risk associated with any one particular investment. This is because different
    asset classes have different risk-return characteristics. For example, equities
    are generally considered to be riskier than bonds, but they also offer the potential
    for higher returns. By diversifying investments across asset classes with different
    risk-return characteristics, investors can achieve a more efficient investment
    so that risk gets minimized while potential returns are maximized. Another principle
    of financial portfolio optimization is asset allocation. Asset allocation involves
    dividing investments among different asset classes to achieve a desired level
    of risk and return. By allocating investments to a mix of stocks, bonds, and other
    assets, investors can benefit from the potential returns of multiple asset classes
    while minimizing risk. Asset allocation aims to achieve an optimal portfolio that
    maximizes returns while minimizing risk.
  prefs: []
  type: TYPE_NORMAL
- en: There are several benefits to financial portfolio optimization. First, it allows
    investors to achieve their investment objectives while minimizing risk. This is
    important because investment risk can significantly impact an investor’s financial
    well-being. By optimizing their portfolio, investors can achieve their investment
    objectives while minimizing the risk of significant losses. Second, financial
    portfolio optimization can help investors achieve higher returns than they would
    be able to achieve through a more traditional investment approach. This is because
    optimization allows investors to take advantage of the potential returns of multiple
    asset classes while minimizing risk.
  prefs: []
  type: TYPE_NORMAL
- en: There are several tools used to optimize financial portfolios. One of the most
    common tools is **modern portfolio theory** (**MPT**). MPT is a mathematical framework
    that uses statistical analysis to optimize portfolios. The framework assumes that
    investors are risk-averse and seek to maximize returns for a given level of risk.
    MPT considers the correlations between different asset classes and the expected
    returns and volatilities of each asset class. Another tool used to optimize financial
    portfolios is the Monte Carlo simulation. The Monte Carlo simulation involves
    statistical modeling to simulate the potential outcomes of different investment
    strategies. This allows investors to test different investment scenarios and identify
    the optimal portfolio for their investment objectives, risk tolerance, and constraints.
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio optimization is important for investors who want to achieve
    their investment objectives while minimizing risk. It involves the identification
    of an investor’s investment objectives, risk tolerance, and constraints, followed
    by developing an investment strategy optimized to meet these objectives. The key
    principles of financial portfolio optimization include diversification and asset
    allocation. The benefits of financial portfolio optimization include achieving
    investment objectives while minimizing risk and the potential for higher returns.
    Finally, several tools are used to optimize financial portfolios, including modern
    portfolio theory and the Monte Carlo simulation. The following subpart discusses
    MPT, used to optimize financial portfolios.
  prefs: []
  type: TYPE_NORMAL
- en: MPT
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: MPT is a framework that helps investors build efficient portfolios to maximize
    expected returns for a given level of risk. Developed by Harry Markowitz in the
    1950s, MPT revolutionized the field of finance by introducing the concept of diversification
    and the efficient frontier. At the heart of MPT is the idea that diversification
    is essential to build a well-constructed investment portfolio. According to MPT,
    investors should not put all their eggs in one basket, as the performance of a
    single asset or security is subject to fluctuations that can lead to significant
    losses. With this balance on a diverse set of assets to invest in, you try to
    guarantee that no latent driver will zero out an investment.
  prefs: []
  type: TYPE_NORMAL
- en: One key concept in MPT is the efficient frontier. Levels of risk and profit
    will reveal more than one configuration option for our investment selection. The
    frontier draws a line in the risk-return trade-off that each potential portfolio
    selection poses, as shown in a 2D plot in *Figure 5**.1*. By balancing and weighing
    assets in different ways, an avid investor will be able to spot that frontier
    so that the combinations that make up this trade-off will be visible, and a decision
    can be made based on those.
  prefs: []
  type: TYPE_NORMAL
- en: Therefore, understanding the efficiency frontier is a key concept to understanding
    the maximal capacity for a given set of assets, as their configurations will find
    a profit limit based on the framework established by the MPT.
  prefs: []
  type: TYPE_NORMAL
- en: The efficient frontier
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The efficient frontier, as we mentioned previously, is a representation that
    allows us to understand the maximal capacity of a set of assets, given an expected
    return and the diversification risk tolerance associated with those assets.
  prefs: []
  type: TYPE_NORMAL
- en: If you plotted all potential configurations on a 2D plot, where the expected
    return of each portfolio is on the *y* axis and the standard deviation (a measure
    of risk) is on the *x* axis, you can observe that a specific shape appears instead
    of a potential randomly distributed plot. An efficiency limit appears where, at
    the extreme, you find the asset selections that balance the risk minimization
    while maximizing the return.
  prefs: []
  type: TYPE_NORMAL
- en: Portfolios that lie on the efficient frontier are said to be “efficient” because
    they yield the highest profit. Portfolios that lie to the right-hand side of the
    efficient frontier are considered “inefficient,” given there are better options
    that show a lower level of risk with the same amount of expected profit. Therefore,
    these are selections that can be improved as opposed to the efficient ones.
  prefs: []
  type: TYPE_NORMAL
- en: 'Here is an example of how the efficient frontier might look when plotted on
    a graph:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.1 – The efficient frontier](img/B19146_05_001.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.1 – The efficient frontier
  prefs: []
  type: TYPE_NORMAL
- en: As shown in *Figure 5**.1*, the efficient frontier is a curve that slopes upward
    from left to right, with the portfolios plotted as red dots on it. Efficient portfolios,
    according to the previous definition, will be then found on the edge of the curve,
    drawn by the blue line where no option beyond exists.
  prefs: []
  type: TYPE_NORMAL
- en: Example
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Here is an example of how MPT can be used to construct a portfolio.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s suppose an investor has $100,000 to invest and considers two assets –
    stocks and bonds. The expected return for stocks is 10% per year, and the expected
    return for bonds is 5% per year. The investor is also given the following information
    about the assets’ standard deviations:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Stocks**: 20%'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Bonds**: 8%'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The investor wants to construct a portfolio that offers the maximum profit for
    an acceptable risk level. According to MPT, the investor should diversify the
    portfolio by investing in stocks and bonds. The optimal balance of risk and return
    can be determined by constructing an efficient frontier.
  prefs: []
  type: TYPE_NORMAL
- en: To do this, the investor can plot each asset’s expected return and standard
    deviation on a graph. The investor can then plot the efficient frontier by combining
    different proportions of the two assets and calculating each combination’s expected
    return and standard deviation. The efficiency frontier will then yield the asset
    selections the investor can bet on with a high chance of meeting the requirements
    initially set.
  prefs: []
  type: TYPE_NORMAL
- en: For example, if the investor were to invest 50% in stocks and 50% in bonds,
    the expected return of the portfolio would be 7.5% (halfway between the expected
    returns of the two assets), and the standard deviation would be 14% (a weighted
    average of the standard deviations of the two assets). This portfolio would lie
    on the efficient frontier.
  prefs: []
  type: TYPE_NORMAL
- en: The investor can then decide on the optimal portfolio by selecting the point
    on the efficient frontier that corresponds to their desired risk level. For example,
    if the investor is willing to take on more risk, they might choose a portfolio
    with a higher expected return and a higher standard deviation. On the other hand,
    if the investor is risk-averse, they might choose a portfolio with a lower expected
    return and a lower standard deviation. The following section illustrates the implementation
    of MPT through a case study.
  prefs: []
  type: TYPE_NORMAL
- en: Case study
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Let’s suppose that an investor named Sarah is considering two potential investments
    – a stock and a bond. The stock has a higher expected return but also a higher
    level of risk, while the bond has a lower expected return but also a lower level
    of risk. Sarah tries to decide how to allocate her money between the two investments
    to maximize her return while minimizing her risk.
  prefs: []
  type: TYPE_NORMAL
- en: 'Sarah decides to use MPT to help her optimize her portfolio. She starts by
    constructing a grid that shows the expected return and standard deviation (a measure
    of risk) for each possible combination of the two investments. The grid looks
    like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.2 – The efficient frontier](img/B19146_05_002.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.2 – The efficient frontier
  prefs: []
  type: TYPE_NORMAL
- en: Based on the grid shown in *Figure 5**.2*, Sarah can see that the portfolio
    with the highest expected return is the one that is 100% invested in the stock,
    but it also has the highest level of risk. On the other hand, the portfolio with
    the lowest risk level is 100% invested in the bond, but it also has the lowest
    expected return.
  prefs: []
  type: TYPE_NORMAL
- en: Sarah decides to use the efficient frontier to help her identify the optimal
    balance between risk and return. She plots the expected return and standard deviation
    of each portfolio on a graph, and the efficient frontier shows Sarah that, based
    on the efficient frontier, the optimal portfolio is the one that is about 60%
    invested in the stock and 40% invested in the bond.
  prefs: []
  type: TYPE_NORMAL
- en: Sarah decides to allocate her money in this way, and she periodically rebalances
    her portfolio to ensure that it aligns with her investment criteria. Using MPT
    and the efficient frontier, Sarah can optimize her portfolio and achieve the best
    balance between risk and return. The subsequent subsection discusses the role
    of financial portfolio simulation in implementing portfolio optimization.
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio simulation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: A financial portfolio simulation is a tool investors use to assess their portfolio’s
    performance, predict its behavior in the future, and make informed investment
    decisions. It involves creating a model of an investor’s portfolio and testing
    different scenarios to determine the best investment strategy. In recent years,
    portfolio simulation has become increasingly popular because it provides a cost-effective
    way for investors to assess their risk tolerance and maximize returns. This subsection
    will examine the concept of financial portfolio simulation, its benefits, and
    how it can be used to optimize investment decisions.
  prefs: []
  type: TYPE_NORMAL
- en: 'One of the significant benefits of financial portfolio simulation is its ability
    to provide investors with a clear understanding of their risk tolerance. By simulating
    different scenarios, investors can determine their portfolio’s sensitivity to
    market fluctuations and adjust their investment strategy accordingly. David McEwen,
    the director of investments at a leading investment firm, had the following to
    say about risk tolerance:'
  prefs: []
  type: TYPE_NORMAL
- en: Investors who don’t understand their risk tolerance could be taking on more
    or less risk than they can handle, which could have negative consequences for
    their portfolio.
  prefs: []
  type: TYPE_NORMAL
- en: Therefore, financial portfolio simulation is a valuable tool to help investors
    make informed investment decisions based on risk tolerance. Another benefit of
    financial portfolio simulation is its ability to predict how an investor’s portfolio
    will perform in different market conditions. This is particularly useful during
    periods of market volatility when investors may be tempted to make hasty investment
    decisions. By simulating different scenarios, investors can see how their portfolios
    will perform under different market conditions, giving them confidence in their
    investment decisions.
  prefs: []
  type: TYPE_NORMAL
- en: Investors must understand their investment objectives and risk tolerance to
    optimize investment decisions, using financial portfolio simulation. This involves
    identifying their investment goals, the time horizon to achieve these goals, and
    the level of risk they are willing to take on. Once these factors have been established,
    investors can use portfolio simulation to test different investment scenarios
    and determine an optimal investment strategy. For example, an investor with a
    long-term investment horizon may be willing to take on more risk in their portfolio
    than an investor with a short-term investment horizon. By simulating different
    scenarios, the investor can determine the optimal asset allocation for their portfolio
    to achieve their investment objectives, while minimizing risk.
  prefs: []
  type: TYPE_NORMAL
- en: Therefore, financial portfolio simulation is a valuable tool investors can use
    to optimize their investment decisions. It provides investors with a clear understanding
    of their risk tolerance, predicts how their portfolio will perform in different
    market conditions, and enables them to make informed investment decisions based
    on their investment objectives. Using portfolio simulation to test different investment
    scenarios, investors can determine the optimal asset allocation for their portfolio,
    ensuring they achieve their investment objectives while minimizing risk. As financial
    markets evolve, financial portfolio simulation will remain essential for investors
    seeking to maximize returns and manage risk. The following passage talks about
    the techniques used in financial portfolio simulation techniques.
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio simulation techniques
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A financial portfolio simulation is an important tool for investors to evaluate
    and manage risks associated with their investment portfolio. Using different techniques,
    investors can simulate various scenarios to determine the potential impact of
    market fluctuations and make informed investment decisions. In this essay, we
    will discuss three popular techniques used in financial portfolio simulation –
    the Monte Carlo simulation, stress testing, and sensitivity analysis.
  prefs: []
  type: TYPE_NORMAL
- en: '**The Monte Carlo simulation** is a statistical technique used to model and
    analyze the behavior of complex systems, such as financial portfolios. It involves
    running multiple simulations with different inputs to generate various potential
    outcomes. These inputs can include variables such as interest rates, inflation
    rates, and market returns. A Monte Carlo simulation outputs a probability distribution
    of potential investment returns, which can help investors make informed decisions
    about risk and reward. As expert investor Ray Dalio once said:'
  prefs: []
  type: TYPE_NORMAL
- en: If you can simulate a situation a thousand times, you probably have a pretty
    good idea of what’s going to happen.
  prefs: []
  type: TYPE_NORMAL
- en: '**Stress testing** is another technique used in financial portfolio simulation.
    It involves simulating extreme scenarios, such as a recession or a market crash,
    to determine the potential impact on a portfolio. By running stress tests, investors
    can identify potential portfolio weaknesses and adjust to mitigate risks. Portfolio
    manager John Rekenthaler had this to say about stress testing:'
  prefs: []
  type: TYPE_NORMAL
- en: Stress testing is essential because it shows you where your portfolio is vulnerable.
    It’s like running fire drills to prepare you in an emergency.
  prefs: []
  type: TYPE_NORMAL
- en: '**Sensitivity analysis** is a technique used to determine how changes in specific
    variables can impact the performance of a portfolio. It involves identifying key
    variables, such as interest rates or inflation rates, and analyzing how changes
    in these variables can impact the portfolio’s performance. By conducting sensitivity
    analysis, investors can identify which variables impact the portfolio’s performance
    the most and adjust their investment strategy accordingly. Financial advisor Lisa
    Kirchenbauer noted the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Sensitivity analysis can help investors understand how different variables interact
    with each other and how changes in one variable can impact the overall portfolio.
  prefs: []
  type: TYPE_NORMAL
- en: Financial portfolio simulation is critical for investors to manage risks and
    make informed investment decisions. Using techniques such as the Monte Carlo simulation,
    stress testing, and sensitivity analysis, investors can simulate various scenarios
    and identify potential weaknesses in their portfolios. As a result, investors
    can make informed decisions to optimize their portfolio’s performance and minimize
    risks. The following subsection discusses the concepts and methods involved in
    implementing stress testing.
  prefs: []
  type: TYPE_NORMAL
- en: Stress testing
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Stress testing is a process used to evaluate the resilience of financial institutions,
    systems, or portfolios to potential adverse events or shocks. It involves simulating
    extreme scenarios and measuring the impact on a portfolio, system, or institution’s
    financial health. Stress testing is an essential tool in risk management, allowing
    financial institutions to identify potential weaknesses and prepare for potential
    risks. The purpose of stress testing is to evaluate the impact of unexpected events
    on a portfolio, institution, or system. For example, a stress test may simulate
    the impact of a significant economic downturn, a large market sell-off, or a geopolitical
    crisis. The scenarios are designed to be severe enough to test the resilience
    of the portfolio, institution, or system but also realistic enough to provide
    meaningful insights.
  prefs: []
  type: TYPE_NORMAL
- en: 'Stress testing involves a range of techniques, including the following:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Scenario analysis**: This technique involves identifying potential scenarios
    and simulating the impact on a portfolio, institution, or system. The scenarios
    are designed to be extreme and may involve a range of adverse events, such as
    a sharp increase in interest rates or a large drop in asset prices.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Sensitivity analysis**: This technique involves varying one or more input
    parameters to evaluate the impact on the output. For example, sensitivity analysis
    may involve increasing interest rates by a specific percentage and evaluating
    the impact on the portfolio’s returns.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Reverse stress testing**: This technique involves identifying the level of
    stress that would cause significant losses or a severe impact on an institution,
    system, or portfolio. Reverse stress testing can help identify the key vulnerabilities
    and allow for the development of appropriate risk mitigation strategies.'
  prefs: []
  type: TYPE_NORMAL
- en: 'A report by the International Monetary Fund had the following to say about
    stress testing:'
  prefs: []
  type: TYPE_NORMAL
- en: Stress testing has become an increasingly important tool in the toolkit of regulators
    and supervisors for assessing the resilience of financial systems and individual
    institutions. It has proved invaluable for identifying potential vulnerabilities,
    quantifying risk, and testing the effectiveness of mitigation strategies.
  prefs: []
  type: TYPE_NORMAL
- en: Hence, stress testing is a vital tool in risk management, allowing financial
    institutions to identify potential vulnerabilities and prepare for potential risks.
    The use of scenario analysis, sensitivity analysis, and reverse stress testing
    provides insights into the impact of unexpected events on the financial health
    of a portfolio, institution, or system. As the financial landscape continues to
    evolve, stress testing will remain an essential tool to ensure a financial system’s
    stability. The following techniques used in a financial portfolio simulation are
    discussed in next section.
  prefs: []
  type: TYPE_NORMAL
- en: The Monte Carlo simulation
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: The Monte Carlo simulation is a popular technique used in financial portfolio
    simulation to model the behavior of financial assets and estimate a portfolio’s
    potential risks and returns. This technique involves generating multiple random
    scenarios of market behavior, which are used to simulate the performance of a
    portfolio over a given time horizon. In this subsection, we will explore the various
    aspects of the Monte Carlo simulation as a tool for a financial portfolio simulation.
  prefs: []
  type: TYPE_NORMAL
- en: One of the key benefits of the Monte Carlo simulation is that it enables investors
    to generate a range of possible outcomes for their portfolio rather than just
    relying on a single prediction. By running multiple simulations, investors can
    better understand the risks associated with their portfolio and adjust their investment
    strategy accordingly. This is particularly important when dealing with complex
    portfolios that involve a wide range of assets.
  prefs: []
  type: TYPE_NORMAL
- en: 'The Monte Carlo simulation technique involves the following steps:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Defining the portfolio**: The first step in the Monte Carlo simulation is
    defining the analyzed portfolio. This involves specifying the individual assets,
    their expected returns, and the correlations between them.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Defining the probability distributions**: The next step is to define the
    probability distributions for each asset in the portfolio. This involves specifying
    the mean and standard deviation of returns for each asset and any other relevant
    statistical parameters.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Generating random scenarios**: Once the portfolio and probability distributions
    have been defined, the Monte Carlo simulation generates many random scenarios
    of market behavior. These scenarios are generated based on the probability distributions
    specified in the previous step.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Simulating portfolio performance**: For each random scenario, the Monte Carlo
    simulation calculates the returns for the portfolio based on the asset weights
    and correlations specified in the first step. This generates a distribution of
    possible portfolio returns.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '**Analyzing results**: Finally, the Monte Carlo simulation provides a range
    of statistics that can be used to analyze the simulation results, such as the
    expected value of the portfolio, the standard deviation of returns, and the probability
    of achieving a certain level of return.'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: The Monte Carlo simulation is a powerful tool for financial portfolio simulation,
    providing investors with a range of possible outcomes and allowing them to better
    understand the risks associated with their investments. This technique allows
    investors to make more informed decisions and adjust their investment strategy
    to maximize their returns, while minimizing their risk exposure.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s suppose an investor wants to evaluate the risk and return of a particular
    portfolio containing a mix of stocks, bonds, and cash. The portfolio comprises
    60% stocks, 30% bonds, and 10% cash. To evaluate the performance of this portfolio,
    the investor can use the Monte Carlo simulation, which involves the following
    steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Identify the historical returns and volatility of each asset class in the portfolio.
    For example, let’s say that historical data shows the annual returns and volatility
    of stocks are 10% and 20%, respectively. In comparison, bonds have an annual return
    of 5% and a volatility of 10%, and cash has a return of 2% with no volatility.
  prefs: []
  type: TYPE_NORMAL
- en: Generate random numbers to simulate the future performance of each asset class
    in the portfolio. The Monte Carlo simulation randomly generates a set of possible
    future outcomes based on historical data.
  prefs: []
  type: TYPE_NORMAL
- en: Calculate the overall portfolio returns based on the simulated outcomes of each
    asset class. For example, if the simulation generates a return of 12% for stocks,
    4% for bonds, and 2% for cash, the overall portfolio return would be 8.4%.
  prefs: []
  type: TYPE_NORMAL
- en: Repeat the simulation multiple times to generate a range of possible outcomes.
    The Monte Carlo simulation allows an investor to model a range of possible outcomes
    and assess the probability of each outcome.
  prefs: []
  type: TYPE_NORMAL
- en: Evaluate the risk and return of the portfolio based on the range of possible
    outcomes. This step involves calculating the portfolio’s expected return and standard
    deviation based on the simulated outcomes. An investor can then use this information
    to make informed decisions about their investment strategy.
  prefs: []
  type: TYPE_NORMAL
- en: 'David Booth, the founder and executive chairman of a prominent investment firm,
    notes the following:'
  prefs: []
  type: TYPE_NORMAL
- en: Monte Carlo simulation can help investors better understand the potential outcomes
    of their investment strategy and make more informed decisions. It allows investors
    to assess the impact of various factors on their portfolio performance and better
    prepare for unexpected market conditions.
  prefs: []
  type: TYPE_NORMAL
- en: The Monte Carlo simulation is a valuable tool in financial portfolio simulation
    that can help investors optimize their investment strategy and mitigate risk.
  prefs: []
  type: TYPE_NORMAL
- en: Financial modeling for portfolio optimization
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Computer algorithms and models have become increasingly important in a financial
    portfolio simulation, and the Monte Carlo simulation is a popular technique used
    by these algorithms and models. Here is an example of how the Monte Carlo simulation
    can be used in a financial portfolio simulation by computer algorithms and models:'
  prefs: []
  type: TYPE_NORMAL
- en: The algorithm or model generates many scenarios that could impact a portfolio,
    based on historical data and assumptions about future market conditions.
  prefs: []
  type: TYPE_NORMAL
- en: For each scenario, the algorithm or model calculates the expected returns and
    risks for the portfolio, based on the assets it contains and their historical
    correlations.
  prefs: []
  type: TYPE_NORMAL
- en: The algorithm or model uses these expected returns and risks to calculate the
    portfolio’s expected value, volatility, and the probability of various outcomes,
    such as gains or losses.
  prefs: []
  type: TYPE_NORMAL
- en: By repeating this process thousands or even millions of times, the algorithm
    or model creates a distribution of potential portfolio outcomes, which can be
    used to estimate the portfolio’s risk and return characteristics under various
    market conditions.
  prefs: []
  type: TYPE_NORMAL
- en: This distribution can then be analyzed to identify potential weaknesses or opportunities
    in the portfolio and optimize the portfolio’s asset allocation or risk management
    strategies.
  prefs: []
  type: TYPE_NORMAL
- en: 'According to Professor David Ruppert, a renowned expert in the field, the Monte
    Carlo simulation is a powerful tool for modeling complex systems, including financial
    portfolios:'
  prefs: []
  type: TYPE_NORMAL
- en: Monte Carlo simulation allows us to deal with very high-dimensional, very complex
    models that we couldn’t otherwise solve analytically. And it allows us to do sensitivity
    analyses, to see how the model output changes when we change inputs so that we
    can identify the most important variables and the sources of risk.
  prefs: []
  type: TYPE_NORMAL
- en: Using the Monte Carlo simulation and other advanced techniques, computer algorithms
    and models can help investors make more informed decisions and manage their portfolios
    more effectively in a complex and rapidly changing financial landscape.
  prefs: []
  type: TYPE_NORMAL
- en: Optimization algorithms
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'Optimization algorithms are used in financial portfolio optimization to select
    the most appropriate investment mix for a given investor’s preferences and constraints.
    Here are some commonly used optimization algorithms:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Linear programming**: A mathematical technique to optimize a linear objective
    function, subject to linear constraints. Linear programming is used in portfolio
    optimization to determine the optimal portfolio allocation.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Quadratic programming**: A mathematical technique to optimize a quadratic
    objective function subject to linear constraints. Quadratic programming is used
    in portfolio optimization to determine an optimal portfolio, considering higher-order
    moments of the return distribution, such as volatility and skewness.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Genetic algorithm**: A heuristic optimization technique inspired by natural
    selection. Genetic algorithms use a population of candidate solutions, apply genetic
    operators such as mutation and crossover to create new candidate solutions, and
    select the fittest candidates based on a fitness function.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: According to Dr. Harry Markowitz, Nobel laureate and father of modern portfolio
    theory,
  prefs: []
  type: TYPE_NORMAL
- en: The appropriate mathematical technique for optimizing portfolios depends on
    the investor’s objectives, constraints, and preferences, as well as the characteristics
    of the securities being considered.
  prefs: []
  type: TYPE_NORMAL
- en: Therefore, the choice of optimization algorithm should be made based on the
    investor’s specific requirements, and the portfolio should be optimized.
  prefs: []
  type: TYPE_NORMAL
- en: Portfolio management using traditional machine learning algorithms
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Classical implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Portfolio optimization is a problem related to the financial services and banking
    industry that emerged with Markovitz’s seminal paper in 1952 ([https://onlinelibrary.wiley.com/doi/full/10.1111/j.1540-6261.1952.tb01525.x](https://onlinelibrary.wiley.com/doi/full/10.1111/j.1540-6261.1952.tb01525.x)).
    The model describes a set of assets x i ∈ X from which a subset needs to be picked
    to maximize the revenue, while minimizing the risk at 𝑡 future time steps. For
    a given period, each asset has an expected return linked to it, and the covariance
    between assets sets the risk amount in terms of diversification (for the sake
    of simplicity). The idea behind this diversification is that if we only invest
    in the assets with the highest revenue, the risk of them being driven by the same
    factors if our investment fails is bigger than if we diversify our portfolio.
    We will focus on a single-time-step process, assuming that local optima are part
    of the longer-time-step trajectory toward the global optima of our portfolio.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s consider, then, a single-time step optimization for the sake of simplicity.
    The investment comes at a cost. A budget (𝐵) is associated with the investment
    in a portfolio configuration. It is described by the summation cost of investing
    in each asset as b i, where i is the index of the particular asset. Ideally, our
    recommendation should not surpass this condition (∑ b i < B). Hence, this classical
    optimization problem is often posed as:'
  prefs: []
  type: TYPE_NORMAL
- en: ∑ i=1 n  x i e i− θ∑ i,j=1 n  x i x j c ij
  prefs: []
  type: TYPE_NORMAL
- en: s . t. ∑ i=1 n x i b i ≤ B
  prefs: []
  type: TYPE_NORMAL
- en: where x i ∈ {0,1} is the mask associated with the selection of our set of assets
    and 𝜃 is a Lagrangian operator modulating the amount of risk we want to assume.
    We have binarized this selection, as it simplifies the calculation. Still, more
    compelled portfolio investments can be considered to tackle those three aspects
    of the model (revenue, risk, and budget).
  prefs: []
  type: TYPE_NORMAL
- en: 'We minimize that very same model, as it will fit better the technical approach
    we will follow. Thus, the final model would look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: − ∑ i=1 n x i e i+ θ∑ i,j=1 n x i x j c ij
  prefs: []
  type: TYPE_NORMAL
- en: s . t. ∑ i=1 n x i b i ≤ B
  prefs: []
  type: TYPE_NORMAL
- en: 'First, we will load our data to build the optimization problem:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'From the loaded data, we can store calculated returns, covariance, and costs
    of assets in respective variables. We will also set up the budget at 50%:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Next, let’s plot the bar chart for returns:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '![Figure 5.3 – Returns by asset](img/B19146_05_003.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.3 – Returns by asset
  prefs: []
  type: TYPE_NORMAL
- en: Here, we can observe that only BNBBTC and ETHBTC give positive returns, whereas
    LTCBTC, NEOBTC, and QTUETH give negative returns.
  prefs: []
  type: TYPE_NORMAL
- en: 'We already have covariance calculated in our data file. Let’s create the covariance
    plot as well:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '![Figure 5.4 – The correlation matrix](img/B19146_05_004.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.4 – The correlation matrix
  prefs: []
  type: TYPE_NORMAL
- en: The preceding covariance matrix shows how different joint variability is between
    equities. This way, we can identify equities whose variance may be driven by the
    same factors and be aware of the risk of investing in both as part of the same
    portfolio. These values will be introduced into our equation as c ij coefficients.
  prefs: []
  type: TYPE_NORMAL
- en: 'A popular choice to solve optimization problems such as the one posed previously
    is the usage of optimization libraries, such as CVX and its Python implementation
    (`cvxpy`), with a mixed integer optimization approach, as our problem is restricted
    by the Boolean values that our 𝑥 variables can take. The convexity of our problem
    is a major assumption at this point, which would be a requirement to be checked
    before the solver selection in our case, but for the number of equities involved,
    this option would exemplify how to use a classical solver without doing much coding:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: We have used 0.03 as the risk penalty for the Lagrange multiplier. CVXPY interfaces
    with a wide range of solvers; the algorithms used by these solvers have arguments
    related to stopping criteria and strategies from improving solution quality. There
    is no one choice of argument that is perfect for every problem. If you don’t get
    satisfactory results from a solver, you can try changing its arguments. The exact
    way this is done depends on the specific solver.
  prefs: []
  type: TYPE_NORMAL
- en: 'We have used the ‘`ECOS_BB`’ solver in our code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: The optimal value for the problem we get is ‘-0.0018521365020072623’. The following
    is a snippet of the assets selected and not selected.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.5 – The asset selection](img/B19146_05_005.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.5 – The asset selection
  prefs: []
  type: TYPE_NORMAL
- en: We can see here that ETHBTC and BNBBTC were selected, and from the historical
    return, these two assets gave positive returns, while other assets were not selected.
  prefs: []
  type: TYPE_NORMAL
- en: Let’s move toward quantum implementation now. We will look at an annealing-based
    implementation using the D-Wave SDK and a gate-based implementation using Qiskit.
  prefs: []
  type: TYPE_NORMAL
- en: Quantum algorithm portfolio management implementation
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Quantum annealers
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Quantum annealers are specialized machines capable of finding the minimum energy
    solution to a given problem, following the adiabatic principle. We talked about
    some of these machines in [*Chapter 2*](B19146_02.xhtml#_idTextAnchor032), but
    we will now cover in detail how they can be used to solve a problem such as portfolio
    optimization.
  prefs: []
  type: TYPE_NORMAL
- en: Quantum annealers require a target problem, set in its matrix form, to place
    variables as a mask. In our portfolio example, solutions will be encoded as binary
    decisions if the asset *n* will be included in our final portfolio. Therefore,
    our problem matrix should reflect the effect of including an asset or not in a
    solution.
  prefs: []
  type: TYPE_NORMAL
- en: For this, often in the literature, it is found that problems need to be placed
    on their QUBO (or Ising) form. **QUBO** stands for **Quadratic Unconstrained Binary
    Optimization**, which means binary variables are considered (0 or 1), only two-way
    multiplications are represented (X i × X j), and all the information is contained
    within the objective function.
  prefs: []
  type: TYPE_NORMAL
- en: 'Therefore, a canonical shape for our QUBO problem would look like this:'
  prefs: []
  type: TYPE_NORMAL
- en: x T Qx
  prefs: []
  type: TYPE_NORMAL
- en: Where Q is the matrix containing all the information.
  prefs: []
  type: TYPE_NORMAL
- en: 'To shape our portfolio like this, we would need to construct our objective
    function so that the asset selection return, diversification risk, and budget
    constraints are included in a single equation, like the following:'
  prefs: []
  type: TYPE_NORMAL
- en: − ∑ i=1 n x i e i+ θ 1 ∑ i,j=1 n x i x j c ij + θ 2 (∑ i=1 n x i b i − B) 2
  prefs: []
  type: TYPE_NORMAL
- en: Here, ei represents the expected return if the i asset is selected within the
    portfolio. cij represents the risk of selecting two assets simultaneously, as
    they could be driven by the same underlying process, increasing our risk. bi is
    associated with the cost of acquiring the i asset, and the sum of all assets should
    not exceed the available budget (B). Two θ values represent the relevance of that
    term, meaning we could surpass our initial budget if we allow it or consider high-risk
    portfolios if we decrease the value of θ1\. We can modulate the result, as it
    needs to be unconstrained (the U in QUBO), but it can be modulated according to
    our priorities each time.
  prefs: []
  type: TYPE_NORMAL
- en: Once the problem is set into this canonical form, you can easily take it to
    a quantum annealing machine to obtain the results.
  prefs: []
  type: TYPE_NORMAL
- en: D-Wave implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: D-Wave is not only one of those machines but also one of the first market-ready
    quantum computers, appearing almost 10 years ago. Its devices can be accessed
    as a cloud service and be freely used (at least for some minutes per month). Its
    online service is called Leap ([https://cloud.dwavesys.com/leap/login](https://cloud.dwavesys.com/leap/login)),
    and after registering, the welcome page will let you know your remaining computing
    time, as shown in the following figure.
  prefs: []
  type: TYPE_NORMAL
- en: '![Figure 5.6 – The Leap dashboard](img/B19146_05_006.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.6 – The Leap dashboard
  prefs: []
  type: TYPE_NORMAL
- en: This is where the access token can be retrieved, which will be used to connect
    to the service once your local environment is ready.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s proceed and start building our portfolio problem to solve it using the
    D-Waves platform. First, we must load our previous data, based on the information
    retrieved from Binance:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'Returns and covariances will be used to compose our target problem. Also, a
    budget needs to be defined to restrict the amounts of assets we want to select.
    In this case, this will be imposed as 50% of the total amounts our assets would
    add up to:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Thanks to the PyQUBO library, our previous formulation can easily translate
    into an encoding problem into D-Wave’s chip:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'This model serves different objectives, as we can play with theta parameters
    to make budget or diversification terms more or less strict:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'This is the actual Q matrix, as expected in the preceding equation 1\. Up to
    this point, it is a matter of formulating our target problem so that D-Wave’s
    annealing machine can process it. The following steps will take this model to
    the annealer, so we must instantiate it:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'Apart from D-Wave’s libraries, additional libraries are required to embed the
    problem in our target chip architecture. This will be discussed more in detail
    in *Chapter 9*, but the chip architecture requires us to find a suitable embedding
    for our problem. Thanks to the `minorminer` library, this only requires a few
    lines of code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'Once the problem counts with a suitable embedding, we are set to send it to
    the quantum machine. We can invoke the sampler to obtain the end results after
    our problem has spent an amount of time, called annealing time, in D-Wave’s chip:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: This is the minimum energy solution found after 10 runs, with 10 microseconds
    of annealing time. This encoding reveals that our best portfolio would comprise
    the first and third assets, given the order in which we have encoded their information
    (ETHBTC in our BNBBTC example).
  prefs: []
  type: TYPE_NORMAL
- en: Also, it is relevant that all then runs have revealed this as the optimal solution
    after annealing time (`num_ocurrences=10`). This can be sometimes the case, as
    the solution may have a lower success probability. This will be more relevant
    when solving these problems using gate-based quantum devices.
  prefs: []
  type: TYPE_NORMAL
- en: Qiskit implementation
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Qiskit is the framework we will use to try to solve the same problem, but we
    will use gate-based quantum devices. Gate-based devices allow more universal settings
    to solve annealing problems, but any other component is also allowed. There are
    devices you would work on when trying to solve using QML techniques or gate-based
    algorithms, as in the case of Shor’s, Grover, and so on, as discussed in [*Chapter
    2*](B19146_02.xhtml#_idTextAnchor032).
  prefs: []
  type: TYPE_NORMAL
- en: 'In this case, Qiskit already provides high abstraction level libraries for
    finance so that our coding requirements can be minimized, instead of doing it
    from scratch. For example, composing our quadratic problem based on Binance data
    would have the following lines:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'The latest equation represents this quadratic program, and Qiskit already provides
    the means to solve it, using classical NumPy-based solvers:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: Even though this shows the solution to our problem as expected, the process
    can be expensive when scaling to larger portfolio configurations, as it explores
    the whole landscape of potential solutions.
  prefs: []
  type: TYPE_NORMAL
- en: 'Ideally, variational approaches should be more efficient in exploring these
    large solution spaces, given the nature of quantum computing. When dealing with
    all those options simultaneously and evolving them, highlighting the one that
    minimizes our objective is where these techniques shine. Two main steps are needed
    to transfer our quadratic problem to a quantum setup:'
  prefs: []
  type: TYPE_NORMAL
- en: A **Parameterized Quantum Circuit** (**PQC**) or ansatz
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: An optimization procedure that will adjust and find the appropriate parameters
    for our PQC
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: For the first example, the **Quantum Approximate Optimization Algorithm** (**QAOA**)
    will be our candidate algorithm to solve our problem. It is a method that is directly
    inherited from how annealers deal with this type of problem, setting alternating
    Hamiltonians for the target problem and the Mixer Hamiltonian.
  prefs: []
  type: TYPE_NORMAL
- en: 'The PQC has a fixed shape for a given problem, and only repetitions of it are
    required for selection. By varying the number of repetitions, we should be able
    to increase the success probability of our target state, the solution to our problem.
    Then, variationally, we want to find the appropriate set of parameters that maximize
    this success probability. In this case, COBYLA will be our chosen optimizer, given
    its fast performance. Other options should also be tried:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Well, for our first attempt, even though we found the best solution, it competes
    against other solutions under the same quantum state. We must remember that the
    result of all the operations we perform on a quantum device will generate a quantum
    state that should, ideally, have our candidate solution among the states composing
    it. If it also has a bigger probability amplitude, it will be more likely to succeed
    when it collapses to one of those classical states upon measurement. Therefore,
    we want to find a result whose probability is bigger than the one shown here.
  prefs: []
  type: TYPE_NORMAL
- en: 'We could try out a different number of layers or repetitions between the problem
    and the mixer Hamiltonian:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: If this approach does not seem right, we can try varying the optimization method
    of the approach in general, looking for a different ansatz composition.
  prefs: []
  type: TYPE_NORMAL
- en: '**Variational Quantum Eignesolver** (**VQE**) allows for more generic approaches
    to ansatz description. For example, the TwoLocal PQC implementation is used in
    the following example. The TwoLocal circuit can hold several repetitions of the
    same scheme, containing different, arbitrarily chosen operations:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: '![Figure 5.7 – A circuit of three repetitions of the RY rotations and CZ two-qubit
    gates produced by the preceding code](img/B19146_05_007.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.7 – A circuit of three repetitions of the RY rotations and CZ two-qubit
    gates produced by the preceding code
  prefs: []
  type: TYPE_NORMAL
- en: 'We need to find the theta parameters to solve our problem. This is where a
    variational approach comes into play – in this case, using the COBYLA solver again
    to find those ideal parameters:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 'As shown in the preceding code, the VQE requires an ansatz or PQC, an optimizer,
    and a quantum instance, the device in which the evaluations of the quantum circuit
    will take place. In this case, a local simulation will be used, but we will see
    in [*Chapter 8*](B19146_08.xhtml#_idTextAnchor157) how this evaluation can use
    cloud-based resources, as in the case of D-Wave. After some iterations (a maximum
    of 500), we can print the results for our portfolio problem:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: The found solution matches the optimal solution in our previous examples, but
    the success probability of finding it is not 1.0 but almost 0\. This means if
    only one shot of the circuit is allowed with those parameters and we measure the
    classical bit string at the end of the process, it is improbable that this state
    will be chosen. It can be complicated to understand from the classical certainty.
    However, dealing with quantum states may lead to these sorts of cases, where the
    best solution is a composition of the optimal with suboptimal options on different
    mixture levels.
  prefs: []
  type: TYPE_NORMAL
- en: The work of the quantum scientist will involve finding a good approach to maximize
    these odds by changing the PQC, optimization method, or global procedure.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, by extending the number of repetitions on TwoLocal ansatz, we
    can see how these odds vary:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: 'That’s much better. Now, if we run our trained ansatz five times, with a high
    probability, the optimal solution will be found at least once. We could try it
    by simply composing our circuit, binding the parameters, and measuring for a set
    of runs:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: '![Figure 5.8 – The probability output by quantum states](img/B19146_05_008.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 5.8 – The probability output by quantum states
  prefs: []
  type: TYPE_NORMAL
- en: Conclusion
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: When scaling to larger portfolios, computing the optimal result might be too
    expensive compared to quantum approaches. Still, as we have seen, even when quantum-computing
    those large combinatorial problems, they come at the cost of needing a complete
    certainty of the outcome.
  prefs: []
  type: TYPE_NORMAL
- en: It is important to understand that these techniques require, as happens in traditional
    machine learning approaches, a good understanding of how the best architecture
    for our ansatz plays in our favor. And in many cases, this will come from the
    experience of fitting against different types of portfolios and stock combinations.
    Not all assets show similar behaviors. This will require exploring the vast extension
    of potential ansatzes, repetitions of schemes in those ansatzes, and optimization
    techniques that require fewer iterations to find the best parameters.
  prefs: []
  type: TYPE_NORMAL
- en: Even though gate-based quantum devices may offer a generalist approach to quantum
    computation, it is undeniable that, nowadays, quantum annealers provide devices
    capable of handling larger portfolios without the hustle of looking for and training
    variational approaches.
  prefs: []
  type: TYPE_NORMAL
- en: The next chapter will introduce the credit risk analysis domain. An introduction
    will be provided on the theory and how to solve it classically and with quantum
    approaches.
  prefs: []
  type: TYPE_NORMAL
