- en: Chapter 8. Optimal Hedging
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第8章 最优对冲
- en: After discussing the theoretical background in the previous chapters, we will
    now focus on some practical problems of derivatives trading.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在前几章讨论了理论背景后，我们将重点讨论衍生品交易中的一些实际问题。
- en: Derivatives pricing, as detailed in *Daróczi et al. (2013)*, [Chapter 6](ch06.html
    "Chapter 6. Interest Rate Derivatives and Models"), *Derivatives Pricing*, is
    based on the availability of a replicating portfolio that consists of traded securities
    that offer the same cash flow as the derivative asset. In other words, the risk
    of a derivative can be perfectly hedged by holding a certain number of underlying
    assets and riskless bonds. Forward and futures contracts can be hedged statically,
    while the hedging of options needs a rebalancing of the portfolio from time to
    time. The perfect dynamic hedge presented by the **Black-Scholes-Merton (BSM)**
    model (*Black and Scholes, 1973*, *Merton, 1973*) has several limitations in reality.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 衍生品定价，如*Daróczi等人（2013）*所详细描述，[第6章](ch06.html "第6章. 利率衍生品与模型")，*衍生品定价*，基于一个由交易证券组成的复制组合，该组合提供与衍生品资产相同的现金流。换句话说，衍生品的风险可以通过持有一定数量的基础资产和无风险债券来完美对冲。远期和期货合约可以静态对冲，而期权的对冲则需要不时地重新平衡组合。**布莱克-舒尔斯-默顿（BSM）**模型（*布莱克和舒尔斯，1973*，*默顿，1973*）所呈现的完美动态对冲在现实中存在一些局限性。
- en: In this chapter, we are going to go into the details of the hedging of derivatives
    in a static as well as a dynamic setting. The effects of discrete time trading
    and the presence of transaction costs are presented. As in the case of discrete
    time hedging, the cost of the synthetic reproduction of an option becomes stochastic;
    hence, there is a sharp trade-off between risk and transaction costs. The optimal
    hedging period is derived according to the different goals of the optimization
    and is affected not only by market factors, but investor-specific parameters such
    as risk aversion as well.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，我们将深入探讨静态和动态环境下衍生品的对冲细节。将介绍离散时间交易的效果以及交易成本的存在。在离散时间对冲的情况下，期权的合成复制成本变得具有随机性；因此，风险和交易成本之间存在显著的权衡。最优对冲期根据优化的不同目标来推导，并且不仅受到市场因素的影响，还受到投资者特定参数（如风险厌恶）的影响。
- en: Hedging of derivatives
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 衍生品的对冲
- en: Hedging means to create a portfolio that offsets the risk of the original exposure.
    As risk is measured by the fluctuation of the future cash flow, the goal of hedging
    is usually the reduction of the variance of the total portfolio's value. The first
    chapter of *Daróczi et al. (2013)* presents the optimal hedging decision in the
    presence of the basis risk, when the hedging instrument and the position to be
    hedged are different. This often happens at the hedging of commodity exposure,
    because commodities are traded on exchanges, where only standardized (maturity,
    quantity, and quality) contracts are available.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 对冲是指创建一个能够抵消原始风险敞口的组合。由于风险是通过未来现金流的波动来衡量的，因此对冲的目标通常是减少整个组合价值的方差。*Daróczi等人（2013）*的第一章提出了在存在基差风险的情况下的最佳对冲决策，即对冲工具与待对冲头寸不同。这种情况通常发生在商品风险对冲中，因为商品是在交易所交易的，交易所只提供标准化的（到期日、数量和质量）合约。
- en: The optimal hedge ratio is the proportion of the hedging instrument as a percentage
    of the exposure that minimizes the volatility of the whole position. In this chapter,
    we will deal with the hedging of derivative positions, assuming that the underlying
    is also traded in the OTC market; therefore, there will be no mismatch between
    the exposure and the hedging derivative, so no basis risk arises.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 最优对冲比率是对冲工具占风险敞口的比例，其目的是最小化整个头寸的波动性。在本章中，我们将讨论衍生品头寸的对冲，假设基础资产也在场外交易市场交易；因此，风险敞口和对冲衍生品之间不会存在不匹配，也就不会产生基差风险。
- en: Market risk of derivatives
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 衍生品的市场风险
- en: The value of a forward or futures contract depends on the spot price of the
    underlying asset, the time to maturity, the risk-free rate, and the strike price;
    in the case of plain vanilla options, the volatility of the underlying asset also
    has an effect on the option price. This statement holds only if the underlying
    asset provides no cash flow (no income and no cost) till the maturity of the derivative
    transaction; otherwise, this (both incoming and outgoing) cash flow also has an
    effect on the price. For the purpose of simplicity, here we will discuss derivatives
    pricing under the assumption of no cash flow (non-dividend-paying stocks), although
    an extension of the model to other underlying assets (like currencies and commodities)
    needs some modifications in the formulas, but it has no impact on the basic logic.
    As the strike price is stable during maturity, only changes to the other four
    factors can cause a change in the value of the derivative. The sensitivity of
    the derivative towards the mentioned variables is shown by the Greeks, the first
    partial derivatives according to the given variable, as presented in detail in
    *Daróczi et al. (2013)* [Chapter 6](ch06.html "Chapter 6. Interest Rate Derivatives
    and Models"), *Derivatives Pricing*.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 远期或期货合约的价值取决于基础资产的现货价格、到期时间、无风险利率和行权价格；对于普通期权，基础资产的波动率也会影响期权价格。该说法仅在基础资产在衍生品交易到期之前没有现金流（没有收入和没有成本）的情况下成立；否则，这些（包括收入和支出）现金流也会影响价格。为了简化起见，本文将假设没有现金流（如非分红股票）来讨论衍生品定价，尽管将模型扩展到其他基础资产（如货币和商品）时，公式需要做一些修改，但基本逻辑不受影响。由于行权价格在到期期间是稳定的，因此只有其他四个因素的变化才会导致衍生品价值的变化。衍生品对这些变量的敏感度通过希腊字母来表示，即根据给定变量的偏导数，详细内容请参见
    *Daróczi 等人（2013）* [第6章](ch06.html "第6章 利率衍生品与模型")，*衍生品定价*。
- en: 'The Black-Scholes-Merton model assumes that both the risk-free interest rate
    and the volatility of the underlying are constant, so as the change of time is
    deterministic, the only stochastic variable that affects the value of the derivative
    is the spot price of the underlying asset. The risk that is derived from the fluctuation
    of the spot price can be eliminated by holding the exact delta amount, which is
    the sensitivity of the derivative''s price to the spot price (see Equation 1)
    of the underlying asset:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Black-Scholes-Merton 模型假设无风险利率和基础资产的波动率是常数，因此随着时间变化是确定性的，唯一影响衍生品价值的随机变量是基础资产的现货价格。由现货价格波动引发的风险可以通过持有确切的
    delta 数量来消除，delta 是衍生品价格对基础资产现货价格的敏感度（见方程式 1）：
- en: '![Market risk of derivatives](img/2078OT_08_01.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![衍生品市场风险](img/2078OT_08_01.jpg)'
- en: Equation 1
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 方程式 1
- en: Whether delta is stable or changes over time depends on the derivative, and
    leads to different (static or dynamic) hedging strategies (*Hull, 2009*) presented
    in the following section.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 无论 delta 是否稳定或随时间变化，都取决于导数，并导致不同的（静态或动态）对冲策略（*Hull, 2009*）在以下章节中进行展示。
- en: Static delta hedge
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 静态 delta 对冲
- en: 'Hedging of a forward agreement is straightforward as it is a binding obligation
    for both parties. Being in a long-forward position, we are sure that we will buy
    at maturity, while a short position means a sale of the underlying asset with
    certainty. So we can perfectly hedge our forward position by selling (long forward)
    or buying (short forward) the underlying at the amount of the derivative. We can
    check the delta of the forward by differentiating the value of the long-forward
    position:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 远期协议的对冲是直接的，因为它对双方都有约束力。处于长期远期头寸时，我们可以确定在到期时将会买入，而空头头寸则意味着将基础资产卖出。因此，我们可以通过按衍生品数量卖出（长期远期）或买入（短期远期）基础资产来完美对冲我们的远期头寸。我们可以通过对长期远期头寸的价值求导来检查远期的
    delta。
- en: '![Static delta hedge](img/2078OT_08_02.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![静态 delta 对冲](img/2078OT_08_02.jpg)'
- en: Equation 2
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 方程式 2
- en: Here, *LF* stands for the long forward, *S* denotes the spot price, and *K*
    is the strike price, which is the agreed forward price. The present value is denoted
    by *PV*.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*LF* 代表长期远期，*S* 表示现货价格，*K* 是行权价格，即约定的远期价格。现值由 *PV* 表示。
- en: So delta equals one, and it is independent of the actual market circumstances.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 所以 delta 等于 1，并且与实际市场状况无关。
- en: However, the value of a futures contract is the difference between the actual
    futures price (*F*) and the strike (*S*), because of the daily settlement of the
    position; hence, its delta is *F/S* and it changes with time. Consequently, a
    slight rebalancing of the position is needed, but in the absence of stochastic
    interest rates, the process of delta can be foreseen (*Hull, 2009*).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，期货合约的价值是实际期货价格（*F*）与行权价格（*S*）之间的差异，因为有每日的头寸结算；因此，它的 delta 是 *F/S* 并且会随着时间变化。因此，可能需要稍微调整头寸，但在没有随机利率的情况下，delta
    过程是可以预见的（*Hull, 2009*）。
- en: Dynamic delta hedge
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 动态 delta 对冲
- en: In the case of options, the delivery of the underlying is uncertain. It depends
    on the decision of the party in a long position; this is the party that bought
    the option. Not surprisingly, the hedging of a contingent claim cannot be achieved
    by a static buy-and-hold strategy presented in the previous point. In the framework
    of the binomial model, an option position is always hedged for the next *Δt* period,
    while in the Black-Scholes-Merton model, *Δt* converges to zero; thus, the hedging
    position is to be rebalanced in every instant. However, in the real world, practice
    assets can only be traded at discrete points of time, so the hedging portfolio
    is adjusted also at discrete time points. Let's look at the consequences of this
    in the example of a plain vanilla **ATM (at-the-money)** call option written on
    a non-dividend paying stock.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 对于期权来说，标的资产的交割是不确定的。它取决于持有多头头寸方的决定；即购买期权的一方。不出所料，前面提到的静态买入并持有策略无法对冲一个有条件的索赔。在二项式模型框架中，期权头寸总是对冲到下一个
    *Δt* 时期，而在 Black-Scholes-Merton 模型中，*Δt* 收敛于零；因此，期权对冲头寸必须在每一时刻重新平衡。然而，在现实世界中，实际资产只能在离散的时间点进行交易，因此对冲投资组合也会在离散的时间点进行调整。让我们看一下这一点在一个普通的
    **平价看涨期权（ATM）** 上的后果，该期权是在一个不支付股息的股票上写的。
- en: R contains a package, `OptHedge`, for the estimation of the value of an option
    and hedging strategy of call and put options on a grid at discrete time intervals;
    however, our aim is to illustrate the effect of the length of the trading periods.
    Therefore, we will use our own functions for the calculations.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: R 包含一个名为 `OptHedge` 的包，用于估算期权的价值以及在离散时间间隔内对看涨和看跌期权的对冲策略；然而，我们的目的是展示交易周期长度的影响。因此，我们将使用我们自己的函数进行计算。
- en: 'First, we install the package to be used:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们安装要使用的包：
- en: '[PRE0]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Then, we can check the BS price of the call by using the already known code
    on a chosen parameter set:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们可以使用已知的代码在选择的参数集上检查看涨期权的 BS 价格：
- en: '[PRE1]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We receive the given parameters and the price of the call option according
    to the Black-Scholes formula:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们根据 Black-Scholes 公式接收给定的参数和看涨期权的价格：
- en: '[PRE2]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Based on the BS model, the price of the call is 9.63487.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 基于 BS 模型，看涨期权的价格为 9.63487。
- en: In practice, usually, the prices of the options are quoted in the standardized
    markets, and the implied volatility can be inferred from the Black-Scholes formula.
    A trader who expects lower volatility in the future than the implied volatility
    can make a profit by selling the option and simultaneously delta hedging it. In
    the following scenario, we present delta hedging of the short position in the
    preceding option on a stock following a **geometric Brownian motion (GBM)**. We
    assume that all assumptions of the BSM model, except for the continuous-time trading,
    hold. In order to hedge the short option, we have to have delta amount of the
    stock, and as delta changes, we have to rebalance our portfolio regularly, in
    the following case, weekly, which makes it 26 times during the lifetime of the
    option. The frequency of the rebalancing should adjust to the liquidity and volatility
    of the underlying asset.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在实际操作中，期权的价格通常在标准化市场上报价，而隐含波动率可以从 Black-Scholes 公式中推导出来。一个预期未来波动率低于隐含波动率的交易员，可以通过卖出期权并同时进行
    delta 对冲来获利。在以下场景中，我们展示了在遵循 **几何布朗运动（GBM）** 的股票上，对前述期权的空头头寸进行 delta 对冲。我们假设 BSM
    模型的所有假设成立，除了连续时间交易。为了对冲空头期权，我们需要持有 delta 数量的股票，随着 delta 的变化，我们需要定期重新平衡我们的投资组合，在以下情况中，每周重新平衡一次，这使得期权的生命周期内共有
    26 次重新平衡。重新平衡的频率应根据标的资产的流动性和波动性进行调整。
- en: 'Let''s look at a possible future path of the stock price and the development
    of the delta. The `price_simulation` function generates the price process with
    the given parameters: initial stock price (*S[0]*), drift (*mu*), and volatility
    (*sigma*) of the GBM process and the remaining parameters of the call option (*K*,
    *Time*) and the chosen rebalancing period (*Δt*). After simulating the spot price
    process, the function calculates the delta and the price of the option for every
    interim date, and also plots them. By using the `set.seed` function, we can create
    reproducible simulations:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一下股票价格的一个可能未来路径以及delta的发展。`price_simulation`函数使用给定参数生成价格过程：初始股价（*S[0]*），漂移（*mu*），GBM过程的波动率（*sigma*）以及看涨期权的剩余参数（*K*，*Time*）和选定的再平衡周期（*Δt*）。在模拟现货价格过程后，该函数会计算每个中间日期的delta和期权价格，并绘制出来。通过使用`set.seed`函数，我们可以创建可重复的模拟：
- en: '[PRE3]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We then set the parameters of our function:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们设置函数的参数：
- en: '[PRE4]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'We will get a potential path of the stock price, the actual delta, and the
    corresponding option price:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将得到一个股票价格的潜在路径、实际delta以及相应的期权价格：
- en: '![Dynamic delta hedge](img/2078OT_08_03.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![动态 delta 对冲](img/2078OT_08_03.jpg)'
- en: We can see a possible future scenario, according to which the spot price rises
    and quickly arrives at an in-the-money level, so the option is exercised at maturity.
    The delta of the call follows the stock price's fluctuations and converges to
    one. The probability of exercising the call option increases if the spot price
    moves up, and in order to replicate the call, we have to buy some more stock,
    while the falling stock price leads to a lower delta, indicating a sale. All in
    all, we buy if the stock is expensive, and sell if the price is low. The price
    of the option derives from this cost of the hedging. The shorter the rebalancing
    period, the less the price movement that we have to follow.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到一个可能的未来场景，在这个场景中，现货价格上涨并迅速达到价内水平，因此期权在到期时被行使。看涨期权的delta随着股票价格的波动而变化，并最终收敛为1。如果现货价格上涨，看涨期权的行使概率增加，为了复制看涨期权，我们需要买入更多股票，而股票价格下跌则导致delta降低，表明需要卖出股票。总的来说，当股票贵时我们买入，股票便宜时我们卖出。期权的价格源自对冲成本。再平衡周期越短，我们需要跟踪的价格变动越少。
- en: The cost of hedging is defined as the present value of the cumulative net costs
    of buying and selling the stock (see *Hull, 2009*) needed to hedge the position.
    The total cost will have two parts, the amount paid to buy shares and the interest
    of financing the position. Following the BSM model, we use the risk-free interest
    rate for compounding. We will see that the cost of hedging depends on the future
    price movements, and by simulating several stock price paths, we can draw the
    cost distribution. Higher stock price volatility causes higher volatility of the
    cost of hedging.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 对冲成本定义为购买和卖出股票所需的累计净成本的现值（参见*Hull, 2009*），以对冲该头寸。总成本将包括两部分：购买股票的金额和为融资该头寸所支付的利息。根据BSM模型，我们使用无风险利率进行复利计算。我们将看到，对冲成本依赖于未来价格的波动，通过模拟多个股票价格路径，我们可以绘制成本分布。更高的股票价格波动会导致更高的对冲成本波动。
- en: 'The `Cost_simulation` function calculates the cost of hedging for the written
    call:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '`Cost_simulation`函数计算已卖出看涨期权的对冲成本：'
- en: '[PRE5]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In the following command, `share_cost` represents the cost of buying the underlying
    asset to maintain the hedge position, and `interest_cost` is the cost of financing
    the position:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下命令中，`share_cost`表示为了维持对冲头寸而购买基础资产的成本，`interest_cost`是融资该头寸的成本：
- en: '[PRE6]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'We can use the preceding defined function to generate different future price
    processes, based on which the cost of hedging can be calculated. Vector **A**
    collects several possible hedging costs and draws their histogram as a probability
    distribution. Next, we present hedging strategies, which rebalance weekly (A)
    and daily (B):'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用前面定义的函数生成不同的未来价格过程，并基于此计算对冲的成本。向量**A**收集了几种可能的对冲成本，并绘制其直方图作为概率分布。接下来，我们介绍了每周（A）和每日（B）再平衡的对冲策略：
- en: '[PRE7]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The output is the histogram of the generated cost outcomes:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 输出为生成的成本结果的直方图：
- en: '![Dynamic delta hedge](img/2078OT_08_04.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![动态 delta 对冲](img/2078OT_08_04.jpg)'
- en: The histogram on the left side shows the cost distribution of the weekly strategy,
    while the histogram on the right side belongs to the daily rebalancing strategy.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 左侧的直方图显示每周策略的成本分布，而右侧的直方图则属于每日再平衡策略。
- en: As we can see, the standard deviation of the cost of hedging can be reduced
    by shortening *Δt*, which indicates more frequent rebalancing of the portfolio.
    It is worth noticing that it is not only the volatility of the hedging cost that
    decreases with the shorter period, but the expected value is also lower, approaching
    the BS price.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，缩短*Δt*可以减少对冲成本的标准差，这表明更频繁的再平衡投资组合。值得注意的是，随着周期的缩短，不仅对冲成本的波动性降低，预期值也较低，接近BS价格。
- en: Comparing the performance of delta hedging
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 比较delta对冲的表现
- en: We can further investigate the effect of the rebalancing period by making a
    slight modification to the cost simulation function by which the same future paths
    will be selected. In this way, we can compare strategies with a different rebalancing
    period.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过对成本仿真函数进行轻微修改，进一步研究再平衡周期的影响，这样可以选择相同的未来路径。通过这种方式，我们可以比较不同再平衡周期的策略。
- en: The performance measure of delta hedging is defined by *Hull (2009)* as the
    ratio of the standard deviation of the cost of writing the option and hedging
    it to the theoretical price of the option.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: delta对冲的表现度量由*Hull (2009)*定义为写期权和对冲期权成本的标准差与期权理论价格的比率。
- en: 'The `Cost_simulation` function needs to be modified so that we can calculate
    several rebalancing periods together:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '`Cost_simulation` 函数需要修改，以便我们可以一起计算多个再平衡周期：'
- en: '[PRE8]'
  id: totrans-53
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'In the following command, the modified `cost_simulation` function is used for
    different rebalancing periods, and a table is generated that contains the expected
    value (*E*) with the lower and upper bound of the confidence level, the volatility
    of the cost of hedging (*v*), and the performance measure (*ratio*) ordered to
    the six rebalancing periods (0.5, 1, and 2 days, and 1, 2, and 4 weeks). We also
    receive two plots, the histograms of each strategy, and a chart that contains
    the normal curves fitted to the distributions:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下命令中，修改后的`cost_simulation`函数用于不同的再平衡周期，并生成包含预期值(*E*)、置信区间上下限、对冲成本波动性(*v*)以及表现度量(*ratio*)的表格，按照六个再平衡周期（0.5天、1天、2天、1周、2周、4周）排序。我们还会得到两张图，分别是每个策略的直方图，以及包含拟合到分布的正态曲线的图表：
- en: '[PRE9]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'In our simulation model, the output is as follows:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的仿真模型中，输出结果如下：
- en: '[PRE10]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The standard deviation of the cost of hedging becomes smaller as we rebalance
    the hedge position more often. The difference in the expected value is also significant
    at 95 percent significance level between the weekly and the monthly the rebalancing.
    Among the shorter periods, we did not find significant differences in the expected
    value:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 随着我们更频繁地进行对冲仓位再平衡，对冲成本的标准差变小。在95%显著性水平下，周度与月度再平衡之间的预期值差异也很明显。在较短周期中，我们没有发现预期值存在显著差异：
- en: '![Comparing the performance of delta hedging](img/2078OT_08_05.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![比较delta对冲的表现](img/2078OT_08_05.jpg)'
- en: The charts shown in the preceding image are similar to the previous analysis
    (with weekly and daily rebalancing), but here, we have more rebalancing periods.
    The effect of rebalancing frequency is presented by the distribution of the cost
    of hedging.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 前面图像中显示的图表与之前的分析（周度和日度再平衡）相似，但这里我们有更多的再平衡周期。再平衡频率的影响通过对冲成本的分布表现出来。
- en: '![Comparing the performance of delta hedging](img/2078OT_08_06.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![比较delta对冲的表现](img/2078OT_08_06.jpg)'
- en: We can compare the cost distributions of the given rebalancing periods on a
    single chart, as illustrated in the preceding section.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在一张图表上比较给定再平衡周期的成本分布，如前面一节所示。
- en: The time consumption can be reduced by decreasing the number of simulations.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 通过减少仿真次数，可以减少时间消耗。
- en: Hedging in the presence of transaction costs
  id: totrans-64
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在交易成本存在的情况下进行对冲
- en: 'As we shown earlier, increasing the number of portfolio adjustments leads to
    a decrease in the volatility of the hedging cost. As *Δt* approaches 0, the cost
    of hedging approximates the option price derived from the BS formula. Until now,
    we have disregarded the transaction costs, but here, we remove this assumption
    and analyze the effects of transaction costs on option hedging. As rebalancing
    becomes more frequent, transaction costs increase the cost of hedging, but at
    the same time, shorter rebalancing periods reduce the volatility of the hedging
    cost. Hence, it is worth examining this trade-off in more detail, and based on
    this, defining the optimal rebalancing strategy. An absolute (fixed for each transaction)
    or a relative (proportional to the transaction size) transaction cost can be added
    to the code by modifying the parameters when we define the function:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，增加投资组合调整次数会导致对冲成本波动性的降低。随着*Δt*趋近于0，对冲成本接近于通过BS公式得出的期权价格。到目前为止，我们忽略了交易成本，但在这里我们去除这一假设，分析交易成本对期权对冲的影响。随着再平衡变得更加频繁，交易成本增加了对冲成本，但同时，更短的再平衡周期减少了对冲成本的波动性。因此，值得更详细地研究这一权衡，并基于此定义最优的再平衡策略。通过在定义函数时修改参数，可以在代码中添加绝对（每次交易固定）或相对（与交易规模成比例）的交易成本：
- en: '[PRE11]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Then, the cost calculation method for the absolute transaction cost can be
    programmed as follows:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，可以按如下方式编写绝对交易成本的计算方法：
- en: '[PRE12]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'In the case of relative costs, the program code is as follows:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 对于相对成本的情况，程序代码如下：
- en: '[PRE13]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: When referring to the `cost_simulation` function, the absolute or relative cost
    has to be given. Let's check the effect of an absolute cost of 0.02 per transaction
    (we suppose that the unit of the cost and the extent of the trade are the same).
    In order to shorten the time consumption, we used only 100 simulated paths here.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在引用`cost_simulation`函数时，必须给定绝对或相对成本。让我们检查每次交易0.02的绝对成本的影响（我们假设成本单位与交易规模相同）。为了缩短时间消耗，这里仅使用了100条模拟路径。
- en: 'We have to change the parameters of the `cost_simulation` function in the cycle:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要在循环中更改`cost_simulation`函数的参数：
- en: '[PRE14]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Then, we get the table shown as follows:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们得到了如下所示的表格：
- en: '[PRE15]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Calculating with a fixed transaction cost of 0.02, the expected value of the
    hedging cost increases considerably. The shorter rebalancing periods are most
    affected as more trading enhances the costs. The standard deviation is also higher,
    mainly in cases of periods shorter than one week.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 通过固定交易成本0.02计算时，预期的对冲成本大幅增加。最短的再平衡周期受影响最大，因为更多的交易会增加成本。标准差也更高，尤其是在周期短于一周的情况下。
- en: 'We can see the effect of the relative transaction cost of 1 percent by applying
    the following change in the code:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过在代码中应用以下更改，观察1%的相对交易成本的影响：
- en: '[PRE16]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The expected hedging cost has increased further in the case of the shortest
    (daily or even more frequent) rebalancing periods, but we also found a more significant
    rise of the volatility (as shown in the following output table):'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在最短（每日或更频繁）再平衡周期的情况下，预期的对冲成本进一步增加，但我们也发现波动性有了更显著的上升（如下所示的输出表格）：
- en: '[PRE17]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: The presence of transaction costs offsets the volatility reduction effect of
    the more frequent rebalancing, so the optimal rebalancing period is to be determined
    by weighting these effects relative to each other.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 交易成本的存在抵消了更频繁再平衡所带来的波动性降低效果，因此最优的再平衡周期需要通过权衡这些效果来确定。
- en: Optimization of the hedge
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对冲优化
- en: In order to find the optimal length of the rebalancing period, we have to define
    the optimization criterion and the measure that is to be maximized or minimized.
    The usual aim of hedging is the reduction of the risk, measured by the variance
    of the cost of the hedge. According to this, the optimal hedge minimizes the volatility
    of the cost of hedging. Another aim of the optimization can be the minimization
    of the expected value of the cost. As we have seen, in the absence of transaction
    costs, these goals can be achieved simultaneously by rebalancing the hedging portfolio
    more and more frequently. On the other hand, transaction costs boost not only
    the expected value of the cost but also the volatility, which can rise drastically
    when the readjustment is too frequent.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 为了找到最佳的再平衡周期长度，我们必须定义优化标准和需要最大化或最小化的度量。对冲的常见目标是减少风险，即通过对冲成本的方差来衡量的风险。因此，最优的对冲策略应最小化对冲成本的波动性。优化的另一个目标可以是最小化成本的期望值。正如我们所看到的，在没有交易成本的情况下，通过越来越频繁地调整对冲投资组合，这些目标是可以同时实现的。另一方面，交易成本不仅会提高成本的期望值，还会提高波动性，当再平衡过于频繁时，波动性可能会大幅上升。
- en: 'It is a widespread method in finance when trade-off between the expected value
    and volatility has to be considered in order to define a utility function and
    an optimum as the maximum utility. For example, in the portfolio theory, an individual
    utility function is assumed, which is positively affected by the expected value
    of the return and negatively affected by its variance. We can use the same technique
    by defining a utility function that contains the expected value of the cost of
    hedging and its variance. However, in our case, both factors have a negative impact
    on the utility of the trader; therefore, both parameters must have a positive
    sign, and the function is to be minimized. Accordingly, the objective function
    will be a utility function defined as follows:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在金融领域，这是一种广泛使用的方法，特别是在需要在期望值与波动性之间做出权衡时，以定义效用函数并将最优解设为最大效用。例如，在投资组合理论中，假定存在一个个人效用函数，该函数受到回报期望值的正向影响，并受到回报方差的负向影响。我们也可以通过定义一个包含对冲成本期望值及其方差的效用函数来运用相同的技巧。然而，在我们的案例中，两个因素都会对交易者的效用产生负面影响；因此，两个参数都必须具有正号，且该函数应被最小化。因此，目标函数将是以下所定义的效用函数：
- en: '![Optimization of the hedge](img/2078OT_08_07.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![对冲优化](img/2078OT_08_07.jpg)'
- en: Equation 3
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 方程 3
- en: Here, *x* is the cost of the hedge as a random variable, *E* denotes its expected
    value, *Var* stands for its variance, and *α* is the risk aversion parameter.
    A higher *α* indicates a more risk averse investor/trader.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*x* 是对冲成本作为一个随机变量，*E* 表示其期望值，*Var* 代表其方差，*α* 是风险厌恶参数。更高的 *α* 表示更为厌恶风险的投资者/交易者。
- en: An alternative solution to the mean-variance optimization can be setting the
    expected (cost) value minimization as the main goal with the boundary condition
    that keeps a chosen risk measure under a predefined value. Here, we chose Value-at-Risk
    as the control variable, which is a type of downside risk measure, defined as
    the maximal loss or worst outcome at a predefined probability and over a selected
    time horizon.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 平均方差优化的替代方案可以是将期望（成本）值最小化作为主要目标，并设置边界条件，保持选定的风险度量低于预定值。在这里，我们选择了**在险价值**（Value-at-Risk，简称VaR）作为控制变量，这是一种下行风险度量，定义为在预定概率下的最大损失或最坏结果，并且在选定的时间范围内计算。
- en: 'The following code calculates the cost distribution based on 1,000 simulations
    for different rebalancing periods from 1-80 *Δt*. The unit of *Δt* is a quarter
    of a day, so *Δt* of 1 means four readjustments a day; the longest *Δt* of 80
    refers to a 20-day long period. The function collects the expected value, the
    standard deviation, and the 95 percentile of the distribution, and gives the result
    of the four different optimization scenarios in text format and also plots the
    results:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码通过1,000次模拟，计算了不同再平衡周期（1-80 *Δt*）下的成本分布。*Δt* 的单位是一天的四分之一，因此 *Δt* 为1表示每天四次再平衡；最长的
    *Δt* 为80，表示一个为期20天的周期。该函数收集期望值、标准差和分布的95百分位，并以文本格式给出四种不同优化情景的结果，同时绘制结果图表：
- en: '[PRE18]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The last optimization searches for the minimal cost that can be achieved with
    the condition that Value-at-Risk at the *q* significance level (the *q* percentile)
    does not exceed the predetermined threshold. As it is not necessary that this
    minimum exists, if the optimization fails, the minimum of q-VaR is given as the
    result.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 最后的优化搜索的是在VaR在*q*显著性水平（*q*百分位数）不超过预定阈值的条件下，能够实现的最小成本。由于不一定存在此最小值，如果优化失败，则给出q-VaR的最小值作为结果。
- en: Optimal hedging in the case of absolute transaction costs
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 绝对交易成本情况下的最优对冲
- en: The task is to find the optimal length of the rebalancing period in the case
    of transaction costs and for a vanilla call option with the already investigated
    parameters. Let's suppose that the transaction cost is 0.01 per trade.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 任务是寻找在交易成本情况下，针对已调查参数的普通看涨期权，最优的再平衡周期长度。假设每笔交易的交易成本为0.01。
- en: The output of the earlier function is a matrix **A** that contains the parameters
    of the distribution that belong to different rebalancing periods, and the optimum
    according to different criteria.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 前面函数的输出是一个矩阵**A**，其中包含属于不同再平衡周期的分布参数，以及根据不同标准的最优解。
- en: 'The first and last rows of the matrix **A** are shown next:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 矩阵**A**的第一行和最后一行如下所示：
- en: '[PRE19]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The number in the square brackets stands for the rebalancing period expressed
    in *Δt*. The next columns contain the expected value, the standard deviation,
    the 95 percent quantile, and the sum of the expected value and standard deviation.
    The results of the four optimization processes are summarized in the next output:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 方括号中的数字表示以*Δt*为单位的再平衡周期。接下来的列包含了预期值、标准差、95百分位数和预期值与标准差的和。四个优化过程的结果在下一个输出中总结：
- en: '[PRE20]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: The following figure depicts the results in the function of the rebalancing
    periods (in *Δt*). The dashed line shows the standard deviation and the solid
    line is the expected cost, while the dot dash and dotted lines stand for the value
    of the utility function (Equation 3) with an alpha parameter of 1 and 95 percentile
    respectively.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了再平衡周期（以*Δt*为单位）下的结果。虚线表示标准差，实线表示预期成本，而点划线和虚线分别表示效用函数（方程3）在alpha参数为1和95百分位数时的值。
- en: 'Although the optimization depends on the parameters, the chart illustrates
    the trade-off between the expected cost and the volatility in the presence of
    transaction costs:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管优化依赖于参数，但该图表展示了在存在交易成本的情况下，预期成本与波动性之间的权衡：
- en: '![Optimal hedging in the case of absolute transaction costs](img/2078OT_08_08.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![绝对交易成本情况下的最优对冲](img/2078OT_08_08.jpg)'
- en: The minimum of the expected cost (9.79) is not far away from the BS price of
    9.63\. The optimal rebalancing period is then 50 *Δt*, that is, 12.5 days long.
    At the lowest expected cost, the standard deviation is 2.21.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 预期成本的最小值（9.79）与BS价格9.63相差不远。此时，最优的再平衡周期为50*Δt*，即12.5天。此时，标准差为2.21。
- en: The volatility minimization results in the most frequent rebalancing, which
    means rebalancing 4 times a day; then, the minimum of the standard deviation is
    0.30, but the frequent trading increases the costs drastically. The expected cost
    is 14.57, which is about 50 percent higher than in the previous case.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 波动性最小化导致最频繁的再平衡，这意味着每天进行4次再平衡；此时，标准差的最小值为0.30，但频繁交易大幅增加了成本。预期成本为14.57，比之前的情况高出约50%。
- en: The optimization model based on the utility function defined in Equation 3 considers
    both aspects of the hedge, and the earlier output shows 8 *Δt* long rebalancing
    periods as optimal, that is, exactly 2 days. We can achieve an expected value
    of 10.29, which only somewhat exceeds the minimum, and the standard deviation
    is 0.86.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 基于方程3中定义的效用函数的优化模型考虑了对冲的两个方面，前面的输出显示8个*Δt*长的再平衡周期是最优的，即恰好2天。我们可以达到一个预期值为10.29，这仅略微超过最小值，标准差为0.86。
- en: The last row of the preceding output presents the results of the optimization
    using Value-at-Risk limits. We applied a 95% VaR and searched for the minimal
    expected cost at which, in 95% of the cases, the cost remains under a threshold
    of 12\. According to this, the optimal length of the readjustment is 14 *Δt*,
    that is, 3.5 days. The expected value of the cost is slightly lower (10.02) than
    in the previous case, where the result is offset by a slightly higher standard
    deviation (1.13).
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 前述输出的最后一行展示了使用风险价值（Value-at-Risk）限制的优化结果。我们应用了95%的VaR，并在95%的情况下寻找最小的预期成本，该成本始终低于12。根据这一结果，最佳的调整周期为14
    *Δt*，即3.5天。此时，成本的预期值略低（10.02），与之前的情况相比，结果因标准差略高（1.13）而有所偏移。
- en: Optimal hedging in the case of relative transaction costs
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 相对交易成本下的最佳对冲
- en: In this section, the same optimization problem is solved as in the previous
    section, with the exception that now the transaction cost is 1 percent of the
    deal. All other parameters are the same.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们解决了与上一部分相同的优化问题，唯一的区别是交易成本现在为交易额的1%。所有其他参数保持不变。
- en: 'The output contains the matrix **A** with the same data:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 输出包含了矩阵**A**，其中数据相同：
- en: '[PRE21]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Given that costs depend on the transaction size, we got a U-shape not only in
    the expected value, but also in the standard deviation. This indicates that too
    frequent trading is suboptimal also in regards to volatility minimization.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 由于成本与交易规模相关，我们不仅在预期值上得到了U型曲线，在标准差上也出现了U型曲线。这表明过于频繁的交易在波动率最小化方面也是不理想的。
- en: 'The other main difference compared to the previous optimization is that the
    threshold of VaR cannot be held (as shown in the following code):'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前的优化相比，另一个主要区别是VaR的阈值无法保持（如下代码所示）：
- en: '[PRE22]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The following screenshot gives the output of the preceding command:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了前述命令的输出：
- en: '![Optimal hedging in the case of relative transaction costs](img/2078OT_08_09.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![相对交易成本下的最佳对冲](img/2078OT_08_09.jpg)'
- en: The lowest expected cost is 11.15 with a standard deviation of 2.41 at 56 *Δt*,
    indicating an optimal rebalancing period of 14 days.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 最低预期成本为11.15，标准差为2.41，发生在56 *Δt*时，表明最佳的重新平衡周期为14天。
- en: The lowest volatility is 1.23 at *Δt* of 9, and the expected value is 12.47\.
    The mean-variance optimization results in a rebalancing period of 14 *Δt* (3.5
    days), the standard deviation is 1.38, and the expected value is 12.01.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 最低波动率为1.23，在*Δt*为9时，预期值为12.47。均值-方差优化结果显示，重新平衡周期为14 *Δt*（3.5天），标准差为1.38，预期值为12.01。
- en: As mentioned, the fourth optimization fails; the minimum of the 95% VaR is 14.26,
    which can be achieved at 21 *Δt* (5.25 days); the expected cost is 11.7, and the
    standard deviation is 1.52.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，第四次优化失败；95% VaR的最小值为14.26，这可以在21 *Δt*（5.25天）时实现；预期成本为11.7，标准差为1.52。
- en: The optimization shows that in the presence of the transaction cost, the simple
    aim of volatility reduction causes a huge rise in the costs; therefore, an optimal
    hedging strategy has to take into consideration this effect as well.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 优化结果表明，在存在交易成本的情况下，单纯追求波动率降低会导致成本的巨大上升；因此，最佳的对冲策略还必须考虑这一影响。
- en: Further extensions
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步扩展
- en: The model can be further generalized by investigating other price processes.
    The returns of financial assets are usually not normally distributed as assumed
    in the BSM model, but their tails are fatter than predicted by the Gauss curve.
    This phenomenon can be described by the GARCH model (General Autoregressive Conditional
    Heteroscedasticity), where the variance is autocorrelated, which causes a clustering
    of volatility. Another way of catching the higher probability of extreme returns
    can be building random jumps into the process. Applying these processes in the
    model will make the hedging of the derivative even more expensive, thereby increasing
    the expected value and also the variance of the cost distribution.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 该模型可以通过研究其他价格过程进一步推广。金融资产的回报通常并非如BSM模型所假设的那样服从正态分布，而其尾部比高斯曲线预测的要粗。这一现象可以通过GARCH模型（广义自回归条件异方差模型）来描述，其中方差具有自相关性，导致波动率的聚集。另一种捕捉极端回报高概率的方法是将随机跳跃加入到过程中。将这些过程应用于模型将使衍生品的对冲成本进一步增加，从而提高预期值，并增加成本分布的方差。
- en: We can see that changing the spot price causes the change of the delta that
    can be measured by the gamma, which is the second derivative of the option price
    with respect to the spot price. A gamma-neutral portfolio cannot be achieved by
    exclusively holding the option and the underlying asset, as the gamma of the latest
    is zero, but we have to buy options for the same underlying asset with any maturity
    or strike price.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，现货价格的变化会导致delta的变化，delta的变化可以通过gamma来衡量，gamma是期权价格相对于现货价格的第二导数。一个gamma中性组合无法仅通过持有期权和标的资产来实现，因为标的资产的gamma为零，但我们必须购买相同标的资产的任何到期日或行权价的期权。
- en: Furthermore, if we disregard the assumption of constant volatility, the value
    of the derivative will be affected not only by the change of the underlying asset's
    spot price and the change of the remaining time to maturity, but also the change
    of the underlying asset's volatility. The effect of the changing volatility can
    be measured by the vega, the first derivative of the option price according to
    the volatility. A high value of vega causes a notable effect of the volatility
    on the option price (*Hull, 2009*). This can cause a situation where the price
    of the underlying asset is increasing, so the value of a call option should increase
    while the implied volatility has decreased, and the price of the option may decrease
    as well. In order to offset the effect of vega, either other options for the same
    underlying asset are to be bought, or we can hedge volatility with an index called
    the VIX index, which is a traded index that contains the implied volatilities
    of options.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果我们忽略波动率恒定的假设，衍生品的价值将不仅受到标的资产现货价格变化和剩余到期时间变化的影响，还会受到标的资产波动率变化的影响。波动率变化的影响可以通过vega来衡量，vega是期权价格相对于波动率的第一导数。vega值较高会导致波动率对期权价格的显著影响（*Hull,
    2009*）。这可能导致一种情况：当标的资产价格上涨时，认购期权的价值应该增加，但隐含波动率却下降，这时期权的价格也可能下降。为了抵消vega的影响，可以购买相同标的资产的其他期权，或者我们可以使用一个名为VIX指数的指数来对冲波动率，VIX是一个包含期权隐含波动率的交易指数。
- en: This chapter was dedicated to analyzing delta hedging; detailing gamma and vega
    neutralization is beyond our focus.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 本章致力于分析delta对冲；详细讲解gamma和vega的中和超出了我们的关注范围。
- en: Summary
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have shown some practical problems that arise in the hedging
    of derivatives. Although the Black-Scholes-Merton model assumes continuous time
    trading, resulting in continuous rebalancing of the hedging portfolio without
    transaction costs, in reality, trading occurs in discrete time, and it does have
    costs. Consequently, the cost of hedging depends on the future path of the spot
    price of the underlying asset; thus, it is not a single value presented by the
    analytical formula any more, but it is a stochastic variable that can be described
    by its probability distribution. In this chapter, we simulated different paths,
    calculated the cost of hedging, and presented the probability distribution assuming
    different rebalancing frequencies. We received that in the absence of transaction
    costs the volatility reduces with the shortening of the rebalancing period. On
    the other hand, transaction costs can boost not only the expected value of the
    cost of the hedge but also its variance. We presented several optimization algorithms
    to find the optimal hedging strategy.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们展示了对冲衍生品时遇到的一些实际问题。尽管Black-Scholes-Merton模型假设连续时间交易，从而导致对冲组合的连续再平衡且没有交易成本，但在实际中，交易发生在离散时间，并且确实存在交易成本。因此，对冲的成本取决于标的资产现货价格的未来路径；因此，它不再是分析公式所给出的单一值，而是一个可以通过其概率分布描述的随机变量。在本章中，我们模拟了不同的路径，计算了对冲成本，并展示了假设不同再平衡频率下的概率分布。我们发现，在没有交易成本的情况下，随着再平衡周期的缩短，波动性降低。另一方面，交易成本不仅可以提高对冲成本的期望值，还可以增加其方差。我们展示了几种优化算法，用于找到最佳对冲策略。
- en: We created several user-defined functions in R to simulate price movements and
    to generate the cost distribution. Finally, we applied numerical optimization
    according to the given optimization model.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在R语言中创建了几个用户定义的函数，用于模拟价格波动并生成成本分布。最后，我们根据给定的优化模型应用了数值优化。
- en: References
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: '**Black, F. and Scholes, M. [1973]**: The Pricing of Options and Corporate
    Liabilities. *The Journal of Political Economy*, 81(3), pp. 637-654.'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Black, F. 和 Scholes, M. [1973]**：《期权定价与公司负债》。《政治经济学杂志》，81(3)，第637-654页。'
- en: '**Hull, J. C. [2009]**: Option, Futures and other Derivatives. Pearson, Prentice
    Hall.'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**霍尔, J. C. [2009]**: 《期权、期货与其他衍生品》。皮尔森，普伦蒂斯霍尔出版社。'
- en: '**Merton, R. [1973]**: Theory of Rational Option Pricing. *The Bell Journal
    of Economics and Management Science*, 4(1), pp. 141-183.'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**梅顿, R. [1973]**: 《理性期权定价理论》。*《贝尔经济学与管理科学杂志》*，4(1)，第141-183页。'
- en: '**Száz, J [2009]**: Devizaopciók és Részvényopciók Árazása, Jet Set, Budapest.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Száz, J [2009]**: 《外汇期权与股票期权定价》，Jet Set出版社，布达佩斯。'
