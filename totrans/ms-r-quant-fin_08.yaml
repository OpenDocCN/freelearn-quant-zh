- en: Chapter 8. Optimal Hedging
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: After discussing the theoretical background in the previous chapters, we will
    now focus on some practical problems of derivatives trading.
  prefs: []
  type: TYPE_NORMAL
- en: Derivatives pricing, as detailed in *Daróczi et al. (2013)*, [Chapter 6](ch06.html
    "Chapter 6. Interest Rate Derivatives and Models"), *Derivatives Pricing*, is
    based on the availability of a replicating portfolio that consists of traded securities
    that offer the same cash flow as the derivative asset. In other words, the risk
    of a derivative can be perfectly hedged by holding a certain number of underlying
    assets and riskless bonds. Forward and futures contracts can be hedged statically,
    while the hedging of options needs a rebalancing of the portfolio from time to
    time. The perfect dynamic hedge presented by the **Black-Scholes-Merton (BSM)**
    model (*Black and Scholes, 1973*, *Merton, 1973*) has several limitations in reality.
  prefs: []
  type: TYPE_NORMAL
- en: In this chapter, we are going to go into the details of the hedging of derivatives
    in a static as well as a dynamic setting. The effects of discrete time trading
    and the presence of transaction costs are presented. As in the case of discrete
    time hedging, the cost of the synthetic reproduction of an option becomes stochastic;
    hence, there is a sharp trade-off between risk and transaction costs. The optimal
    hedging period is derived according to the different goals of the optimization
    and is affected not only by market factors, but investor-specific parameters such
    as risk aversion as well.
  prefs: []
  type: TYPE_NORMAL
- en: Hedging of derivatives
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Hedging means to create a portfolio that offsets the risk of the original exposure.
    As risk is measured by the fluctuation of the future cash flow, the goal of hedging
    is usually the reduction of the variance of the total portfolio's value. The first
    chapter of *Daróczi et al. (2013)* presents the optimal hedging decision in the
    presence of the basis risk, when the hedging instrument and the position to be
    hedged are different. This often happens at the hedging of commodity exposure,
    because commodities are traded on exchanges, where only standardized (maturity,
    quantity, and quality) contracts are available.
  prefs: []
  type: TYPE_NORMAL
- en: The optimal hedge ratio is the proportion of the hedging instrument as a percentage
    of the exposure that minimizes the volatility of the whole position. In this chapter,
    we will deal with the hedging of derivative positions, assuming that the underlying
    is also traded in the OTC market; therefore, there will be no mismatch between
    the exposure and the hedging derivative, so no basis risk arises.
  prefs: []
  type: TYPE_NORMAL
- en: Market risk of derivatives
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The value of a forward or futures contract depends on the spot price of the
    underlying asset, the time to maturity, the risk-free rate, and the strike price;
    in the case of plain vanilla options, the volatility of the underlying asset also
    has an effect on the option price. This statement holds only if the underlying
    asset provides no cash flow (no income and no cost) till the maturity of the derivative
    transaction; otherwise, this (both incoming and outgoing) cash flow also has an
    effect on the price. For the purpose of simplicity, here we will discuss derivatives
    pricing under the assumption of no cash flow (non-dividend-paying stocks), although
    an extension of the model to other underlying assets (like currencies and commodities)
    needs some modifications in the formulas, but it has no impact on the basic logic.
    As the strike price is stable during maturity, only changes to the other four
    factors can cause a change in the value of the derivative. The sensitivity of
    the derivative towards the mentioned variables is shown by the Greeks, the first
    partial derivatives according to the given variable, as presented in detail in
    *Daróczi et al. (2013)* [Chapter 6](ch06.html "Chapter 6. Interest Rate Derivatives
    and Models"), *Derivatives Pricing*.
  prefs: []
  type: TYPE_NORMAL
- en: 'The Black-Scholes-Merton model assumes that both the risk-free interest rate
    and the volatility of the underlying are constant, so as the change of time is
    deterministic, the only stochastic variable that affects the value of the derivative
    is the spot price of the underlying asset. The risk that is derived from the fluctuation
    of the spot price can be eliminated by holding the exact delta amount, which is
    the sensitivity of the derivative''s price to the spot price (see Equation 1)
    of the underlying asset:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Market risk of derivatives](img/2078OT_08_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Equation 1
  prefs: []
  type: TYPE_NORMAL
- en: Whether delta is stable or changes over time depends on the derivative, and
    leads to different (static or dynamic) hedging strategies (*Hull, 2009*) presented
    in the following section.
  prefs: []
  type: TYPE_NORMAL
- en: Static delta hedge
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Hedging of a forward agreement is straightforward as it is a binding obligation
    for both parties. Being in a long-forward position, we are sure that we will buy
    at maturity, while a short position means a sale of the underlying asset with
    certainty. So we can perfectly hedge our forward position by selling (long forward)
    or buying (short forward) the underlying at the amount of the derivative. We can
    check the delta of the forward by differentiating the value of the long-forward
    position:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Static delta hedge](img/2078OT_08_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Equation 2
  prefs: []
  type: TYPE_NORMAL
- en: Here, *LF* stands for the long forward, *S* denotes the spot price, and *K*
    is the strike price, which is the agreed forward price. The present value is denoted
    by *PV*.
  prefs: []
  type: TYPE_NORMAL
- en: So delta equals one, and it is independent of the actual market circumstances.
  prefs: []
  type: TYPE_NORMAL
- en: However, the value of a futures contract is the difference between the actual
    futures price (*F*) and the strike (*S*), because of the daily settlement of the
    position; hence, its delta is *F/S* and it changes with time. Consequently, a
    slight rebalancing of the position is needed, but in the absence of stochastic
    interest rates, the process of delta can be foreseen (*Hull, 2009*).
  prefs: []
  type: TYPE_NORMAL
- en: Dynamic delta hedge
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In the case of options, the delivery of the underlying is uncertain. It depends
    on the decision of the party in a long position; this is the party that bought
    the option. Not surprisingly, the hedging of a contingent claim cannot be achieved
    by a static buy-and-hold strategy presented in the previous point. In the framework
    of the binomial model, an option position is always hedged for the next *Δt* period,
    while in the Black-Scholes-Merton model, *Δt* converges to zero; thus, the hedging
    position is to be rebalanced in every instant. However, in the real world, practice
    assets can only be traded at discrete points of time, so the hedging portfolio
    is adjusted also at discrete time points. Let's look at the consequences of this
    in the example of a plain vanilla **ATM (at-the-money)** call option written on
    a non-dividend paying stock.
  prefs: []
  type: TYPE_NORMAL
- en: R contains a package, `OptHedge`, for the estimation of the value of an option
    and hedging strategy of call and put options on a grid at discrete time intervals;
    however, our aim is to illustrate the effect of the length of the trading periods.
    Therefore, we will use our own functions for the calculations.
  prefs: []
  type: TYPE_NORMAL
- en: 'First, we install the package to be used:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Then, we can check the BS price of the call by using the already known code
    on a chosen parameter set:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'We receive the given parameters and the price of the call option according
    to the Black-Scholes formula:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Based on the BS model, the price of the call is 9.63487.
  prefs: []
  type: TYPE_NORMAL
- en: In practice, usually, the prices of the options are quoted in the standardized
    markets, and the implied volatility can be inferred from the Black-Scholes formula.
    A trader who expects lower volatility in the future than the implied volatility
    can make a profit by selling the option and simultaneously delta hedging it. In
    the following scenario, we present delta hedging of the short position in the
    preceding option on a stock following a **geometric Brownian motion (GBM)**. We
    assume that all assumptions of the BSM model, except for the continuous-time trading,
    hold. In order to hedge the short option, we have to have delta amount of the
    stock, and as delta changes, we have to rebalance our portfolio regularly, in
    the following case, weekly, which makes it 26 times during the lifetime of the
    option. The frequency of the rebalancing should adjust to the liquidity and volatility
    of the underlying asset.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let''s look at a possible future path of the stock price and the development
    of the delta. The `price_simulation` function generates the price process with
    the given parameters: initial stock price (*S[0]*), drift (*mu*), and volatility
    (*sigma*) of the GBM process and the remaining parameters of the call option (*K*,
    *Time*) and the chosen rebalancing period (*Δt*). After simulating the spot price
    process, the function calculates the delta and the price of the option for every
    interim date, and also plots them. By using the `set.seed` function, we can create
    reproducible simulations:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'We then set the parameters of our function:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'We will get a potential path of the stock price, the actual delta, and the
    corresponding option price:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Dynamic delta hedge](img/2078OT_08_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: We can see a possible future scenario, according to which the spot price rises
    and quickly arrives at an in-the-money level, so the option is exercised at maturity.
    The delta of the call follows the stock price's fluctuations and converges to
    one. The probability of exercising the call option increases if the spot price
    moves up, and in order to replicate the call, we have to buy some more stock,
    while the falling stock price leads to a lower delta, indicating a sale. All in
    all, we buy if the stock is expensive, and sell if the price is low. The price
    of the option derives from this cost of the hedging. The shorter the rebalancing
    period, the less the price movement that we have to follow.
  prefs: []
  type: TYPE_NORMAL
- en: The cost of hedging is defined as the present value of the cumulative net costs
    of buying and selling the stock (see *Hull, 2009*) needed to hedge the position.
    The total cost will have two parts, the amount paid to buy shares and the interest
    of financing the position. Following the BSM model, we use the risk-free interest
    rate for compounding. We will see that the cost of hedging depends on the future
    price movements, and by simulating several stock price paths, we can draw the
    cost distribution. Higher stock price volatility causes higher volatility of the
    cost of hedging.
  prefs: []
  type: TYPE_NORMAL
- en: 'The `Cost_simulation` function calculates the cost of hedging for the written
    call:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'In the following command, `share_cost` represents the cost of buying the underlying
    asset to maintain the hedge position, and `interest_cost` is the cost of financing
    the position:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'We can use the preceding defined function to generate different future price
    processes, based on which the cost of hedging can be calculated. Vector **A**
    collects several possible hedging costs and draws their histogram as a probability
    distribution. Next, we present hedging strategies, which rebalance weekly (A)
    and daily (B):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'The output is the histogram of the generated cost outcomes:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Dynamic delta hedge](img/2078OT_08_04.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The histogram on the left side shows the cost distribution of the weekly strategy,
    while the histogram on the right side belongs to the daily rebalancing strategy.
  prefs: []
  type: TYPE_NORMAL
- en: As we can see, the standard deviation of the cost of hedging can be reduced
    by shortening *Δt*, which indicates more frequent rebalancing of the portfolio.
    It is worth noticing that it is not only the volatility of the hedging cost that
    decreases with the shorter period, but the expected value is also lower, approaching
    the BS price.
  prefs: []
  type: TYPE_NORMAL
- en: Comparing the performance of delta hedging
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: We can further investigate the effect of the rebalancing period by making a
    slight modification to the cost simulation function by which the same future paths
    will be selected. In this way, we can compare strategies with a different rebalancing
    period.
  prefs: []
  type: TYPE_NORMAL
- en: The performance measure of delta hedging is defined by *Hull (2009)* as the
    ratio of the standard deviation of the cost of writing the option and hedging
    it to the theoretical price of the option.
  prefs: []
  type: TYPE_NORMAL
- en: 'The `Cost_simulation` function needs to be modified so that we can calculate
    several rebalancing periods together:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'In the following command, the modified `cost_simulation` function is used for
    different rebalancing periods, and a table is generated that contains the expected
    value (*E*) with the lower and upper bound of the confidence level, the volatility
    of the cost of hedging (*v*), and the performance measure (*ratio*) ordered to
    the six rebalancing periods (0.5, 1, and 2 days, and 1, 2, and 4 weeks). We also
    receive two plots, the histograms of each strategy, and a chart that contains
    the normal curves fitted to the distributions:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'In our simulation model, the output is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'The standard deviation of the cost of hedging becomes smaller as we rebalance
    the hedge position more often. The difference in the expected value is also significant
    at 95 percent significance level between the weekly and the monthly the rebalancing.
    Among the shorter periods, we did not find significant differences in the expected
    value:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Comparing the performance of delta hedging](img/2078OT_08_05.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The charts shown in the preceding image are similar to the previous analysis
    (with weekly and daily rebalancing), but here, we have more rebalancing periods.
    The effect of rebalancing frequency is presented by the distribution of the cost
    of hedging.
  prefs: []
  type: TYPE_NORMAL
- en: '![Comparing the performance of delta hedging](img/2078OT_08_06.jpg)'
  prefs: []
  type: TYPE_IMG
- en: We can compare the cost distributions of the given rebalancing periods on a
    single chart, as illustrated in the preceding section.
  prefs: []
  type: TYPE_NORMAL
- en: The time consumption can be reduced by decreasing the number of simulations.
  prefs: []
  type: TYPE_NORMAL
- en: Hedging in the presence of transaction costs
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'As we shown earlier, increasing the number of portfolio adjustments leads to
    a decrease in the volatility of the hedging cost. As *Δt* approaches 0, the cost
    of hedging approximates the option price derived from the BS formula. Until now,
    we have disregarded the transaction costs, but here, we remove this assumption
    and analyze the effects of transaction costs on option hedging. As rebalancing
    becomes more frequent, transaction costs increase the cost of hedging, but at
    the same time, shorter rebalancing periods reduce the volatility of the hedging
    cost. Hence, it is worth examining this trade-off in more detail, and based on
    this, defining the optimal rebalancing strategy. An absolute (fixed for each transaction)
    or a relative (proportional to the transaction size) transaction cost can be added
    to the code by modifying the parameters when we define the function:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'Then, the cost calculation method for the absolute transaction cost can be
    programmed as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: 'In the case of relative costs, the program code is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: When referring to the `cost_simulation` function, the absolute or relative cost
    has to be given. Let's check the effect of an absolute cost of 0.02 per transaction
    (we suppose that the unit of the cost and the extent of the trade are the same).
    In order to shorten the time consumption, we used only 100 simulated paths here.
  prefs: []
  type: TYPE_NORMAL
- en: 'We have to change the parameters of the `cost_simulation` function in the cycle:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'Then, we get the table shown as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: Calculating with a fixed transaction cost of 0.02, the expected value of the
    hedging cost increases considerably. The shorter rebalancing periods are most
    affected as more trading enhances the costs. The standard deviation is also higher,
    mainly in cases of periods shorter than one week.
  prefs: []
  type: TYPE_NORMAL
- en: 'We can see the effect of the relative transaction cost of 1 percent by applying
    the following change in the code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: 'The expected hedging cost has increased further in the case of the shortest
    (daily or even more frequent) rebalancing periods, but we also found a more significant
    rise of the volatility (as shown in the following output table):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: The presence of transaction costs offsets the volatility reduction effect of
    the more frequent rebalancing, so the optimal rebalancing period is to be determined
    by weighting these effects relative to each other.
  prefs: []
  type: TYPE_NORMAL
- en: Optimization of the hedge
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In order to find the optimal length of the rebalancing period, we have to define
    the optimization criterion and the measure that is to be maximized or minimized.
    The usual aim of hedging is the reduction of the risk, measured by the variance
    of the cost of the hedge. According to this, the optimal hedge minimizes the volatility
    of the cost of hedging. Another aim of the optimization can be the minimization
    of the expected value of the cost. As we have seen, in the absence of transaction
    costs, these goals can be achieved simultaneously by rebalancing the hedging portfolio
    more and more frequently. On the other hand, transaction costs boost not only
    the expected value of the cost but also the volatility, which can rise drastically
    when the readjustment is too frequent.
  prefs: []
  type: TYPE_NORMAL
- en: 'It is a widespread method in finance when trade-off between the expected value
    and volatility has to be considered in order to define a utility function and
    an optimum as the maximum utility. For example, in the portfolio theory, an individual
    utility function is assumed, which is positively affected by the expected value
    of the return and negatively affected by its variance. We can use the same technique
    by defining a utility function that contains the expected value of the cost of
    hedging and its variance. However, in our case, both factors have a negative impact
    on the utility of the trader; therefore, both parameters must have a positive
    sign, and the function is to be minimized. Accordingly, the objective function
    will be a utility function defined as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Optimization of the hedge](img/2078OT_08_07.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Equation 3
  prefs: []
  type: TYPE_NORMAL
- en: Here, *x* is the cost of the hedge as a random variable, *E* denotes its expected
    value, *Var* stands for its variance, and *α* is the risk aversion parameter.
    A higher *α* indicates a more risk averse investor/trader.
  prefs: []
  type: TYPE_NORMAL
- en: An alternative solution to the mean-variance optimization can be setting the
    expected (cost) value minimization as the main goal with the boundary condition
    that keeps a chosen risk measure under a predefined value. Here, we chose Value-at-Risk
    as the control variable, which is a type of downside risk measure, defined as
    the maximal loss or worst outcome at a predefined probability and over a selected
    time horizon.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following code calculates the cost distribution based on 1,000 simulations
    for different rebalancing periods from 1-80 *Δt*. The unit of *Δt* is a quarter
    of a day, so *Δt* of 1 means four readjustments a day; the longest *Δt* of 80
    refers to a 20-day long period. The function collects the expected value, the
    standard deviation, and the 95 percentile of the distribution, and gives the result
    of the four different optimization scenarios in text format and also plots the
    results:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: The last optimization searches for the minimal cost that can be achieved with
    the condition that Value-at-Risk at the *q* significance level (the *q* percentile)
    does not exceed the predetermined threshold. As it is not necessary that this
    minimum exists, if the optimization fails, the minimum of q-VaR is given as the
    result.
  prefs: []
  type: TYPE_NORMAL
- en: Optimal hedging in the case of absolute transaction costs
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The task is to find the optimal length of the rebalancing period in the case
    of transaction costs and for a vanilla call option with the already investigated
    parameters. Let's suppose that the transaction cost is 0.01 per trade.
  prefs: []
  type: TYPE_NORMAL
- en: The output of the earlier function is a matrix **A** that contains the parameters
    of the distribution that belong to different rebalancing periods, and the optimum
    according to different criteria.
  prefs: []
  type: TYPE_NORMAL
- en: 'The first and last rows of the matrix **A** are shown next:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'The number in the square brackets stands for the rebalancing period expressed
    in *Δt*. The next columns contain the expected value, the standard deviation,
    the 95 percent quantile, and the sum of the expected value and standard deviation.
    The results of the four optimization processes are summarized in the next output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: The following figure depicts the results in the function of the rebalancing
    periods (in *Δt*). The dashed line shows the standard deviation and the solid
    line is the expected cost, while the dot dash and dotted lines stand for the value
    of the utility function (Equation 3) with an alpha parameter of 1 and 95 percentile
    respectively.
  prefs: []
  type: TYPE_NORMAL
- en: 'Although the optimization depends on the parameters, the chart illustrates
    the trade-off between the expected cost and the volatility in the presence of
    transaction costs:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Optimal hedging in the case of absolute transaction costs](img/2078OT_08_08.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The minimum of the expected cost (9.79) is not far away from the BS price of
    9.63\. The optimal rebalancing period is then 50 *Δt*, that is, 12.5 days long.
    At the lowest expected cost, the standard deviation is 2.21.
  prefs: []
  type: TYPE_NORMAL
- en: The volatility minimization results in the most frequent rebalancing, which
    means rebalancing 4 times a day; then, the minimum of the standard deviation is
    0.30, but the frequent trading increases the costs drastically. The expected cost
    is 14.57, which is about 50 percent higher than in the previous case.
  prefs: []
  type: TYPE_NORMAL
- en: The optimization model based on the utility function defined in Equation 3 considers
    both aspects of the hedge, and the earlier output shows 8 *Δt* long rebalancing
    periods as optimal, that is, exactly 2 days. We can achieve an expected value
    of 10.29, which only somewhat exceeds the minimum, and the standard deviation
    is 0.86.
  prefs: []
  type: TYPE_NORMAL
- en: The last row of the preceding output presents the results of the optimization
    using Value-at-Risk limits. We applied a 95% VaR and searched for the minimal
    expected cost at which, in 95% of the cases, the cost remains under a threshold
    of 12\. According to this, the optimal length of the readjustment is 14 *Δt*,
    that is, 3.5 days. The expected value of the cost is slightly lower (10.02) than
    in the previous case, where the result is offset by a slightly higher standard
    deviation (1.13).
  prefs: []
  type: TYPE_NORMAL
- en: Optimal hedging in the case of relative transaction costs
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In this section, the same optimization problem is solved as in the previous
    section, with the exception that now the transaction cost is 1 percent of the
    deal. All other parameters are the same.
  prefs: []
  type: TYPE_NORMAL
- en: 'The output contains the matrix **A** with the same data:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: Given that costs depend on the transaction size, we got a U-shape not only in
    the expected value, but also in the standard deviation. This indicates that too
    frequent trading is suboptimal also in regards to volatility minimization.
  prefs: []
  type: TYPE_NORMAL
- en: 'The other main difference compared to the previous optimization is that the
    threshold of VaR cannot be held (as shown in the following code):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'The following screenshot gives the output of the preceding command:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Optimal hedging in the case of relative transaction costs](img/2078OT_08_09.jpg)'
  prefs: []
  type: TYPE_IMG
- en: The lowest expected cost is 11.15 with a standard deviation of 2.41 at 56 *Δt*,
    indicating an optimal rebalancing period of 14 days.
  prefs: []
  type: TYPE_NORMAL
- en: The lowest volatility is 1.23 at *Δt* of 9, and the expected value is 12.47\.
    The mean-variance optimization results in a rebalancing period of 14 *Δt* (3.5
    days), the standard deviation is 1.38, and the expected value is 12.01.
  prefs: []
  type: TYPE_NORMAL
- en: As mentioned, the fourth optimization fails; the minimum of the 95% VaR is 14.26,
    which can be achieved at 21 *Δt* (5.25 days); the expected cost is 11.7, and the
    standard deviation is 1.52.
  prefs: []
  type: TYPE_NORMAL
- en: The optimization shows that in the presence of the transaction cost, the simple
    aim of volatility reduction causes a huge rise in the costs; therefore, an optimal
    hedging strategy has to take into consideration this effect as well.
  prefs: []
  type: TYPE_NORMAL
- en: Further extensions
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The model can be further generalized by investigating other price processes.
    The returns of financial assets are usually not normally distributed as assumed
    in the BSM model, but their tails are fatter than predicted by the Gauss curve.
    This phenomenon can be described by the GARCH model (General Autoregressive Conditional
    Heteroscedasticity), where the variance is autocorrelated, which causes a clustering
    of volatility. Another way of catching the higher probability of extreme returns
    can be building random jumps into the process. Applying these processes in the
    model will make the hedging of the derivative even more expensive, thereby increasing
    the expected value and also the variance of the cost distribution.
  prefs: []
  type: TYPE_NORMAL
- en: We can see that changing the spot price causes the change of the delta that
    can be measured by the gamma, which is the second derivative of the option price
    with respect to the spot price. A gamma-neutral portfolio cannot be achieved by
    exclusively holding the option and the underlying asset, as the gamma of the latest
    is zero, but we have to buy options for the same underlying asset with any maturity
    or strike price.
  prefs: []
  type: TYPE_NORMAL
- en: Furthermore, if we disregard the assumption of constant volatility, the value
    of the derivative will be affected not only by the change of the underlying asset's
    spot price and the change of the remaining time to maturity, but also the change
    of the underlying asset's volatility. The effect of the changing volatility can
    be measured by the vega, the first derivative of the option price according to
    the volatility. A high value of vega causes a notable effect of the volatility
    on the option price (*Hull, 2009*). This can cause a situation where the price
    of the underlying asset is increasing, so the value of a call option should increase
    while the implied volatility has decreased, and the price of the option may decrease
    as well. In order to offset the effect of vega, either other options for the same
    underlying asset are to be bought, or we can hedge volatility with an index called
    the VIX index, which is a traded index that contains the implied volatilities
    of options.
  prefs: []
  type: TYPE_NORMAL
- en: This chapter was dedicated to analyzing delta hedging; detailing gamma and vega
    neutralization is beyond our focus.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we have shown some practical problems that arise in the hedging
    of derivatives. Although the Black-Scholes-Merton model assumes continuous time
    trading, resulting in continuous rebalancing of the hedging portfolio without
    transaction costs, in reality, trading occurs in discrete time, and it does have
    costs. Consequently, the cost of hedging depends on the future path of the spot
    price of the underlying asset; thus, it is not a single value presented by the
    analytical formula any more, but it is a stochastic variable that can be described
    by its probability distribution. In this chapter, we simulated different paths,
    calculated the cost of hedging, and presented the probability distribution assuming
    different rebalancing frequencies. We received that in the absence of transaction
    costs the volatility reduces with the shortening of the rebalancing period. On
    the other hand, transaction costs can boost not only the expected value of the
    cost of the hedge but also its variance. We presented several optimization algorithms
    to find the optimal hedging strategy.
  prefs: []
  type: TYPE_NORMAL
- en: We created several user-defined functions in R to simulate price movements and
    to generate the cost distribution. Finally, we applied numerical optimization
    according to the given optimization model.
  prefs: []
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Black, F. and Scholes, M. [1973]**: The Pricing of Options and Corporate
    Liabilities. *The Journal of Political Economy*, 81(3), pp. 637-654.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Hull, J. C. [2009]**: Option, Futures and other Derivatives. Pearson, Prentice
    Hall.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Merton, R. [1973]**: Theory of Rational Option Pricing. *The Bell Journal
    of Economics and Management Science*, 4(1), pp. 141-183.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Száz, J [2009]**: Devizaopciók és Részvényopciók Árazása, Jet Set, Budapest.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
