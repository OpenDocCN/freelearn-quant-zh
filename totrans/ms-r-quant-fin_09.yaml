- en: Chapter 9. Fundamental Analysis
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Now that the global financial crisis seems to come to an end, most of the investors
    are moving back to equity markets. By doing so, you face the problem of choosing
    the stocks that will outperform the other shares during the upcoming time period.
    To find the right investment asset to purchase, you have two basic options. On
    one hand, you may rely on any trends and patterns in the development of the historical
    prices. When developing an investment recommendation based on trends and patterns,
    you do a technical analysis. On the other hand, you may try to figure out which
    firms will exceed the market by analyzing their financial performance, strategic
    position, or future plans. This is called fundamental analysis.
  prefs: []
  type: TYPE_NORMAL
- en: This chapter provides you an aid on how to use R to identify successful fundamental
    trading strategies for equity investments. We will start by applying basic statistical
    methods and move on to advanced and more complex ones while we cover how to translate
    your fundamental investment ideas into statistically testable hypotheses.
  prefs: []
  type: TYPE_NORMAL
- en: The basics of fundamental analysis
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: When looking for possible investment assets, a wide range of choices is offered
    to you by the market. You may pick bonds, pieces of art, real estate, currencies,
    commodities, derivatives, or probably, the most well-known asset class, equity.
    Equities represent ownership right over a certain part of the given firm (issuer).
  prefs: []
  type: TYPE_NORMAL
- en: However, which shares shall we buy? When should we purchase and sell them? These
    decisions are of key importance as they will determine the return on your portfolio.
    There are two different views out there on these problems.
  prefs: []
  type: TYPE_NORMAL
- en: Technical analysis is built on historical price developments and believes that
    certain patterns may be identified that help predict the future movements of the
    quotes. Fundamental analysis, on the contrary, focuses on the firm and the value
    of the ownership right itself rather than on the market price of it. Here, we
    believe that sooner or later, market price has to reflect the fair value of the
    share that can be calculated from the future cash flows we collect when owning
    it, just like in the case of any other kind of investments.
  prefs: []
  type: TYPE_NORMAL
- en: While technical analysis focuses on how investors' behavior might push prices
    in the future based on historical patterns, fundamental analysis identifies the
    trends that prices should follow due to the predicted future performance of the
    firm. So, when performing fundamental analysis, we have to recall our corporate
    finance and accounting knowledge.
  prefs: []
  type: TYPE_NORMAL
- en: Even when checking for the fair price of just one given share, we may spend
    several days on modeling future performance and estimating sales growth, expenses,
    investments, changes in financing strategy, and cost of capital to get a valid
    discount rate for our cash-flow prediction. When developing a trading strategy,
    we need to review several thousands of potential investments, so there is no chance
    we could do such an in-depth analysis. Even trying it may be tricky. If you create
    large spreadsheet models for all equities, by the time you finish, your assumptions
    for the first firm could be outdated, and you have to restart the process without
    even considering your results from the first version of the model. So, instead
    of really predicting future financial statements, we have to build on historical
    experience to identify good investment patterns. We will try to connect previous
    fundamental ratios to historical price developments and expect that these connections
    will also hold in the future.
  prefs: []
  type: TYPE_NORMAL
- en: This is the key to understand that we do not want to find good companies to
    invest in; we rather have to find shares that are very likely to be mispriced.
    So, we want to find undervalued stocks to buy, or if shorting is allowed on the
    market, we want to find overvalued ones to sell. For the rest of this chapter,
    we will focus only on the upward potential, but you may use exactly the same techniques
    to identify shares to sell that have a huge downward potential. Finding the fundamental
    characteristics of firms for which we have seen the share price increase during
    the last 12 months may help us identify good investments for the next year based
    on the current financial statements.
  prefs: []
  type: TYPE_NORMAL
- en: 'So, when building a fundamental equity strategy, we need to follow these steps:'
  prefs: []
  type: TYPE_NORMAL
- en: Collect financial statement data for possible equity investments.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Calculate fundamental ratios to standardize data.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Identify connections between ratios and future price development.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Follow the testing strategy that is, calculate results on another set of possible
    equities for the same period and/or same set of shares for a different period
    of time.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: It is not enough to perform these steps once in a lifetime. Applying a strategy
    that would have performed well during the last year(s) assumes that there were
    no radical changes, neither within the firm nor in the economy that the company
    is active in. As markets tend to change, firm have to do so too. This means that
    what was the best practice last year may be just fine or average now. As a result
    of this, even if our investment strategy worked well for several years, we may
    see a gradual or even radical change in its effectiveness. So, a regular recheck
    and update is vital.
  prefs: []
  type: TYPE_NORMAL
- en: Collecting data
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Building the required database could be one of the biggest challenges. Here,
    we do not only need dividend-adjusted price quotes but also financial statements
    data. [Chapter 4](ch04.html "Chapter 4. Big Data – Advanced Analytics"), *Big
    Data – Advanced Analytics* described how to access some of the open data sources,
    but those rarely offer you all the required information in a package.
  prefs: []
  type: TYPE_NORMAL
- en: Another option might be to use professional financial data providers as a source.
    These platforms allow you to create tailor-made tables that can be exported to
    Microsoft Excel. For the sake of this chapter, we used a Bloomberg terminal. As
    a first step, we exported the data to Microsoft Excel.
  prefs: []
  type: TYPE_NORMAL
- en: 'Spreadsheets may be an excellent tool to build a database of data collected
    from different sources. No matter how you got your data ready on a spreadsheet,
    you need to notice that due to the changing output formats (`xls`, `xlsx`, `xlsm`,
    `xlsb`) and the advanced formatting features (for example, merging cells), this
    is not the best form to feed R with your data. Instead, you may be far better
    off with saving your data in a file in the comma-separated format or as CSVs.
    This can be easily read using the following commands:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: Here, the `= T` header indicates that your database has a header row, and `sep
    = ","` indicates that your data is separated by commas. Note that some localized
    versions of Excel may use different separators, such as semicolons. In this case,
    use sep = ";". If your file is not located in your R working directory, you have
    to specify the whole path as part of `file_name`.
  prefs: []
  type: TYPE_NORMAL
- en: 'If you want to stick to your Excel file, the next method might work in most
    of the cases. Install the `gdata` package that extends the capabilities of R so
    that the software can read information form the `xls` or `xlsx` file:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'After that, you may read the Excel file as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Here, the second argument marked as `n` indicates the worksheet in the workbook
    from which you want to read.
  prefs: []
  type: TYPE_NORMAL
- en: To illustrate the process of building a fundamental trading strategy, we will
    use the NASDAQ Composite Index member firms. At the time of writing this chapter,
    21,931 firms are included.
  prefs: []
  type: TYPE_NORMAL
- en: 'To create a solid base for our strategy, we should first clean our database.
    Extreme values may create a serious bias otherwise. For example, no one would
    be surprised if a firm with a P/E (Price/Earning per share) ratio of 150 a year
    ago showed a quick price increase during the last 12 months, but finding such
    a share now may be impossible, so our strategy might be worthless. The strategy
    should help us find what shares to invest in once the choice is not trivial (of
    course, you may also lose with high P/E shares), so we will only keep shares without
    extreme values. The following limitations were applied:'
  prefs: []
  type: TYPE_NORMAL
- en: P/E (Price/Earning per share) lower than 100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The yearly Total Return to Shareholders (TRS), which is equal to price gain
    plus dividend yield, less than 100 percent
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Long Term Debt / Total Capital less than 100 percent (no negative shareholder
    capital)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: P/BV (Price per Book value) of equity for one piece of share bigger than 1,
    so the market value of equity is higher than the book value (no point in liquidating
    the firm)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Operating income/sales less than 100 percent but bigger than 0 (historical performance
    can be held in the long run)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This way, only those firms remained that are not likely to be liquidated or
    go bankrupt, and they have shown performance that is clearly sustainable in the
    long run. After applying these filters, 7198 firms remained from all over the
    world.
  prefs: []
  type: TYPE_NORMAL
- en: The next step involves selecting the ratios we will potentially use when defining
    the strategy. Based on historical experience, we picked 15 ratios from the financial
    statements a year earlier, plus the name of the sectors the firms operate in and
    the total shareholder return for the last 12 months.
  prefs: []
  type: TYPE_NORMAL
- en: 'It may prove wise to check whether the remaining data is appropriate for our
    aims. A boxplot diagram would reveal whether, for example, most of our stocks
    show huge positive or negative return or whether there are heavy differences across
    industries due to which we would end up describing one given booming industry
    as not a good investment strategy. Luckily, here, we have no such issues: (*Figure
    1*)'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: 'The following figure is the result of the preceding code:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Collecting data](img/2078OT_09_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Figure 1
  prefs: []
  type: TYPE_NORMAL
- en: 'It could be also a good idea to check whether we should introduce new variables.
    One possible yet missing categorization could control for firm size, as many models
    assume higher required return for low capitalization stocks due to them being
    less liquid. To control this, we may apply a scatter diagram, the code and output
    for this is as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '![Collecting data](img/2078OT_09_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: We cannot see a clear trend for capitalization and TRS. We may also try to fit
    a curve on the data and calculate *R²* for the goodness of the fit, but the figure
    does not support any strong connection. R square indicates the percentage of variance
    explained by your estimation, so any value above 0.8 is great, while values bellow
    0.2 mean weak performance.
  prefs: []
  type: TYPE_NORMAL
- en: Revealing connections
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'To start our investigation for shares with huge upside potential, we have to
    check the connections between individual ratios quantified a year ago and the
    total return of the next year. For the sake of this chapter, we picked the following
    ratios. We took the values from 1 year earlier so that we can contrast these with
    last year''s TRS:'
  prefs: []
  type: TYPE_NORMAL
- en: Cash/assets 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Net fixed assets/total number of assets 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Assets/1000 employees 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Price/cash flow average of last 5 years 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Price/cash flow 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Operating income/net sales 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Dividend payout ratio 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Asset turnover 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: P/BV 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Operating income/net sales 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Revenue growth in the last 1 year 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Long-term debt/capital 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Debt/EBITDA 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Market capitalization 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: P/E 1 year ago
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Calculating Pearson''s correlation coefficients may be a good start:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'When looking at the correlation table, there are two important conclusions
    to draw. They are as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: There are only four financial ratios that show a significant correlation with
    TRS, but even there, the connections are very weak; that is, they remain in the
    range between -0.08 and +0.08\. This means there is no clear linear connection
    between any of our ratios and the TRS.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The financial ratios chosen are quite independent. Out of the 105 (15*14/2)
    potential connections, only 15 are significant. Even all those fit into the interval
    of -0.439 and +0.425, and only eight of them have a bigger absolute value than
    0.2.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: So, we see that it is not easy to set up a good strategy. Just relying on one
    single ratio would lead us nowhere. We shall go for more complex methods.
  prefs: []
  type: TYPE_NORMAL
- en: Including multiple variables
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: One method to build a performance-prediction model could be using multiple variable
    regression models. A linear estimation should only include variables with minimal
    linear connection among them. As we have just seen, our explanatory variables
    are more or less independent of each other, which is great. It is bad news, though,
    that these variables individually also have low correlation with the dependent
    variable, TRS.
  prefs: []
  type: TYPE_NORMAL
- en: 'To get the best linear estimation, we may choose from several methods. One
    option is to first include all variables and ask R to drop step by step the one
    with the lowest significance (step-wise method). Under another widely used method,
    R could start with one variable only and enter stepwise the next one with the
    highest explanatory power (the backward method). Here, we picked the latter, as
    the first method could not end with a significant model:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: The backward method ended up with an R squared of 1.6 percent, only meaning
    that the regression cannot explain more than 1.6 percent of the total variance
    of the TRS. In other words, the model's performance is extremely bad. Notice that
    the poor performance is due to the weak (linear) connection between explanatory
    variables and TRS. Should you have some variables with stronger connection, your
    linear regressions will show better results. With an R squared above 50 percent,
    you are very likely to build a great stock-selection strategy by buying shares
    that have high values for significant explanatory variables with a positive sign
    in the model, while they have low values for variables with a negative sign in
    the model. As we cannot use this method here, we have to follow a different logic.
  prefs: []
  type: TYPE_NORMAL
- en: Separating investment targets
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'An alternative method to build an investment strategy could be to separate
    good investment targets and check what is common between them. A good way to find
    similarities among stocks that performed well could be to create groups based
    on the TRS values and compare low- and high-performer clusters. The first step
    to this should be to analyze the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'The following dendogram is the output for the preceding code:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Separating investment targets](img/2078OT_09_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Based on the dendrogram, three clusters separate very well, but to cut the
    biggest of them into two subgroups, we may need to increase the number of clusters
    up until seven. To keep the overview, we should try to keep the number of cluster
    to the lowest possible, so first, we will try to create three clusters only using
    the k-means method:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'Our results are pretty encouraging. Our three clusters have 1000 to 4000 elements,
    and we can very clearly identify the overperformers, underperformers, and, mid-range
    performers:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Next, we have to check whether there are significant differences regarding
    the average ratio values among these three groups. For this, we will use the Anova
    table. This statistical tool would compare the deviation across group averages
    and the standard deviation within the individual groups. Once the classification
    is valid, you would find huge differences among group averages but lesser differences
    when comparing firms within the same clusters:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'Output:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'In the output, R marks significance with an asterisk (*) after the F test probabilities
    (Pr). So, you learned from the previous table that six of the variables show significant
    differences across clusters. To see the average values per cluster, you need to
    type the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: Our output was as follows. As you see, each variable has three rows (mean, number
    of elements, and standard deviation). That is why, the table is so long.
  prefs: []
  type: TYPE_NORMAL
- en: '|   | Underperformers | Midrange | Overperformers | Total |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Total.Return.YTD..I..mean | -16.627 | 9.406 | 48.068 | 6.385 |'
  prefs: []
  type: TYPE_TB
- en: '| Total.Return.YTD..I..N | 2264.000 | 3972.000 | 962.000 | 7198.000 |'
  prefs: []
  type: TYPE_TB
- en: '| Total.Return.YTD..I..sd | 12.588 | 8.499 | 17.154 | 23.083 |'
  prefs: []
  type: TYPE_TB
- en: '| Cash.Assets.Y.1.mean | 15.580 | 13.112 | 12.978 | 13.870 |'
  prefs: []
  type: TYPE_TB
- en: '| Cash.Assets.Y.1.N | 2263.000 | 3972.000 | 962.000 | 7197.000 |'
  prefs: []
  type: TYPE_TB
- en: '| Cash.Assets.Y.1.sd | 14.092 | 12.874 | 13.522 | 13.403 |'
  prefs: []
  type: TYPE_TB
- en: '| Net.Fixed.Assets.to.Tot.Assets.Y.1.mean | 26.932 | 29.756 | 31.971 | 29.160
    |'
  prefs: []
  type: TYPE_TB
- en: '| Net.Fixed.Assets.to.Tot.Assets.Y.1.N | 2252.000 | 3899.000 | 957.000 | 7108.000
    |'
  prefs: []
  type: TYPE_TB
- en: '| Net.Fixed.Assets.to.Tot.Assets.Y.1.sd | 21.561 | 22.469 | 23.204 | 22.347
    |'
  prefs: []
  type: TYPE_TB
- en: '| P.CF.5Yr.Avg.Y.1.mean | 18.754 | 19.460 | 28.723 | 20.274 |'
  prefs: []
  type: TYPE_TB
- en: '| P.CF.5Yr.Avg.Y.1.N | 1366.000 | 2856.000 | 521.000 | 4743.000 |'
  prefs: []
  type: TYPE_TB
- en: '| P.CF.5Yr.Avg.Y.1.sd | 57.309 | 132.399 | 281.563 | 142.133 |'
  prefs: []
  type: TYPE_TB
- en: '| Asset.Turnover.Y.1.mean | 1.132 | 1.063 | 1.052 | 1.083 |'
  prefs: []
  type: TYPE_TB
- en: '| Asset.Turnover.Y.1.N | 2237.000 | 3941.000 | 939.000 | 7117.000 |'
  prefs: []
  type: TYPE_TB
- en: '| Asset.Turnover.Y.1.sd | 0.758 | 0.783 | 0.679 | 0.763 |'
  prefs: []
  type: TYPE_TB
- en: '| OI...Net.Sales.Y.1.mean | 13.774 | 14.704 | 15.018 | 14.453 |'
  prefs: []
  type: TYPE_TB
- en: '| OI...Net.Sales.Y.1.N | 2264.000 | 3972.000 | 962.000 | 7198.000 |'
  prefs: []
  type: TYPE_TB
- en: '| OI...Net.Sales.Y.1.sd | 11.385 | 12.211 | 12.626 | 12.023 |'
  prefs: []
  type: TYPE_TB
- en: '| LTD.Capital.Y.1.mean | 17.287 | 20.399 | 17.209 | 18.994 |'
  prefs: []
  type: TYPE_TB
- en: '| LTD.Capital.Y.1.N | 2264.000 | 3972.000 | 962.000 | 7198.000 |'
  prefs: []
  type: TYPE_TB
- en: '| LTD.Capital.Y.1.sd | 18.860 | 19.785 | 19.504 | 19.521 |'
  prefs: []
  type: TYPE_TB
- en: '| P.E.Y.1.mean | 20.806 | 19.793 | 19.455 | 20.067 |'
  prefs: []
  type: TYPE_TB
- en: '| P.E.Y.1.N | 2264.000 | 3972.000 | 962.000 | 7198.000 |'
  prefs: []
  type: TYPE_TB
- en: '| P.E.Y.1.sd | 14.646 | 13.702 | 14.782 | 14.159 |'
  prefs: []
  type: TYPE_TB
- en: As we have seen in our preceding Anova table, in the case of six out of eight
    financial ratios, we find significant differences among the three groups. This
    method helps to find even nonlinear connections (in contrast to correlation ratios).
    A good example of this is Cash.Assets; Overperformers and mid-range shows very
    similar values, but underperformers have a significantly higher amount of (probably
    unused) cash. This means that being below a certain level, cash/asset gives us
    the hint that the given share is not a good investment. We will find the same
    pattern with the asset turnover.
  prefs: []
  type: TYPE_NORMAL
- en: The 5-year average of **Price/Cash flow** (**P/CF**) is another good example
    of how we may discover connections that remain hidden when only checking correlations.
    This ratio shows the J form, that is, the lowest value is with the mid-range group,
    and the highest with the overperformers.
  prefs: []
  type: TYPE_NORMAL
- en: Based on these results, the best investment targets may have, at the same time,
    lower cash ratio and financial leverage (LT debt / capital) but higher fixed asset
    rate and P/CF ratio, while P/E and asset turnover are just average. In short,
    the best firms use their current capital efficiently; they average the asset turnover
    with not too much free cash. They have further room to increase their leverage
    and have a good cash flow growth outlook reflected by the higher P/CF rate. Before
    testing this selection method, we shall check whether we may refine this by either
    adding more exact rules to separate potential investment or by simplifying it
    by removing some of these criteria.
  prefs: []
  type: TYPE_NORMAL
- en: Setting classification rules
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Let''s follow a different logic to develop decision rules so that we can contrast
    the two results later. Let''s select which shares offered the best returns. Decision
    or classification trees are great for this purpose. Here, R will pick from the
    given list of variables those that can create the most effective decision rules.
    Instead of building joint rules, like we did previously, first, it selects the
    variable using which we may create subgroups of the shares regarding their TRS.
    Then, for each of these subgroups, it will choose the second most effective variable
    and so on. The output is a kind of decision tree:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: 'In our case, the resulting tree has five levels, as you can see in the next
    figure. In each node, we get the indication of the average TRS for the created
    subgroups. The decision rule is also indicated: if the logical statement is true,
    go down on the branch to the left; if it is false, you will follow the right branch.
    As seen here, we will focus only on high return possibilities. We have to check
    the bottom of the tree to see what subgroups were created and which of them would
    show a particularly high TRS:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Setting classification rules](img/2078OT_09_04.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Our database ended up with three subgroups with particularly high-average TRS.
    Based on the tree, we have to check the Cash/Assets ratio first.
  prefs: []
  type: TYPE_NORMAL
- en: Firms with a ratio higher than (or equal to) 1.6 percent should be divided further
    based on the net fixed assets / total assets. If the ratio is above 12.3 percent
    and the asset/employee rate is below 398, plus the asset turnover is lower than
    1.66, we only need to be sure that the 1 year growth of the revenue for the previous
    year was above 43.5 percent to get a subgroup of 63 firms with an average TRS
    of 19 percent.
  prefs: []
  type: TYPE_NORMAL
- en: If the Cash/Assets is above (or equal to) 1.6 percent and the net fixed assets
    / total assets ratio is below 12.3 percent, we need to look for the yearly growth
    of the revenue for the previous year. For the 11 companies where that ratio is
    above 3.77 percent and the market capitalization exceeds 2874 billion dollars,
    we will find an average TRS of 34.6 percent.
  prefs: []
  type: TYPE_NORMAL
- en: There is also a third group of overperformers. The 348 firms with a cash ratio
    lower than 1.6 and the companies with an asset/employee rate higher than 2156
    generated an average TRS of 19 percent.
  prefs: []
  type: TYPE_NORMAL
- en: Considering the number of elements in these three groups compared to the total
    number of firms being analyzed, the first and the last one may offer us a realistic
    investment strategy. The group with 11 companies only represents 0.15 percent
    of the total, and so, it may be the result of random or unexpected events.
  prefs: []
  type: TYPE_NORMAL
- en: So, to sum this up, a high cash ratio (over 1.6) should go hand in hand with
    higher than 12.3 percent fixed asset ratio, an asset/employee value below 398,
    an asset turnover below 1.66, and a yearly revenue growth for the previous year
    exceeding 43.5 percent. If your cash ratio is lower than 1.6, asset/employee should
    be higher than 2156 to pick shares from our portfolio.
  prefs: []
  type: TYPE_NORMAL
- en: Notice that here, only five variables are included in our investment decision
    program, while previously, a constellation of eight variables was set up. Also,
    note that there are only three ratios (Cash/Assets, fixed assets ratio, and asset
    turnover), which are used in both of these decision processes. Our next step may
    be comparing the efficiency of the two methods.
  prefs: []
  type: TYPE_NORMAL
- en: Backtesting
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: The word "backtesting" refers to calculating the results of a trading strategy
    on a historical dataset. In our case, we will use the same dataset because of
    which we will overestimate the effectiveness, as our statistical models were optimized
    on exactly the same data. In the real life, we might go for a different time period
    or a different group of equities (or both) to measure efficiency more objectively.
  prefs: []
  type: TYPE_NORMAL
- en: No matter how we got the best performers separated, testing the investment idea
    follows the same logic. You translate the result into rules, pick the firms (normally
    from a different sample) that fulfill the requirements and place them into one
    cluster, and then create another cluster to contain all the other companies. Finally,
    compare the mean and/or median performance of the two groups.
  prefs: []
  type: TYPE_NORMAL
- en: 'To test the selection rules of the decision tree, we have to create a subset
    of firms that fulfil the requirements of having a cash ratio above 1.6, fixed
    asset ratio exceeding 12.3 percent, an asset/employee rate below 398, and 1 year
    growth of the revenue for the previous year at least 43.5 percent. Then, we have
    to add the firms with a cash ratio below 1.6 and an asset/employee above 2156:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE14]'
  prefs: []
  type: TYPE_PRE
- en: 'To do this, we will create two new variables (one for both subsets) that are
    equal to 1 if requirements are fulfilled; otherwise, they will be equal to 0\.
    Next, we will calculate a third variable that is the sum of the previous two.
    This way, we will end up with two clusters: 1 for firms qualifying for investment
    and 0 for all others:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE15]'
  prefs: []
  type: TYPE_PRE
- en: 'Once we are ready with the reclustering, an ANOVA table will help us compare
    the performance of the firms selected and not selected. To assure that it is not
    due to outliers that we have significantly different averages, it is always wise
    to compare medians too. In our case, the categorization seems to work just fine,
    as even among the medians, we have a huge difference:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE16]'
  prefs: []
  type: TYPE_PRE
- en: Testing the cluster-based investment idea is slightly more complicated. Here,
    we only see that the cluster of the better firms is different in average in some
    respect from the other two groups. It is important to notice that these were not
    the differences that we used to create the clusters; it is simply us turning the
    logic over and saying that criteria on the financial ratios may result is separating
    the better performers.
  prefs: []
  type: TYPE_NORMAL
- en: We need to go through all the eight variables that showed significant differences
    and create a range of acceptance. Using very narrow ranges may lead to a very
    small number of shares to pick; applying a range far too wide will make the difference
    between groups in TRS disappear. Once again, checking medians may help.
  prefs: []
  type: TYPE_NORMAL
- en: 'To get the means and medians for the three clusters that we identified previously,
    we will use the following code. To save space when printing the table instead
    of using the original names, we numbered the three groups as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: Underperformers
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Mid-range performers
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Overperformers.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'Here is the code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE17]'
  prefs: []
  type: TYPE_PRE
- en: The following table shows our rules developed based on the Anova table for the
    clusters. Due to the small differences or overlapping ranges, we dropped three
    variables from the criteria rules. Remember that your main task is to separate
    overperformers from underperformers, so an overlap with the mid-range is more
    acceptable (set wider ranges of acceptance where mid-range is really in the middle)
    than any with the underperformers.
  prefs: []
  type: TYPE_NORMAL
- en: '|   | Cash/Assets | Net Fixed Assets to Total Assets | P/CF 5Yr Average | Asset
    Turnover | OI / Net Sales | LTD/Capital | Market Cap (M) | P/E |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- | --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Min | none | 23 | dropped | none | 11 | dropped | dropped | none |'
  prefs: []
  type: TYPE_TB
- en: '| Max | 14 | none | dropped | 1,7 | none | dropped | dropped | 20 |'
  prefs: []
  type: TYPE_TB
- en: Table 1
  prefs: []
  type: TYPE_NORMAL
- en: 'With the following code, we will first arrange all the requirements into one
    variable. Then, a final comparison table is created:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE18]'
  prefs: []
  type: TYPE_PRE
- en: 'As you can see, our selected firms have an average return of 9.68 percent,
    while the median amounted to 7.6 percent. Here, we may draw the conclusion that
    the strategy developed based on the decision tree performed better with respect
    to both the mean (19.05 percent) and median (14.98 percent). To check the overlap,
    we will calculate a crosstab:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE19]'
  prefs: []
  type: TYPE_PRE
- en: 'Here, we see that the two strategies are pretty different: only 126 firms got
    selected under both strategies. But are they something extraordinary? Indeed.
    These shares achieved an average TRS of 19.9 percent with a median of 14.4, which
    is calculated as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE20]'
  prefs: []
  type: TYPE_PRE
- en: Industry-specific investment
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Until this point, we considered the entire sample as one. It could be a logical
    decision to focus only on some industries. Note that choosing the right industry
    to invest should not be based on past performance pattern; we rather have to analyze
    comovements with global economic trends over a number of years, and then, based
    on our prediction for the coming periods, we should pick the one with the best
    outlook. This method helps you to determine the right weights of the industries
    in your portfolio, but then, you still need to select individual shares that may
    overperform the others.
  prefs: []
  type: TYPE_NORMAL
- en: Of course, once one given industry is selected, we may end up with different
    investment rules than those on the whole sample. So, we may further improve our
    investment performance by performing the previously shown steps for each industry
    separately.
  prefs: []
  type: TYPE_NORMAL
- en: At the same time, recall that the more specific you are in data selection (time
    period, industry, and firm size), the less likely will the strategy created show
    good performance on other samples or in the future. By increasing the degree of
    freedom of your strategy building (rerunning all statistical tests for subsamples),
    you make recommendations fit nearly perfectly to the given sample that may reflect
    the effects of a number of random events. As these random effects never occur
    again, adding more and more flexibility after a certain limit will actually worsen
    the end result.
  prefs: []
  type: TYPE_NORMAL
- en: 'For the sake of the example, we picked `Communications`. If we apply the decision-tree
    technique here, we would end up with the following figure. After that, we have
    to invest into firms that have seen their revenue growing by less than 21 percent
    but more than 1.31 percent during the last year, while the net fixed assets ratio
    was at least 8.06 percent:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE21]'
  prefs: []
  type: TYPE_PRE
- en: '![Industry-specific investment](img/2078OT_09_05.jpg)'
  prefs: []
  type: TYPE_IMG
- en: At the same time, building a strategy based on a general sample of a given period
    may end up overweighting certain industries that show great performance during
    the given year(s), while, of course, there is no guarantee that the coming years
    will also prefer the same sectors. So, after building our strategy, we should
    crosscheck whether there is a serious industry dependency behind that strategy.
  prefs: []
  type: TYPE_NORMAL
- en: 'A cross-table controlling for the connection of the industry and decision-tree-based
    investment strategy reveals that we heavily overweighted the Energy and Utilities
    sectors. The cluster-based strategy, at the same time, gives an extra weight to
    materials. The code for the latter is shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE22]'
  prefs: []
  type: TYPE_PRE
- en: 'We may also be interested in how good our strategy performs across industries.
    For this, we should see the average TRS of firms chosen and not chosen for all
    the individual sectors. To create a table like this, we need to use the following
    command. The output illustrates how the decision-tree-based strategy performs
    (0 not selected, 1 selected):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE23]'
  prefs: []
  type: TYPE_PRE
- en: As shown in the preceding output, our strategy performs pretty well in all sectors;
    though in `Consumer Staples`, the median of the selected firms is somewhat near
    to that of not selected. In other cases, we may end up seeing that in some sectors,
    we do not get very good results, and the TRS of the chosen firms may even be lower
    than that of the other group. In this case, we would build a separate stock-selection
    model for those sectors where our model performed weaker.
  prefs: []
  type: TYPE_NORMAL
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we investigated how to use R to build an investment strategy
    on fundamental bases. After building and loading our database to R, we first checked
    whether some of our variables show a strong connection with TRS. Then, we checked
    whether some linear combinations of them would perform well and controlled them.
  prefs: []
  type: TYPE_NORMAL
- en: As neither method led to an acceptable result, we turned the logic upside down.
    We created clusters of firms based on TRS performance; then, we checked what is
    typical for overperformers. We also used decision trees to look for the best way
    to separate the firms with the highest TRS. Then, based on the results, we described
    stock-selection rules and performed backtesting.
  prefs: []
  type: TYPE_NORMAL
- en: 'Our example showed that even if individual explanatory variables show no strong
    linear connection to performance, it is possible to build an effective fundamental
    stock-selection strategy. When applying these techniques, recall the limitations:
    too much flexibility may hurt. A model with a nearly perfect fit for a historical
    dataset may perform very badly in the future if you achieved the good fit by providing
    too much freedom to your model.'
  prefs: []
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Brealey, Richard – Myers, Stewart – Marcus, Alan (2011)**: Fundamentals of
    Corporate Finance, McGraw-Hill/Irwin; 7th edition'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Ross, Stephen – Westerfield, Randolph – Jordan, Bradford D. (2009)**: Fundamentals
    of Corporate Finance Standard Edition McGraw-Hill/Irwin; 9th edition'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Koller, Tim – Goedhart, Marc – Wessels, David (2010)**: Valuation, Measuring
    and managing the value of companies, 5th edition, John Wiley & Sons, New York'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Damodaran, Aswath (2002)**: Investment Valuation, Tools and Techniques for
    Determining the Value of Any Asset, John Wiley & Sons, Inc., New York'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
