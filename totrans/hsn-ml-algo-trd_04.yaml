- en: Alpha Factor Research
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 阿尔法因子研究
- en: Algorithmic trading strategies are driven by signals that indicate when to buy
    or sell assets to generate positive returns relative to a benchmark. The portion
    of an asset's return that is not explained by exposure to the benchmark is called
    **alpha**, and hence these signals are also called **alpha factors**.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 算法交易策略受信号驱动，该信号指示何时购买或出售资产以产生相对于基准的正收益。资产收益的一部分不受基准暴露的影响被称为**阿尔法**，因此这些信号也被称为**阿尔法因子**。
- en: Alpha factors aim to predict the price movements of assets in the investment
    universe based on the available market, fundamental, or alternative data. A factor
    may combine one or several input variables, but assumes a single value for each
    asset every time the strategy evaluates the factor. Trade decisions typically
    rely on relative values across assets. Trading strategies are often based on signals
    emitted by multiple factors, and we will see that **machine learning** (**ML**)
    models are particularly well suited to integrate the various signals efficiently
    to make more accurate predictions.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 阿尔法因子旨在基于可用的市场、基本或替代数据预测投资领域资产的价格走势。一个因子可能结合一个或多个输入变量，但在每次策略评估因子时为每个资产假定一个单一值。交易决策通常依赖于跨资产的相对值。交易策略通常基于多个因子发出的信号，我们将看到**机器学习**（**ML**）模型特别适合有效地整合各种信号以进行更准确的预测。
- en: 'The design, evaluation, and combination of alpha factors are critical steps
    during the research phase of the algorithmic trading strategy workflow, as shown
    in the following diagram. We will focus on the research phase in this [Chapter
    4](1de6a332-69f8-4530-8d18-1007d0a3eb7e.xhtml), *Strategy Evaluation*, and the
    execution phase in the next chapter. The remainder of this book will then focus
    on the use of ML to discover and combine alpha factors. Take a look at the following
    figure:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 阿尔法交易策略工作流程研究阶段的设计、评估和结合阿尔法因子是关键步骤，如下图所示。我们将在这个[第 4 章](1de6a332-69f8-4530-8d18-1007d0a3eb7e.xhtml)中专注于研究阶段，*策略评估*，并在下一章中关注执行阶段。本书的其余部分将着重于使用ML来发现和结合阿尔法因子。请看下面的图：
- en: '![](img/b9712696-83f3-4dc7-8422-4486901a272f.png)'
  id: totrans-4
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b9712696-83f3-4dc7-8422-4486901a272f.png)'
- en: This chapter will use a simple mean-reversal factor to introduce the algorithmic
    trading simulator `zipline` that is written in Python and facilitates the testing
    of alpha factors for a given investment universe. We will also use `zipline` when
    we backtest trading strategies in a portfolio context in the next chapter. Next,
    we will discuss key metrics to evaluate the predictive performance of alpha factors,
    including the information coefficient and the information ratio, which leads to
    the fundamental law of active management.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将使用简单的均值回归因子介绍用Python编写的算法交易模拟器`zipline`，并促进对给定投资领域的阿尔法因子进行测试。在下一章中，我们还将在组合上回测交易策略时使用`zipline`。接下来，我们将讨论评估阿尔法因子预测性能的关键指标，包括信息系数和信息比率，这导致了主动管理的基本定律。
- en: 'In particular, this chapter will address the following topics:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 特别是，本章将讨论以下主题：
- en: How to characterize, justify and measure key types of alpha factors
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何表征、证明和衡量关键类型的阿尔法因子
- en: How to create alpha factors using financial feature engineering
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用金融特征工程创建阿尔法因子
- en: How to use `zipline` offline to test individual alpha factors
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何离线使用`zipline`测试单个阿尔法因子
- en: How to use `zipline` on Quantopian to combine alpha factors and identify more
    sophisticated signals
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何在Quantopian上使用`zipline`结合阿尔法因子并识别更复杂的信号
- en: How the **information coefficient** (**IC**) measures an alpha factor's predictive
    performance
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息系数**（**IC**）如何衡量阿尔法因子的预测性能'
- en: How to use `alphalens` to evaluate predictive performance and turnover
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用`alphalens`评估预测性能和换手率
- en: Engineering alpha factors
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工程化阿尔法因子
- en: Alpha factors are transformations of market, fundamental, and alternative data
    that contain predictive signals. They are designed to capture risks that drive
    asset returns. One set of factors describes fundamental, economy-wide variables
    such as growth, inflation, volatility, productivity, and demographic risk. Another
    set consists of tradeable investment styles such as the market portfolio, value-growth
    investing, and momentum investing.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 阿尔法因子是包含预测信号的市场、基本和替代数据的转换。它们旨在捕获驱动资产收益的风险。一组因子描述了基本的、全面的变量，如增长、通货膨胀、波动性、生产力和人口风险。另一组包括可交易的投资风格，如市场组合、价值增长投资和动量投资。
- en: There are also factors that explain price movements based on the economics or
    institutional setting of financial markets, or investor behavior, including known
    biases of this behavior. The economic theory behind factors can be rational, where
    the factors have high returns over the long run to compensate for their low returns
    during bad times, or behavioral, where factor risk premiums result from the possibly
    biased, or not entirely rational behavior of agents that is not arbitraged away.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 还有一些因素可以根据金融市场的经济学或机构设置，或者投资者行为来解释价格的变动，包括这种行为的已知偏差。因素背后的经济理论可以是合理的，其中因子在长期内具有高回报，以弥补它们在不好的时期的低回报，或者是行为的，其中因子风险溢价来自于可能偏见的、或者不完全理性的代理人行为，这种行为不会被套利掉。
- en: There is a constant search for and discovery of new factors that may better
    capture known or reflect new drivers of returns. Jason Hsu, the co-founder of
    Research Affiliates which manages close to $200 Bn, identified some 250 factors
    that had been published with empirical evidence in reputable journals by 2015
    and estimated that this number was likely to increase by 40 factors per year.
    To avoid false discoveries and ensure a factor delivers consistent results, it
    should have a meaningful economic intuition that makes it plausible that it reflects
    risks that the market would compensate.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 不断寻找和发现可能更好地捕捉已知或反映新收益驱动因素的新因素。Research Affiliates 的联合创始人、管理近 2000 亿美元的 Jason
    Hsu 在 2015 年确定了约 250 个因素，在知名期刊中发表了经验证据，并估计该数字每年可能增加 40 个因素。为了避免假发现并确保因子提供一致的结果，它应该有一个有意义的经济直觉，使得它可信地反映市场会补偿的风险。
- en: The data transformations include simple arithmetic such as absolute or relative
    changes of a variable over time, ratios between data series, or aggregations over
    a time window such as a simple or exponential moving average. They also include
    calculations that have emerged from the technical analysis of price patterns such
    as the relative strength index of demand versus supply and numerous metrics familiar
    from the fundamental analysis of securities.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 数据转换包括简单的算术，如某一变量随时间的绝对或相对变化、数据系列之间的比率，或者在时间窗口内的聚合，例如简单或指数移动平均。它们还包括从价格模式的技术分析中出现的计算，比如需求与供应的相对强度指数和从证券基本分析中熟悉的众多指标。
- en: Important factor categories
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重要的因子类别
- en: In an idealized world, categories of risk factors should be independent of each
    other (orthogonal), yield positive risk premia, and form a complete set that spans
    all dimensions of risk and explains the systematic risks for assets in a given
    class. In practice, these requirements will hold only approximately. We will address
    how to derive synthetic, data-driven risk factors using unsupervised learning,
    in particular principal and independent component analysis in [Chapter 12](c187906e-9fde-4f85-b709-df88dd0f7e88.xhtml),
    *Unsupervised Learning*.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在理想化的世界中，风险因子的类别应该彼此独立（正交），产生正的风险溢价，并形成一个完整的集合，涵盖了资产在给定类别中的所有风险维度，并解释了系统风险。实际上，这些要求只会近似成立。我们将介绍如何使用无监督学习来推导合成的、数据驱动的风险因子，特别是在
    [第 12 章](c187906e-9fde-4f85-b709-df88dd0f7e88.xhtml)，*无监督学习* 中的主成分和独立成分分析。
- en: We will review the key categories for factors derived from market, fundamental,
    and alternative data, and typical metrics used to capture them. We will also demonstrate
    how to implement these factors for algorithms tested on the Quantopian platform
    using built-in factors, custom computations using `numpy` and `pandas`, or the
    `talib` library for technical analysis.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将审查从市场、基本和替代数据衍生的因子的关键类别，以及用于捕捉它们的典型指标。我们还将演示如何在 Quantopian 平台上测试算法时实现这些因子，使用内置因子、使用
    `numpy` 和 `pandas` 进行自定义计算，或者使用 `talib` 库进行技术分析。
- en: Momentum and sentiment factors
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 动量和情绪因子
- en: Momentum investing follows the adage: the trend is your friend or let your winners
    run. Momentum risk factors are designed to go long assets that have performed
    well while going short assets with poor performance over a certain period.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 动量投资遵循这样的格言：趋势是你的朋友，或者让你的赢家继续奔跑。动量风险因子旨在做多表现良好的资产，同时做空表现不佳的资产，而且要在一定期间内表现良好。
- en: The premise of strategies relying on this factor is that asset prices exhibit
    a trend, reflected in positive serial correlations. Such price momentum would
    defy the hypothesis of efficient markets which states that past price returns
    alone cannot predict future performance. Despite theoretical arguments to the
    contrary, price momentum strategies have produced positive returns across asset
    classes and are an important part of many trading strategies.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 依赖这一因素的策略的前提是资产价格表现出趋势，反映在正的串行相关性中。这种价格动量会违背有效市场假设的假设，即过去的价格回报本身不能预测未来的表现。尽管存在相反的理论论据，但价格动量策略在各类资产中产生了正的回报，并且是许多交易策略的重要组成部分。
- en: Rationale
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理由
- en: Reasons for the momentum effect point to investor behavior, persistent supply,
    and demand imbalances, a positive feedback loop between risk assets and the economy,
    or the market microstructure.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 动量效应的原因指向投资者行为、持续的供求失衡、风险资产和经济之间的正反馈循环，或者市场微观结构。
- en: The behavioral reasons reflect biases of under-reaction and over-reaction to
    market news as investors process new information at different speeds. After an
    initial under-reaction to news, investors often extrapolate past behavior and
    create price momentum. The technology stocks rally during the late 90s market
    bubble was an extreme example. A fear and greed psychology also motivates investors
    to increase exposure to winning assets and continue selling losing assets.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 行为原因反映了投资者对市场新闻的反应偏差，因为投资者以不同的速度处理新信息。在对新闻的初始反应之后，投资者经常会推断过去的行为，并产生价格动量。上世纪九十年代晚期科技股市场泡沫期间的上涨就是一个极端例子。恐惧和贪婪心理也促使投资者增加对获胜资产的曝光，并继续出售亏损资产。
- en: Momentum can also have fundamental drivers such as a positive feedback loop
    between risk assets and the economy. Economic growth boosts equities, and the
    resulting wealth effect feeds back into the economy through higher spending, again
    fueling growth. Positive feedback between prices and the economy often extends
    momentum in equities and credit to longer horizons than for bonds, FX, and commodities,
    where negative feedback creates reversals, requiring a much shorter investment
    horizon. Another cause of momentum can be persistent demand-supply imbalances
    due to market frictions, for example, when commodity production takes significant
    amounts of time to adjust to demand trends. Oil production may lag increased demand
    from a booming economy for years, and persistent supply shortages can trigger
    and support upward price momentum.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 动量也可以有基本的驱动因素，比如风险资产与经济之间的正反馈循环。经济增长推动了股票市场，而由此产生的财富效应通过更高的支出再次反馈到经济中，从而推动增长。价格和经济之间的正反馈往往会使股票和信贷的动量延伸到比债券、外汇和商品更长的时间跨度，其中负反馈会引发反转，需要更短的投资视野。动量的另一个原因可能是由于市场摩擦造成的持续的供需失衡，例如，当商品生产需要较长时间来调整以适应需求趋势时。石油生产可能会滞后于经济繁荣引起的需求增加多年，持续的供应短缺可能会引发并支持价格上涨的动量。
- en: Market microstructure effects can also create price momentum related to behavioral
    patterns that motivate investors to buy products and implement strategies that
    mimic their biases. For example, the trading wisdom to cut losses and let profits
    run has investors use trading strategies such as stop loss, **constant proportion
    portfolio insurance** (**CPPI**), dynamical delta hedging, or option-based strategies
    such as protective puts. These strategies create momentum because they imply an
    advance commitment to sell when an asset underperforms and buy when it outperforms.
    Similarly, risk parity strategies (see the next chapter) tend to buy low-volatility
    assets that often exhibit positive performance and sell high-volatility assets
    that often had negative performance. The automatic rebalancing of portfolios using
    these strategies tends to reinforce price momentum.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 市场微观结构效应也可能会产生与行为模式相关的价格动量，这些行为模式促使投资者购买产品并实施模仿其偏见的策略。例如，根据交易智慧割损和让利润增长的原则，投资者使用交易策略，如止损、恒定比例组合保险（**CPPI**）、动态对冲、或者基于期权的策略，如保护性买入期权。这些策略会产生动量，因为它们意味着在资产表现不佳时进行预先承诺的出售，并在其表现优异时进行购买。同样，风险平价策略（见下一章）倾向于购买低波动率资产，这些资产通常表现出积极的业绩，并出售高波动率资产，这些资产通常表现不佳。使用这些策略自动平衡投资组合会加强价格动量。
- en: Key metrics
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关键指标
- en: Momentum factors are typically derived from changes in price time series by
    identifying trends and patterns. They can be constructed based on absolute or
    relative return, by comparing a cross-section of assets or analyzing an asset's
    time series, within or across traditional asset classes, and at different time
    horizons.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 动量因子通常是通过识别趋势和模式来推导价格时间序列的变化得到的。它们可以基于绝对回报或相对回报构建，通过比较资产的横截面或分析资产的时间序列，在传统资产类别内或跨越传统资产类别，并在不同的时间范围内进行。
- en: 'A few popular illustrative indicators are listed in the following table:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 下表列出了一些流行的示意性指标：
- en: '| **Factor** | **Description** |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| **因子** | **描述** |'
- en: '| **Relative Strength Indicator** (**RSI**) | The RSI compares recent price
    changes across stocks to identify stocks as overbought or oversold. A high RSI
    (example, above 70) indicates overbought, and a low RSI (example below 30) indicates
    oversold. It uses the average price change for a given number of prior trading
    days with positive price changes ![](img/0766fb85-9ae5-4c06-8433-a2dc457e55b7.png)and
    negative prices changes ![](img/f67582d2-718b-4ec4-98a7-524ada0d0c4f.png) to compute:
     ![](img/10851899-2d75-45b6-9e32-c5d076afc689.png) |'
  id: totrans-33
  prefs: []
  type: TYPE_TB
  zh: '| **相对强度指标** (**RSI**) | RSI 比较股票的最近价格变动，以识别股票是否被过度买入或过度卖出。高 RSI（例如，超过 70）表示过度买入，低
    RSI（例如低于 30）表示过度卖出。它使用给定数量的前几个交易日的平均价格变动与正价格变动 ![](img/0766fb85-9ae5-4c06-8433-a2dc457e55b7.png)
    和负价格变动 ![](img/f67582d2-718b-4ec4-98a7-524ada0d0c4f.png) 计算： ![](img/10851899-2d75-45b6-9e32-c5d076afc689.png)
    |'
- en: '| Price momentum | This factor computes the total return for a given number
    of prior trading days. In the academic literature, it is common to use the last
    12 months but exclude the most recent month because of a short-term reversal effect
    frequently observed in most recent price movements, but shorter periods have also
    been widely used. |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| 价格动量 | 此因子计算给定数量的前几个交易日的总回报。在学术文献中，通常使用过去 12 个月，但排除最近的一个月，因为最近价格波动经常观察到短期反转效应，但也广泛使用较短的周期。
    |'
- en: '| 12-month price momentum Vol Adj | The 12-month price momentum adjusted for
    volatility factor normalizes the total return over the previous 12 months by dividing
    it by the standard deviation of these returns. |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| 12 个月价格动量 Vol Adj | 考虑波动率因子的 12 个月价格动量调整将前 12 个月的总回报归一化，方法是将其除以这些回报的标准偏差。
    |'
- en: '| Price acceleration | Price acceleration calculates the gradient of the trend
    (adjusted for volatility) using a linear regression on daily prices for a longer
    and a shorter period, e.g., a one year and three months of trading days and compares
    the change in the slope as a measure of price acceleration. |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| 价格加速度 | 价格加速度使用线性回归在较长和较短周期的每日价格上计算趋势的梯度（根据波动率调整），例如，一年和三个月的交易日，并比较斜率的变化作为价格加速度的衡量。
    |'
- en: '| Percent Off 52 week high | This factor uses the percent difference between
    the most recent and the highest price for the last 52 weeks. |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| 百分比偏离 52 周最高价 | 此因子使用最近 52 周的最高价格与最近价格之间的百分差异。 |'
- en: 'Additional sentiment indicators include the following:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 其他情绪指标包括以下内容：
- en: '| **Factor** | **Description** |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| **因子** | **描述** |'
- en: '| Earnings estimates count | This metric ranks stocks by the number of consensus
    estimates as a proxy for analyst coverage and information uncertainty. A higher
    value is more desirable. |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| 盈利预测数量 | 此度量指标根据共识估计数量对股票进行排名，作为分析师覆盖范围和信息不确定性的代理。较高的值更可取。 |'
- en: '| N month change in recommendation | This factor ranks stocks by the change
    in consensus recommendation over the prior N month, where improvements are desirable
    (regardless of whether they have moved from strong sell to sell or buy to strong
    buy and so on). |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| 推荐 N 个月变化 | 此因子根据前 N 个月的共识推荐变化对股票进行排名，改善是可取的（无论是从强卖出到卖出还是从买入到强买入等）。 |'
- en: '| 12-month change in shares outstanding | This factor measures the change in
    a company''s split-adjusted share count over the last 12 months, where a negative
    change implies share buybacks and is desirable because it signals that management
    views the stock as cheap relative to its intrinsic and, hence, future value. |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| 流通股份 12 个月变化 | 此因子衡量公司上市股份计数在过去 12 个月的变化，其中负变化意味着股份回购，这是可取的，因为它表明管理层认为股票相对于其内在价值和未来价值而言便宜。
    |'
- en: '| 6-month change in target price | The metric tracks the 6-month change in
    mean analyst target price and a higher positive change is naturally more desirable.
    |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| 目标价格变动的 6 个月变化 | 此指标跟踪平均分析师目标价格的 6 个月变化，较高的正变化自然更可取。 |'
- en: '| Net earnings revisions | This factor expresses the difference between upward
    and downward revisions to earnings estimates as a percentage of the total number
    of revisions. |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| 净收益修订 | 这一因素表示盈利预测的上调和下调之间的差异，以修订总数的百分比表示。 |'
- en: '| Short interest to shares outstanding | This measure is the percentage of
    shares outstanding currently being sold short, that is, sold by an investor who
    has borrowed the share and needs to repurchase it at a later day while speculating
    that its price will fall. Hence, a high level of short interest indicates negative
    sentiment and is expected to signal poor performance going forward. |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| 流通股份的卖空量 | 这个指标是目前被卖空的流通股份的百分比，即由借入股份并在以后的某一天回购它的投资者出售的股份，而这个投资者在猜测其价格将下跌。因此，高水平的卖空量表明负面情绪，并预示着未来的表现不佳。
    |'
- en: Value factors
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 价值因素
- en: Stocks with low prices relative to their fundamental value tend to deliver returns
    in excess of a capitalization-weighted benchmark. Value factors reflect this correlation
    and are designed to provide signals to buy undervalued assets, that is, those
    that are relatively cheap and sell those that are overvalued and expensive. For
    this reason, at the core of any value strategy is a valuation model that estimates
    or proxies the asset's fair or fundamental value. Fair value can be defined as
    an absolute price level, a spread relative to other assets, or a range in which
    an asset should trade (for example, two standard deviations).
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 相对于其基本价值而言价格较低的股票往往会产生超过市值加权基准的回报。价值因素反映了这种相关性，并旨在提供购买被低估资产的信号，即那些相对便宜的资产，并卖出那些被高估和昂贵的资产。因此，任何价值策略的核心都是一个估计或代理资产公平或基本价值的估值模型。公平价值可以定义为绝对价格水平、相对于其他资产的价差，或者资产应该交易的范围（例如，两个标准偏差）。
- en: Value strategies rely on mean-reversion of prices to the asset's fair value.
    They assume that prices only temporarily move away from fair value due to either
    behavioral effects, such as overreaction or herding, or liquidity effects such
    as temporary market impact or long-term supply/demand frictions. Since value factors
    rely on mean-reversion, they often exhibit properties opposite to those of momentum
    factors. For equities, the opposite to value stocks are growth stocks with a high
    valuation due to growth expectations.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 价值策略依赖于价格回归到资产的公平价值。它们假设价格仅因行为效应（例如过度反应或群体行为）或流动性效应（例如临时市场影响或长期供求摩擦）而暂时偏离公平价值。由于价值因素依赖于价格回归，它们通常表现出与动量因素相反的性质。对于股票来说，价值股的对立面是由于增长预期而具有高估值的成长股。
- en: Value factors enable a broad array of systematic strategies including fundamental
    and market valuation, statistical arbitrage, and cross-asset relative value. They
    are often implemented as long/short portfolios without exposure to other traditional
    or alternative risk factors.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 价值因素可以实现广泛的系统性策略，包括基本和市场估值、统计套利和跨资产相对价值。它们通常被实施为无暴露于其他传统或替代风险因素的多空投资组合。
- en: Fundamental value strategies derive fair asset values from economic and fundamental
    indicators that depend on the target asset class. In fixed income, currencies,
    and commodities, indicators include, for example, levels and changes in the capital
    account balance, economic activity, inflation, or fund flows. In equities and
    corporate credit, value factors go back to Graham and Dodd's Security Analysis
    in the 1930s, since made famous by Warren Buffet. Equity value approaches compare
    a stock price to fundamental metrics such as book value, top line sales, bottom
    line earnings, or various cash-flow metrics.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 基本价值策略从取决于目标资产类别的经济和基本指标中得出公平资产价值。在固定收益、货币和大宗商品方面，指标包括资本账户余额水平和变动、经济活动、通货膨胀或资金流动等。在股票和企业信用方面，价值因素可以追溯到格雷厄姆和多德在上世纪三十年代的《证券分析》中，后来被沃伦·巴菲特所著名化。股票价值方法将股票价格与基本指标（例如账面价值、销售额、净利润或各种现金流量指标）进行比较。
- en: Market value strategies use statistical or machine learning models to identify
    mispricing due to inefficiencies in liquidity provision. Statistical and Index
    Arbitrage are prominent examples that capture the reversion of temporary market
    impacts over short time horizons (we will cover pairs trading in the next chapter).
    Over longer time horizons, market value trades also leverage seasonal effects
    in equities and commodities.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 市值策略使用统计学或机器学习模型来识别由流动性供给不足引起的错价。统计套利和指数套利是突出的例子，捕捉短期时间范围内临时市场影响的回归（我们将在下一章中讨论配对交易）。在较长的时间范围内，市值交易还利用股票和商品的季节效应。
- en: Cross-asset relative value strategies focus on the relative mispricing of different
    assets. For example, convertible bond arbitrage involves trades on the relative
    value between the stock, credit, and volatility of a single company. Relative
    value also includes trades between credit and equity volatility, using credit
    signals to trade equities or relative value trades between commodities and equities.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 跨资产相对价值策略侧重于不同资产的相对错价。例如，可转换债券套利涉及对单个公司的股票、信用和波动性之间的相对价值进行交易。相对价值还包括信用和股票波动性之间的交易，利用信用信号交易股票或商品和股票之间的相对价值交易。
- en: Rationale
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理性
- en: There are both rational and behavioral explanations for the existence of the
    value effect. We will cite a few prominent examples from a wealth of research
    with further references listed in the GitHub repository.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 存在价值效应的理性和行为学解释都有。我们将引用一些来自丰富研究的著名例子，并在GitHub存储库中列出更多参考资料。
- en: In the rational, efficient markets view, the value premium compensates for higher
    real or perceived risks. Researchers have presented evidence that value firms
    have less flexibility to adapt to the unfavorable economic environments than leaner
    and more flexible growth companies, or that value stock risks relate to high financial
    leverage and more uncertain future earnings. Value and small-cap portfolios have
    also been shown to be more sensitive to macro shocks than growth and large-cap
    portfolios.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 在理性、高效的市场观点中，价值溢价是对较高的实际或感知风险的补偿。研究人员提出了证据，表明价值公司比精益和更灵活的成长公司在适应不利的经济环境方面的灵活性更小，或者价值股的风险与高财务杠杆和更不确定的未来收益有关。研究还表明，价值和小市值投资组合对宏观冲击的敏感性也比成长和大市值投资组合更高。
- en: From a behavioral perspective, the value premium can be explained by loss aversion
    and mental accounting biases. Investors may be less concerned about losses on
    assets with a strong recent performance due to the cushions offered by prior gains. This
    loss aversion bias induces investors to perceive the stock as less risky than
    before and discount its future cash flows at a lower rate. Conversely, poor recent
    performance may lead investors to raise the asset's discount rate. The differential
    return expectations result in a value premium since growth stocks with a high
    price multiple relative to fundamentals have done well in the past but, going
    forward, investors will require a lower average return due to their biased perception
    of lower risks, while the inverse is true for value stocks.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 从行为学的角度来看，价值溢价可以通过损失规避和心理会计偏见来解释。投资者可能对具有强劲近期表现的资产的损失较少担心，因为之前收益提供了保障。这种损失规避偏见导致投资者认为股票的风险较以前较低，并以较低的利率贴现其未来现金流。相反，较差的近期表现可能导致投资者提高资产的贴现率。不同的回报预期导致了价值溢价，因为相对于基本面的高价格倍数的成长股在过去表现良好，但是在未来，投资者将要求较低的平均回报，因为他们对风险的偏见认知较低，而价值股则相反。
- en: Key metrics
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关键指标
- en: 'There is a large number of valuation proxies computed from fundamental data.
    These factors can be combined as inputs into a machine learning valuation model
    to predict prices. We will see examples of how some of these factors are used
    in practice in the following chapters:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 从基本数据计算出了大量的估值代理。这些因素可以作为机器学习估值模型的输入，用于预测价格。在接下来的章节中，我们将看到一些这些因素在实践中如何被使用的例子：
- en: '| **Factor** | **Description** |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: '| **因素** | **描述** |'
- en: '| Cash flow yield | The ratio divides the operational cash flow per share by
    the share price. A higher ratio implies better cash returns for shareholders (if
    paid out using dividends or share buybacks, or profitably reinvested in the business).
    |'
  id: totrans-60
  prefs: []
  type: TYPE_TB
  zh: '| 现金流收益 | 该比率将每股运营现金流除以股价。较高的比率意味着股东获得更好的现金回报（如果通过股息或股票回购支付，或者利润投资于业务中）。 |'
- en: '| Free cash flow yield | The ratio divides the free cash flow per share, which
    reflects the amount of cash available for distribution after necessary expenses
    and investments, by the share price. Higher and growing free cash flow yield is
    commonly viewed as a signal of outperformance. |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| 自由现金流收益率 | 该比率将每股自由现金流（反映必要费用和投资后可分配的现金金额）除以股价。较高且增长的自由现金流收益率通常被视为超额表现的信号。
    |'
- en: '| **Cash flow return on invested capital** (**CFROIC**) | CFROIC measures a
    company''s cash flow profitability. It divides operating cash flow by invested
    capital, defined as total debt plus net assets. A higher return means the business
    has more cash for a given amount of invested capital, generating more value for
    shareholders. |'
  id: totrans-62
  prefs: []
  type: TYPE_TB
  zh: '| **投入资本的现金流回报率** (**CFROIC**) | CFROIC衡量公司的现金流盈利能力。它将经营现金流除以投入资本，定义为总债务加净资产。更高的回报意味着企业在给定的投入资本量下有更多现金，为股东创造更多价值。
    |'
- en: '| Cash flow to total assets | This ratio divides operational cash flow by total
    assets and indicates how much cash a company can generate relative to its assets,
    where a higher ratio is better similar as for CFROIC. |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| 现金流与总资产比 | 该比率将经营现金流除以总资产，表示公司相对于其资产可以生成多少现金，较高的比率类似于CFROIC。 |'
- en: '| Free cash flow to enterprise value | This ratio measures the free cash flow
    that a company generates relative to its enterprise value, measured as the combined
    value of equity and debt. |'
  id: totrans-64
  prefs: []
  type: TYPE_TB
  zh: '| 企业价值的自由现金流量 | 该比率衡量公司相对于其企业价值（以股权和债务的合计价值衡量）生成的自由现金流量。 |'
- en: '| EBITDA to enterprise value | This ratio measures a company''s EBITDA (Earnings
    before interest, taxes, depreciation, and amortization), which is a proxy for
    cash flow relative to its enterprise value. |'
  id: totrans-65
  prefs: []
  type: TYPE_TB
  zh: '| EBITDA与企业价值比 | 该比率衡量了公司的EBITDA（利润前利息、税项、折旧和摊销），即相对于其企业价值的现金流量代理。 |'
- en: '| Earnings yield (1 Yr trailing) | This ratio divides the sum of earnings for
    the past 12 months by the last market (close) price. |'
  id: totrans-66
  prefs: []
  type: TYPE_TB
  zh: '| 收益率（1年滞后） | 该比率将过去12个月的收益总和除以最后市场（收盘）价格。 |'
- en: '| Earnings yield (1 Yr forward) | Instead of actual historical earnings, this
    ratio divides a rolling 12 month forward consensus analyst earnings estimate by
    the last price, where consensus consists in a (possibly weighted) average of forecasts.
    |'
  id: totrans-67
  prefs: []
  type: TYPE_TB
  zh: '| 收益率（1年预测） | 该比率将滚动12个月的分析师盈利预期除以最后价格，而不是实际历史盈利，其中共识是预测的（可能是加权的）平均值。 |'
- en: '| PEG ratio | The Price/Earnings to Growth (PEG) ratio divides a stock''s price-to-earnings
    (P/E) ratio by the earnings growth rate for a given period. The ratio adjusts
    the price paid for a dollar of earnings (measured by the P/E ratio) by the company''s
    earnings growth. |'
  id: totrans-68
  prefs: []
  type: TYPE_TB
  zh: '| PEG比率 | 价格/盈利增长（PEG）比率将一定时期内的股票价格盈利（P/E）比率除以公司的盈利增长率。该比率通过公司的盈利增长调整支付的价格（由P/E比率衡量）。
    |'
- en: '| P/E 1 Yr Forward Relative to sector | Forecast P/E ratio relative to the
    corresponding sector P/E. It aims to alleviate the sector bias of the generic
    P/E ratio by accounting for sector differences in valuation. |'
  id: totrans-69
  prefs: []
  type: TYPE_TB
  zh: '| 预测的1年前PE相对于行业的 | 预测的市盈率相对于相应的行业市盈率。它旨在通过考虑行业在估值上的差异来减轻通用市盈率的行业偏见。 |'
- en: '| Sales yield | The ratio measures the valuation of a stock relative to its
    ability to generate revenues. All else equal, stocks with higher historical sales
    to price ratios are expected to outperform. |'
  id: totrans-70
  prefs: []
  type: TYPE_TB
  zh: '| 销售收益率 | 该比率衡量股票的估值相对于其产生收入的能力。其他条件相等，具有较高历史销售价格比率的股票预计会表现出色。 |'
- en: '| Sales yield FY1 | The forward sales to price ratio uses analyst sales forecast,
    combined to a (weighted) average. |'
  id: totrans-71
  prefs: []
  type: TYPE_TB
  zh: '| 销售收益率FY1 | 前瞻性销售价格比率使用分析师销售预测，与（加权的）平均值结合。 |'
- en: '| Book value yield | The ratio divides the historical book value by the share
    price. |'
  id: totrans-72
  prefs: []
  type: TYPE_TB
  zh: '| 帐面价值收益率 | 该比率将历史帐面价值除以股价。 |'
- en: '| Dividend yield | The current annualized dividend divided by the last close
    price. Discounted cash flow valuation assumes a company''s market value equates
    to the present value of its future cash flows. |'
  id: totrans-73
  prefs: []
  type: TYPE_TB
  zh: '| 股息收益率 | 当前年化股息除以最近收盘价。贴现现金流量估值假设公司的市值等于其未来现金流的现值。 |'
- en: Volatility and size factors
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 波动性和规模因素
- en: The low volatility factor captures excess returns on stocks with volatility,
    beta or idiosyncratic risk below average. Stocks with a larger market capitalization
    tend to have lower volatility so that the traditional *size* factor is often combined
    with the more recent volatility factor.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 低波动因子捕捉到具有低于平均水平的波动率、贝塔或特有风险的股票的超额回报。具有较大市值的股票往往具有较低的波动性，因此传统的*size*因子通常与较新的波动性因子结合使用。
- en: The low volatility anomaly is an empirical puzzle that is at odds with basic
    principles of finance. The **Capital Asset Pricing Model** (**CAPM**) and other
    asset pricing models assert that higher risk should earn higher returns, but in
    numerous markets and over extended periods, the opposite has been true with less
    risky assets outperforming their riskier peers.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 低波动性异常是一种与金融基本原理相矛盾的实证难题。**资本资产定价模型**（**CAPM**）和其他资产定价模型断言，高风险应该获得更高的回报，但在许多市场和长时间内，相反情况发生，较低风险的资产表现优于其风险较高的同行。
- en: Rationale
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理由
- en: The low volatility anomaly contradicts the hypothesis of efficient markets and
    the CAPM assumptions. Instead, several behavioral explanations have been advanced.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 低波动性异常与有效市场假说和CAPM假设相矛盾。相反，已提出了几种行为解释。
- en: The lottery effect builds on empirical evidence that individuals take on bets
    that resemble lottery tickets with a small expected loss but a large potential
    win, even though this large win may have a fairly low probability. If investors
    perceive the risk-return profile of a low price, volatile stock as similar to
    a lottery ticket, then it could be an attractive bet. As a result, investors may
    overpay for high volatility stocks and underpay for low volatility stocks due
    to their biased preferences. The representativeness bias suggests that investors
    extrapolate the success of a few, well-publicized volatile stocks to all volatile
    stocks while ignoring the speculative nature of such stocks.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 彩票效应建立在个人承担类似彩票的投注的经验证据上，这些投注存在小额预期损失但可能有较大潜在赢利，即使这种大赢利可能性相当低。如果投资者认为低价格、波动性大的股票的风险-回报特征类似于彩票，那么它可能是一种有吸引力的投注。因此，投资者可能会为高波动性股票支付过高的价格，并由于其偏见偏好而为低波动性股票支付过低的价格。代表性偏差表明，投资者将一些广为人知的高波动性股票的成功推广到所有高波动性股票，而忽视了这些股票的投机性质。
- en: Investors may also be overconfident in their ability to forecast the future,
    and their differences in opinions are higher for volatile stocks with more uncertain
    outcomes. Since it is easier to express a positive view by going long, that is,
    owning an asset than a negative view by going short, optimists may outnumber pessimists
    and keep driving up the price of volatile stocks, resulting in lower returns.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 投资者可能也过于自信地认为他们能够预测未来，对于风险更大、结果更不确定的波动性股票，他们的意见差异更大。由于通过持有资产而不是通过做空来表达积极观点更容易，即持有一个资产，乐观主义者可能会超过悲观主义者，继续推动波动性股票的价格上涨，导致较低的回报。
- en: Furthermore, investors behave differently in bull markets and during crises.
    During bull markets, the dispersion of betas is much lower so that low volatility
    stocks do not underperform much if at all, whereas, during crises, investors seek
    or keep low-volatility stocks and the beta dispersion increases. As a result,
    lower volatility assets and portfolios do better over the long term.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，投资者在牛市和危机期间的行为不同。在牛市期间，贝塔的离散度要低得多，因此低波动性股票甚至不会表现得差，而在危机期间，投资者寻求或保持低波动性股票，贝塔的离散度增加。因此，低波动性资产和投资组合在长期内表现更好。
- en: Key metrics
  id: totrans-82
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关键指标
- en: Metrics used to identify low volatility stocks cover a broad spectrum, with
    realized volatility (standard deviation) on one end, and forecast (implied) volatility
    and correlations on the other end. Some operationalize low volatility as low beta.
    The evidence in favor of the volatility anomaly appears robust for different metrics.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 用于识别低波动性股票的度量覆盖了广泛的领域，其中一个端是实现的波动率（标准差），另一个端是预测（隐含）波动率和相关性。一些人将低波动性操作化为低贝塔。对于不同的度量，支持波动性异常的证据似乎是强有力的。
- en: Quality factors
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 质量因素
- en: The quality factor aims to capture the excess return on companies that are highly
    profitable, operationally efficient, safe, stable and well-governed, in short,
    high quality, versus the market. The markets also appear to reward relative earnings
    certainty and penalize stocks with high earnings volatility. A portfolio tilt
    towards businesses with high quality has been long advocated by stock pickers
    that rely on fundamental analysis but is a relatively new phenomenon in quantitative
    investments. The main challenge is how to define the quality factor consistently
    and objectively using quantitative indicators, given the subjective nature of
    quality.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 质量因子旨在捕捉高盈利、运营高效、安全、稳定和良好治理的公司相对于市场的超额回报。市场似乎也会奖励相对盈利的确定性，并惩罚盈利波动性较高的股票。向高质量企业倾斜的投资组合长期以来一直被依靠基本分析的股票选手所提倡，但在量化投资中是一个相对较新的现象。主要挑战在于如何使用定量指标一致和客观地定义质量因子，考虑到质量的主观性。
- en: Strategies based on standalone quality factors tend to perform in a counter-cyclical
    way as investors pay a premium to minimize downside risks and drive up valuations.
    For this reason, quality factors are often combined with other risk factors in
    a multi-factor strategy, most frequently with value to produce the quality at
    a reasonable price strategy. Long-short quality factors tend to have negative
    market beta because they are long quality stocks that are also low volatility,
    and short more volatile, low-quality stocks. Hence, quality factors are often
    positively correlated with low volatility and momentum factors, and negatively
    correlated with value and broad market exposure.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 基于独立质量因子的策略往往表现出逆周期性，因为投资者支付溢价以减小下行风险并推高估值。因此，质量因子经常与其他风险因子结合在一起，最常见的是与价值因子结合以产生合理价格的质量策略。长短期质量因子往往具有负市场β值，因为它们做多质量股票，这些股票也是低波动性的，同时做空更具波动性、低质量的股票。因此，质量因子通常与低波动性和动量因子呈正相关，与价值和广泛的市场暴露呈负相关。
- en: Rationale
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理由
- en: Quality factors may signal outperformance because superior fundamentals such
    as sustained profitability, steady growth in cash flow, prudent leveraging, a
    low need for capital market financing or low financial risk underpin the demand
    for equity shares and support the price of such companies in the long run. From
    a corporate finance perspective, a quality company often manages its capital carefully
    and reduces the risk of over-leveraging or over-capitalization.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 质量因子可能会暗示超额表现，因为持续的盈利能力、现金流量稳定增长、审慎的杠杆使用、对资本市场融资的低需求或长期内的低金融风险支撑了对股票的需求，并在长期内支撑了这些公司的股价。从公司财务的角度来看，质量公司通常会谨慎管理其资本，减少过度杠杆或过度资本化的风险
- en: A behavioral explanation suggests that investors under-react to information
    about quality, similar to the rationale for momentum where investors chase winners
    and sell losers. Another argument for quality premia is a herding argument similar
    to growth stocks. Fund managers may find it easier to justify buying a company
    with strong fundamentals even when it is getting expensive rather than a more
    volatile (risky) value stock.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 行为解释表明，投资者对质量信息存在反应不足，类似于动量交易的理由，投资者追逐赢家并卖出输家。另一个支持质量溢价的论点是类似于成长股的群体效应。基金经理可能会发现，即使一家公司的基本面强劲但价格昂贵，也比购买更具波动性（风险性）的价值股更容易被合理化。
- en: Key metrics
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关键指标
- en: Quality factors rely on metrics computed from the balance sheet and income statement
    that indicate profitability reflected in high profit or cash flow margins, operating
    efficiency, financial strength, and competitiveness more broadly because it implies
    the ability to sustain a profitability position over time.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 质量因子依赖于从资产负债表和利润表计算出的指标，这些指标表明了高利润或现金流边际、经营效率、财务实力和更广泛的竞争力，因为这意味着公司能够持续一段时间内保持盈利能力。
- en: Hence, quality has been measured using gross profitability (which has been recently
    added to the Fama—French factor model, see [Chapter 7](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml), *Linear
    Models*), return on invested capital, low earnings volatility, or a combination
    of various profitability, earnings quality, and leverage metrics, with some options
    listed in the following table.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，质量常常通过毛利率（最近已添加到法玛—法朗奇因子模型中，参见[第7章](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml)，*线性模型*）、投入资本回报率、低盈利波动性或各种盈利能力、盈利质量和杠杆指标的组合进行衡量，以下表格列出了一些选项。
- en: 'Earnings management is mainly exercised by manipulating accruals. Hence, the
    size of accruals is often used as a proxy for earnings quality: higher total accruals
    relative to assets make low earnings quality more likely. However, this is not
    unambiguous as accruals can reflect earnings manipulation just as well as accounting
    estimates of future business growth:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 盈余管理主要通过操纵应计项目来实施。因此，应计项目的大小通常被用作盈余质量的代理：相对于资产较高的总应计项目会使低盈余质量更有可能。然而，这并不一定清楚，因为应计项目既可以反映盈余操纵，也可以像未来业务增长的会计估计一样反映出来。
- en: '| **Factor** | **Description** |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| **因子** | **描述** |'
- en: '| Asset turnover | This factor measures how efficiently a company uses its
    assets, which require capital, to produce revenue and is calculated by dividing
    sales by total assets; higher turnover is better. |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| 资产周转率 | 此因子衡量公司使用资产（需要资本）生产收入的效率，并通过将销售额除以总资产来计算；更高的周转率更好。 |'
- en: '| Asset turnover 12 month change | This factor measures a change in management''s
    efficiency in using assets to produce revenue over the last year. Stocks with
    the highest level of efficiency improvements are typically expected to outperform.
    |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| 资产周转率12个月变化 | 此因子衡量管理层在过去一年中利用资产产生收入的效率变化。通常预计，效率改善水平最高的股票将表现优异。 |'
- en: '| Current Ratio | The current ratio is a liquidity metric that measures a company''s
    ability to pay short-term obligations. It compares a company''s current assets
    to its current liabilities, and a higher current ratio is better from a quality
    perspective. |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| 流动比率 | 流动比率是衡量公司偿付短期债务能力的流动性指标。它将公司的流动资产与流动负债进行比较，从质量的角度来看，流动比率较高更好。 |'
- en: '| Interest coverage | This factor measures how easily a company will be able
    to pay interest on its debt. It is calculated by dividing a company''s EBIT (Earnings
    before interest and taxes) by its interest expense. A higher ratio is desirable.
    |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| 利息保障 | 此因子衡量公司支付债务利息的能力。它是通过将公司的息税前利润（EBIT）除以其利息支出来计算的。较高的比率是可取的。 |'
- en: '| Leverage | A firm with significantly more debt than equity is considered
    to be highly leveraged. The debt-to-equity ratio is typically inversely related
    to prospects, with lower leverage being better. |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| 杠杆 | 与股本相比，负债显著多于权益的公司被认为是高度杠杆的。负债权益比通常与前景呈负相关，杠杆越低越好。 |'
- en: '| Payout ratio | The amount of earnings paid out in dividends to shareholders.
    Stocks with higher payout ratios were allocated to the top decile while those
    with lower payout ratios to the bottom decile. |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| 分红比率 | 向股东支付的股息金额。分红比率较高的股票被分配到前十分位，而分红比率较低的股票则被分配到底十分位。 |'
- en: '| **Return on equity** (**ROE**) | Ranks stocks based on their historical return
    on equity and allocates those with the highest ROE to the top decile. |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| **净资产收益率**（**ROE**） | 根据历史净资产收益率对股票进行排名，并将净资产收益率最高的股票分配到前十分位。 |'
- en: How to transform data into factors
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何将数据转化为因子
- en: Based on a conceptual understanding of key factor categories, their rationale
    and popular metrics, a key task is to identify new factors that may better capture
    the risks embodied by the return drivers laid out previously, or to find new ones.
    In either case, it will be important to compare the performance of innovative
    factors to that of known factors to identify incremental signal gains.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 基于对关键因子类别、它们的原理和流行指标的概念理解，一个关键任务是确定可能更好地捕捉之前所述的回报驱动因素所包含的风险的新因子，或者找到新因子。在任何情况下，比较创新因子与已知因子的表现将是重要的，以确定增量信号增益。
- en: Useful pandas and NumPy methods
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 有用的 pandas 和 NumPy 方法
- en: NumPy and pandas are the key tools for custom factor computations. The Notebook
    `00-data-prep.ipynb` in the data directory contains examples of how to create
    various factors. The notebook uses data generated by the `get_data.py` script
    in the data folder in the root directory of the GitHub repo and stored in `HDF5`
    format for faster access. See the notebook `storage_benchmarks.ipynb` in the directory
    for [Chapter 2](e7bd6fc7-7ef7-4c4e-acec-ac1d083f8902.xhtml), *Market and Fundamental
    Data*, on the GitHub repo for a comparison of `parquet`, `HDF5`, and `csv` storage
    formats for pandas `DataFrames`.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: NumPy 和 pandas 是自定义因子计算的关键工具。数据目录中的 Notebook `00-data-prep.ipynb` 包含了如何创建各种因子的示例。该笔记本使用由
    GitHub 仓库根目录中的 data 文件夹中的 `get_data.py` 脚本生成并以 `HDF5` 格式存储的数据以提供更快的访问。请参阅 GitHub
    仓库中的 [Chapter 2](e7bd6fc7-7ef7-4c4e-acec-ac1d083f8902.xhtml) 目录下的笔记本 `storage_benchmarks.ipynb`，以比较
    pandas `DataFrames` 的 `parquet`、`HDF5` 和 `csv` 存储格式。
- en: The following illustrates some key steps in computing selected factors from
    raw stock data. See the Notebook for additional detail and visualizations that
    we have omitted here to save some space.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例说明了从原始股票数据计算选定因子的一些关键步骤。有关详细信息和我们在此处省略的可视化效果，请参见笔记本。
- en: Loading the data
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 加载数据
- en: 'We load the Quandl stock price datasets covering the US equity markets 2000-18
    using `pd.IndexSlice` to perform a slice operation on the `pd.MultiIndex`, select
    the adjusted close price and unpivot the column to convert the DataFrame to wide
    format with tickers in the columns and timestamps in the rows:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们加载了 Quandl 股价数据集，涵盖了2000年至2018年的美国股票市场，使用 `pd.IndexSlice` 对 `pd.MultiIndex`
    执行切片操作，选择调整后的收盘价，并将列进行转置，将 DataFrame 转换为宽格式，其中列中包含股票代码，行中包含时间戳：
- en: '[PRE0]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Resampling from daily to monthly frequency
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从日频率重新采样为月频率
- en: 'To reduce training time and experiment with strategies for longer time horizons,
    we convert the business-daily data to month-end frequency using the available
    adjusted close price:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减少训练时间并尝试针对更长时间范围的策略，我们使用可用的调整后的收盘价将商业日数据转换为月末频率：
- en: '[PRE1]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Computing momentum factors
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 计算动量因子
- en: To capture time series dynamics that capture, for example, momentum patterns,
    we compute historical returns using the `pct_change(n_periods)`, that is, returns
    over various monthly periods as identified by `lags`. We then convert the wide
    result back to long format using `.stack()`, use `.pipe()` to apply the `.clip()`
    method to the resulting `DataFrame` and winsorize returns at the [1%, 99%] levels;
    that is, we cap outliers at these percentiles.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 为了捕捉捕捉时间序列动态，例如动量模式，我们使用 `pct_change(n_periods)` 计算历史回报，即由 `lags` 指定的各种月期的回报。然后，我们使用
    `.stack()` 将宽格式结果转换回长格式，使用 `.pipe()` 应用 `.clip()` 方法到结果的 `DataFrame` 并将回报截尾到 [1%,
    99%] 的水平；即我们在这些百分位数上限制异常值。
- en: 'Finally, we normalize returns using the geometric average. After using `.swaplevel()`
    to change the order of the `MultiIndex` levels, we obtain compounded monthly returns
    for six periods ranging from 1 to 12 months:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们使用几何平均数对回报进行归一化处理。使用 `.swaplevel()` 更改 `MultiIndex` 索引级别的顺序后，我们获得了从1到12个月的六个周期的合并月回报：
- en: '[PRE2]'
  id: totrans-116
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We can use these results to compute momentum factors based on the difference
    between returns over longer periods and the most recent monthly return, as well
    as for the difference between `3` and `12` month returns as follows:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用这些结果来计算动量因子，这些因子基于较长周期的回报与最近一个月的回报之间的差异，以及基于`3`和`12`个月回报之间的差异，如下所示：
- en: '[PRE3]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Using lagged returns and different holding periods
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用滞后回报和不同持有期
- en: 'To use lagged values as input variables or features associated with the current
    observations, we use the `.shift()` method to move historical returns up to the
    current period:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 为了将滞后值用作当前观察到的输入变量或特征，我们使用 `.shift()` 方法将历史回报移至当前期间：
- en: '[PRE4]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Similarly, to compute returns for various holding periods, we use the normalized
    period returns computed previously and shift them back to align them with the
    current financial features:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，为了计算各种持有期的回报，我们使用之前计算的标准化期回报，并将其向后移动以与当前金融特征对齐：
- en: '[PRE5]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Compute factor betas
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 计算因子贝塔系数
- en: We will introduce the Fama—French data to estimate the exposure of assets to
    common risk factors using linear regression in [Chapter 8](4ea03bd9-a996-462b-803f-2a27365ff636.xhtml),
    *Time Series Models*. The five Fama—French factors, namely market risk, size,
    value, operating profitability, and investment have been shown empirically to
    explain asset returns and are commonly used to assess the risk/return profile
    of portfolios. Hence, it is natural to include past factor exposures as financial
    features in models that aim to predict future returns.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在[第8章](4ea03bd9-a996-462b-803f-2a27365ff636.xhtml) *时间序列模型* 中介绍 Fama—French
    数据，使用线性回归估计资产对常见风险因子的暴露。已经通过实证研究表明，Fama—French 的五个因子，即市场风险、规模、价值、经营利润能力和投资，在解释资产回报方面是有效的，并且常用于评估投资组合的风险/回报特征。因此，在旨在预测未来回报的模型中，自然而然地包括过去的因子暴露作为金融特征。
- en: 'We can access the historical factor returns using the pandas-datareader and
    estimate historical exposures using the `PandasRollingOLS` rolling linear regression
    functionality in the `pyfinance` library as follows:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用 pandas-datareader 访问历史因子回报，并使用 `pyfinance` 库中的 `PandasRollingOLS` 滚动线性回归功能来估计历史暴露，具体如下：
- en: '[PRE6]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: We will explore both the Fama—French factor model and linear regression in [Chapter 7](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml),
    *Linear Models* in more detail. See the notebook for additional examples.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在[第7章](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml)中更详细地探讨Fama—French因子模型和线性回归，*线性模型*。请参阅笔记本以获取更多示例。
- en: Built-in Quantopian factors
  id: totrans-129
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 内置Quantopian因子
- en: The accompanying notebook `factor_library.ipynb` contains numerous example factors
    that are either provided by the Quantopian platform or computed from data sources
    available using the research API from a Jupyter Notebook.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 附带的笔记本`factor_library.ipynb`包含了许多示例因子，这些因子要么由Quantopian平台提供，要么从Jupyter Notebook使用的研究API可用的数据源计算而来。
- en: There are built-in factors that can be used, in combination with quantitative
    Python libraries, in particular `numpy` and `pandas`, to derive more complex factors
    from a broad range of relevant data sources such as US Equity prices, Morningstar
    fundamentals, and investor sentiment.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 有内置因子可以与量化Python库一起使用，特别是`numpy`和`pandas`，从各种相关数据源中导出更复杂的因子，例如美国股票价格、Morningstar基本面和投资者情绪。
- en: For instance, the price-to-sales ratio, the inverse of the sales yield introduce
    preceding, is available as part of the Morningstar fundamentals dataset. It can
    be used as part of a pipeline that is further described as we introduce the `zipline`
    library.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，销售收益率的倒数价格销售比是Morningstar基本面数据集的一部分。它可以作为一种管道的一部分，随着我们介绍`zipline`库而进一步描述。
- en: TA-Lib
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: TA-Lib
- en: The TA-Lib library includes numerous technical factors. A Python implementation
    is available for local use, for example, with `zipline` and `alphalens`, and it
    is also available on the Quantopian platform. The notebook also illustrates several
    technical indicators available using TA-Lib.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: TA-Lib库包括许多技术因素。Python实现可用于本地使用，例如与`zipline`和`alphalens`，也可在Quantopian平台上使用。笔记本还演示了使用TA-Lib可用的几个技术指标。
- en: Seeking signals – how to use zipline
  id: totrans-135
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 寻找信号 - 如何使用zipline
- en: Historically, alpha factors used a single input and simple heuristics, thresholds
    or quantile cutoffs to identify buy or sell signals. ML has proven quite effective
    in extracting signals from a more diverse and much larger set of input data, including
    other alpha factors based on the analysis of historical patterns. As a result,
    algorithmic trading strategies today leverage a large number of alpha signals,
    many of which may be weak individually but can yield reliable predictions when
    combined with other model-driven or traditional factors by an ML algorithm.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 历史上，Alpha因子使用单一输入和简单的启发式方法、阈值或分位数截止值来识别买入或卖出信号。ML已被证明可以从更多样化和更大量的输入数据中提取信号，包括基于历史模式分析的其他Alpha因子。因此，算法交易策略今天利用了大量的Alpha信号，其中许多单独可能较弱，但在与ML算法通过其他模型驱动或传统因子相结合时可以产生可靠的预测。
- en: The open source `zipline` library is an event-driven backtesting system maintained
    and used in production by the crowd-sourced quantitative investment fund Quantopian
    ([https://www.quantopian.com/](https://www.quantopian.com/)) to facilitate algorithm-development
    and live-trading. It automates the algorithm's reaction to trade events and provides
    it with current and historical point-in-time data that avoids look-ahead bias.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 开源`zipline`库是由众包量化投资基金Quantopian（[https://www.quantopian.com/](https://www.quantopian.com/)）维护和用于生产中的事件驱动回测系统，以便促进算法开发和实时交易。它自动化算法对交易事件的反应，并为其提供当前和历史的点时间数据，避免了前瞻偏差。
- en: You can use it offline in conjunction with data bundles to research and evaluate
    alpha factors. When using it on the Quantopian platform, you will get access to
    a wider set of fundamental and alternative data. We will also demonstrate the
    Quantopian research environment in this chapter, and the backtesting IDE in the
    next chapter. The code for this section is in the `01_factor_research_evaluation`
    sub-directory of the GitHub repo folder for this chapter.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以离线使用它与数据包一起研究和评估alpha因子。在Quantopian平台上使用它时，您将获得更广泛的基本和替代数据。我们还将在本章中演示Quantopian研究环境，并在下一章中演示回测IDE。本节的代码位于此章节的GitHub存储库文件夹的`01_factor_research_evaluation`子目录中。
- en: 'After installation and before executing the first algorithm, you need to ingest
    a data bundle that by default consists of Quandl''s community-maintained data
    on stock prices, dividends and splits for 3,000 US publicly-traded companies.
    You need a Quandl API key to run the following code that stores the data in your
    home folder under `~/.zipline/data/<bundle>`:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 安装完成并在执行第一个算法之前，您需要摄入一个数据包，默认情况下由 Quandl 社区维护的数据，涵盖了3000家美国上市公司的股价、股息和拆股信息。您需要一个
    Quandl API 密钥来运行下面存储数据的代码，该代码将数据存储在您的主目录下的 `~/.zipline/data/<bundle>` 文件夹中：
- en: '[PRE7]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The architecture – event-driven trading simulation
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 架构 - 事件驱动交易模拟
- en: A `zipline` algorithm will run for a specified period after an initial setup
    and executes its trading logic when specific events occur. These events are driven
    by the trading frequency and can also be scheduled by the algorithm, and result
    in `zipline` calling certain methods. The algorithm maintains state through a
    `context` dictionary and receives actionable information through a `data` variable
    containing **point-in-time** (**PIT**) current and historical data. The algorithm
    returns a `DataFrame` containing portfolio performance metrics if there were any
    trades, as well as user-defined metrics that can be used to record, for example,
    the factor values.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '`zipline` 算法会在初始设置后的指定期间内运行，并在特定事件发生时执行其交易逻辑。这些事件由交易频率驱动，也可以由算法进行调度，并导致 `zipline`
    调用某些方法。算法通过一个 `context` 字典维护状态，并通过包含 **PIT（point-in-time）** 当前和历史数据的 `data` 变量接收可执行的信息。如果有任何交易，算法将返回一个包含组合绩效指标的
    `DataFrame`，以及可以用于记录因子值等用户定义的指标。'
- en: You can execute an algorithm from the command line, in a Jupyter Notebook, and
    by using the `run_algorithm()` function.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过命令行、Jupyter Notebook 和使用 `run_algorithm()` 函数来执行算法。
- en: An algorithm requires an `initialize()` method that is called once when the
    simulation starts. This method can be used to add properties to the `context` dictionary
    that is available to all other algorithm methods or register `pipelines` that
    perform more complex data processing, such as filtering securities based, for
    example, on the logic of alpha factors.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 算法需要一个 `initialize()` 方法，在模拟开始时调用一次。该方法可用于向所有其他算法方法可用的 `context` 字典中添加属性，或注册执行更复杂数据处理的
    `pipelines`，例如基于 alpha 因子逻辑对证券进行过滤。
- en: Algorithm execution occurs through optional methods that are either scheduled
    automatically by `zipline` or at user-defined intervals. The method `before_trading_start()` is
    called daily before the market opens and serves primarily to identify a set of
    securities the algorithm may trade during the day. The method `handle_data()` is
    called every minute.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 算法执行通过可选方法进行，这些方法可以由 `zipline` 自动调度或在用户定义的间隔内调用。方法 `before_trading_start()`
    在市场开盘前每日调用，主要用于识别算法可能在当天交易的一组证券。方法 `handle_data()` 每分钟调用一次。
- en: The `Pipeline API` facilitates the definition and computation of alpha factors
    for a cross-section of securities from historical data. A pipeline defines computations
    that produce columns in a table with PIT values for a set of securities. It needs
    to be registered with the `initialize()` method and can then be executed on an
    automatic or custom schedule. The library provides numerous built-in computations
    such as moving averages or Bollinger Bands that can be used to quickly compute
    standard factors but also allows for the creation of custom factors as we will
    illustrate next.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '`Pipeline API` 便于从历史数据中为一组证券定义和计算 alpha 因子。Pipeline 定义了在一张表中为一组证券生成 PIT 值的计算。它需要使用
    `initialize()` 方法进行注册，然后可以按照自动或自定义的时间表执行。该库提供了许多内置的计算方法，如移动平均线或布林带，可以快速计算标准因子，同时也允许创建自定义因子，下面我们将进行说明。'
- en: Most importantly, the `Pipeline API` renders alpha factor research modular because
    it separates the alpha factor computation from the remainder of the algorithm,
    including the placement and execution of trade orders and the bookkeeping of portfolio
    holdings, values, and so on.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 最重要的是，`Pipeline API` 使得 alpha 因子研究模块化，因为它将 alpha 因子计算与算法的其余部分（包括交易订单的下达和执行、以及组合持仓、价值等的簿记）分开。
- en: A single alpha factor from market data
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 市场数据中的单一 alpha 因子
- en: We are first going to illustrate the `zipline` alpha factor research workflow
    in an offline environment. In particular, we will develop and test a simple mean-reversion
    factor that measures how much recent performance has deviated from the historical
    average. Short-term reversal is a common strategy that takes advantage of the weakly
    predictive pattern that stock price increases are likely to mean-revert back down
    over horizons from less than a minute to one month. See the Notebook `single_factor_zipline.ipynby`
    for details.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先将在离线环境中说明 `zipline` alpha 因子研究工作流程。特别是，我们将开发和测试一个简单的均值回归因子，该因子衡量了最近表现与历史平均水平的偏离程度。短期反转是一种常见策略，利用了股价上涨很可能会在从少于一分钟到一个月的时间跨度内回归到均值的弱预测模式。有关详细信息，请参阅
    Notebook `single_factor_zipline.ipynby`。
- en: To this end, the factor computes the z-score for the last monthly return relative
    to the rolling monthly returns over the last year. At this point, we will not
    place any orders to simply illustrate the implementation of a `CustomFactor` and
    record the results during the simulation.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，该因子计算了相对于过去一年的滚动月收益率的最后一个月收益率的 z 得分。此时，我们不会下达任何订单，只是为了简单说明如何实现 `CustomFactor`
    并在模拟过程中记录结果。
- en: After some basic settings, `MeanReversion` subclasses `CustomFactor` and defines
    a `compute()` method. It creates default inputs of monthly returns over an also
    default year-long window so that the `monthly_return` variable will have 252 rows
    and one column for each security in the Quandl dataset on a given day.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 在一些基本设置之后，`MeanReversion` 是 `CustomFactor` 的子类，并定义了一个 `compute()` 方法。它创建了默认输入的月度收益率，其默认窗口也是一年，因此
    `monthly_return` 变量将在给定日的 Quandl 数据集中有 252 行，每个证券一个列。
- en: 'The `compute_factors()` method creates a `MeanReversion` factor instance and
    creates `long`, `short`, and `ranking` pipeline columns. The former two contain
    Boolean values that could be used to place orders, and the latter reflects that
    overall ranking to evaluate the overall factor performance. Furthermore, it uses
    the built-in `AverageDollarVolume` factor to limit the computation to more liquid
    stocks:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '`compute_factors()` 方法创建了一个 `MeanReversion` 因子实例，并创建了 `long`、`short` 和 `ranking`
    流水线列。前两个包含布尔值，可以用来下订单，而后者反映了整体排名，以评估整体因子表现。此外，它使用内置的 `AverageDollarVolume` 因子来限制计算范围，以更流动的股票：'
- en: '[PRE8]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The result would allow us to place long and short orders. We will see in the
    next chapter how to build a portfolio by choosing a rebalancing period and adjusting
    portfolio holdings as new signals arrive.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 这一结果将使我们能够下达多空订单。我们将在下一章看到如何通过选择重新平衡周期和根据新信号调整投资组合持仓来构建投资组合。
- en: 'The `initialize()` method registers the `compute_factors()` pipeline, and the
    `before_trading_start()` method ensures the pipeline runs on a daily basis. The
    `record()` function adds the pipeline''s `ranking` column as well as the current
    asset prices to the performance `DataFrame` returned by the `run_algorithm()`
    function:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '`initialize()` 方法注册了 `compute_factors()` 流水线，而 `before_trading_start()` 方法确保该流水线每天都会运行一次。`record()`
    函数将流水线的 `ranking` 列以及当前资产价格添加到 `run_algorithm()` 函数返回的性能 `DataFrame` 中：'
- en: '[PRE9]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Finally, define the start and end `Timestamp` objects in UTC terms, set a capital
    base and execute `run_algorithm()` with references to the key execution methods.
    The `performance` DataFrame contains nested data, for example, the `prices` column
    consists of a `pd.Series` for each cell. Hence, subsequent data access is easier
    when stored in the `pickle` format:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，以 UTC 时间定义开始和结束 `Timestamp` 对象，设置资本基础，并使用对关键执行方法的引用执行 `run_algorithm()`。`performance`
    DataFrame 包含嵌套数据，例如，`prices` 列由每个单元格的 `pd.Series` 组成。因此，当以 `pickle` 格式存储时，后续数据访问更容易：
- en: '[PRE10]'
  id: totrans-158
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: We will use the factor and pricing data stored in the `performance` DataFrame to
    evaluate the factor performance for various holding periods in the next section,
    but first, we'll take a look at how to create more complex signals by combining
    several alpha factors from a diverse set of data sources on the Quantopian platform.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在下一节使用存储在 `performance` DataFrame 中的因子和定价数据，评估不同持有期的因子表现，但首先，我们将看一下如何通过组合
    Quantopian 平台上多样化的数据源中的几个 alpha 因子来创建更复杂的信号。
- en: Combining factors from diverse data sources
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结合来自多样化数据源的因子
- en: The Quantopian research environment is tailored to the rapid testing of predictive
    alpha factors. The process is very similar because it builds on `zipline`, but
    offers much richer access to data sources. The following code sample illustrates
    how to compute alpha factors not only from market data as previously but also
    from fundamental and alternative data. See the Notebook `multiple_factors_quantopian_research.ipynb`
    for details.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: Quantopian 研究环境专门用于快速测试预测性 Alpha 因子。该过程非常相似，因为它基于 `zipline`，但提供了更丰富的数据源访问。下面的代码示例说明了如何计算
    Alpha 因子，不仅来自以前的市场数据，还来自基本和替代数据。有关详细信息，请参阅笔记本 `multiple_factors_quantopian_research.ipynb`。
- en: 'Quantopian provides several hundred MorningStar fundamental variables for free
    and also includes `stocktwits` signals as an example of an alternative data source.
    There are also custom universe definitions such as `QTradableStocksUS` that applies
    several filters to limit the backtest universe to stocks that were likely tradeable
    under realistic market conditions:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: Quantopian 免费提供了几百个 MorningStar 基本变量，还包括 `stocktwits` 信号作为替代数据源的示例。还有自定义的宇宙定义，例如
    `QTradableStocksUS`，它应用了几个过滤器来限制回测宇宙，使其仅包含可能在现实市场条件下可交易的股票：
- en: '[PRE11]'
  id: totrans-163
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'We will use a custom `AggregateFundamentals` class to use the last reported
    fundamental data point. This aims to address the fact that fundamentals are reported
    quarterly, and Quantopian does not currently provide an easy way to aggregate
    historical data, say to obtain the sum of the last four quarters, on a rolling
    basis:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用自定义的 `AggregateFundamentals` 类来使用最后报告的基本数据点。这旨在解决基本面每季度报告一次的事实，并且 Quantopian
    目前没有提供一种轻松的方法来聚合历史数据，比如按照滚动基础获取最后四个季度的总和：
- en: '[PRE12]'
  id: totrans-165
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'We will again use the custom `MeanReversion` factor from the preceding code.
    We will also compute several other factors for the given universe definition using
    the `rank()` method''s `mask` parameter:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将再次使用上述代码中的自定义 `MeanReversion` 因子。我们还将使用 `rank()` 方法的 `mask` 参数为给定的宇宙定义计算几个其他因子：
- en: '[PRE13]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: This algorithm uses a naive method to combine the six individual factors by
    simply adding the ranks of assets for each of these factors. Instead of equal
    weights, we would like to take into account the relative importance and incremental
    information in predicting future returns. The ML algorithms of the next chapters
    will allow us to do exactly this, using the same backtesting framework.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 该算法使用了一种简单的方法来结合六个个体因子，只需为这些因子的每个因子的资产排名简单相加。我们不想使用等权重，而是希望考虑相对重要性和预测未来收益的增量信息。下一章的机器学习算法将允许我们完全这样做，使用相同的回测框架。
- en: Execution also relies on `run_algorithm()`, but the return `DataFrame` on the
    Quantopian platform only contains the factor values created by the `Pipeline`.
    This is convenient because this data format can be used as input for `alphalens`,
    the library for the evaluation of the predictive performance of alpha factors.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 执行也依赖于 `run_algorithm()`，但 Quantopian 平台上的返回 `DataFrame` 只包含由 `Pipeline` 创建的因子值。这很方便，因为此数据格式可用作
    `alphalens` 的输入，这是用于评估 Alpha 因子预测性能的库。
- en: Separating signal and noise – how to use alphalens
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分离信号和噪音 - 如何使用 alphalens
- en: Quantopian has open sourced the Python library, `alphalens`, for the performance
    analysis of predictive stock factors that integrates well with the backtesting
    library `zipline` and the portfolio performance and risk analysis library `pyfolio` that
    we will explore in the next chapter.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: Quantopian 开源了 Python 库 `alphalens`，用于预测股票因子的性能分析，与我们将在下一章中探讨的回测库 `zipline`
    和投资组合绩效与风险分析库 `pyfolio` 集成得很好。
- en: '`alphalens` facilitates the analysis of the predictive power of alpha factors
    concerning the:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '`alphalens` 便于分析 Alpha 因子的预测能力，涉及：'
- en: Correlation of the signals with subsequent returns
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信号与随后收益的相关性
- en: Profitability of an equal or factor-weighted portfolio based on a (subset of)
    the signals
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于信号的等权或因子加权组合的盈利能力（基于信号的子集）
- en: Turnover of factors to indicate the potential trading costs
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 因子周转率以指示潜在交易成本
- en: Factor-performance during specific events
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 特定事件期间的因子表现
- en: Breakdowns of the preceding by sector
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过行业细分的前述分解
- en: The analysis can be conducted using tearsheets or individual computations and
    plots. The tearsheets are illustrated in the online repo to save some space.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 分析可以使用泪水图或单独的计算和绘图进行。在线存储库中有泪水图以节省一些空间。
- en: Creating forward returns and factor quantiles
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建前瞻性收益和因子分位数
- en: To utilize `alphalens`, we need to provide signals for a universe of assets
    like those returned by the ranks of the `MeanReversion` factor, and the forward
    returns earned by investing in an asset for a given holding period. See Notebook
    `03_performance_eval_alphalens.ipynb` for details.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用`alphalens`，我们需要为资产的一组信号提供信号，例如`MeanReversion`因子的排名，以及投资于给定持有期的资产的前向回报。有关详细信息，请参阅笔记本`03_performance_eval_alphalens.ipynb`。
- en: 'We will recover the `prices` from the `single_factor.pickle` file as follows
    (`factor_data` accordingly):'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从`single_factor.pickle`文件中恢复`prices`（相应的`factor_data`）如下：
- en: '[PRE14]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The GitHub repository's `alpha factor evaluation` Notebook has more detail on
    how to conduct the evaluation in a sector-specific way.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: GitHub存储库中的`alpha factor evaluation`笔记本详细介绍了如何以特定于行业的方式进行评估。
- en: 'We can create the `alphalens` input data in the required format using the `get_clean_factor_and_forward_returns`
    utility function that also returns the signal quartiles and the forward returns
    for the given holding periods:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`get_clean_factor_and_forward_returns`实用程序函数创建所需格式的`alphalens`输入数据，该函数还返回给定持有期的信号分位数和前向回报：
- en: '[PRE15]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The `alphalens_data` DataFrame contains the returns on an investment in the
    given asset on a given date for the indicated holding period, as well as the factor
    value, that is, the asset''s `MeanReversion` ranking on that date, and the corresponding
    quantile value:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '`alphalens_data`数据框包含给定资产在给定日期的投资的回报，以及因子值，即该日期上资产的`MeanReversion`排名，以及相应的分位数值：'
- en: '| **date** | **asset** | **5D** | **10D** | **21D** | **42D** | **factor**
    | **factor_quantile** |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| **日期** | **资产** | **5天** | **10天** | **21天** | **42天** | **因子** | **因子分位数**
    |'
- en: '| 01/02/15 | A | 0.07% | -5.70% | -2.32% | 4.09% | 2618 | 4 |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| 01/02/15 | A | 0.07% | -5.70% | -2.32% | 4.09% | 2618 | 4 |'
- en: '| AAL | -3.51% | -7.61% | -11.89% | -10.23% | 1088 | 2 |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| AAL | -3.51% | -7.61% | -11.89% | -10.23% | 1088 | 2 |'
- en: '| AAP | 1.10% | -5.40% | -0.94% | -3.81% | 791 | 1 |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| AAP | 1.10% | -5.40% | -0.94% | -3.81% | 791 | 1 |'
- en: '| AAPL | 2.45% | -3.05% | 8.52% | 15.62% | 2917 | 5 |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| AAPL | 2.45% | -3.05% | 8.52% | 15.62% | 2917 | 5 |'
- en: '| ABBV | -0.17% | -2.05% | -6.43% | -13.70% | 2952 | 5 |'
  id: totrans-192
  prefs: []
  type: TYPE_TB
  zh: '| ABBV | -0.17% | -2.05% | -6.43% | -13.70% | 2952 | 5 |'
- en: The forward returns and the signal quantiles are the basis for evaluating the
    predictive power of the signal. Typically, a factor should deliver markedly different
    returns for distinct quantiles, such as negative returns for the bottom quintile
    of the factor values and positive returns for the top quantile.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 对于评估信号的预测能力，前向回报和信号分位数是基础。通常，一个因子应该对不同分位数的回报产生明显不同的结果，例如对于因子值的底部五分位数应该产生负回报，而对于顶部分位数应该产生正回报。
- en: Predictive performance by factor quantiles
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 因子分位数的预测性能
- en: 'As a first step, we would like to visualize the average period return by factor
    quantile. We can use the built-in function `mean_return_by_quantile` from the
    `performance` and `plot_quantile_returns_bar` from the `plotting` modules:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们想要可视化因子分位数的平均期间回报。我们可以使用`performance`模块中的内置函数`mean_return_by_quantile`和`plotting`模块中的`plot_quantile_returns_bar`：
- en: '[PRE16]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The result is a bar chart that breaks down the mean of the forward returns
    for the four different holding periods based on the quintile of the factor signal.
    As you can see, the bottom quintiles yielded markedly more negative results than
    the top quintiles, except for the longest holding period:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是一张条形图，根据因子信号的分位数，将四种不同持有期的前向回报均值进行了分解。正如您所见，底部五分位数产生的结果明显更为负面，而顶部五分位数除了最长持有期外产生的结果更为正面：
- en: '![](img/a11be8c3-922a-4b80-9e3e-1e4bcea4e1ca.png)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a11be8c3-922a-4b80-9e3e-1e4bcea4e1ca.png)'
- en: 'The 10D holding period provides slightly better results for the first and fourth
    quartiles. We would also like to see the performance over time of investments
    driven by each of the signal quintiles. We will calculate daily, as opposed to
    average returns for the 5D holding period, and `alphalens` will adjust the period
    returns to account for the mismatch between daily signals and a longer holding
    period (for details, see docs):'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第一和第四分位数，10天的持有期提供了稍微更好的结果。我们还想看到由每个信号分位数驱动的投资随时间的表现。我们将计算每日收益率，而不是5天持有期的平均收益率，`alphalens`将调整期间收益率以解决每日信号和较长持有期之间的不匹配（有关详细信息，请参阅文档）：
- en: '[PRE17]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The resulting line plot shows that, for most of this three-year period, the
    top two quintiles significantly outperformed the bottom two quintiles. However,
    as suggested by the previous plot, signals by the fourth quintile produced a better
    performance than those by the top quintile:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 结果线图显示，在这三年的大部分时间里，前两个五分位显着优于后两个五分位。然而，如前图所示，第四个五分位的信号产生的性能优于第一个五分位的性能：
- en: '![](img/2d98f4a8-c474-45ab-ab91-d77c9d21a27f.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2d98f4a8-c474-45ab-ab91-d77c9d21a27f.png)'
- en: A factor that is useful for a trading strategy shows the preceding pattern where
    cumulative returns develop along clearly distinct paths because this allows for
    a long-short strategy with lower capital requirements and correspondingly lower
    exposure to the overall market.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 对于交易策略有用的因子显示出前述模式，其中累积收益沿着明显不同的路径发展，因为这允许具有更低资本要求和相应更低整体市场暴露的多空策略。
- en: 'However, we also need to take the dispersion of period returns into account
    rather than just the averages. To this end, we can rely on the built-in `plot_quantile_returns_violin`:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我们还需要考虑期间收益的分散而不仅仅是平均值。为此，我们可以依靠内置的`plot_quantile_returns_violin`：
- en: '[PRE18]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'This distributional plot highlights that the range of daily returns is fairly
    wide and, despite different means, the separation of the distributions is very
    limited so that, on any given day, the differences in performance between the
    different quintiles may be rather limited:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 这个分布图突出显示每日收益的范围相当广泛，并且尽管均值不同，但分布之间的分离非常有限，因此，在任何给定的日子里，不同五分位之间的性能差异可能相当有限：
- en: '![](img/f3a1c4f5-7e62-4310-9e5f-bd2a22fa2180.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f3a1c4f5-7e62-4310-9e5f-bd2a22fa2180.png)'
- en: 'While we focus on the evaluation of a single alpha factor, we are simplifying
    things by ignoring practical issues related to trade execution that we will relax
    when we address proper backtesting in the next chapter. Some of these include:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然我们专注于单一alpha因子的评估，但我们在忽略与交易执行相关的实际问题时，会简化问题，我们将在下一章中详细介绍适当的回测时再放松这些问题。其中一些包括：
- en: The transaction costs of trading
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交易成本
- en: Slippage, the difference between the price at decision and trade execution,
    for example, due to the market impact
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 滑点，即决策价格与交易执行价格之间的差异，例如，由于市场影响引起的
- en: The information coefficient
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信息系数
- en: Most of this book is about the design of alpha factors using ML models. ML is
    about optimizing some predictive objective, and in this section, we will introduce
    the key metrics used to measure the performance of an alpha factor. We will define
    alpha as the average return in excess of a benchmark.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 本书大部分内容都关于使用ML模型设计alpha因子。ML是关于优化某些预测目标的，本节中，我们将介绍用于衡量alpha因子性能的关键指标。我们将定义alpha为超过基准的平均收益。
- en: This leads to the **information ratio** (**IR**) that measures the average excess
    return per unit of risk taken by dividing alpha by the tracking risk. When the
    benchmark is the risk-free rate, the IR corresponds to the well-known Sharpe ratio,
    and we will highlight crucial statistical measurement issues that arise in the
    typical case when returns are not normally distributed. We will also explain the
    fundamental law of active management that breaks the IR down into a combination
    of forecasting skill and a strategy's ability to effectively leverage the forecasting
    skills.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致了**信息比率**（**IR**），它通过将alpha除以跟踪风险来衡量每单位风险带来的平均超额收益。当基准是无风险利率时，IR对应于众所周知的夏普比率，并且我们将强调在典型情况下收益不服从正态分布时出现的关键统计测量问题。我们还将解释主动管理的基本法则，将IR分解为预测技巧的组合和策略有效利用预测技巧的能力。
- en: The goal of alpha factors is the accurate directional prediction of future returns.
    Hence, a natural performance measure is the correlation between an alpha factor's
    predictions and the forward returns of the target assets.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: alpha因子的目标是准确地预测未来收益的方向。因此，一个自然的性能度量是alpha因子预测与目标资产未来收益之间的相关性。
- en: It is better to use the non-parametric Spearman rank correlation coefficient
    that measures how well the relationship between two variables can be described
    using a monotonic function, as opposed to the Pearson correlation that measures
    the strength of a linear relationship.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 更好地使用非参数的Spearman等级相关系数来衡量两个变量之间关系的好坏，该系数衡量使用单调函数描述关系的能力，与测量线性关系强度的Pearson相关系数相对。
- en: 'We can obtain the information coefficient using `alphalens`, which relies on `scipy.stats.spearmanr`
    under the hood (see the repo for an example on how to use `scipy` directly to
    obtain p-values). The `factor_information_coefficient` function computes the period-wise
    correlation and `plot_ic_ts` creates a time-series plot with one-month moving
    average:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用 `alphalens` 获取信息系数，`alphalens` 底层依赖于 `scipy.stats.spearmanr`（请参阅存储库以获取有关如何直接使用
    `scipy` 获取 p 值的示例）。`factor_information_coefficient` 函数计算周期性的相关性，`plot_ic_ts` 创建一个带有一个月移动平均线的时间序列图：
- en: '[PRE19]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'This time series plot shows extended periods with significantly positive moving-average
    IC. An IC of 0.05 or even 0.1 allows for significant outperformance if there are
    sufficient opportunities to apply this forecasting skill, as the fundamental law
    of active management will illustrate:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 这个时间序列图显示了具有显著正移动平均 IC 的延长时期。如果有足够的机会应用这种预测技能，即使 IC 为 0.05 或甚至 0.1，也可以实现显著的超额收益，因为主动管理的基本定律将说明：
- en: '![](img/5c901a56-ee73-409c-a1f6-0ce8a447698c.png)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5c901a56-ee73-409c-a1f6-0ce8a447698c.png)'
- en: 'A plot of the annual mean IC highlights how the factor''s performance was historically
    uneven:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 年均 IC 的图表突出显示了因子的性能历史上的不均匀性：
- en: '[PRE20]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'This produces the following chart:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 这会产生以下图表：
- en: '![](img/95a6ea73-1060-4e69-8eeb-52956bb2d55a.png)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![](img/95a6ea73-1060-4e69-8eeb-52956bb2d55a.png)'
- en: 'An information coefficient below 0.05 as in this case, is low but significant
    and can produce positive residual returns relative to a benchmark as we will see
    in the next section. The `create_summary_tear_sheet(alphalens_data)` creates IC
    summary statistics, where the risk-adjusted IC results from dividing the mean
    IC by the standard deviation of the IC, which is also subjected to a two-sided
    t-test with the null hypothesis *IC = 0* using `scipy.stats.ttest_1samp`:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 如本例中所示，信息系数低于 0.05 的情况下，虽然低但显著，可以相对于基准产生正的残差收益，我们将在下一节中看到。`create_summary_tear_sheet(alphalens_data)`
    创建 IC 摘要统计信息，其中风险调整 IC 的结果是将平均 IC 除以 IC 的标准差得到的，这也是通过使用 `scipy.stats.ttest_1samp`
    对 *IC = 0* 的双侧 t 检验进行的：
- en: '|  | **5D** | **10D** | **21D** | **42D** |'
  id: totrans-225
  prefs: []
  type: TYPE_TB
  zh: '|  | **5天** | **10天** | **21天** | **42天** |'
- en: '| IC Mean | 0.01 | 0.02 | 0.01 | 0.00 |'
  id: totrans-226
  prefs: []
  type: TYPE_TB
  zh: '| IC 平均值 | 0.01 | 0.02 | 0.01 | 0.00 |'
- en: '| IC Std. | 0.14 | 0.13 | 0.12 | 0.12 |'
  id: totrans-227
  prefs: []
  type: TYPE_TB
  zh: '| IC 标准差 | 0.14 | 0.13 | 0.12 | 0.12 |'
- en: '| Risk-Adjusted IC | 0.10 | 0.13 | 0.10 | 0.01 |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '| 风险调整 IC | 0.10 | 0.13 | 0.10 | 0.01 |'
- en: '| 2.68 | 3.53 | 2.53 | 0.14 |  |'
  id: totrans-229
  prefs: []
  type: TYPE_TB
  zh: '| 2.68 | 3.53 | 2.53 | 0.14 |  |'
- en: '| p-value(IC) | 0.01 | 0.00 | 0.01 | 0.89 |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| p-value(IC) | 0.01 | 0.00 | 0.01 | 0.89 |'
- en: '| IC Skew | 0.41 | 0.22 | 0.19 | 0.21 |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| IC 偏度 | 0.41 | 0.22 | 0.19 | 0.21 |'
- en: '| IC Kurtosis | 0.18 | -0.33 | -0.42 | -0.27 |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '| IC 峰度 | 0.18 | -0.33 | -0.42 | -0.27 |'
- en: Factor turnover
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 因子周转率
- en: 'Factor turnover measures how frequently the assets associated with a given
    quantile change, that is, how many trades are required to adjust a portfolio to
    the sequence of signals. More specifically, it measures the share of assets currently
    in a factor quantile that was not in that quantile in the last period. The following
    table is produced by this command:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 因子周转率衡量与给定分位数相关联的资产经常变化的频率，即调整投资组合以适应信号序列需要多少交易。更具体地说，它衡量了当前处于因子分位数中的资产份额，在上个期间不处于该分位数的资产份额。以下表格是通过此命令生成的：
- en: '[PRE21]'
  id: totrans-235
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The share of assets that were to join a quintile-based portfolio is fairly
    high, suggesting that the trading costs pose a challenge to reaping the benefits
    from the predictive performance:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 加入基于五分位数的投资组合的资产份额相当高，表明交易成本对利用预测性能构建收益的挑战：
- en: '| **Mean Turnover** | **5D** | **10D** | **21D** | **42D** |'
  id: totrans-237
  prefs: []
  type: TYPE_TB
  zh: '| **平均周转率** | **5天** | **10天** | **21天** | **42天** |'
- en: '| **Quantile 1** | 59% | 83% | 83% | 41% |'
  id: totrans-238
  prefs: []
  type: TYPE_TB
  zh: '| **分位数 1** | 59% | 83% | 83% | 41% |'
- en: '| **Quantile 2** | 74% | 80% | 81% | 65% |'
  id: totrans-239
  prefs: []
  type: TYPE_TB
  zh: '| **分位数 2** | 74% | 80% | 81% | 65% |'
- en: '| **Quantile 3** | 76% | 80% | 81% | 68% |'
  id: totrans-240
  prefs: []
  type: TYPE_TB
  zh: '| **分位数 3** | 76% | 80% | 81% | 68% |'
- en: '| **Quantile 4** | 74% | 81% | 81% | 64% |'
  id: totrans-241
  prefs: []
  type: TYPE_TB
  zh: '| **分位数 4** | 74% | 81% | 81% | 64% |'
- en: '| **Quantile 5** | 57% | 81% | 81% | 39% |'
  id: totrans-242
  prefs: []
  type: TYPE_TB
  zh: '| **分位数 5** | 57% | 81% | 81% | 39% |'
- en: 'An alternative view on factor turnover is the correlation of the asset rank
    due to the factor over various holding periods, also part of the tear sheet:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 对因子周转率的另一种观点是资产排名与因子之间的相关性在各种持有期间的情况，也是撕裂单的一部分：
- en: '|  | **5D** | **10D** | **21D** | **42D** |'
  id: totrans-244
  prefs: []
  type: TYPE_TB
  zh: '|  | **5天** | **10天** | **21天** | **42天** |'
- en: '| **Mean Factor Rank Autocorrelation** | 0.711 | 0.452 | -0.031 | -0.013 |'
  id: totrans-245
  prefs: []
  type: TYPE_TB
  zh: '| **平均因子排名自相关** | 0.711 | 0.452 | -0.031 | -0.013 |'
- en: Generally, more stability is preferable to keep trading costs manageable.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，更稳定性更好，以保持交易成本可控。
- en: Alpha factor resources
  id: totrans-247
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Alpha 因子资源
- en: The research process requires designing and selecting alpha factors with respect
    to the predictive power of their signals. An algorithmic trading strategy will
    typically build on multiple alpha factors that send signals for each asset. These
    factors may be aggregated using an ML model to optimize how the various signals
    translate into decisions about the timing and sizing of individual positions,
    as we will see in subsequent chapters.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 研究过程需要设计和选择与其信号预测能力相关的阿尔法因子。算法交易策略通常会基于多个为每个资产发送信号的阿尔法因子。这些因子可以使用 ML 模型进行聚合，以优化各种信号如何转化为关于个别仓位的时间和大小决策，我们将在后续章节中看到。
- en: Alternative algorithmic trading libraries
  id: totrans-249
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 替代算法交易库
- en: 'Additional open-source Python libraries for algorithmic trading and data collection
    include (see links on GitHub):'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 其他用于算法交易和数据收集的开源 Python 库包括（在 GitHub 上查看链接）：
- en: QuantConnect is a competitor to Quantopian
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: QuantConnect 是 Quantopian 的竞争对手。
- en: WorldQuant offers online competition and recruits community contributors to
    a crowd-sourced hedge fund
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WorldQuant 提供在线竞赛，并招募社区贡献者加入众包对冲基金。
- en: Alpha Trading Labs offers high-frequency focused testing infrastructure with
    a business model similar to Quantopian
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Alpha Trading Labs 提供以 Quantopian 类似的商业模式为基础的高频重点测试基础设施。
- en: Python Algorithmic Trading Library (PyAlgoTrade) focuses on backtesting and
    offers support for paper-trading and live-trading. It allows you to evaluate an
    idea for a trading strategy with historical data and aims to do so with minimal
    effort.
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 算法交易库（PyAlgoTrade）专注于回测，并支持模拟交易和实时交易。它允许您使用历史数据评估交易策略的想法，并力图以最小的努力完成此任务。
- en: pybacktest is a vectorized backtesting framework that uses pandas and aims to
    be compact, simple and fast (the project is currently on hold)
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: pybacktest 是一个使用 pandas 的矢量化回测框架，旨在简洁、简单和快速（该项目目前暂停）。
- en: ultrafinance is an older project that combines real-time financial data collection,
    analyzing and backtesting of trading strategies
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ultrafinance 是一个较旧的项目，结合了实时金融数据收集、分析和交易策略的回测。
- en: Trading with Python offers courses and a collection of functions and classes
    for Quantitative trading
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Python 进行交易提供了量化交易课程以及一系列用于量化交易的函数和类。
- en: Interactive Brokers offers a Python API for live trading on their platform
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 交互经纪商提供了一个用于在其平台上进行实时交易的 Python API。
- en: Summary
  id: totrans-259
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we covered the use of the `zipline` library for the event-driven
    simulation of a trading algorithm, both offline and on the Quantopian online platform.
    We have illustrated the design and evaluation of individual alpha factors to derive
    signals for an algorithmic trading strategy from market, fundamental, and alternative
    data, and demonstrated a naive way of combining multiple factors. We also introduced
    the `alphalens` library that permits the comprehensive evaluation of the predictive
    performance and trading turnover of signals.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了 `zipline` 库用于事件驱动的交易算法模拟，既可以离线进行，也可以在 Quantopian 在线平台上进行。我们已经说明了从市场、基本和替代数据中设计和评估单个阿尔法因子以推导出用于算法交易策略的信号，并展示了结合多个因子的一种简单方法。我们还介绍了允许对信号的预测性能和交易换手率进行全面评估的
    `alphalens` 库。
- en: The portfolio construction process, in turn, takes a broader perspective and
    aims at the optimal sizing of positions from a risk and return perspective. We
    will now turn to various strategies to balance risk and returns in a portfolio
    process. We will also look in more detail at the challenges of backtesting trading
    strategies on a limited set of historical data and how to address these challenges.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 投资组合构建过程反过来采用更广泛的视角，旨在从风险和回报的角度来看最佳仓位大小。我们现在将转向平衡投资组合过程中风险和回报的各种策略。我们还将更详细地探讨在有限历史数据集上进行回测交易策略的挑战以及如何解决这些挑战。
