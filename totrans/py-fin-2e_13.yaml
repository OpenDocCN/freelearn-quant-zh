- en: Chapter 13. Credit Risk Analysis
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The objective of credit risk analysis is trying to measure the probability
    of potential failure to pay a promised amount. A credit rating reflects the credit
    worthiness of a firm or a bond. A firm''s rating is different from its bond''s
    rating since the latter depends on its maturity and certain features such as whether
    it is callable or puttable. In [Chapter 5](ch05.html "Chapter 5. Bond and Stock
    Valuation"), *Bond and Stock Valuation*, we have learnt the concept of **Yield
    to Maturity** (**YTM**) or simply yield, which is correlated with credit quality.
    The lower its credit quality; the higher its required return, that is, a higher
    yield. In this chapter, we will discuss many basic concepts related to credit
    risk, such as credit rating, credit spread, 1-year credit rating migration matrix,
    probability of default, loss given default, recovery rate, and KMV model. In particular,
    the following topics will be covered:'
  prefs: []
  type: TYPE_NORMAL
- en: Moody's, Standard and Poor's, and Fitch's credit ratings
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Credit spread, one-year, and five-year migration matrices
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Term structure of interest rate
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Simulation of future interest rate
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Altman's Z-score to predict corporate bankruptcy
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: KMV model to estimate total asset and its volatility
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Default probability and distance to default
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Credit default swap
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Introduction to credit risk analysis
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we will discuss basic concepts related to credit risk, such
    as credit rating, credit spread, 1-year and 5-year rating migration matrices,
    probability of default, recovery rate, and loss given default. A credit spread,
    the difference between a bond's yield and a benchmark yield (risk-free rate),
    reflects its credit risk or default risk. For example, to estimate the present
    value of a coupon payment in two years for an AA rated bond, the discount rate
    (yield) will be a risk-free yield (treasury-note yield) plus the corresponding
    spread. There are many tools that we could use when analyzing a company or a bond's
    credit worthiness. The first tool is credit rating offered by a credit rating
    agent, such as Moody's or Standard and Poor's. One of the apparent advantages
    is that a potential user would spend less time and efforts to assess a company
    or a bond's credit risk. The obvious disadvantage is that the credit rating is
    a black box for most users. In other words, users could not replicate a credit
    rating. Thus, it is quite difficult to siphon the logic behind such a simple letter
    credit rating system, such as AA or A1\. There are other ways to evaluate the
    worthiness of a company (bond), such as spread that is readily available. One
    of the most quantitative models is the so-called KMV model, which applies the
    options theory we have learnt in [Chapter 10](ch10.html "Chapter 10. Options and
    Futures"), *Options and Futures* to evaluate the credit risk of a firm.
  prefs: []
  type: TYPE_NORMAL
- en: Credit rating
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Nowadays, there are three major credit ratings agents in the USA: Moody''s,
    Standard, and Poor''s and Fitch. Their websites are [http://www.moodys.com/](http://www.moodys.com/),
    [http://www.standardandpoors.com/en_US/web/guest/home](http://www.standardandpoors.com/en_US/web/guest/home),
    and [https://www.fitchratings.com/site/home](https://www.fitchratings.com/site/home).
    Although their ratings have different notations (letters), it is easy to translate
    one letter rating from a rating agency to another one. Based on the following
    link at http://www.quadcapital.com/Rating%20Agency%20Credit%20Ratings.pdf, a dataset
    called `creditRatigs3.pkl` is generated, which can be downloaded at the author''s
    website, http://canisius.edu/~yany/python/creditRatings3.pkl. Assume that it is
    located under `C:/temp/`.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The following codes show its contents:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The first column is for the row numbers, which have no specific meaning. The
    next three columns are credit levels for **Moody's**, **S&P,** and **Fitch**,
    respectively. **NAIC** stands for the **National Association of Insurance Commissioners**.
    Any ratings equal to or over `BBB` are classified as investment grades, see the
    last column (variable) that has a value of 1 or 0\. Many mutual funds and pension
    funds are only allowed to invest bonds rated as investment grades.
  prefs: []
  type: TYPE_NORMAL
- en: 'When a company has an `Aaa` rating this year, what is its probability next
    year to remain as the same credit rating? According to the following table, the
    probability that it keeps its `Aaa` rating next year is 89%, Moody''s (2007).
    On the other hand, there is 3% chance that its credit rating would be downgraded
    by one notch, that is, from `Aaa` to `Aa1`. For a B1 rated bond, the probability
    of maintaining the same credit rating is 65%. Jointly, it has 12% probability
    of upgrading. For a possible downgrade, it has 9% probability. The default probability
    of a B1 rated bond is 3%, see the last column of the following figure that gives
    us the one-year credit rating migration matrix:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Credit rating](img/B06175_13_01.jpg)'
  prefs: []
  type: TYPE_IMG
- en: One-year credit rating migration matrix
  prefs: []
  type: TYPE_NORMAL
- en: 'Note the following abbreviations:'
  prefs: []
  type: TYPE_NORMAL
- en: WR indicates that Moody's has withdrawn their ratings
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: DEF is for default probability
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'Similarly, the probability of an `Aaa` rated firm becoming an `Aa2` firm is
    3% next year. The values along the main diagonal line (from North-West to South-East)
    are the probabilities of keeping the same rating next year. The values below the
    main diagonal line (left and bottom triangle) are the probabilities of a downgrade
    while the values above the diagonal line (up and right triangle) are the probabilities
    of an upgrade. The last column offers the default probabilities for various ratings.
    For example, a `Ba2` rated bond has 1% chance to default, while a `Caa3` rated
    bond has 25%. The Python dataset called `migration1year.pkl` could be used, see
    the following codes. The dataset is available at http://canisius.edu/~yany/python/migration1year.pkl:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'The following table shows the Moody''s 5-year transition (migration) matrix.
    Please pay attention to the column under **DEF** (for default probability):'
  prefs: []
  type: TYPE_NORMAL
- en: '![Credit rating](img/B06175_13_02.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Moody's Average 5-year Rating Transition Matrix (1920-1992)
  prefs: []
  type: TYPE_NORMAL
- en: 'Source: Moody''s (2007).'
  prefs: []
  type: TYPE_NORMAL
- en: 'Note the following abbreviations:'
  prefs: []
  type: TYPE_NORMAL
- en: WR indicates that Moody's has withdrawn their ratings
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: DEF is for default probability
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'One dataset was generated with a name called `migration5year.pkl`. The dataset
    could be downloaded at http://canisius.edu/~yany/python/migration5year.pkl. The
    following code will print its first and last line:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'Rating and default are negatively correlated. The higher a rating; the lower
    its default probability. The cumulative historical default rates (in %) are given
    here:'
  prefs: []
  type: TYPE_NORMAL
- en: '|   | **Default rate (%)** |'
  prefs: []
  type: TYPE_TB
- en: '|   | **Moody''s** | **S&P** |'
  prefs: []
  type: TYPE_TB
- en: '| **Rating category** | **Muni** | **Corp** | **Muni** | **Corp** |'
  prefs: []
  type: TYPE_TB
- en: '| `Aaa`/`AAA` | 0.00 | 0.52 | 0.00 | 0.60 |'
  prefs: []
  type: TYPE_TB
- en: '| `Aa`/`AA` | 0.06 | 0.52 | 0.00 | 1.50 |'
  prefs: []
  type: TYPE_TB
- en: '| `A`/`A` | 0.03 | 1.29 | 0.23 | 2.91 |'
  prefs: []
  type: TYPE_TB
- en: '| `Baa`/`BBB` | 0.13 | 4.64 | 0.32 | 10.29 |'
  prefs: []
  type: TYPE_TB
- en: '| `Ba`/`BB` | 2.65 | 19.12 | 1.74 | 29.93 |'
  prefs: []
  type: TYPE_TB
- en: '| `B`/`B` | 11.86 | 43.34 | 8.48 | 53.72 |'
  prefs: []
  type: TYPE_TB
- en: '| `Caa-C`/`CCC-C` | 16.58 | 69.18 | 44.81 | 69.19 |'
  prefs: []
  type: TYPE_TB
- en: '|   |   |   |   |   |'
  prefs: []
  type: TYPE_TB
- en: '| **Averages** |   |   |   |   |'
  prefs: []
  type: TYPE_TB
- en: '| Investment grade | 0.07 | 2.09 | 0.20 | 4.14 |'
  prefs: []
  type: TYPE_TB
- en: '| Non-investment grade | 4.29 | 31.37 | 7.37 | 42.35 |'
  prefs: []
  type: TYPE_TB
- en: '| All | 0.10 | 9.70 | 0.29 | 12.98 |'
  prefs: []
  type: TYPE_TB
- en: Table 13.3 Relationship between the credit rating and the DP (default probability)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The course of the data is from the website at [http://monevator.com/bond-default-rating-probability/](http://monevator.com/bond-default-rating-probability/).
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, for an `Aaa` related corporate bond by Moody''s, its default probability
    is 0.52%. The corresponding default probability from Standard and Poor''s is 0.60%.
    Recovery rate given default is an important concept. The status (seniority) has
    a great impact on the recovery rates. According to Altman and Kishore (1997),
    we have the following table:'
  prefs: []
  type: TYPE_NORMAL
- en: '|   | **Recovery rate (% of face value)** |'
  prefs: []
  type: TYPE_TB
- en: '| Senior-secured debt | 58% |'
  prefs: []
  type: TYPE_TB
- en: '| Senior-unsecured debt | 48% |'
  prefs: []
  type: TYPE_TB
- en: '| Senior-subordinate | 35% |'
  prefs: []
  type: TYPE_TB
- en: '| Subordinated | 32% |'
  prefs: []
  type: TYPE_TB
- en: '| Discounted and zero coupon | 21% |'
  prefs: []
  type: TYPE_TB
- en: Table 13.4 Recovery rates based on the seniority
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'A secured debt is a debt on which payment is guaranteed by an asset. Senior
    and subordinated are referred to the priority structure. On the other hand, different
    industries have different recovery rates because of their unique industry characteristics,
    such as fixed long-term assets and the percentages of intangible assets:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Industry | Average Recovery Rate | Number of observations |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| Public Utilities | 70.5% | 56 |'
  prefs: []
  type: TYPE_TB
- en: '| Chemical, petroleum, rubber, and plastic products | 62.7% | 35 |'
  prefs: []
  type: TYPE_TB
- en: '| Machinery, instruments, and related products | 48.7% | 36 |'
  prefs: []
  type: TYPE_TB
- en: '| Services- business and personal | 46.2% | 14 |'
  prefs: []
  type: TYPE_TB
- en: '| Food and kindred products | 45.3% | 18 |'
  prefs: []
  type: TYPE_TB
- en: '| Wholesale and retail trade | 44.0% | 12 |'
  prefs: []
  type: TYPE_TB
- en: '| Diversified manufacturing | 42.3% | 20 |'
  prefs: []
  type: TYPE_TB
- en: '| Casino, hotel, and recreation | 40.2% | 21 |'
  prefs: []
  type: TYPE_TB
- en: '| Building materials, metals, and fabricated products | 38.8% | 68 |'
  prefs: []
  type: TYPE_TB
- en: '| Transportation and transportation equipment | 38.4% | 52 |'
  prefs: []
  type: TYPE_TB
- en: '| Communication, broadcasting, movie production | 37.1% | 65 |'
  prefs: []
  type: TYPE_TB
- en: '| Printing and publishing | NA | NA |'
  prefs: []
  type: TYPE_TB
- en: '| Financial institutions | 35.7% | 66 |'
  prefs: []
  type: TYPE_TB
- en: '| Construction and real estate | 35.3% | 35 |'
  prefs: []
  type: TYPE_TB
- en: '| General merchandize stores | 33.2% | 89 |'
  prefs: []
  type: TYPE_TB
- en: '| Mining and petroleum drilling | 33.0% | 45 |'
  prefs: []
  type: TYPE_TB
- en: '| Textile and apparel products | 31.7% | 31 |'
  prefs: []
  type: TYPE_TB
- en: '| Wood, paper, and leather products | 29.8% | 11 |'
  prefs: []
  type: TYPE_TB
- en: '| Lodging, hospitals, and nursing facilities | 26.5% | 22 |'
  prefs: []
  type: TYPE_TB
- en: '| Total | 41.0% | 696 |'
  prefs: []
  type: TYPE_TB
- en: Table 13.5 Recovery rates based on the industry
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'See the article on *Recovery Rates* at: http://www.riskworx.com/resources/Recovery%20Rates.pdf.'
  prefs: []
  type: TYPE_NORMAL
- en: 'The preceding table is sorted according to the recovery rate from the highest
    to the lowest. For the printing and publishing industry, there is no data according
    to the original source. **Loss given default** (**LGD**) is equal to 1 minus the
    *Recovery rate*:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Credit rating](img/B06175_13_09.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, we explain the usage of default probability and recovery rates by using
    a hypothetical example to calculate the price of a bond. Assume that the face
    value of a one-year bond is $100 with a coupon rate of 6% and a Yield to Maturity
    (**YTM**) of 7%. We have the following four situations:'
  prefs: []
  type: TYPE_NORMAL
- en: '**Situation #1**: No default. The price today will be its discounted future
    cash flow, (6+100)/(1+0.07).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Situation #2**: Sure default and recover nothing. For this case, its price
    would be zero.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Situation #3**: If it defaults, we receive nothing.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Situation #4**: If it defaults, we receive something.'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The following table summarizes the preceding four situations:'
  prefs: []
  type: TYPE_NORMAL
- en: '| # | Conditions | Default ProbabilityRecover rate | Today''s price |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| 1 | No default | P=0, Recovery Rate (NA) | $99.07 |'
  prefs: []
  type: TYPE_TB
- en: '| 2 | 100% default/recover nothing | P=100%, Rrecovery=0 | 0 |'
  prefs: []
  type: TYPE_TB
- en: '| 3 | If default, recover nothing | O<P<100%, Rrecovery=0 | $99.07 *(1-P) |'
  prefs: []
  type: TYPE_TB
- en: '| 4 | If default, recover something | O<P<100% , Rrecovery>0 | $99.07 *[1-P*(1-
    ![Credit rating](img/B06175_13_32.jpg))] |'
  prefs: []
  type: TYPE_TB
- en: Table 13.6 Four situations for different default probabilities and recovery
    rates
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'The price of a bond is the summation of all present values of its expected
    future cash flows:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Credit rating](img/B06175_13_10.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'If *P* is the default probability we have the following expected future cash
    flow:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Credit rating](img/B06175_13_11.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Discounting all future cash flows would give us its price:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Credit rating](img/B06175_13_12.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Assume that the credit rating is A based on the Moody's scale. According to
    Table 13.3, its default rate is 1.29%. Assume further that it is a utility firm.
    Thus, its recovery rate given default is 70.5% based on Table 13.5\. The face
    value of the bond is $100 and the required return (YTM) is 5%. Based on the preceding
    formula, the price of a one-year bond with no default will be $95.24, that is,
    100/(1+0.05). The selling price of our bond with a 1.29% chance of default will
    be $94.88, that is, *95.24*(1-0.0129*(1-0.705))*.
  prefs: []
  type: TYPE_NORMAL
- en: Credit spread
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Credit spreads (default risk premium) reflect their default risk. For example,
    to estimate the present value of a coupon payment in two years for an AA rated
    bond, the discount rate (yield) will be a risk-free rate plus the corresponding
    spread. For a given credit rating, its credit spread could be found by using historical
    data. Here is a typical table showing the relationship between credit risk premium
    (spread) and the credit rating, see the following table:'
  prefs: []
  type: TYPE_NORMAL
- en: 'We thank Prof Adamodar for making the dataset available at his website, [http://people.stern.nyu.edu/adamodar/pc/datasets/](http://people.stern.nyu.edu/adamodar/pc/datasets/):'
  prefs: []
  type: TYPE_NORMAL
- en: '![Credit spread](img/B06175_13_03.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Credit Spread based on credit rating
  prefs: []
  type: TYPE_NORMAL
- en: 'Spreads, except the last row in the preceding table, have a unit of basic-point,
    which is the 100th of one percent. For example, or an A- (A minus) rated bond
    with a maturity of five years, its spared is 83.6 basis points. Since the risk-free
    is 1.582% (for a 5-year treasury rate), the YTM for this bond will be 2.418%,
    that is, 0.01582+83.6/100/100\. Based on the preceding table, we generated a Python
    dataset called `bondSpread2014.p,` which is available at the author''s website,
    [http://canisius.edu/~yany/python/creditSpread2014.pkl](http://canisius.edu/~yany/python/creditSpread2014.pkl):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: After studying the preceding table carefully, we would find two monotone trends.
    First, the spread is a decreasing function of credit quality. The lower a credit
    rating; the higher its spread. Second, for the same credit rating, its spread
    increases every year. For example, for an AAA rated bond, its spread in one year
    is 5 basis-points while it is 18 in five years.
  prefs: []
  type: TYPE_NORMAL
- en: YIELD of AAA-rated bond, Altman Z-score
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'From the previous sections, we have learnt that the spread between a bond''s
    yield and a treasury bond''s yield with the same maturity is the default risk
    premium. To retrieve the yields for `AAA` and `AA` bonds, we use the following
    codes. Moody''s Seasoned `Aaa` *Corporate Bond Yield* can be downloaded at https://fred.stlouisfed.org/series/AAA.
    The dataset can be downloaded at [http://canisius.edu/~yany/python/moodyAAAyield.p](http://canisius.edu/~yany/python/moodyAAAyield.p).
    Note that the `.png` of `.p` is fine for the `.pickle` format:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'The output is shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![YIELD of AAA-rated bond, Altman Z-score](img/B06175_13_04.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Note that the values of the second column, for the dataset called `moodyAAAyield.p`,
    are annualized. Thus, if we want to estimate a monthly yield (rate of return)
    in January 1919, the yield should be *0.4458333%*, that is, 0.0535/12.
  prefs: []
  type: TYPE_NORMAL
- en: 'Altman''s z-score is widely applied in finance for credit analysis to predict
    the possibility of a firm going to bankruptcy. This score is a weighted average
    of five ratios based on a firm''s balance sheet and income statement. For public
    firms, Altman (1968) offers the following formula:'
  prefs: []
  type: TYPE_NORMAL
- en: '![YIELD of AAA-rated bond, Altman Z-score](img/B06175_13_13.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, the definitions of *X1*, *X2*, *X3*, *X4*, and *X5* are given in the
    following table:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Variable | Definition |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| *X1* | EBIT/Total assets |'
  prefs: []
  type: TYPE_TB
- en: '| *X2* | Net sales/Total assets |'
  prefs: []
  type: TYPE_TB
- en: '| *X3* | Market value of equity/TotallLiabilities |'
  prefs: []
  type: TYPE_TB
- en: '| *X4* | Working capital/Total assets |'
  prefs: []
  type: TYPE_TB
- en: '| *X5* | Retained earnings/Total assets |'
  prefs: []
  type: TYPE_TB
- en: Table 13.8 Definitions of variables in the estimation of Z-scores
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Based on the ranges of z-scores, we could classify public firms into following
    four categories. Eidlenan (1995) finds that the Z score correctly predicted 72%
    of bankruptcies two years prior to the event:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Z-score range | Description |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| > 3.0 | Safe |'
  prefs: []
  type: TYPE_TB
- en: '| 2.7 to 2.99 | On Alert |'
  prefs: []
  type: TYPE_TB
- en: '| 1.8 to 2.7 | Good chances of going bankrupt within 2 years |'
  prefs: []
  type: TYPE_TB
- en: '| < 1.80 | Probability of financial distress is very high |'
  prefs: []
  type: TYPE_TB
- en: Altman's Z-score belongs to the categories called credit scoring (methods).
    On the other hand, more advanced models, for example, the KMV model, are based
    on modern finance theories, such as option theory.
  prefs: []
  type: TYPE_NORMAL
- en: Using the KMV model to estimate the market value of total assets and its volatility
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'KMV stands for **Kealhofer**, **McQuown** and **Vasicek** who founded a company
    focusing on measuring default risk. KMV methodology is one of the most important
    methods to estimate the probability of default for a given company by using its
    balance sheet information and the equity market information. The objective of
    this section is to show how to estimate the market value of total assets (A) and
    its corresponding volatility (σA). The result will be used later in the chapter.
    The basic idea is to treat the equity of a firm as a call option and the book
    value of its debt as its strike price. Let''s look at the simplest example. For
    a firm, if its debt is $70 and equity is $30, then the total assets will be $100,
    see the following table:'
  prefs: []
  type: TYPE_NORMAL
- en: '| 100 | 70 |'
  prefs: []
  type: TYPE_TB
- en: '| 30 |'
  prefs: []
  type: TYPE_TB
- en: 'Assume that the total asset jumps to $110 and the debt remains the same. Now,
    the value of the equity increases to $40\. On the other hand, if the assets drop
    to $90, the equity will be valued at $20\. Since the equity holders are the residual
    claimer, their value satisfies the following expression:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Using the KMV model to estimate the market value of total assets and its
    volatility](img/B06175_13_14.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, *E* is the value of equity, *A* is the total asset, and *D* is the total
    debt level. Recall for a European call option, we have the following payoff function:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Using the KMV model to estimate the market value of total assets and its
    volatility](img/B06175_13_15.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here *ST* is the terminal stock price at maturity date, *T* is the maturity
    date, *K* is the exercise price, and `max()` is the maximum function. The similarity
    between the preceding two equations suggests that we could treat equity as a call
    option with the debt level as our exercise price. With appropriate notations,
    we will have the following formulas for a firm''s equity. The KMV model is defined
    here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Using the KMV model to estimate the market value of total assets and its
    volatility](img/B06175_13_16.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'On the other hand, the following relationship between the volatilities of the
    equity and the total assets holds. In the following equation, we have:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Using the KMV model to estimate the market value of total assets and its
    volatility](img/B06175_13_27.jpg)![Using the KMV model to estimate the market
    value of total assets and its volatility](img/B06175_13_17.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Since *d1* and *d* *2* are defined by the previous equations, we have two equations
    for two unknowns (*A* and ![Using the KMV model to estimate the market value of
    total assets and its volatility](img/B06175_13_28.jpg)); see the following formulas.
    Thus, we could use trial-and-error or simultaneous equation methods to solve those
    two unknowns. Eventually, we want to solve the following two equations for *A*
    and ![Using the KMV model to estimate the market value of total assets and its
    volatility](img/B06175_13_29.jpg):'
  prefs: []
  type: TYPE_NORMAL
- en: '![Using the KMV model to estimate the market value of total assets and its
    volatility](img/B06175_13_18.jpg)'
  prefs: []
  type: TYPE_IMG
- en: We should pay attention to the estimated *A* (market value of total assets)
    from the preceding equation since it is different from the summation of market
    value of assets plus the book value of the debt.
  prefs: []
  type: TYPE_NORMAL
- en: 'The following Python program is for estimating total assets (A) and its volatility
    (sigmA) for a given *E* (equity), *D* (debt), *T* (maturity), *r* (risk-free rate),
    and the volatility of the equity (sigmaE). The basic logic of the program is that
    we input a large number of pairs of (*A*, sigmaE). Then we estimate E and sigmaE
    based on the preceding equation. Since both E and sigmaE are known, we could estimate
    the differences, *diff4E=estimatedE – knownE* and *diff4sigmaE = estimatedSigmaE
    – knownSigmaE*. The pair of (*A*, sigmaE) that minimizes the sum of those two
    absolute differences will be our solution:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'The output is shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '![Using the KMV model to estimate the market value of total assets and its
    volatility](img/B06175_13_05.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Please pay attention to the result, since the summation of the book value of
    debt and the market value of equity 175,000 while our estimated result is 142,559\.
    Since the equity of a firm is the call option, we could use the Black-Scholes-Merton
    model to double-check our result.
  prefs: []
  type: TYPE_NORMAL
- en: Term structure of interest rate
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'In [Chapter 5](ch05.html "Chapter 5. Bond and Stock Valuation"), *Bond and
    Stock Valuation*, we have discussed the concepts of a term structure of interest
    rate. The term structure of interest rate is defined as the relationship between
    risk-free rate and time. A risk-free rate is usually defined as a default-free
    treasury rate. From many sources, we could get the current term structure of interest
    rate. For example, on 2/27/2017 from http://finance.yahoo.com/bonds, we could
    get the following information:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Term structure of interest rate](img/B06175_13_06.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'The plotted term structure of an interest rate could be more eye catching;
    see the following codes:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'The related graph is shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Term structure of interest rate](img/B06175_13_07.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'To simulate future interest movement, we could apply the so-called BIS model
    with the following formulas. The change in the interest rate is assumed to follow
    a normal distribution; see the following formula:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Term structure of interest rate](img/B06175_13_19.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, Δ is for change, *R* is the interest rate, and *s* is the standard deviation
    of interest rate. Here is the equivalent equation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Term structure of interest rate](img/B06175_13_20.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Now, we have the following formula to tune our simulation:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Term structure of interest rate](img/B06175_13_21.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, *z* is the anti-cumulative normal distribution. The following codes show
    the `scipy.stat.norm.ppf()` function and percent point function (inverse of `cdf`)
    at `q` of the given `RV`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'The related three outputs are shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Term structure of interest rate](img/B06175_13_08.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'The related Python codes are shown here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: Distance to default
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '**Distance to default** (**DD**) is defined by the following formula; here
    *A* is the market value of the total assets and ![Distance to default](img/B06175_13_30.jpg)
    is its risk. The interpretation of this measure is clear; the higher *DD*, the
    safer the firm:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Distance to default](img/B06175_13_22.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'In terms of *Default Point*, there is no theory on how to choose an ideal default
    point. However, we could use all short-term debts plus the half of long-term debts
    as our default point. After we have the values of the market value of assets and
    its volatility, we could use the preceding equation to estimate the Distance to
    Default. The A and ![Distance to default](img/B06175_13_31.jpg) are from the output
    from *Equation (10)*. On the other hand, if the default point equals E, we would
    have the following formula:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Distance to default](img/B06175_13_23.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'According to the Black-Scholes-Merton call option model, the relationship between
    *DD* and *DP (Default Probability)* is given here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Distance to default](img/B06175_13_24.jpg)'
  prefs: []
  type: TYPE_IMG
- en: Credit default swap
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'A lender could buy a so-called **credit default swap** (**CDS**) to protect
    them in the event of default. The buyer of the CDS makes a series of payments
    to the seller and, in exchange, receives a payoff if the loan defaults. Let''s
    see a simple example. A fund just bought $100 million corporate bonds with a maturity
    of 15 years. If the issuing firm does not default, the pension fund would enjoy
    interest payment every year plus $100 million at maturity. To protect their investment,
    they entered a 15-year CDS contract with a financial institution. Based on the
    credit worthiness of the bond issuing firm, the agreed spread is 80 basis points
    payable annually. This means that every year, the pension fund (CDS buyer) pays
    the financial institution (CDS seller) $80,000 per year over the next 10 years.
    If a credit event happens, the CDS seller would compensate the CDS buyer depending
    on their loss because of credit events. If the contract specifies a physical settlement,
    the CDS buyer could sell their bonds at $100m to the CDS seller. If the contract
    specifies a cash settlement, the CDS seller would pay *Max($100m-X,0)* to the
    CDS buyer, where X is the market value of the bonds. If the market value of the
    bonds is $70m, then the CDS seller would pay the CDS buyer $30m. In the preceding
    case, the spreads or fees is strongly correlated with the default probability
    of the issuing firm. The higher the default probability, the higher the CDS spread.
    The following table represents such a relationship:'
  prefs: []
  type: TYPE_NORMAL
- en: '| CDS | P | CDS | P | CDS | P | CDS | P | CDS | P | CDS | P | CDS | P |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | ---
    | --- |'
  prefs: []
  type: TYPE_TB
- en: '| 0 | 0.0% | 100 | 7.8% | 200 | 13.9% | 300 | 19.6% | 500 | 30.2% | 500 | 30.2%
    | 1000 | 54.1% |'
  prefs: []
  type: TYPE_TB
- en: '| 5 | 0.6% | 105 | 8.1% | 205 | 14.2% | 310 | 20.2% | 510 | 30.7% | 525 | 31.4%
    | 1025 | 55.2% |'
  prefs: []
  type: TYPE_TB
- en: '| 10 | 1.1% | 110 | 8.4% | 210 | 14.5% | 320 | 20.7% | 520 | 31.2% | 550 |
    32.7% | 1050 | 56.4% |'
  prefs: []
  type: TYPE_TB
- en: '| 15 | 1.6% | 115 | 8.7% | 215 | 14.8% | 330 | 21.2% | 530 | 31.7% | 575 |
    33.9% | 1075 | 57.5% |'
  prefs: []
  type: TYPE_TB
- en: '| 20 | 2.0% | 120 | 9.1% | 220 | 15.1% | 340 | 21.8% | 540 | 32.2% | 600 |
    35.2% | 1100 | 58.6% |'
  prefs: []
  type: TYPE_TB
- en: '| 25 | 2.4% | 125 | 9.4% | 225 | 15.4% | 350 | 22.3% | 550 | 32.7% | 625 |
    36.4% | 1125 | 59.7% |'
  prefs: []
  type: TYPE_TB
- en: '| 30 | 2.8% | 130 | 9.7% | 230 | 15.7% | 360 | 22.9% | 560 | 33.2% | 650 |
    37.6% | 1150 | 60.9% |'
  prefs: []
  type: TYPE_TB
- en: '| 35 | 3.2% | 135 | 10.0% | 235 | 16.0% | 370 | 23.4% | 570 | 33.7% | 675 |
    38.8% | 1175 | 62.0% |'
  prefs: []
  type: TYPE_TB
- en: '| 40 | 3.6% | 140 | 10.3% | 240 | 16.2% | 380 | 23.9% | 580 | 34.2% | 700 |
    40.0% | 1200 | 63.1% |'
  prefs: []
  type: TYPE_TB
- en: '| 45 | 4.0% | 145 | 10.6% | 245 | 16.5% | 390 | 24.5% | 590 | 34.7% | 725 |
    41.2% | 1225 | 64.2% |'
  prefs: []
  type: TYPE_TB
- en: '| 50 | 4.3% | 150 | 10.9% | 250 | 16.8% | 400 | 25.0% | 600 | 35.2% | 750 |
    42.4% | 1250 | 65.3% |'
  prefs: []
  type: TYPE_TB
- en: '| 55 | 4.7% | 155 | 11.2% | 255 | 17.1% | 410 | 25.5% | 610 | 35.7% | 775 |
    43.6% | 1275 | 66.4% |'
  prefs: []
  type: TYPE_TB
- en: '| 60 | 5.0% | 160 | 11.5% | 260 | 17.4% | 420 | 26.0% | 620 | 36.1% | 800 |
    44.8% | 1300 | 67.5% |'
  prefs: []
  type: TYPE_TB
- en: '| 65 | 5.4% | 165 | 11.8% | 265 | 17.7% | 430 | 26.6% | 630 | 36.6% | 825 |
    46.0% | 1325 | 68.6% |'
  prefs: []
  type: TYPE_TB
- en: '| 70 | 5.7% | 170 | 12.1% | 270 | 17.9% | 440 | 27.1% | 640 | 37.1% | 850 |
    47.2% | 1350 | 69.7% |'
  prefs: []
  type: TYPE_TB
- en: '| 75 | 6.1% | 175 | 12.4% | 275 | 18.2% | 450 | 27.6% | 650 | 37.6% | 875 |
    48.3% | 1375 | 70.7% |'
  prefs: []
  type: TYPE_TB
- en: '| 80 | 6.4% | 180 | 12.7% | 280 | 18.5% | 460 | 28.1% | 660 | 38.1% | 900 |
    49.5% | 1400 | 71.8% |'
  prefs: []
  type: TYPE_TB
- en: '| 85 | 6.8% | 185 | 13.0% | 285 | 18.8% | 470 | 28.6% | 670 | 38.6% | 925 |
    50.6% | 1425 | 72.9% |'
  prefs: []
  type: TYPE_TB
- en: '| 90 | 7.1% | 190 | 13.3% | 290 | 19.1% | 480 | 29.1% | 680 | 39.1% | 950 |
    51.8% | 1450 | 74.0% |'
  prefs: []
  type: TYPE_TB
- en: '| 95 | 7.4% | 195 | 13.6% | 295 | 19.3% | 490 | 29.6% | 690 | 39.6% | 975 |
    52.9% | 1475 | 75.1% |'
  prefs: []
  type: TYPE_TB
- en: '| 100 | 7.8% | 200 | 13.9% | 300 | 19.6% | 500 | 30.2% | 700 | 40.0% | 1000
    | 54.1% | 1500 | 76.1% |'
  prefs: []
  type: TYPE_TB
- en: 'Table 13.9: Default probability and credit default swap.'
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: The Default Probabilities Estimated five-Year Cumulative Probability of Default
    (P)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: ''
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: and five year credit default swaps (5Y CDS)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Appendix A – data case #8 - predicting bankruptcy by using Z-score'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The Altman''s Z score is used to predict the possibility of a firm going to
    bankruptcy. This score is a weighted average of five ratios based on a firm''s
    balance sheet and income statement. For public firms, Altman (1968) offers the
    following formula:'
  prefs: []
  type: TYPE_NORMAL
- en: '![Appendix A – data case #8 - predicting bankruptcy by using Z-score](img/B06175_13_25.jpg)'
  prefs: []
  type: TYPE_IMG
- en: 'Here, the definitions of *X1*, *X2*, *X3*, *X4*, and *X5* are given in the
    following table:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Variable | Definition |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| *X1* | EBIT/total assets |'
  prefs: []
  type: TYPE_TB
- en: '| *X2* | Net sales/total assets |'
  prefs: []
  type: TYPE_TB
- en: '| *X3* | Market value of equity/total liabilities |'
  prefs: []
  type: TYPE_TB
- en: '| *X4* | Working capital/total assets |'
  prefs: []
  type: TYPE_TB
- en: '| *X5* | Retained earnings/total assets |'
  prefs: []
  type: TYPE_TB
- en: 'Based on the ranges of z-scores, we could classify 20 public firms into the
    following four categories. Eidlenan (1995) finds that the Z score correctly predicted
    72% of bankruptcies two years prior to the event:'
  prefs: []
  type: TYPE_NORMAL
- en: '| Z-score range | Description |'
  prefs: []
  type: TYPE_TB
- en: '| --- | --- |'
  prefs: []
  type: TYPE_TB
- en: '| > 3.0 | Safe |'
  prefs: []
  type: TYPE_TB
- en: '| 2.7 to 2.99 | On alert |'
  prefs: []
  type: TYPE_TB
- en: '| 1.8 to 2.7 | Good chances of going bankrupt within two years |'
  prefs: []
  type: TYPE_TB
- en: '| < 1.80 | Probability of financial distress is very high |'
  prefs: []
  type: TYPE_TB
- en: References
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '*Altman, Edward I, 1968*, *Financial Ratios, Discriminant Analysis and the
    Prediction of Corporate Bankruptcy*, *Journal of Finance,189–209*, [http://onlinelibrary.wiley.com/doi/10.1111/j.1540-6261.1968.tb00843.x/abstract](http://onlinelibrary.wiley.com/doi/10.1111/j.1540-6261.1968.tb00843.x/abstract)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Altman, E.I., Kishore, V., 1997*. *Default and returns in the high yield debt
    market*, *1991-1996,NYU Salomon Center Special Report*'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Altman, Edward I.,2000*, *PREDICTING FINANCIAL DISTRESS OF COMPANIES*, [http://pages.stern.nyu.edu/~ealtman/Zscores.pdf](http://pages.stern.nyu.edu/~ealtman/Zscores.pdf)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Eidleman, Gregory J.,1995,Z-Scores – A Guide to Failure Prediction, CPA Journal
    Online*, [https://www.easycalculation.com/statistics/altman-z-score.php](https://www.easycalculation.com/statistics/altman-z-score.php)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Fitch*, [https://www.fitchratings.com/site/home](https://www.fitchratings.com/site/home).'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*KMV model*, [https://github.com/ghlingjun/kmv-model](https://github.com/ghlingjun/kmv-model)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Moody''s website*, [http://www.moodys.com/](http://www.moodys.com/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Moody''s, 2007*, *Introducing Moody''s Credit Transition Model*, [http://www.moodysanalytics.com/~/media/Brochures/Credit-Research-Risk-Measurement/Quantative-Insight/Credit-Transition-Model/Introductory-Article-Credit-Transition-Model.pdf](http://www.moodysanalytics.com/~/media/Brochures/Credit-Research-Risk-Measurement/Quantative-Insight/Credit-Transition-Model/Introductory-Article-Credit-Transition-Model.pdf)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Standard & Poor''s,* [http://www.standardandpoors.com/en_US/web/guest/home](http://www.standardandpoors.com/en_US/web/guest/home)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Exercises
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: How many credit agencies are there in the US? Which are the major ones?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How many types of definition of risk are there? What are the differences between
    credit risk and market risk?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How do you estimate the total risk and market risk of a firm? What is the related
    mathematical formula?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: How do you estimate the credit risk of a firm? What is the related mathematical
    formula?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Why might the credit risk of a bond be different than its company's credit rating?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: If everything is equal, which one is for risk, long-term bonds, or short-term
    bonds?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What is the definition of credit spread? Why is it useful?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What are uses of the term structure of interest rate?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What are the definitions of *X1*, *X2*, *X3*, *X4*, and *X5* for Altman's Z-score?
    Explain why the higher a Z-score, the lower the probability of bankruptcy:![Exercises](img/B06175_13_26.jpg)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Identify an issue with z score and find a way to address the issue.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What is the one-year migration (transition) matrix?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What is the relationship between the credit rating and the default probability?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Using the concept of the present value of a bond, is the discounted the expected
    future cash flows to derive equation (1).
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: What are the values on the (main) diagonal line (from NW to SE) of a credit
    transition matrix?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Walmart plans to issue a $50 million (total face value) corporate bond with
    a face value of $1,000 for each bond. The bonds will mature in 10 years. The coupon
    rate is 8% with an annual payment. How much could Walmart raise today? If Walmart
    manages to raise its credit rating by one notch, how much extra cash could the
    firm raise?
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'The following table presents the relationship between rating, default risk
    (spread), and time. Write a Python program to interpolate the missing spreads,
    such as S from year 11 to 29\. The Python dataset could be downloaded from [http://canisius.edu/~yany/python/creditSpread2014.p](http://canisius.edu/~yany/python/creditSpread2014.p):'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs:
  - PREF_IND
  type: TYPE_PRE
- en: Summary
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this chapter, we start from the very basics about credit risk analysis such
    as credit rating, credit spread, 1-year rating migration matrix, **Probability
    of Default** (**PD**), **Loss Given Default** (**LGD**), term structure of interest
    rate, Altman's Z-score, KMV model, default probability, the distance to default,
    and credit default swap. In [Chapter 10](ch10.html "Chapter 10. Options and Futures"),
    *Options and Futures*, some basic vanilla options, such as Black-Scholes-Merton
    options and their related applications, are discussed. In addition, in [Chapter
    12](ch12.html "Chapter 12. Monte Carlo Simulation"), *Monte Carlo Simulation*,
    two exotic options are explained.
  prefs: []
  type: TYPE_NORMAL
- en: In the next chapter, we will discuss more exotic options, since they are quite
    useful for mitigating many types of financial risk.
  prefs: []
  type: TYPE_NORMAL
