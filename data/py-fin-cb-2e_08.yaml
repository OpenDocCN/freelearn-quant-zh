- en: '8'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '8'
- en: Multi-Factor Models
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多因子模型
- en: This chapter is devoted to estimating various factor models. **Factors** are
    variables/attributes that in the past were correlated with (then future) stock
    returns and are expected to contain the same predictive signals in the future.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章专注于估算各种因子模型。**因子**是过去与（未来）股票回报相关的变量/属性，预计在未来仍然包含相同的预测信号。
- en: These risk factors can be considered a tool for understanding the cross-section
    of (expected) returns. That is why various **factor models** are used to explain
    the excess returns (over the risk-free rate) of a certain portfolio or asset using
    one or more factors. We can think of the factors as the sources of risk that are
    the drivers of those excess returns. Each factor carries a risk premium and the
    overall portfolio/asset return is the weighted average of those premiums.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 这些风险因子可以被视为理解（预期）回报横截面的一种工具。这也是为什么各种**因子模型**被用来通过一个或多个因子解释某一资产或投资组合的超额回报（相对于无风险利率）。我们可以把这些因子看作是驱动超额回报的风险源。每个因子都有一个风险溢价，整体投资组合/资产的回报是这些溢价的加权平均值。
- en: 'Factor models play a crucial role in portfolio management, mainly because:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 因子模型在投资组合管理中扮演着至关重要的角色，主要原因是：
- en: They can be used to identify interesting assets that can be added to the investment
    portfolio, which—in turn—should lead to better-performing portfolios.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们可以用来识别可以加入投资组合的有趣资产，这反过来应当能带来表现更好的投资组合。
- en: Estimating the exposure of a portfolio/asset to the factors allows for better
    risk management.
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 估算投资组合/资产对各因子的暴露有助于更好的风险管理。
- en: We can use the models to assess the potential incremental value of adding a
    new risk factor.
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以使用这些模型来评估添加新风险因子的潜在增值。
- en: They make portfolio optimization easier, as summarizing the returns of many
    assets with a smaller number of factors reduces the amount of data required to
    estimate the covariance matrix.
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们使得投资组合优化变得更容易，因为通过较少的因素总结多个资产的收益，减少了估算协方差矩阵所需的数据量。
- en: They can be used to assess a portfolio manager’s performance—whether the performance
    (relative to the benchmark) is due to asset selection and timing of the trades,
    or if it comes from the exposure to known return drivers (factors).
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们可以用来评估投资组合经理的表现——无论表现（相对于基准）是由于资产选择和交易时机，还是来自于对已知回报驱动因素（因子）的暴露。
- en: By the end of this chapter, we will have constructed some of the most popular
    factor models. We will start with the simplest, yet very popular, one-factor model
    (which is the same as the **Capital Asset Pricing Model** when the considered
    factor is the market return) and then explain how to estimate more advanced three-,
    four-, and five-factor models. We will also cover the interpretation of what these
    factors represent and give a high-level overview of how they are constructed.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章结束时，我们将构建一些最流行的因子模型。我们将从最简单但非常流行的单因子模型开始（当考虑的因子是市场回报时，这与**资本资产定价模型**相同），然后解释如何估算更先进的三因子、四因子和五因子模型。我们还将涵盖这些因子代表什么的解释，并提供一个关于它们如何构建的高层次概述。
- en: 'In this chapter, we cover the following recipes:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下内容：
- en: Estimating the CAPM
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 估算资本资产定价模型（CAPM）
- en: Estimating the Fama-French three-factor model
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 估算Fama-French三因子模型
- en: Estimating the rolling three-factor model on a portfolio of assets
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 估算资产组合的滚动三因子模型
- en: Estimating the four- and five-factor models
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 估算四因子和五因子模型
- en: Estimating cross-sectional factor models using the Fama-MacBeth regression
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Fama-MacBeth回归估算横截面因子模型
- en: Estimating the CAPM
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 估算资本资产定价模型（CAPM）
- en: In this recipe, we learn how to estimate the famous **Capital Asset Pricing
    Model** (**CAPM**) and obtain the beta coefficient. This model represents the
    relationship between the expected return on a risky asset and the market risk
    (also known as systematic or undiversifiable risk). CAPM can be considered a one-factor
    model, on top of which more complex factor models were built.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在本篇中，我们将学习如何估算著名的**资本资产定价模型**（**CAPM**）并获取β系数。该模型表示了风险资产的预期回报与市场风险（也称为系统性风险或不可分散风险）之间的关系。CAPM可以视为一个单因子模型，基于该模型构建了更复杂的因子模型。
- en: 'CAPM is represented by the following equation:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: CAPM由以下方程表示：
- en: '![](../Images/B18112_08_001.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_001.png)'
- en: Here, *E*(*r*[i]) denotes the expected return on asset *i*, *r*[f] is the risk-free
    rate (such as a government bond), *E*(*r*[m]) is the expected return on the market,
    and ![](../Images/B18112_08_002.png) is the beta coefficient.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，*E*(*r*[i]) 表示资产 *i* 的预期回报，*r*[f] 是无风险利率（例如政府债券），*E*(*r*[m]) 是市场的预期回报，而 ![](../Images/B18112_08_002.png)
    是贝塔系数。
- en: '**Beta** can be interpreted as the level of the asset return’s sensitivity,
    as compared to the market in general. Below we mention the possible interpretations
    of the coefficient:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**贝塔值**可以解释为资产回报对市场波动的敏感程度。以下是该系数的可能解释：'
- en: '![](../Images/B18112_08_003.png) <= -1: The asset moves in the opposite direction
    to the benchmark and in a greater amount than the negative of the benchmark.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '![](../Images/B18112_08_003.png) <= -1：资产与基准的方向相反，并且波动幅度大于基准的负值。'
- en: '-1 < ![](../Images/B18112_08_003.png) < 0: The asset moves in the opposite
    direction to the benchmark.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -1 < ![](../Images/B18112_08_003.png) < 0：资产与基准的方向相反。
- en: '![](../Images/B18112_08_003.png) = 0: There is no correlation between the asset’s
    price movement and the market benchmark.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '![](../Images/B18112_08_003.png) = 0：资产价格波动与市场基准之间没有相关性。'
- en: '0 < ![](../Images/B18112_08_003.png) < 1: The asset moves in the same direction
    as the market, but the amount is smaller. An example might be the stock of a company
    that is not very susceptible to day-to-day fluctuations.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 0 < ![](../Images/B18112_08_003.png) < 1：资产与市场方向相同，但波动幅度较小。一个例子可能是那些不太容易受到日常波动影响的公司股票。
- en: '![](../Images/B18112_08_007.png) = 1: The asset and the market are moving in
    the same direction by the same amount.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '![](../Images/B18112_08_007.png) = 1：资产与市场在同一方向上以相同幅度波动。'
- en: '![](../Images/B18112_08_007.png) > 1: The asset moves in the same direction
    as the market, but the amount is greater. An example might be the stock of a company
    that is very susceptible to day-to-day market news.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '![](../Images/B18112_08_007.png) > 1：资产与市场方向相同，但波动幅度较大。一个例子可能是那些对日常市场新闻非常敏感的公司股票。'
- en: 'CAPM can also be represented as:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: CAPM 也可以表示为：
- en: '![](../Images/B18112_08_009.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_009.png)'
- en: 'In this specification, the left-hand side of the equation can be interpreted
    as the risk premium, while the right-hand side contains the market premium. The
    same equation can be further reshaped into:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 在此模型中，方程的左侧可以解释为风险溢价，而右侧包含市场溢价。同一方程还可以进一步重构为：
- en: '![](../Images/B18112_08_010.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_010.png)'
- en: Here, ![](../Images/B18112_08_011.png) and ![](../Images/B18112_08_012.png).
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，![](../Images/B18112_08_011.png) 和 ![](../Images/B18112_08_012.png)。
- en: In this example, we consider the case of Amazon and assume that the S&P 500
    index represents the market. We use 5 years (2016 to 2020) of monthly data to
    estimate the beta. In current times, the risk-free rate is so low that, for simplicity’s
    sake, we assume it is equal to zero.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个示例中，我们以亚马逊为例，假设标准普尔 500 指数代表市场。我们使用 5 年（2016 至 2020 年）的月度数据来估计贝塔值。在当前情况下，风险无风险利率非常低，因此为简化起见，我们假设它等于零。
- en: How to do it...
  id: totrans-35
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Execute the following steps to implement the CAPM in Python:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤在 Python 中实现 CAPM：
- en: 'Import the libraries:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入所需的库：
- en: '[PRE0]'
  id: totrans-38
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Specify the risky asset, the benchmark, and the time horizon:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定风险资产、基准和时间范围：
- en: '[PRE1]'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Download the necessary data from Yahoo Finance:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Yahoo Finance 下载所需的数据：
- en: '[PRE2]'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Resample to monthly data and calculate the simple returns:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据重采样为月度数据并计算简单收益：
- en: '[PRE3]'
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Calculate beta using the covariance approach:'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用协方差方法计算贝塔值：
- en: '[PRE4]'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The result of the code is `beta = 1.2035`.
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 代码的结果是 `beta = 1.2035`。
- en: 'Prepare the input and estimate the CAPM as a linear regression:'
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 准备输入数据并通过线性回归估计 CAPM：
- en: '[PRE5]'
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '*Figure 8.1* shows the results of estimating the CAPM model:'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*图 8.1* 显示了 CAPM 模型估计结果：'
- en: '![](../Images/B18112_08_01.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_01.png)'
- en: 'Figure 8.1: The summary of the CAPM estimated using OLS'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.1：使用 OLS 估计的 CAPM 概述
- en: These results indicate that the beta (denoted as the market here) is equal to
    1.2, which means that Amazon’s returns are 20% more volatile than the market (proxied
    by S&P 500). Or in other words, Amazon’s (excess) return is expected to move 1.2
    times the market (excess) return. The value of the intercept is relatively small
    and statistically insignificant at the 5% significance level.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 这些结果表明贝塔值（这里代表市场）为 1.2，这意味着亚马逊的回报波动性是市场的 20%（由标准普尔 500 指数代理）。换句话说，亚马逊的（超额）回报预计将是市场（超额）回报的
    1.2 倍。截距值相对较小，在 5% 显著性水平下统计上不显著。
- en: How it works...
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: First, we specified the assets we wanted to use (Amazon and S&P 500) and the
    time frame. In *Step 3*, we downloaded the data from Yahoo Finance. Then, we only
    kept the last available price per month and calculated the monthly returns as
    the percentage change between the subsequent observations.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们指定了要使用的资产（亚马逊和标准普尔500）及时间框架。在*第3步*中，我们从Yahoo Finance下载了数据。然后，我们只保留了每月最后一个可用的价格，并计算了每月回报率，即后续观测值之间的百分比变化。
- en: In *Step 5*, we calculated the beta as the ratio of the covariance between the
    risky asset and the benchmark to the benchmark’s variance.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第5步*中，我们计算了β值，它是风险资产与基准之间的协方差与基准方差的比率。
- en: In *Step 6*, we separated the target (Amazon’s stock returns) and the features
    (S&P 500 returns) using the `pop` method of a `pandas` DataFrame. Afterward, we
    added the constant to the features (effectively adding a column of ones to the
    DataFrame) with the `add_constant` function.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在*第6步*中，我们使用`pandas` DataFrame的`pop`方法将目标（亚马逊的股票回报）和特征（标准普尔500回报）分离。之后，我们使用`add_constant`函数向特征中添加常数（实际上是向DataFrame中添加了一列1）。
- en: 'The idea behind adding the intercept to this regression is to investigate whether—after
    estimating the model—the intercept (in the case of the CAPM, also known as **Jensen’s
    alpha**) is zero. If it is positive and significant, it means that— assuming the
    CAPM model is true—the asset or portfolio generates abnormally high risk-adjusted
    returns. There are two possible implications: either the market is inefficient
    or there are some other undiscovered risk factors that should be included in the
    model. This issue is known as the **joint hypothesis problem**.'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 向回归中添加截距的想法是研究——在估计模型之后——截距（在CAPM模型中也称为**詹森的阿尔法**）是否为零。如果它是正值并且显著，意味着——假设CAPM模型成立——该资产或投资组合产生了异常高的风险调整回报。这个问题有两种可能的含义：要么市场是无效的，要么有其他尚未发现的风险因子应该被纳入模型中。这个问题被称为**联合假设问题**。
- en: 'We can also use the formula notation, which adds the constant automatically.
    To do so, we must import `statsmodels.formula.api` as `smf` and then run the slightly
    modified line: `capm_model = smf.ols(formula="asset ~ market", data=X).fit()`.
    The results of both approaches are the same. You can find the complete code in
    the accompanying Jupyter notebook.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也可以使用公式表示法，它会自动添加常数。为此，我们必须导入`statsmodels.formula.api`作为`smf`，然后运行稍微修改过的代码行：`capm_model
    = smf.ols(formula="asset ~ market", data=X).fit()`。这两种方法的结果是相同的。你可以在随附的Jupyter
    notebook中找到完整的代码。
- en: Lastly, we ran the OLS regression and printed the summary. Here, we could see
    that the coefficient by the market variable (that is, the CAPM beta) is equal
    to the beta that was calculated using the covariance between the asset and the
    market in *Step 5*.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们进行了OLS回归并打印了总结。这里，我们可以看到市场变量（即CAPM β值）的系数等于在*第5步*中通过资产与市场之间的协方差计算得出的β值。
- en: There’s more...
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: In the example above, we assumed there was no risk-free rate, which is a reasonable
    assumption to make nowadays. However, there might be cases when we would like
    to account for a non-zero risk-free rate. To do so, we could use one of the following
    approaches.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述示例中，我们假设没有无风险利率，这是现在做出的合理假设。然而，也可能存在我们希望考虑非零无风险利率的情况。为此，我们可以使用以下几种方法之一。
- en: Using data from Prof. Kenneth French’s website
  id: totrans-63
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用Kenneth French教授网站的数据
- en: The market premium (*r*[m] - *r*[f] ) and the risk-free rate (approximated by
    the one-month Treasury Bill) can be downloaded from Professor Kenneth French’s
    website (please refer to the *See also* section of this recipe for the link).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 市场溢价（*r*[m] - *r*[f]）和无风险利率（由一个月期国库券近似）可以从Kenneth French教授的网站下载（有关链接，请参见本食谱的*另请参阅*部分）。
- en: Please bear in mind that the definition of the market benchmark used by Prof.
    French is different from the S&P 500 index—a detailed description is available
    on his website. For a description of how to easily download the data, please refer
    to the *Implementing the Fama-French three-factor model* recipe.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，Prof. French使用的市场基准的定义与标准普尔500指数不同——有关详细描述，请参见他的网站。有关如何轻松下载数据的说明，请参考*实施法马-法rench三因子模型*的食谱。
- en: Using the 13-Week T-bill
  id: totrans-66
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用13周期国债券
- en: 'The second option is to approximate the risk-free rate with, for example, the
    13-Week (3-month) Treasury Bill (Yahoo Finance ticker: `^IRX`).'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个选择是通过例如13周期（3个月）国债券（Yahoo Finance代码：`^IRX`）来近似无风险利率。
- en: 'Follow these steps to learn how to download the data and convert it into the
    appropriate risk-free rate:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤学习如何下载数据并将其转换为适当的无风险利率：
- en: 'Define the length of the period in days:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义周期的天数长度：
- en: '[PRE6]'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Download the data from Yahoo Finance:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从雅虎财经下载数据：
- en: '[PRE7]'
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Resample the data to monthly frequency (by taking the last value for each month):'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据重新采样为按月频率（每月取最后一个值）：
- en: '[PRE8]'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Calculate the risk-free return (expressed as daily values) and convert the
    values to monthly:'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算无风险回报（以日值表示），并将值转换为月度：
- en: '[PRE9]'
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Plot the calculated risk-free rate:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制计算出的无风险利率图表：
- en: '[PRE10]'
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '*Figure 8.2* shows the visualization of the risk-free rate over time:'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*图8.2*显示了无风险利率随时间变化的可视化图：'
- en: '![](../Images/B18112_08_02.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_02.png)'
- en: 'Figure 8.2: The risk-free rate calculated using the 13-Week Treasury Bill'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.2：使用13周期国库券计算的无风险利率
- en: Using the 3-Month T-bill from the FRED database
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用FRED数据库中的3个月期国库券
- en: The last approach is to approximate the risk-free rate using the 3-Month Treasury
    Bill (Secondary Market Rate), which can be downloaded from the **Federal Reserve
    Economic Data** (**FRED**) database.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一种方法是使用3个月期国库券（次级市场利率）来近似无风险利率，数据可以从**美联储经济数据**（**FRED**）数据库下载。
- en: 'Follow these steps to learn how to download the data and convert it to a monthly
    risk-free rate:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤学习如何下载数据并将其转换为月度无风险利率：
- en: 'Import the library:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入库：
- en: '[PRE11]'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Download the data from the FRED database:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从FRED数据库下载数据：
- en: '[PRE12]'
  id: totrans-88
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Convert the obtained risk-free rate to monthly values:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将获得的无风险利率转换为月度值：
- en: '[PRE13]'
  id: totrans-90
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Plot the calculated risk-free rate:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 绘制计算出的无风险利率图表：
- en: '[PRE14]'
  id: totrans-92
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'We can compare the results of the two methods by comparing the plots of the
    risk-free rates:'
  id: totrans-93
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们可以通过比较无风险利率的图表来对比两种方法的结果：
- en: '![](../Images/B18112_08_03.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_03.png)'
- en: 'Figure 8.3: The risk-free rate calculated using the 3-Month Treasury Bill'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.3：使用3个月期国库券计算的无风险利率
- en: The above lets us conclude that the plots look very similar.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 上述分析让我们得出结论，图表看起来非常相似。
- en: See also
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: 'Additional resources are available here:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 额外的资源可以在此处找到：
- en: 'Sharpe, W. F., “Capital asset prices: A theory of market equilibrium under
    conditions of risk,” *The Journal of Finance*, 19, 3 (1964): 425–442.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Sharpe, W. F., “资本资产定价：在风险条件下的市场均衡理论，” *金融学杂志*，19，3（1964）：425–442。
- en: 'Risk-free rate data on Prof. Kenneth French’s website: [http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors_CSV.zip](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors_CSV.zip).'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Prof. Kenneth French 网站上的无风险利率数据：[http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors_CSV.zip](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/ftp/F-F_Research_Data_Factors_CSV.zip)。
- en: Estimating the Fama-French three-factor model
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 估算Fama-French三因子模型
- en: 'In their famous paper, Fama and French expanded the CAPM model by adding two
    additional factors explaining the excess returns of an asset or portfolio. The
    factors they considered are:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在他们的著名论文中，Fama和French通过增加两个额外的因子扩展了CAPM模型，用以解释资产或投资组合的超额回报。他们考虑的因子包括：
- en: '**The market factor** (MKT): It measures the excess return of the market, analogical
    to the one in the CAPM.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**市场因子**（MKT）：它衡量市场的超额回报，类似于资本资产定价模型（CAPM）中的回报。'
- en: '**The size factor** (SMB; Small Minus Big): It measures the excess return of
    stocks with a small market cap over those with a large market cap.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**规模因子**（SMB；小市值减大市值）：它衡量的是小市值股票相对于大市值股票的超额回报。'
- en: '**The value factor** (HML; High Minus Low): It measures the excess return of
    value stocks over growth stocks. Value stocks have a high book-to-market ratio,
    while growth stocks are characterized by a low ratio.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**价值因子**（HML；高市账比减低市账比）：它衡量价值股相对于成长股的超额回报。价值股具有较高的账面市值比，而成长股的市账比较低。'
- en: Please see the *See also* section for a reference to how the factors are calculated.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 请参见*另见*部分，了解因子的计算方法。
- en: 'The model can be represented as follows:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 该模型可以表示如下：
- en: '![](../Images/B18112_08_013.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_013.png)'
- en: 'Or in its simpler form:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 或者以更简单的形式：
- en: '![](../Images/B18112_08_014.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_014.png)'
- en: Here, E(r[i] ) denotes the expected return on asset *i*, r[f] is the risk-free
    rate (such as a government bond), and ![](../Images/B18112_08_020.png) is the
    intercept. The reason for including the intercept is to make sure its value is
    equal to 0\. This confirms that the three-factor model correctly evaluates the
    relationship between the excess returns and the factors.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 这里，E(r[i])表示资产*i*的预期回报，r[f]是无风险利率（如政府债券），而![](../Images/B18112_08_020.png)是截距项。包括截距项的原因是为了确保它的值为0。这证明三因子模型正确地评估了超额回报与因子之间的关系。
- en: In the case of a statistically significant, non-zero intercept, the model might
    not evaluate the asset/portfolio return correctly. However, the authors stated
    that the three-factor model is “fairly correct,” even when it is unable to pass
    the statistical test.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 在统计上显著且不为零的截距项的情况下，模型可能无法正确评估资产/投资组合的回报。然而，作者表示，即使模型未能通过统计检验，三因子模型依然是“相当正确的”。
- en: Due to the popularity of this approach, these factors became collectively known
    as the **Fama-French Factors** or the **Three-Factor Model**. They have been widely
    accepted in both academia and the industry as stock market benchmarks and they
    are often used to evaluate investment performance.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这种方法的流行，这些因素被统称为**法马-弗伦奇因素**或**三因子模型**。它们在学术界和行业中被广泛接受作为股市基准，并且经常被用来评估投资表现。
- en: In this recipe, we estimate the three-factor model using 5 years (2016 to 2020)
    of monthly returns on Apple’s stock.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个示例中，我们使用2016年到2020年的5年苹果股票的月度回报来估计三因子模型。
- en: How to do it...
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Follow these steps to implement the three-factor model in Python:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤在Python中实现三因子模型：
- en: 'Import the libraries:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入库：
- en: '[PRE15]'
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Define the parameters:'
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义参数：
- en: '[PRE16]'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Download the dataset containing the risk factors:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载包含风险因子的数据集：
- en: '[PRE17]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The downloaded dictionary contains three elements: the monthly factors from
    the requested time frame (indexed as `0`), the corresponding annual factors (indexed
    as `1`), and a short description of the dataset (indexed as `DESCR`).'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 下载的字典包含三个元素：请求时间框架内的月度因子（索引为`0`）、相应的年度因子（索引为`1`）以及数据集的简短描述（索引为`DESCR`）。
- en: 'Select the appropriate dataset and divide the values by 100:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择合适的数据集并将值除以100：
- en: '[PRE18]'
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The resulting data should look as follows:'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 结果数据应如下所示：
- en: '![](../Images/B18112_08_04.png)'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_04.png)'
- en: 'Figure 8.4: Preview of the downloaded factors'
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图8.4：下载的因子预览
- en: 'Download the prices of the risky asset:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载风险资产的价格：
- en: '[PRE19]'
  id: totrans-130
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Calculate the monthly returns on the risky asset:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算风险资产的月度回报：
- en: '[PRE20]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'Merge the datasets and calculate the excess returns:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 合并数据集并计算超额回报：
- en: '[PRE21]'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Estimate the three-factor model:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 估计三因子模型：
- en: '[PRE22]'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The results of the three-factor model are presented below:'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 三因子模型的结果如下所示：
- en: '![](../Images/B18112_08_05.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_05.png)'
- en: 'Figure 8.5: The summary of the estimated three-factor model'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.5：估计的三因子模型摘要
- en: 'When interpreting the results of the three-factor model, we should pay attention
    to two issues:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在解释三因子模型的结果时，我们应关注两个问题：
- en: Whether the intercept is positive and statistically significant
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 截距是否为正且在统计上显著
- en: Which factors are statistically significant and if their direction matches past
    results (for example, based on a literature study) or our assumptions
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 哪些因素在统计上是显著的，并且它们的方向是否与过去的结果（例如，基于文献研究）或我们的假设一致
- en: In our case, the intercept is positive, but not statistically significant at
    the 5% significance level. Of the risk factors, only the SMB factor is not significant.
    However, a thorough literature study is required to formulate a hypothesis about
    the factors and their direction of influence.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的案例中，截距项为正，但在5%的显著性水平下并不显著。在风险因子中，只有SMB因子不显著。然而，仍需要进行详细的文献研究，以便对这些因子及其影响方向提出假设。
- en: We can also look at the F-statistic that was presented in the regression summary,
    which tests the joint significance of the regression. The null hypothesis states
    that coefficients of all features (factors, in this case), except for the intercept,
    have values equal to 0\. We can see that the corresponding *p*-value is much lower
    than 0.05, which gives us reason to reject the null hypothesis at the 5% significance
    level.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以查看回归摘要中呈现的F统计量，它用于检验回归的联合显著性。原假设认为，除了截距项之外，所有特征（在此情况下为因子）的系数值均为0。我们可以看到，相应的*p*值远小于0.05，这使我们有理由在5%的显著性水平下拒绝原假设。
- en: How it works...
  id: totrans-145
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In the first two steps, we imported the required libraries and defined the parameters
    – the risky asset (Apple’s stock) and the considered time frame.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在前两步中，我们导入了所需的库并定义了参数——风险资产（苹果股票）和考虑的时间范围。
- en: In *Step 3,* we downloaded the data using the functionality of the `pandas_datareader`
    library. We had to specify which dataset (see the *There’s more...* section for
    information on inspecting the available datasets) and reader (`famafrench`) we
    wanted to use, as well as the start/end dates (by default, `web.DataReader` downloads
    the last 5 years’ worth of data).
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 3*中，我们使用 `pandas_datareader` 库的功能下载了数据。我们必须指定要使用的数据集（有关检查可用数据集的信息，请参见*还有更多...*部分）和读取器（`famafrench`），以及起始/结束日期（默认情况下，`web.DataReader`
    下载的是过去 5 年的数据）。
- en: In *Step 4*, we selected only the dataset containing monthly values (indexed
    as `0` in the downloaded dictionary), renamed the column containing the MKT factor,
    and divided all the values by 100\. We did it to arrive at the correct encoding
    of percentages; for example, a value of 3.45 in the dataset represents 3.45%.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 4*中，我们仅选择了包含月度数据的数据集（在下载的字典中索引为`0`），重命名了包含 MKT 因子的列，并将所有值除以 100。我们这样做是为了正确编码百分比；例如，数据集中值为
    3.45的表示 3.45%。
- en: In *Steps 5* and *6*, we downloaded and wrangled the prices of Apple’s stock.
    We obtained the monthly returns by calculating the percentage change of the end-of-month
    prices. In *Step 6*, we also changed the formatting of the index to `%Y-%m` (for
    example, `2000-12`) since the Fama-French factors contain dates in such a format.
    Then, we joined the two datasets in *Step 7*.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 5*和*步骤 6*中，我们下载并处理了苹果股票的价格。通过计算月末价格的百分比变化，我们得到了月度收益。在*步骤 6*中，我们还将指数的格式更改为`%Y-%m`（例如，`2000-12`），因为
    Fama-French 因子包含的是这种格式的日期。然后，在*步骤 7*中，我们将两个数据集合并。
- en: Finally, in *Step 8*, we ran the regression using the formula notation—we do
    not need to manually add an intercept when doing so. One thing worth mentioning
    is that the coefficient by the MKT variable will not be equal to the CAPM’s beta,
    as there are also other factors in the model, and the factors’ influence on the
    excess returns is distributed differently.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在*步骤 8*中，我们使用公式符号运行了回归——在执行时，我们不需要手动添加截距。值得一提的是，MKT 变量的系数将不等于 CAPM 的贝塔，因为模型中还有其他因子，且这些因子对超额收益的影响分布不同。
- en: There’s more...
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'We can use the following snippet to see what datasets from the Fama-French
    category are available for download using `pandas_datareader`. For brevity, we
    only display 5 of the approximately 300 available datasets:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用以下代码片段查看哪些来自 Fama-French 类别的数据集可供通过`pandas_datareader`下载。为了简洁起见，我们只展示了大约
    300 个可用数据集中的 5 个：
- en: '[PRE23]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Running the snippet returns the following list:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 运行代码片段会返回以下列表：
- en: '[PRE24]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: In the previous edition of the book, we also showed how to directly download
    the CSV files from Prof. French’s website using simple Bash commands from within
    a Jupyter notebook. You can find the code explaining how to do that in the accompanying
    notebook.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的前一版中，我们还展示了如何使用简单的 Bash 命令直接从 French 教授的网站下载 CSV 文件，并在 Jupyter notebook
    中执行。您可以在随附的 notebook 中找到解释如何操作的代码。
- en: See also
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: 'Additional resources:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 其他资源：
- en: For details on how all the factors were calculated, please refer to Prof. French’s
    website at [http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_factors.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_factors.html)
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有关所有因子是如何计算的详细信息，请参考 French 教授的网站：[http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_factors.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_factors.html)
- en: 'Fama, E. F., and French, K. R., “*Common risk factors in the returns on stocks
    and bonds*,” Journal of Financial Economics, 33, 1 (1993): 3-56'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fama, E. F. 和 French, K. R.，“*股票和债券收益中的共同风险因素*”，《金融经济学期刊》，33卷，1期（1993年）：3-56
- en: Estimating the rolling three-factor model on a portfolio of assets
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在资产组合上估计滚动三因子模型
- en: In this recipe, we learn how to estimate the three-factor model in a rolling
    fashion. What we mean by rolling is that we always consider an estimation window
    of a constant size (60 months, in this case) and roll it through the entire dataset,
    one period at a time. A potential reason for doing such an experiment is to test
    the stability of the results. Alternatively, we could also use an expanding window
    for this exercise.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们学习如何以滚动的方式估算三因子模型。我们所说的滚动是指，我们始终考虑一个固定大小的估算窗口（在本例中为 60 个月），并将其按期滚动整个数据集。进行此类实验的一个潜在原因是为了测试结果的稳定性。或者，我们也可以使用扩展窗口进行此实验。
- en: 'In contrast to the previous recipes, this time, we use portfolio returns instead
    of a single asset. To keep things simple, we assume that our allocation strategy
    is to have an equal share of the total portfolio’s value in each of the following
    stocks: Amazon, Google, Apple, and Microsoft. For this experiment, we use stock
    prices from the years 2010 to 2020.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 与之前的食谱不同，这一次我们使用的是投资组合回报，而不是单一资产。为了简化，我们假设我们的配置策略是将投资组合总价值的相等份额分配到以下股票：亚马逊、谷歌、苹果和微软。对于这项实验，我们使用的是
    2010 到 2020 年的股票价格。
- en: How to do it...
  id: totrans-164
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Follow these steps to implement the rolling three-factor model in Python:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤在 Python 中实现滚动三因子模型：
- en: 'Import the libraries:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入库：
- en: '[PRE25]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Define the parameters:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义参数：
- en: '[PRE26]'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Download the factor-related data:'
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载因子相关数据：
- en: '[PRE27]'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Download the prices of risky assets from Yahoo Finance:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Yahoo Finance 下载风险资产的价格：
- en: '[PRE28]'
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Calculate the monthly returns on the risky assets:'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算风险资产的月度回报：
- en: '[PRE29]'
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Calculate the portfolio returns:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算投资组合回报：
- en: '[PRE30]'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Merge the datasets:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 合并数据集：
- en: '[PRE31]'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'Define a function for the rolling *n*-factor model:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义一个滚动*n*因子模型的函数：
- en: '[PRE32]'
  id: totrans-181
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: For a version with a docstring explaining the input/output, please refer to
    this book’s GitHub repository.
  id: totrans-182
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如需带有输入/输出说明的版本，请参考本书的 GitHub 仓库。
- en: 'Estimate the rolling three-factor model and plot the results:'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 估算滚动三因子模型并绘制结果：
- en: '[PRE33]'
  id: totrans-184
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Executing the code results in the following plot:'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 执行代码会生成以下图表：
- en: '![](../Images/B18112_08_06.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_06.png)'
- en: 'Figure 8.6: The coefficients of the rolling three-factor model'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.6：滚动三因子模型的系数
- en: 'By inspecting the preceding plot, we can see the following:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 通过检查前面的图表，我们可以看到以下内容：
- en: The intercept is almost constant and very close to 0.
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 截距几乎保持不变，且非常接近 0。
- en: There is some variability in the factors, but no sudden reversals or unexpected
    jumps.
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 因子之间存在一定的波动性，但没有突如其来的反转或意外的跳跃。
- en: How it works...
  id: totrans-191
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *Steps 3* and *4*, we downloaded data using `pandas_datareader` and `yfinance`.
    This is very similar to what we did in the *Estimating the Fama-French three-factor
    model* recipe, so at this point we will not go into too much detail about this.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 3*和*步骤 4*中，我们使用`pandas_datareader`和`yfinance`下载了数据。这与我们在*估计 Fama-French
    三因子模型*的食谱中做的非常相似，因此在这一点上我们不会详细讲解。
- en: In *Step 6*, we calculated the portfolio returns as a weighted average of the
    returns of the portfolio constituents (calculated in *Step 5*). This is possible
    as we are working with simple returns—for more details, please refer to the *Converting
    prices to returns* recipe in *Chapter 2*, *Data Preprocessing*. Bear in mind that
    this simple approach assumes that, at the end of each month, we have exactly the
    same asset allocation (as indicated by the weights). This can be achieved with
    **portfolio rebalancing**, that is, adjusting the allocation after a specified
    period of time to always match the intended weights’ distribution.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 6*中，我们将投资组合回报计算为投资组合成分（在*步骤 5*中计算）的加权平均值。这是可能的，因为我们正在使用简单回报——更多细节请参考*第
    2 章*《数据预处理》中的*将价格转换为回报*食谱。请记住，这种简单的方法假设在每个月结束时，我们的资产配置始终与所指示的权重相同。这个可以通过**投资组合再平衡**来实现，即在指定时间段后调整配置，以始终匹配预定的权重分布。
- en: Afterward, we merged the two datasets in *Step 7*. In *Step 8*, we defined a
    function for estimating the *n*-factor model using a rolling window. The main
    idea is to loop over the DataFrame we prepared in previous steps and for each
    month, estimate the Fama-French model using the last 5 years’ worth of data (60
    months). By appropriately slicing the input DataFrame, we made sure that we only
    estimate the model from the 60th month onward, to make sure we always have a full
    window of observations.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 之后，我们在*第7步*中合并了这两个数据集。在*第8步*中，我们定义了一个函数，用于使用滚动窗口估算*n*因子模型。其主要思想是遍历我们在前面步骤中准备的DataFrame，并为每个月估算法马-法rench模型，使用过去五年的数据（60个月）。通过适当地切片输入的DataFrame，我们确保从第60个月开始估算模型，以确保我们始终有一个完整的观察窗口。
- en: Proper software engineering best practices would suggest writing some assertions
    to make sure the types of the inputs are as we intended them to be, or that the
    input DataFrame contains the necessary columns. However, we have not done this
    here for brevity.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 正确的软件工程最佳实践建议编写一些断言，以确保输入的类型符合我们的预期，或者输入的DataFrame包含必要的列。然而，为了简洁起见，我们在此没有进行这些操作。
- en: Finally, we applied the defined function to the prepared DataFrame and plotted
    the results.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将定义的函数应用于准备好的DataFrame，并绘制了结果。
- en: Estimating the four- and five-factor models
  id: totrans-197
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 估算四因子和五因子模型
- en: In this recipe, we implement two extensions of the Fama-French three-factor
    model.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们实现了法马-法rench三因子模型的两个扩展。
- en: First, **Carhart’s four-factor model:** The underlying assumption of this extension
    is that, within a short period of time, a winner stock will remain a winner, while
    a loser will remain a loser. An example of a criterion for classifying winners
    and losers could be the last 12-month cumulative total returns. After identifying
    the two groups, we long the winners and short the losers within a certain holding
    period.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，**Carhart的四因子模型**：该扩展的基本假设是，在短时间内，赢家股票会继续是赢家，而输家股票会继续是输家。一个用来分类赢家和输家的标准可能是过去12个月的累计总回报。确定两组之后，我们在一定的持有期内做多赢家，做空输家。
- en: '**The momentum factor** (WML; Winners Minus Losers) measures the excess returns
    of the winner stocks over the loser stocks in the past 12 months (please refer
    to the *See also* section of this recipe for references on the calculations of
    the momentum factor).'
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: '**动量因子**（WML；赢家减去输家）衡量过去12个月赢家股票相对于输家股票的超额回报（有关动量因子计算的参考，请参见本食谱中的*另见*部分）。'
- en: 'The four-factor model can be expressed as follows:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 四因子模型可以表达为如下：
- en: '![](../Images/B18112_08_015.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_015.png)'
- en: 'The second extension is **Fama-French’s five-factor model**.Fama and French
    expanded their three-factor model by adding two factors:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个扩展是**法马-法rench的五因子模型**。法马和法rench通过添加两个因子扩展了他们的三因子模型：
- en: '**The profitability factor** (RMW; Robust Minus Weak) measures the excess returns
    of companies with high profit margins (robust profitability) over those with lower
    profits (weak profitability).'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**盈利能力因子**（RMW；强盈利减弱盈利）衡量高利润率（强盈利能力）公司的超额回报，相对于那些利润较低（弱盈利能力）的公司。'
- en: '**The investment factor** (CMA; Conservative Minus Aggressive) measures the
    excess returns of firms with low investment policies (conservative) over those
    investing more (aggressive).'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**投资因子**（CMA；保守投资减激进投资）衡量投资政策保守（低投资）的公司相对于那些投资更多（激进投资）公司的超额回报。'
- en: 'The five-factor model can be expressed as follows:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 五因子模型可以表达为如下：
- en: '![](../Images/B18112_08_016.png)'
  id: totrans-207
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_016.png)'
- en: Like in all factor models, if the exposure to the risk factors captures all
    possible variations in expected returns, the intercept (![](../Images/B18112_08_017.png))
    for all the assets/portfolios should be equal to zero.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 与所有因子模型一样，如果风险因子的暴露捕捉到所有预期回报的可能变化，那么所有资产/投资组合的截距（![](../Images/B18112_08_017.png)）应该等于零。
- en: In this recipe, we explain monthly returns on Amazon from 2016 to 2020 with
    the four- and five-factor models.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们使用四因子和五因子模型解释了2016年至2020年期间亚马逊的月度回报。
- en: How to do it...
  id: totrans-210
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Follow these steps to implement the four- and five-factor models in Python:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤在 Python 中实现四因子和五因子模型：
- en: 'Import the libraries:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入库：
- en: '[PRE34]'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Specify the risky asset and the time horizon:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定风险资产和时间范围：
- en: '[PRE35]'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Download the risk factors from Prof. French’s website:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从法马教授的官方网站下载风险因子：
- en: '[PRE36]'
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Download the data of the risky asset from Yahoo Finance:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Yahoo Finance 下载风险资产的数据：
- en: '[PRE37]'
  id: totrans-219
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'Calculate the monthly returns:'
  id: totrans-220
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算月度回报：
- en: '[PRE38]'
  id: totrans-221
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE38]'
- en: 'Merge the datasets for the four-factor model:'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 合并四因子模型的数据集：
- en: '[PRE39]'
  id: totrans-223
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE39]'
- en: 'Merge the datasets for the five-factor model:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 合并五因子模型的数据集：
- en: '[PRE40]'
  id: totrans-225
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Estimate the four-factor model:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 估计四因子模型：
- en: '[PRE41]'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE41]'
- en: '*Figure 8.7* shows the results:'
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*图8.7* 显示了结果：'
- en: '![](../Images/B18112_08_07.png)'
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_07.png)'
- en: 'Figure 8.7: The summary of the estimated four-factor model'
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图8.7：四因子模型估计结果的总结
- en: 'Estimate the five-factor model:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 估计五因子模型：
- en: '[PRE42]'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE42]'
- en: '*Figure 8.8* shows the results:'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*图8.8* 显示了结果：'
- en: '![](../Images/B18112_08_08.png)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_08.png)'
- en: 'Figure 8.8: The summary of the estimated five-factor model'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.8：五因子模型估计结果的总结
- en: 'According to the five-factor model, Amazon’s excess returns are negatively
    exposed to most of the factors (all but the market factor). Here, we present an
    example of the interpretation of the coefficients: an increase by 1 percentage
    point in the market factor results in an increase of 0.015 p.p. In other words,
    for a 1% return by the market factor, we can expect our portfolio (Amazon’s stock)
    to return 1.5117 * 1% in excess of the risk-free rate.'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 根据五因子模型，亚马逊的超额收益与大多数因素（除了市场因素）呈负相关。这里，我们提供了一个系数解释的例子：市场因素增加1个百分点，导致超额收益增加0.015个百分点。换句话说，对于市场因素的1%收益，我们可以预期我们的投资组合（亚马逊股票）将超过无风险利率回报1.5117
    * 1%。
- en: Similar to the three-factor model, if the five-factor model fully explains the
    excess stock returns, the estimated intercept should be statistically indistinguishable
    from zero (which is the case for the considered problem).
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于三因子模型，如果五因子模型完全解释了超额股票收益，估计的截距应该在统计上与零无显著差异（对于所考虑的问题来说，确实是这种情况）。
- en: How it works...
  id: totrans-238
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: In *Step 2*, we defined the parameters—the ticker of the considered stock and
    timeframes.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤2*中，我们定义了参数——所考虑的股票的代码和时间范围。
- en: In *Step 3*, we downloaded the necessary datasets using `pandas_datareader`,
    which provides us with a convenient way of downloading the risk factor-related
    data without manually downloading the CSV files. For more information on this
    process, please refer to the *Estimating the Fama-French three-factor model* recipe.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤3*中，我们使用`pandas_datareader`下载了所需的数据集，它为我们提供了一种方便的方式来下载与风险因子相关的数据，而无需手动下载CSV文件。有关此过程的更多信息，请参阅*估计法马-法兰西三因子模型*的食谱。
- en: In *Steps 4* and *5*, we downloaded Amazon’s stock prices and calculated the
    monthly returns using the previously explained methodology.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤4*和*步骤5*中，我们下载了亚马逊的股票价格，并使用先前解释的方法计算了月度回报。
- en: In *Steps 6* and *7*, we joined all the datasets, renamed the columns, and calculated
    the excess returns. When using the `join` method without specifying what we want
    to join on (the `on` argument), the default is the index of the DataFrames.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤6*和*步骤7*中，我们合并了所有数据集，重命名了列，并计算了超额收益。当使用`join`方法而不指定连接条件（即`on`参数）时，默认情况下使用DataFrame的索引进行连接。
- en: This way, we prepared all the necessary inputs for the four- and five-factor
    models. We also had to divide all the data we downloaded from Prof. French’s website
    by 100 to arrive at the correct scale.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 这样，我们准备了四因子和五因子模型所需的所有输入。我们还需要将从法兰西教授网站下载的所有数据除以100，以得到正确的尺度。
- en: SMB factor in the five-factor dataset is calculated differently compared to
    how it is in the three-factor dataset. For more details, please refer to the link
    in the *See also* section of this recipe.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 五因子数据集中的SMB因子计算方法与三因子数据集中的计算方法不同。有关更多详细信息，请参阅本食谱中“另请参见”部分的链接。
- en: In *Step 8* and *Step 9*, we estimated the models using the functional form
    of OLS regression from the `statsmodels` library. The functional form automatically
    adds the intercept to the regression equation.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤8*和*步骤9*中，我们使用`statsmodels`库中的OLS回归的函数形式来估计模型。函数形式会自动将截距添加到回归方程中。
- en: See also
  id: totrans-246
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参见
- en: 'For details on the calculation of the factors, please refer to the following
    links:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 有关因子计算的详细信息，请参见以下链接：
- en: 'Momentum factor: [https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/det_mom_factor.html](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/det_mom_factor.html)'
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 动量因子： [https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/det_mom_factor.html](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/det_mom_factor.html)
- en: 'Five-factor model: [https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_5_factors_2x3.html](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_5_factors_2x3.html)'
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 五因子模型： [https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_5_factors_2x3.html](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/Data_Library/f-f_5_factors_2x3.html)
- en: 'For papers introducing the four- and five-factor models, please refer to the
    following links:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 对于介绍四因子和五因子模型的论文，请参考以下链接：
- en: 'Carhart, M. M. (1997), “*On Persistence in Mutual Fund Performance*,” The Journal
    of Finance, 52, 1 (1997): 57-82'
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Carhart, M. M. (1997), “*On Persistence in Mutual Fund Performance*,” The Journal
    of Finance, 52, 1 (1997): 57-82'
- en: 'Fama, E. F. and French, K. R. 2015\. “A five-factor asset pricing model,” Journal
    of Financial Economics, 116(1): 1-22: [https://doi.org/10.1016/j.jfineco.2014.10.010](https://doi.org/10.1016/j.jfineco.2014.10.010)'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Fama, E. F. 和 French, K. R. 2015年. “五因子资产定价模型,”《金融经济学杂志》，116(1): 1-22：[https://doi.org/10.1016/j.jfineco.2014.10.010](https://doi.org/10.1016/j.jfineco.2014.10.010)'
- en: Estimating cross-sectional factor models using the Fama-MacBeth regression
  id: totrans-253
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Fama-MacBeth回归估算横截面因子模型
- en: In the previous recipes, we have covered estimating different factor models
    using a single asset or portfolio as the dependent variable. However, we can estimate
    the factor models for multiple assets at once, using cross-section (panel) data.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的步骤中，我们已经涵盖了使用单一资产或投资组合作为因变量来估算不同因子模型。然而，我们也可以使用横截面（面板）数据来一次估算多个资产的因子模型。
- en: 'Following this approach, we can:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 按照这种方法，我们可以：
- en: Estimate the portfolios’ exposure to the risk factors and learn how much those
    factors drive the portfolios’ returns
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 估算投资组合对风险因素的敞口，并了解这些因素对投资组合回报的影响
- en: Understand how much taking a given risk is worth by knowing the premium that
    the market pays for the exposure to a certain factor
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过了解市场为某一因子的暴露支付的溢价，理解承担特定风险的价值
- en: Knowing the risk premiums, we can then estimate the returns for any portfolio
    provided we can approximate that portfolio’s exposure to the risk factors.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 知道风险溢价后，只要我们能够近似该投资组合对风险因素的敞口，就可以估算任何投资组合的回报。
- en: 'While estimating cross-sectional regression, we can encounter multiple problems
    due to the fact that some assumptions of linear regression might not hold. We
    might encounter the following:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 在估计横截面回归时，由于某些线性回归假设可能不成立，我们可能会遇到多种问题。可能遇到的问题包括：
- en: Heteroskedasticity and serial correlation, leading to the covariation of residuals
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异方差性和序列相关性，导致残差的协方差
- en: Multicollinearity
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多重共线性
- en: Measurement errors
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测量误差
- en: To solve those issues, we can use a technique called the **Fama-MacBeth regression**,
    which is a two-step procedure specifically designed to estimate the premiums rewarded
    by the market for the exposure to certain risk factors.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 为了解决这些问题，我们可以使用一种叫做**Fama-MacBeth回归**的技术，这是一种专门设计的两步法，用于估计市场对某些风险因素暴露所奖励的溢价。
- en: 'The steps are as follows:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 步骤如下：
- en: 'Obtain the factor loadings by estimating *N* (the number of portfolios/assets)
    time-series regressions of excess returns on the factors:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过估计*N*（投资组合/资产的数量）次序列回归，获取因子载荷：
- en: '![](../Images/B18112_08_018.png)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_018.png)'
- en: 'Obtain the risk premiums by estimating *T* (the number of periods) cross-sectional
    regressions, one for each period:'
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过估算*T*（时期的数量）横截面回归，每个时期一个，获得风险溢价：
- en: '![](../Images/B18112_08_019.png)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_019.png)'
- en: In this recipe, we estimate the Fama-MacBeth regression using five risk factors
    and the returns of 12 industry portfolios, also available on Prof. French’s website.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 在本步骤中，我们使用五个风险因子和12个行业投资组合的回报来估算Fama-MacBeth回归，数据也可以在法兰西教授的网站上获得。
- en: How to do it…
  id: totrans-270
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Execute the following steps to estimate the Fama-MacBeth regression:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来估算Fama-MacBeth回归：
- en: 'Import the libraries:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入库：
- en: '[PRE43]'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE43]'
- en: 'Specify the time horizon:'
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定时间范围：
- en: '[PRE44]'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE44]'
- en: 'Download and adjust the risk factors from Prof. French’s website:'
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从法兰西教授的网站下载并调整风险因素：
- en: '[PRE45]'
  id: totrans-277
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE45]'
- en: 'Download and adjust the returns of 12 Industry Portfolios from Prof. French’s
    website:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从法兰西教授的网站下载并调整12个行业投资组合的回报：
- en: '[PRE46]'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE46]'
- en: 'Drop the risk-free rate from the factor dataset:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从因子数据集中去除无风险利率：
- en: '[PRE47]'
  id: totrans-281
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE47]'
- en: 'Estimate the Fama-MacBeth regression and print the summary:'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 估算Fama-MacBeth回归并打印摘要：
- en: '[PRE48]'
  id: totrans-283
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE48]'
- en: 'Running the snippet generates the following summary:'
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 运行代码片段将生成以下摘要：
- en: '![](../Images/B18112_08_09.png)'
  id: totrans-285
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_09.png)'
- en: 'Figure 8.9: The results of the Fama-MacBeth regression'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.9：Fama-MacBeth回归的结果
- en: The results in the table are average risk premiums from the *T* cross-sectional
    regressions.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 表中的结果是来自*T*横截面回归的平均风险溢价。
- en: 'We can also print the full summary (containing the risk premiums and each portfolio’s
    factor loadings). To do so, we need to run the following line of code:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以打印完整的总结（包括风险溢价和每个投资组合的因子负荷）。为此，我们需要运行以下代码：
- en: '[PRE49]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: How it works…
  id: totrans-290
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: In the first two steps, we imported the required libraries and defined the start
    and end date of our exercise. In total, we will be using 11 years of monthly data,
    resulting in 132 observations of the variables (denoted as *T* ). For the end
    date, we had to specify `2020-12`. Using `2020` alone would result in the downloaded
    datasets ending with January 2020.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 在前两步中，我们导入了所需的库，并定义了我们的练习的开始和结束日期。总共，我们将使用 11 年的月度数据，共计 132 个变量观察值（记作*T*）。对于结束日期，我们必须指定`2020-12`。仅使用`2020`将导致下载的数据集在
    2020 年 1 月结束。
- en: In *Step 3*, we downloaded the five-factor data set using `pandas_datareader`.
    We adjusted the values to express percentages by dividing them by 100\.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 3*中，我们使用`pandas_datareader`下载了五因子数据集。我们通过将数值除以 100 来调整这些值，以表示百分比。
- en: In *Step 4*, we downloaded the returns on 12 Industry Portfolios from Prof.
    French’s website (please see the link in the *See also* section for more details
    on the dataset). We have also adjusted the values by dividing them by 100 and
    calculated the excess returns by subtracting the risk-free rate (available at
    the factor dataset) from each column of the portfolio dataset. We could do that
    easily using the `sub` method as the time periods are an exact match.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 4*中，我们从法兰西教授的网站下载了 12 个行业投资组合的回报数据（更多数据集详情请参见*另见*部分中的链接）。我们还通过将数值除以 100
    来调整这些值，并通过从每个投资组合数据集的列中减去无风险利率（该数据可在因子数据集中找到）来计算超额回报。由于时间段完全匹配，我们可以轻松地使用`sub`方法进行计算。
- en: In *Step 5*, we dropped the risk-free rate, as we will not be using it anymore
    and it will be easier to estimate the Fama-MacBeth regression model with no redundant
    columns in the DataFrames.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 在*步骤 5*中，我们去除了无风险利率，因为我们将不再使用它，而且没有冗余列的数据框（DataFrame）将使得估计 Fama-MacBeth 回归模型更加简便。
- en: In the last step, we instantiated an object of the `LinearFactorModel` class
    and provided both datasets as arguments. Then, we used the `fit` method to estimate
    the model. Lastly, we printed the summary.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 在最后一步中，我们实例化了`LinearFactorModel`类的对象，并将两个数据集作为参数提供。然后，我们使用`fit`方法估计了模型。最后，我们打印了总结。
- en: You might notice a small difference between `linearmodels` and `scikit-learn`.
    In the latter, we provide the data while calling the `fit` method. With `linearmodels`,
    we had to provide the data while creating an instance of the `LinearFactorModel`
    class.
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会注意到`linearmodels`和`scikit-learn`之间存在一些小差异。在后者中，我们在调用`fit`方法时提供数据。而在`linearmodels`中，我们必须在创建`LinearFactorModel`类的实例时提供数据。
- en: 'In `linearmodels`, you can also use the formula notation (as we have done when
    estimating the factor models using `statsmodels`). To do so, we need to use the
    `from_formula` method. An example could look as follows: `LinearFactorModel.from_formula(formula,
    data)`, where `formula` is the string containing the formula and `data` is an
    object containing both the portfolios/assets and the factors.'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 在`linearmodels`中，你还可以使用公式符号（就像我们在使用`statsmodels`估计因子模型时做的那样）。为此，我们需要使用`from_formula`方法。一个例子可能如下所示：`LinearFactorModel.from_formula(formula,
    data)`，其中`formula`是包含公式的字符串，而`data`是一个包含投资组合/资产和因子的对象。
- en: There’s more…
  id: totrans-298
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多……
- en: We have already estimated the Fama-MacBeth regression using the `linearmodels`
    library. However, it might strengthen our understanding of the procedure to carry
    out the two steps manually.
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经使用`linearmodels`库估计了 Fama-MacBeth 回归。然而，亲自手动执行这两个步骤可能有助于加深我们对该过程的理解。
- en: 'Execute the following steps to carry out the two steps of the Fama-MacBeth
    procedure separately:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤，将 Fama-MacBeth 程序的两个步骤分别进行：
- en: 'Import the libraries:'
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入库：
- en: '[PRE50]'
  id: totrans-302
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE50]'
- en: 'For the first step of the Fama-MacBeth regression, estimate the factor loadings:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 Fama-MacBeth 回归的第一步，估计因子负荷：
- en: '[PRE51]'
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE51]'
- en: 'Store the factor loadings in a DataFrame:'
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将因子负荷存储在数据框中：
- en: '[PRE52]'
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE52]'
- en: 'Running the code generates the following table containing the factor loadings:'
  id: totrans-307
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 运行代码会生成包含因子负荷的以下表格：
- en: '![](../Images/B18112_08_10.png)'
  id: totrans-308
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_10.png)'
- en: 'Figure 8.10: First step of the Fama-MacBeth regression—the estimated factor
    loadings'
  id: totrans-309
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 8.10：Fama-MacBeth 回归的第一步——估计的因子负荷
- en: We can compare those numbers to the output of the full summary from the `linearmodels`
    library.
  id: totrans-310
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们可以将这些数字与`linearmodels`库的完整总结的输出进行比较。
- en: 'For the second step of the Fama-MacBeth regression, estimate the risk premiums:'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于 Fama-MacBeth 回归的第二步，估计风险溢价：
- en: '[PRE53]'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE53]'
- en: 'Store the risk premiums in a DataFrame:'
  id: totrans-313
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将风险溢价存储在 DataFrame 中：
- en: '[PRE54]'
  id: totrans-314
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'Running the code generates the following table containing the risk premiums
    over time:'
  id: totrans-315
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 运行代码会生成以下包含风险溢价随时间变化的表格：
- en: '![](../Images/B18112_08_11.png)'
  id: totrans-316
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![](../Images/B18112_08_11.png)'
- en: 'Figure 8.11: Second step of the Fama-MacBeth regression—the estimated risk
    premiums over time'
  id: totrans-317
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 8.11：Fama-MacBeth 回归的第二步——随时间变化的估计风险溢价
- en: 'Calculate the average risk premiums:'
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 计算平均风险溢价：
- en: '[PRE55]'
  id: totrans-319
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Running the snippet returns:'
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 运行代码片段返回：
- en: '[PRE56]'
  id: totrans-321
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE56]'
- en: The risk premiums calculated above match the ones obtained from the `linearmodels`
    library.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 上述计算的风险溢价与从 `linearmodels` 库中得到的结果相匹配。
- en: See also
  id: totrans-323
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: 'Documentation of the `linearmodels` library can be a good resource for learning
    about panel regression models (and not only that—it also contains utilities for
    instrumental variables models and so on) and their implementation in Python: [https://bashtage.github.io/linearmodels/index.html](https://bashtage.github.io/linearmodels/index.html)'
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`linearmodels` 库的文档是学习面板回归模型的一个很好的资源（不仅仅是这些，它还包含工具来处理工具变量模型等），并展示了如何在 Python
    中实现这些模型：[https://bashtage.github.io/linearmodels/index.html](https://bashtage.github.io/linearmodels/index.html)'
- en: 'Description of the 12 Industry Portfolios dataset: [https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library/det_12_ind_port.html](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library/det_12_ind_port.html)'
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 12个行业投资组合数据集的描述：[https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library/det_12_ind_port.html](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library/det_12_ind_port.html)
- en: 'Further reading about the Fama-MacBeth procedure:'
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 关于 Fama-MacBeth 程序的进一步阅读：
- en: 'Fama, E. F., and MacBeth, J. D., “*Risk, return, and equilibrium: Empirical
    tests*,” Journal of Political Economy, 81, 3 (1973): 607-636'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Fama, E. F., 和 MacBeth, J. D., “*风险、回报与均衡：实证检验*,” 《政治经济学杂志》, 81, 3 (1973):
    607-636'
- en: 'Fama, E. F., “*Market efficiency, long-term returns, and behavioral finance*,”
    Journal of Financial Economics, 49, 3 (1998): 283-306'
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Fama, E. F., “*市场效率、长期收益与行为金融*,” 《金融经济学杂志》, 49, 3 (1998): 283-306'
- en: Summary
  id: totrans-329
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have constructed some of the most popular factor models.
    We have started with the simplest one-factor model (the CAPM) and then explained
    how to approach more advanced three-, four-, and five-factor models. We have also
    described how we can use the Fama-MacBeth regression to estimate the factor models
    for multiple assets with appropriate cross-section (panel) data.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们构建了一些最流行的因子模型。我们从最简单的单因子模型（CAPM）开始，然后解释了如何处理更复杂的三因子、四因子和五因子模型。我们还描述了如何使用
    Fama-MacBeth 回归估计多资产的因子模型，并使用适当的横截面（面板）数据。
