- en: Chapter 7. Multifactor Models and Performance Measures
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第7章. 多因子模型与绩效衡量
- en: 'In [Chapter 6](ch06.html "Chapter 6. Capital Asset Pricing Model"), *Capital
    Asset Pricing Model*, we discussed the simplest one-factor linear model: CAPM.
    As mentioned, this one-factor linear model serve as a benchmark for more advanced
    and complex models. In this chapter, we will focus on the famous Fama-French three-factor
    model, Fama-French-Carhart four-factor model, and Fama-French five-factor model.
    After understanding those models, readers should be able to develop their own
    multifactor linear models, such as by adding **Gross Domestic Product** (**GDP**),
    **Consumer Price Index** (**CPI**), a business cycle indicator or other variables
    as an extra factor(s). In addition, we will discuss performance measures, such
    as the Sharpe ratio, Treynor ratio, and Jensen''s alpha. In particular, the following
    topics will be covered in this chapter:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第6章](ch06.html "第6章. 资本资产定价模型")，*资本资产定价模型*中，我们讨论了最简单的单因子线性模型：CAPM。如前所述，这个单因子线性模型作为更高级和复杂模型的基准。在本章中，我们将重点讨论著名的Fama-French三因子模型、Fama-French-Carhart四因子模型和Fama-French五因子模型。理解这些模型后，读者应该能够开发自己的多因子线性模型，例如通过添加**国内生产总值**（**GDP**）、**消费者价格指数**（**CPI**）、商业周期指标或其他变量作为额外的因子。此外，我们还将讨论绩效衡量标准，如夏普比率、特雷诺比率和詹森阿尔法。具体来说，本章将涵盖以下主题：
- en: Introduction to the Fama-French three-factor model
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fama-French三因子模型介绍
- en: Fama-French-Carhart four-factor model
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fama-French-Carhart四因子模型
- en: Fama-French five-factor model
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Fama-French五因子模型
- en: Other multiplefactor models
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他多因子模型
- en: Sharpe ratio and Treynor ratio
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 夏普比率和特雷诺比率
- en: Lower partial standard deviation and Sortino ratio
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下偏标准差和Sortino比率
- en: Jensen's alpha
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 詹森阿尔法
- en: How to merge different datasets
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何合并不同的数据集
- en: Introduction to the Fama-French three-factor model
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Fama-French三因子模型介绍
- en: 'Before discussing the Fama-French three-factor model and other models, let''s
    look at a general equation for a three-factor linear model:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在讨论Fama-French三因子模型和其他模型之前，我们先看一下三因子线性模型的通用方程式：
- en: '![Introduction to the Fama-French three-factor model](img/B06175_07_01.jpg)'
  id: totrans-12
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型介绍](img/B06175_07_01.jpg)'
- en: 'Here, *y* is the dependent variable, *α* is the intercept, *x1*, *x2*, and
    *x3* are three independent variables, *β1*, *β2* and *β3* are three coefficients,
    and ε is a random factor. In other words, we try to use three independent variables
    to explain one dependent variable. The same as a one-factor linear model, the
    graphical presentation of this three-factor linear model is a straight line, in
    a four-dimensional space, and the power of each independent variable is a unit
    as well. Here, we will use two simple examples to show how to run multifactor
    linear regression. For the first example, we have the following code. The values
    have no specific meaning and readers could enter their own values as well:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*y*是因变量，*α*是截距，*x1*、*x2*和*x3*是三个自变量，*β1*、*β2*和*β3*是三个系数，ε是随机因素。换句话说，我们尝试用三个自变量来解释一个因变量。与单因子线性模型相同，这个三因子线性模型的图形表示是一条直线，位于四维空间中，每个自变量的权重也是一个单位。在这里，我们将通过两个简单的例子来展示如何进行多因子线性回归。第一个例子中，我们有以下代码。数值没有特定的含义，读者也可以输入自己的数值：
- en: '[PRE0]'
  id: totrans-14
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'In the preceding program, the `pandas.stats.api.ols()` function is applied.
    **OLS** stands for **Ordinary Least Squares**. For more information about the
    OLS model, we could use the `help()` function; see the following two lines of
    code. For brevity, the output is not shown here:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的程序中，应用了`pandas.stats.api.ols()`函数。**OLS**代表**最小二乘法**。有关OLS模型的更多信息，我们可以使用`help()`函数；请参阅以下两行代码。为了简洁起见，输出结果在此未显示：
- en: '[PRE1]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The pandas DataFrame is used to construct our dataset. Readers should pay attention
    to the structure of {`"y":y`, `"x1":x1`, `''x2'':x2`, `''x3'':x3`}. It has the
    data format of a dictionary. The result of running the regression is shown here:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: pandas DataFrame用于构建我们的数据集。读者应注意{`"y":y`，`"x1":x1`，`'x2':x2`，`'x3':x3`}的结构。它采用字典的数据格式。运行回归的结果如下所示：
- en: '![Introduction to the Fama-French three-factor model](img/B06175_07_22.jpg)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型介绍](img/B06175_07_22.jpg)'
- en: 'From the output, the three-factor model is listed first: `y` is against three
    independent or explainable variables of `x1`, `x2`, and `x3`. The number of observations
    is 5, while the degree of freedom is 4\. The value of R2 is 0.96 while the adjusted
    R2 is 0.84\. The R2 value reflects the percentage of variations in y could be
    explained by `x1`, `x2`, and `x3`. Since the adjusted R2 considers the impact
    of the number of independent variables, it is more meaningful. **RMSE** stands
    for **Mean Standard Square Error**. The smaller this value, the better our model.
    The F-stat and the p-value reflect the goodness of our linear model. The F-value
    reflects the quality of the whole model. The F-value should be compared with its
    critical F-value, which in turn depends on three input variables: confidence level,
    degree of freedom for the numerator, and degree of freedom for the denominator.
    The `scipy.stats.f.ppf()` function could be applied to find out the critical F-value;
    see the following code:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 从输出结果来看，三因子模型首先列出：`y` 对应三个独立或可解释变量 `x1`、`x2` 和 `x3`。观察次数为 5，而自由度为 4。R2 的值为 0.96，调整后的
    R2 为 0.84。R2 值反映了 `x1`、`x2` 和 `x3` 可以解释的 `y` 变动的百分比。由于调整后的 R2 考虑了独立变量的数量影响，因此更具意义。**RMSE**
    代表 **均方根误差**，这个值越小，我们的模型越好。F 统计量和 p 值反映了我们线性模型的优度。F 值反映了整个模型的质量。F 值应与其临界 F 值进行比较，临界
    F 值又取决于三个输入变量：置信水平、分子的自由度和分母的自由度。可以使用 `scipy.stats.f.ppf()` 函数来计算临界 F 值；请参见以下代码：
- en: '[PRE2]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The confidence level is equal to 1 minus alpha, that is, 95% in this case. The
    higher the confidence level, the more reliable the result, such as 99% instead
    of 95%. The most-used confidence levels are 90%, 95%, and 99%. `dfNumeratro` (`dfDenominator`)
    is the degree of freedom for the numerator (denominator), which depends on the
    simple sizes. From the preceding result of OLS regression, we know that those
    two values are 3 and 1.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 置信水平等于 1 减去 alpha，即在此案例中为 95%。置信水平越高，结果越可靠，例如 99% 而非 95%。最常用的置信水平有 90%、95% 和
    99%。`dfNumerator`（`dfDenominator`）是分子（分母）的自由度，这取决于样本大小。从前面的 OLS 回归结果来看，我们知道这两个值分别是
    3 和 1。
- en: From the preceding values, *F=8.1 < 215.7* (critical F-value), we should accept
    the null hypothesis that all coefficients are zero, that is, the quality of the
    model is not good. On the other hand, a P-value of 0.25 is way higher the critical
    value of 0.05\. It also means that we should accept the null hypothesis. This
    makes sense since we have entered those values without any meanings.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 根据前面的值，*F=8.1 < 215.7*（临界 F 值），我们应当接受原假设，即所有系数为零，也就是说模型的质量不佳。另一方面，P 值为 0.25，远高于临界值
    0.05。这也意味着我们应该接受原假设。这是合理的，因为我们输入的这些值并没有实际意义。
- en: 'For the second example, one CSV file related to IBM, downloaded from Yahoo!
    Finance, is used and the dataset can be downloaded at [http://canisius.edu/~yany/data/ibm.csv](http://canisius.edu/~yany/data/ibm.csv).
    Alternatively, readers can go to [http://finance.yahoo.com/](http://finance.yahoo.com/)
    to download IBM''s historical data. The first several lines are shown here:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在第二个例子中，使用了一个与 IBM 相关的 CSV 文件，该文件从 Yahoo! Finance 下载，数据集可以在[http://canisius.edu/~yany/data/ibm.csv](http://canisius.edu/~yany/data/ibm.csv)下载。或者，读者也可以访问[http://finance.yahoo.com/](http://finance.yahoo.com/)下载
    IBM 的历史数据。以下是前几行内容：
- en: '![Introduction to the Fama-French three-factor model](img/B06175_07_42.jpg)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![法玛-弗伦奇三因子模型介绍](img/B06175_07_42.jpg)'
- en: '`Date` is the date variable, `Open` is the opening price, `High (Low)` is the
    highest (lowest) price achieved during the period, `Close` is the closing price,
    `Volume` is the trading volume and `Adj.Close` is the adjusted closing price,
    adjusted for stock split and dividend distributions. In the following Python program,
    we try to use three variables of `Open`, `High`, and `Volume` to explain `Adj.Close`;
    see the following equation:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '`Date` 是日期变量，`Open` 是开盘价，`High (Low)` 是期间内的最高（最低）价，`Close` 是收盘价，`Volume` 是交易量，`Adj.Close`
    是调整后的收盘价，已经考虑了股票拆分和股息分配。在下面的 Python 程序中，我们尝试用 `Open`、`High` 和 `Volume` 三个变量来解释
    `Adj.Close`；请参见以下方程式：'
- en: '![Introduction to the Fama-French three-factor model](img/B06175_07_02.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![法玛-弗伦奇三因子模型介绍](img/B06175_07_02.jpg)'
- en: 'Again, this OLS regression just serves as an illustration showing how to run
    a three-factor model. It might have no economic meaning at all. The beauty of
    such an example is that we could easily get data and test our Python program:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 再次强调，这个OLS回归只是作为一个示范，展示如何运行三因子模型，它可能没有任何经济意义。这个示例的美妙之处在于，我们可以轻松获得数据并测试我们的Python程序：
- en: '[PRE3]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The first three commands import three Python modules. The command line of `x=sm.add_constant(x)`
    will add a column of 1s. If the line is missing, we would force a zero intercept.
    To enrich our experience of running a three-factor linear model, this time, a
    different OLS function is applied. The advantage of using the `statsmodels.apilsm.OLS()`
    function is that we could find more information about our results, such as **Akaike
    Information Criterion** (**AIC**), **Bayesian Information Criterion (BIC**), skew,
    and kurtosis. The discussion of their definitions will be postponed to the next
    chapter ([Chapter 8](ch08.html "Chapter 8. Time-Series Analysis"), *Time-Series
    Analysis*). The corresponding output after running the preceding Python program
    is given here:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 前三条命令导入了三个Python模块。`x=sm.add_constant(x)`这条命令将会为数据添加一列1。如果没有这一行，我们会强制设置零截距。为了丰富运行三因子线性模型的经验，这次应用了不同的OLS函数。使用`statsmodels.apilsm.OLS()`函数的优势在于，我们可以获得更多关于结果的信息，例如**赤池信息量准则**（**AIC**）、**贝叶斯信息量准则**（**BIC**）、偏度和峰度。它们的定义将在下一章（[第八章](ch08.html
    "第八章. 时间序列分析")，*时间序列分析*）中讨论。运行前面的Python程序后的相应输出如下：
- en: '![Introduction to the Fama-French three-factor model](img/B06175_07_24.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型简介](img/B06175_07_24.jpg)'
- en: Again, we will refrain from spending time interpreting the result since our
    objective at the moment is to show how to run a three-factor regression.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，我们将避免花时间解释结果，因为我们当前的目标是展示如何运行三因子回归。
- en: Fama-French three-factor model
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Fama-French三因子模型
- en: 'Recall that the CAPM has the following form:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 回顾CAPM模型，它的形式如下：
- en: '![Fama-French three-factor model](img/B06175_07_03.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型](img/B06175_07_03.jpg)'
- en: 'Here, *E()* is the expectation, *E(Ri)* is the expected return for stock *i*,
    *Rf* is the risk-free rate, and *E(Rmkt)* is the expected market return. For instance,
    the S&P500 index could serve as a market index. The slope of the preceding equation
    (![Fama-French three-factor model](img/B06175_07_43.jpg)) is a measure of the
    stock''s market risk. To find out the value of ![Fama-French three-factor model](img/B06175_07_43.jpg),
    we run a linear regression. The Fama-French three-factor model could be viewed
    as a natural extension of CAPM, see here:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*E()*是期望，*E(Ri)*是股票*i*的预期收益，*Rf*是无风险利率，*E(Rmkt)*是预期市场收益。例如，S&P500指数可以作为市场指数。上面方程的斜率
    (![Fama-French三因子模型](img/B06175_07_43.jpg)) 是股票市场风险的度量。为了求出![Fama-French三因子模型](img/B06175_07_43.jpg)的值，我们进行线性回归。Fama-French三因子模型可以看作是CAPM模型的自然扩展，详见此处：
- en: '![Fama-French three-factor model](img/B06175_07_04.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型](img/B06175_07_04.jpg)'
- en: 'The definitions of *Ri*, *Rf*, and *Rmkt* remain the same. *SMB* is the portfolio
    returns of small stocks minus the portfolio returns of big stocks; *HML* is the
    portfolio returns for high book-to-market value minus returns of low book-to-market
    value stocks. The Fama/French factors are constructed using the six value-weight
    portfolios formed on size and book-to-market. **Small Minus Big** (**SMB**) is
    the average return on the three small portfolios minus the average return on the
    three big portfolios. Based on the size, measured by the market capitalization
    (numbers of shares outstanding times the end of year price), they classify all
    stocks into two categories, **S** (small) and **H** (high). Similarly, based on
    the ratio of book value of equity to the market value of equity, all stocks are
    classified into three groups of **H** (high), **M** (Median), and **L** (Low).
    Eventually, we could have the following six groups:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '*Ri*、*Rf* 和 *Rmkt* 的定义保持不变。*SMB* 是小盘股的投资组合收益减去大盘股的投资组合收益；*HML* 是高账面市值比的投资组合收益减去低账面市值比的投资组合收益。Fama/French因子是通过基于市值和账面市值比形成的六个价值加权投资组合构建的。**Small
    Minus Big**（**SMB**）是三个小盘股投资组合的平均收益减去三个大盘股投资组合的平均收益。根据市值（通过市场资本化计算，即流通股数乘以年末股价）来分类所有股票为两类，**S**（小型）和**H**（大型）。类似地，基于账面市值比来将所有股票分类为三组：**H**（高）、**M**（中）、**L**（低）。最终，我们可以得到以下六组：'
- en: '|   | Sorted by size into two groups |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '|   | 按大小排序为两组 |'
- en: '| --- | --- |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Sorted bybook/market ratio into three groups |   |   |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| 按账面市值比排序成三组 |   |   |'
- en: '| --- | --- | --- |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| SH | BH |   |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| SH | BH |   |'
- en: '| SM | BM |   |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| SM | BM |   |'
- en: '| SL | BL |   |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| SL | BL |   |'
- en: 'The SMB is constructed by the following six portfolios:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: SMB由以下六个投资组合构成：
- en: '![Fama-French three-factor model](img/B06175_07_05.jpg)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型](img/B06175_07_05.jpg)'
- en: 'When ratios of equity book value over market value are low (high), those stocks
    are called growth (value stocks) stocks. Thus, we could use another formula; see
    here:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 当股本账面价值与市值比率较低（较高）时，这些股票被称为成长型（价值型）股票。因此，我们可以使用另一公式；见下：
- en: '![Fama-French three-factor model](img/B06175_07_06.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型](img/B06175_07_06.jpg)'
- en: '**High Minus Low** (**HML**) is the average return on the two value portfolios
    minus the average return on the two growth portfolios; see the following equation:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '**高减低**（**HML**）是两组价值型投资组合的平均回报减去两组成长型投资组合的平均回报；见下方公式：'
- en: '![Fama-French three-factor model](img/B06175_07_07.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型](img/B06175_07_07.jpg)'
- en: 'Rm-Rf, the excess return on the market, value-weight return of all CRSP firms
    incorporated in the US and listed on the NYSE, AMEX, or NASDAQ that have a CRSP
    share code of 10 or 11 at the beginning of month *t*, good shares and price data
    at the beginning of t, and good return data for t minus the 1-month Treasury bill
    rate (from Ibbotson Associates). The following program retrieves the Fama-French
    monthly factors and generates a dataset with the `.pickle` format. The dataset
    for the Fama-French monthly dataset in the pandas `.pickle` format can be downloaded
    from [http://www.canisius.edu/~yany/python/ffMonthly.pkl](http://www.canisius.edu/~yany/python/ffMonthly.pkl):'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: Rm-Rf，市场超额收益率，所有在美国注册并在NYSE、AMEX或NASDAQ上市的CRSP公司加权平均收益，这些公司在月初时具有CRSP股票代码10或11，月初有良好的股票和价格数据，且有t月份的良好回报数据，减去1个月的国债利率（来源：Ibbotson
    Associates）。以下程序检索Fama-French月度因子，并生成一个`.pickle`格式的数据集。Fama-French月度数据集的pandas
    `.pickle`格式文件可以从[http://www.canisius.edu/~yany/python/ffMonthly.pkl](http://www.canisius.edu/~yany/python/ffMonthly.pkl)下载：
- en: '[PRE4]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The corresponding output is show here:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 对应的输出如下所示：
- en: '![Fama-French three-factor model](img/B06175_07_25.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型](img/B06175_07_25.jpg)'
- en: 'Next, we show how to run a Fama-French three-factor regression using 5-year
    monthly data. The added twist is that the historical price data is downloaded
    first. Then we calculate monthly returns and convert them to monthly ones before
    merging with the monthly Fama-French three-factor time series:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们展示如何使用5年期的月度数据运行Fama-French三因子回归。额外的步骤是首先下载历史价格数据。然后我们计算月度收益并将其转换为月度数据，最后与月度Fama-French三因子时间序列合并：
- en: '[PRE5]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'In the preceding program, the start date is January 1, 2012, and the end date
    is December 31, 2016\. After retrieving the daily price data, we estimate the
    daily returns and then convert them to monthly ones. The Fama-French monthly three-factor
    time series with the pandas `.pickle` format is uploaded. In the preceding program,
    the usage of `np.array(date,dtype=int64)` is to make both indices have the same
    data types. The corresponding output is as follows:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的程序中，起始日期为2012年1月1日，结束日期为2016年12月31日。获取每日价格数据后，我们估算每日收益率，然后将其转换为月度收益率。已上传Fama-French月度三因子时间序列，格式为pandas的`.pickle`。在前面的程序中，`np.array(date,dtype=int64)`的使用是为了确保两个索引具有相同的数据类型。对应的输出如下：
- en: '![Fama-French three-factor model](img/B06175_07_26.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French三因子模型](img/B06175_07_26.jpg)'
- en: To save space, we will not discuss the result.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 为了节省空间，我们将不讨论结果。
- en: Fama-French-Carhart four-factor model and Fama-French five-factor model
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Fama-French-Carhart四因子模型和Fama-French五因子模型
- en: 'Jegadeesh and Titman (1993) show a profitable momentum trading strategy: buy
    winners and sell losers. The basic assumption is that within a short time period,
    such as 6 months, a winner will remain as a winner, while a loser will remain
    as a loser. For example, we could classify winners from losers based on the last
    6-month cumulative total returns. Assume we are in January 1965\. The total returns
    over the last 6 months are estimated first. Then sort them into 10 portfolios
    according to their total returns from the highest to the lowest. The top (bottom)
    10% are labeled as winners (losers). We long winner portfolio and short loser
    portfolio with a 6-month holding period. The next month, February 1965, we repeat
    the same procedure. Over January 1965 to December 1989, Jegadeesh and Titman''s
    (1993) empirical results suggest that such a trading strategy would generate a
    return of 0.95% per month. Based on this result, Carhart (2000) adds the momentum
    as the 4th to the Fama-French three-factor model:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: Jegadeesh 和 Titman（1993）展示了一种有利可图的动量交易策略：买入赢家，卖出输家。基本假设是，在短期内，比如 6 个月，赢家将继续是赢家，而输家将继续是输家。例如，我们可以根据过去
    6 个月的累计总回报，将赢家与输家进行分类。假设我们处于 1965 年 1 月，首先估算过去 6 个月的总回报。然后根据总回报将它们从高到低排序，分为 10
    个投资组合。排名前 10%（后 10%）被标记为赢家（输家）。我们做多赢家投资组合，做空输家投资组合，持仓期为 6 个月。下个月，即 1965 年 2 月，我们重复相同的操作。从
    1965 年 1 月到 1989 年 12 月，Jegadeesh 和 Titman（1993）的实证结果表明，这种交易策略每月可以产生 0.95% 的回报。基于这一结果，Carhart（2000）将动量因素作为第四因子加入到
    Fama-French 三因子模型中：
- en: '![Fama-French-Carhart four-factor model and Fama-French five-factor model](img/B06175_07_08.jpg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French-Carhart 四因子模型和 Fama-French 五因子模型](img/B06175_07_08.jpg)'
- en: 'Here, *MOM* is the momentum factor. The following codes could upload `ffcMonthly.pkl`
    and print the first and last several lines. The Python dataset can be downloaded
    from the author''s website at [http://www.canisius.edu/~yany/python/ffcMonthly.pkl](http://www.canisius.edu/~yany/python/ffcMonthly.pkl):'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，*MOM* 是动量因子。以下代码可以上传 `ffcMonthly.pkl` 并打印出前几行和后几行。该 Python 数据集可以从作者的网站下载：[http://www.canisius.edu/~yany/python/ffcMonthly.pkl](http://www.canisius.edu/~yany/python/ffcMonthly.pkl)：
- en: '[PRE6]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The output is shown here:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下所示：
- en: '![Fama-French-Carhart four-factor model and Fama-French five-factor model](img/B06175_07_27.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French-Carhart 四因子模型和 Fama-French 五因子模型](img/B06175_07_27.jpg)'
- en: 'In 2015, Fama and French developed a so-called five-factor model; see the following
    formula:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在 2015 年，Fama 和 French 开发了所谓的五因子模型；见下方公式：
- en: '![Fama-French-Carhart four-factor model and Fama-French five-factor model](img/B06175_07_09.jpg)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French-Carhart 四因子模型和 Fama-French 五因子模型](img/B06175_07_09.jpg)'
- en: 'In the preceding equation, *RMW* is the difference between the returns on diversified
    portfolio of stocks with robust and weak profitability, *CMA* is the difference
    between the returns of diversified portfolios of the stocks of low and high investment
    firms, which Fama and French call conservative and aggressive. If the exposures
    to the five factors capture all variation in expected returns, the intercept for
    all securities and portfolio *i* should be zero. Again, we would not show how
    to run a Fama-French five-factor model since it is quite similar to running a
    Fama-French three-factor model. Instead, the following code shows the first and
    last several lines of a Python dataset called `ffMonthly5.pkl`. The Python dataset
    can be downloaded from the author''s website at [http://www.canisius.edu/~yany/python/ffMonthly5.pkl](http://www.canisius.edu/~yany/python/ffMonthly5.pkl):'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的方程中，*RMW* 是强盈利和弱盈利股票组合回报的差异，*CMA* 是低投资和高投资公司股票组合回报的差异，Fama 和 French 将其称为保守型和激进型。如果五个因子的暴露能够捕捉到所有预期回报的变化，那么所有证券和投资组合
    *i* 的截距应该为零。再次说明，由于运行 Fama-French 五因子模型与运行 Fama-French 三因子模型非常相似，这里我们不展示如何运行五因子模型。相反，以下代码展示了一个名为
    `ffMonthly5.pkl` 的 Python 数据集的前几行和后几行。该 Python 数据集可以从作者的网站下载：[http://www.canisius.edu/~yany/python/ffMonthly5.pkl](http://www.canisius.edu/~yany/python/ffMonthly5.pkl)：
- en: '[PRE7]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The corresponding output is shown here:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 相应的输出结果如下所示：
- en: '![Fama-French-Carhart four-factor model and Fama-French five-factor model](img/B06175_07_28.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![Fama-French-Carhart 四因子模型和 Fama-French 五因子模型](img/B06175_07_28.jpg)'
- en: Along the same lines, for the daily frequency, we have several datasets called
    `ffDaily`, `ffcDaily`, and `ffDaily5`; see *Appendix A – list of related Python
    datasets* for more detail.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 按照相同的思路，对于日频数据，我们有几个数据集，分别是 `ffDaily`、`ffcDaily` 和 `ffDaily5`；有关更多细节，请参见 *附录
    A – 相关 Python 数据集列表*。
- en: Implementation of Dimson (1979) adjustment for beta
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Dimson（1979）对贝塔值的调整实现
- en: 'Dimson (1979) suggests the following method:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: Dimson（1979）建议以下方法：
- en: '![Implementation of Dimson (1979) adjustment for beta](img/B06175_07_10.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![Dimson（1979）调整贝塔值的实现](img/B06175_07_10.jpg)'
- en: 'The most frequently used *k* value is *1*. Thus, we have the next equation:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 最常用的*k*值是*1*。因此，我们得到以下方程：
- en: '![Implementation of Dimson (1979) adjustment for beta](img/B06175_07_11.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![Dimson（1979）调整贝塔值的实现](img/B06175_07_11.jpg)'
- en: 'Before we run the regression based on the preceding equation, two functions
    called `.diff()` and `.shift()` are explained. Here, we randomly choose five prices.
    Then we estimate their price difference returns and add lag and forward returns:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行基于前述方程的回归之前，先解释两个名为`.diff()`和`.shift()`的函数。这里，我们随机选择了五个价格。然后我们估算它们的价格差回报，并添加滞后和前向回报：
- en: '[PRE8]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The output is shown here:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下所示：
- en: '![Implementation of Dimson (1979) adjustment for beta](img/B06175_07_29.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![Dimson（1979）调整贝塔值的实现](img/B06175_07_29.jpg)'
- en: 'Obviously, the price time series is assumed from the oldest to the newest.
    The difference is defined as *p(i) – p(i-1)*. Thus, the first difference is `NaN`,
    that is, a missing value. Let''s look at period 4, that is, `index=3`. The difference
    is *1.8 (14-12.2)*, return is *(14-12.2)/12.2= 0.147541*. The lag ret will be
    the return before this period, that is, *0.109091*, while the lead return will
    be the next period return, that is, *-0.142857*. In the following Python program,
    we illustrate how to run the previous program for IBM stocks:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 显然，价格时间序列是假定从最旧到最新的。差异定义为*p(i) – p(i-1)*。因此，第一个差异是`NaN`，即缺失值。我们来看第4期，即`index=3`。差异为*1.8（14-12.2）*，回报率为*(14-12.2)/12.2=
    0.147541*。滞后回报将是这一期之前的回报，即*0.109091*，而前向回报将是下一期的回报，即*-0.142857*。在下面的Python程序中，我们演示了如何运行之前的程序来分析IBM股票：
- en: '[PRE9]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The output is shown here:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下所示：
- en: '![Implementation of Dimson (1979) adjustment for beta](img/B06175_07_30.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![Dimson（1979）调整贝塔值的实现](img/B06175_07_30.jpg)'
- en: Performance measures
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绩效度量
- en: 'To compare the performance of mutual functions or individual stocks, we need
    a performance measure. In finance, we know that investors should seek a trade-off
    between risk and returns. It might not be a good idea to say that portfolio A
    is better than portfolio B since the former offered us a 30% return last year
    while the latter offered just 8%. The obvious reason is that we should not ignore
    risk factors. Because of this, we often hear the phrase "risk-adjusted return".
    In this section, the Sharpe ratio, Treynor ratio, Sortino ratio, and Jensen''s
    alpha will be discussed. The Sharpe ratio is a widely used performance measure
    and it is defined as follows:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 为了比较共同函数或单个股票的表现，我们需要一个绩效度量。在金融中，我们知道投资者应在风险和回报之间寻求平衡。说投资组合A比投资组合B更好可能不是一个好主意，因为前者去年给我们带来了30%的回报，而后者仅带来了8%的回报。显而易见的原因是我们不应忽视风险因素。因此，我们常常听到“风险调整回报”这个词。
    在本节中，将讨论夏普比率、特雷诺比率、索提诺比率和詹森α。夏普比率是一个广泛使用的绩效度量，定义如下：
- en: '![Performance measures](img/B06175_07_12.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![绩效度量](img/B06175_07_12.jpg)'
- en: 'Here, ![Performance measures](img/B06175_07_44.jpg) is the mean return for
    a portfolio or a stock, ![Performance measures](img/B06175_07_45.jpg) is the mean
    return for a risk-free security, σ is the variance of the excess portfolio (stock)
    return, and VaR is the variance of the excess portfolio (stock) return. The following
    code is used to estimate the Sharpe ratio with a hypothetical risk-free rate:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，![绩效度量](img/B06175_07_44.jpg)是一个投资组合或股票的平均回报，![绩效度量](img/B06175_07_45.jpg)是无风险证券的平均回报，σ是超额投资组合（股票）回报的方差，VaR是超额投资组合（股票）回报的方差。以下代码用于估算假设的无风险利率下的夏普比率：
- en: '[PRE10]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'The Sharpe ratio is -0.00826559763423\. The following code will download daily
    data directly from Yahoo! Finance, then estimate the Sharpe ratio without considering
    the impact of the risk-free rate:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 夏普比率为-0.00826559763423\。以下代码将直接从Yahoo! Finance下载每日数据，然后在不考虑无风险利率影响的情况下估算夏普比率：
- en: '[PRE11]'
  id: totrans-93
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The result is `0.00686555838073`. Based on the preceding code, a Python program
    is developed with more explanation plus two examples; see *Appendix C* for more
    detail. The Sharpe ratio looks at the total risk since the standard deviation
    is used as the denominator. This measure is appropriate when the portfolio in
    consideration is all the wealth for a company or individual owner. In [Chapter
    6](ch06.html "Chapter 6. Capital Asset Pricing Model"), *Capital Asset Pricing
    Model*, we argued that a rational investor should consider only the market risk
    instead of the total risk when he/she estimates the expected returns. Thus, when
    the portfolio under consideration is only part of the wealth, using total risk
    is not appropriate. Because of this, Treynor suggests using beta as the denominator:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 结果是`0.00686555838073`。基于前面的代码，开发了一个Python程序，并提供了更多解释和两个示例；详情请参见*附录C*。Sharpe比率考虑的是总风险，因为标准差作为分母。这个衡量标准适用于当考虑的投资组合是公司或个人的所有财富时。在[第6章](ch06.html
    "第6章。资本资产定价模型")，*资本资产定价模型*中，我们认为理性投资者在估计预期收益时，应仅考虑市场风险而非总风险。因此，当考虑的投资组合只是部分财富时，使用总风险并不合适。由于这一点，Treynor建议使用beta作为分母：
- en: '![Performance measures](img/B06175_07_13.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![绩效衡量](img/B06175_07_13.jpg)'
- en: 'The only modification is that the sigma (total risk) is replaced by beta (market
    risk). Another argument against using standard deviation in the Sharpe ratio is
    that it considers the deviations in both directions, below and above the mean.
    However, we know that investors are worried more about the downside risk (deviation
    below mean return). The second issue for the Sharpe ratio is that for the numerator,
    we compare mean returns with a risk-free rate. Nevertheless, for the denominator,
    the deviations are from the mean return instead for the same risk-free rate. To
    overcome those two shortcomings, a so-called **Lower Partial Standard Deviation**
    (**LPSD**) is developed. Assume we have n returns and one **risk-free rate** (**Rf**).
    Assume further that there are m returns are less than this risk-free rate. LPSD
    is defined here:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 唯一的修改是将sigma（总风险）替换为beta（市场风险）。另一个反对在Sharpe比率中使用标准差的理由是，它考虑了均值上下两个方向的偏差。然而，我们知道投资者更担心下行风险（低于均值的偏差）。Sharpe比率的第二个问题是，对于分子，我们将平均收益与无风险利率进行比较。然而，对于分母，偏差是基于均值回报的，而不是同样的无风险利率。为了克服这两个缺点，开发了所谓的**下行部分标准差**（**LPSD**）。假设我们有n个回报和一个**无风险利率**（**Rf**）。进一步假设有m个回报低于这个无风险利率。LPSD在此定义：
- en: '![Performance measures](img/B06175_07_14.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![绩效衡量](img/B06175_07_14.jpg)'
- en: 'Alternatively, we have the following equivalent formula:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们有以下等效的公式：
- en: '![Performance measures](img/B06175_07_15.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![绩效衡量](img/B06175_07_15.jpg)'
- en: 'The Sortino ratio is defined here:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: Sortino比率在此定义：
- en: '![Performance measures](img/B06175_07_16.jpg)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![绩效衡量](img/B06175_07_16.jpg)'
- en: 'We could write a Python program to estimate the Sortino ratio; see the following
    code. To guarantee getting the same set of random numbers, the same seed should
    be used in the `sp.random.seed()` function:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以编写一个Python程序来估算Sortino比率；请参见以下代码。为了确保获得相同的一组随机数，`sp.random.seed()`函数中应使用相同的种子：
- en: '[PRE12]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'The corresponding output is shown here:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 相应的输出如下所示：
- en: '![Performance measures](img/B06175_07_31.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![绩效衡量](img/B06175_07_31.jpg)'
- en: 'From the output, the standard deviation is `0.22` while the LPSD value is `0.045`.
    For mutual fund managers, getting a positive alpha is quite important. Thus, alpha
    or Jensen''s alpha is a performance measure. Jensen''s alpha is defined as the
    difference between the realized returns and the expected returns. It has the following
    form:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 从输出中，标准差为`0.22`，而LPSD值为`0.045`。对于共同基金经理来说，获得一个正的alpha值是非常重要的。因此，alpha值或Jensen's
    alpha是一个绩效衡量标准。Jensen's alpha定义为实际收益与预期收益之间的差异。其公式如下：
- en: '![Performance measures](img/B06175_07_17.jpg)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![绩效衡量](img/B06175_07_17.jpg)'
- en: How to merge different datasets
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何合并不同的数据集
- en: 'It is a common task to merge different datasets, such as merging index data
    with stock data and the like. Thus, it is quite important to understand the mechanism
    of merging different datasets. Here, the `pandas.merge()` function is discussed:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 合并不同的数据集是一个常见的任务，比如将指数数据与股票数据等进行合并。因此，了解合并不同数据集的机制非常重要。这里讨论了`pandas.merge()`函数：
- en: '[PRE13]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The sizes of both `x` and `y` are `4` by `3`, that is, four rows and three
    columns; see the following code:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '`x`和`y`的大小是`4`行`3`列，即四行三列；请参见以下代码：'
- en: '[PRE14]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The output is shown here:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下所示：
- en: '![How to merge different datasets](img/B06175_07_32.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_32.jpg)'
- en: '[PRE15]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![How to merge different datasets](img/B06175_07_33.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_33.jpg)'
- en: 'Assume that we intend to merge them based on the variable called `key`, a common
    variable shared by both datasets. Since the common values of this variable are
    K0, K1 and K2\. The final result should have three rows and five columns since
    K3 and K6 are not the common values by the two datasets; see the result shown
    here:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们打算基于名为`key`的变量进行合并，这是两个数据集共享的共同变量。由于该变量的共同值为K0、K1和K2，最终结果应该有三行五列，因为K3和K6不是两个数据集的共同值；请参见这里显示的结果：
- en: '[PRE16]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The output is shown here:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下：
- en: '![How to merge different datasets](img/B06175_07_34.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_34.jpg)'
- en: 'Since `key` is shared by both datasets, we could simply ignore it; see the
    following code. In other words, `result` and `result2` are the same:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 由于`key`是两个数据集共享的，我们可以简单地忽略它；请参见以下代码。换句话说，`result`和`result2`是相同的：
- en: '[PRE17]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The complete meaning of the `pandas.merge()` function is given here:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas.merge()`函数的完整含义如下：'
- en: '[PRE18]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'For the first two input variables, `left` is for the first input dataset while
    `right` is the second input dataset. For the `how=` condition, we have the following
    four possible scenarios:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 对于前两个输入变量，`left`是第一个输入数据集，而`right`是第二个输入数据集。对于`how=`条件，我们有以下四种可能的情况：
- en: '| `how=''inner''` | Meaning | Description |'
  id: totrans-126
  prefs: []
  type: TYPE_TB
  zh: '| `how=''inner''` | 含义 | 描述 |'
- en: '| Inner | INNER JOIN | Use intersection of keys from both frames |'
  id: totrans-127
  prefs: []
  type: TYPE_TB
  zh: '| 内连接 | INNER JOIN | 使用两个框架的键的交集 |'
- en: '| Outer | FULL OUTER JOIN | Use union of keys from both frames |'
  id: totrans-128
  prefs: []
  type: TYPE_TB
  zh: '| 外连接 | FULL OUTER JOIN | 使用两个框架的键的并集 |'
- en: '| Left | LEFT OUTER JOIN | Use keys from left frame only |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '| 左连接 | LEFT OUTER JOIN | 仅使用左框架的键 |'
- en: '| Right | RIGHT OUTER JOIN | Use keys from right frame only |'
  id: totrans-130
  prefs: []
  type: TYPE_TB
  zh: '| 右连接 | RIGHT OUTER JOIN | 仅使用右框架的键 |'
- en: 'Table 7.1 Meanings of the four join conditions: inner, outer, left, and right'
  id: totrans-131
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 表 7.1 四种连接条件的含义：内连接、外连接、左连接和右连接
- en: 'The format of an inner join demands both datasets have the same items. An analogy
    is students from a family with both parents. The left join is based on the left
    dataset. In other words, our benchmark is the first dataset (`left`). An analogy
    is choosing students from families with a mum. The right is the opposite of the
    left, that is, the benchmark is the second dataset (`right`). The outer is the
    full dataset which contain both datasets, the same as students from all families:
    with both parents, with mum only, and with dad only.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 内连接的格式要求两个数据集必须有相同的项目。一个类比是来自有父母的家庭的学生。左连接基于左数据集。换句话说，我们的基准是第一个数据集（`left`）。一个类比是从只有妈妈的家庭中选择学生。右连接与左连接相反，也就是说，基准是第二个数据集（`right`）。外连接是包含两个数据集的完整数据集，就像所有家庭的学生一样：有父母的、只有妈妈的和只有爸爸的。
- en: 'In the following example, the first dataset has 4 years of data. Those values
    are entered with no specific meanings. Readers could use their own values. Our
    common variable is `YEAR`. For the first dataset, we have 4 years of data: `2010`,
    `2011`, `2012`, and `2013`. For the second dataset, we have `2011`, `2013`, `2014`,
    and `2015`. Obviously, only 2 years overlap. In total, we have 6 years of data:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下示例中，第一个数据集有4年的数据。这些值没有特定的含义，读者可以使用自己的值。我们的共同变量是`YEAR`。对于第一个数据集，我们有4年的数据：`2010`、`2011`、`2012`和`2013`。对于第二个数据集，我们有`2011`、`2013`、`2014`和`2015`。显然，只有2年是重叠的。总共有6年的数据：
- en: '[PRE19]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'The four outputs are shown here:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 四个输出结果如下：
- en: '![How to merge different datasets](img/B06175_07_35.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_35.jpg)'
- en: 'When the common variable has different names in those two datasets, we should
    specify their names by using `left_on=''left_name''` and `right_on=''another_name''`;
    see the following code:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 当两个数据集中的共同变量有不同的名称时，我们应该通过使用`left_on='left_name'`和`right_on='another_name'`来指定它们的名称；请参见以下代码：
- en: '[PRE20]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'If we intend to merge based on the index (row numbers), we specify that `left_index=''True''`,
    and `right_index=''True''`; see the following code. In a sense, since both datasets
    have four rows, we simply put them together, row by row. The true reason is that
    for those two datasets, there is no specific index. For a comparison, the `ffMonthly.pkl`
    data has the date as its index:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们打算基于索引（行号）进行合并，我们指定`left_index='True'`和`right_index='True'`；请参见以下代码。从某种意义上讲，由于两个数据集都有四行数据，我们只是将它们逐行放在一起。真正的原因是，对于这两个数据集，没有特定的索引。做个对比，`ffMonthly.pkl`数据的索引是日期：
- en: '[PRE21]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The output is shown here. Again, we simply illustrate the outcome without considering
    the economic meaning by merging different years'' data together:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下所示。再次强调，我们仅通过合并不同年份的数据来展示结果，而不考虑其经济含义：
- en: '![How to merge different datasets](img/B06175_07_36.jpg)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_36.jpg)'
- en: 'Here is another example of merging on index where `date` is used as the index
    for both datasets:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是另一个基于索引合并的示例，其中`date`作为两个数据集的索引：
- en: '[PRE22]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Both datasets are available, for example, [http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl).
    The output is shown here:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 两个数据集均可用，例如，[http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl)。输出结果如下所示：
- en: '![How to merge different datasets](img/B06175_07_37.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_37.jpg)'
- en: 'Sometimes, we need to merge two datasets based on two keys, such as stock `ID`
    and `date`; see the format here:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候，我们需要根据两个键（如股票`ID`和`date`）合并两个数据集；请参见这里的格式：
- en: '[PRE23]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'Let''s use the following hypothetical example by typing some values:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们通过输入一些假设的值来举一个例子：
- en: '[PRE24]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'For the first dataset, we have shares outstanding data for two stocks over
    the years `2010` and `2011`. The second dataset has data for annual returns and
    ROA for three stocks over 2 years (`2010` and `2014`). Our objective is to merge
    those two datasets by stock `ID` and `date` (year). The output is shown here:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 对于第一个数据集，我们有两只股票在`2010`年和`2011`年的流通股数据。第二个数据集包含三只股票在2年（`2010`年和`2014`年）中的年度回报率和资产回报率（ROA）数据。我们的目标是通过股票`ID`和`date`（年份）将这两个数据集合并。输出结果如下所示：
- en: '![How to merge different datasets](img/B06175_07_38.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_38.jpg)'
- en: 'After understanding how to run a multifactor regression and how to merge different
    datasets, readers will be able to add their own factor or factors. One issue is
    that some factors might have a different frequency, such as quarterly GDP instead
    of monthly ones. For those cases, we could use various ways to fill in those missing
    values; see the following example:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在了解如何运行多因子回归和如何合并不同的数据集之后，读者将能够添加自己的因子。一个问题是，一些因子的频率可能不同，例如季度GDP而非月度数据。对于这种情况，我们可以使用各种方法来填充这些缺失的值；请参见以下示例：
- en: '[PRE25]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The output is shown here:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下所示：
- en: '![How to merge different datasets](img/B06175_07_39.jpg)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![如何合并不同的数据集](img/B06175_07_39.jpg)'
- en: Readers should compare those two GDP time series to the impact.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 读者应当将这两个GDP时间序列与其影响进行对比。
- en: Appendix A – list of related Python datasets
  id: totrans-158
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录A – 相关Python数据集列表
- en: 'The prefix for these datasets is [http://canisius.edu/~yany/python](http://canisius.edu/~yany/python).
    For example, for `ffMonthly.pkl`, we would have [http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl):'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 这些数据集的前缀是[http://canisius.edu/~yany/python](http://canisius.edu/~yany/python)。例如，对于`ffMonthly.pkl`，我们可以使用[http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl)：
- en: '| Filename | Description |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| 文件名 | 描述 |'
- en: '| --- | --- |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `ibm3factor.pkl` | A simple dataset for the FF three-factor model for IBM
    |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| `ibm3factor.pkl` | IBM的FF三因子模型的简单数据集 |'
- en: '| `ffMonthly.pkl` | Fama-French monthly three factors |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| `ffMonthly.pkl` | Fama-French 月度三因子数据 |'
- en: '| `ffMomMonthly.pkl` | Monthly momentum factor |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| `ffMomMonthly.pkl` | 月度动量因子 |'
- en: '| `ffcMonthly.pkl` | Fama-French-Carhart monthly four factors |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| `ffcMonthly.pkl` | Fama-French-Carhart 月度四因子数据 |'
- en: '| `ffMonthly5.pkl` | Fama-French monthly five factors |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| `ffMonthly5.pkl` | Fama-French 月度五因子数据 |'
- en: '| `yanMonthly.pkl` | A monthly dataset generated by the author |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '| `yanMonthly.pkl` | 作者生成的月度数据集 |'
- en: '| `ffDaily.pkl` | Fama-French-Carhart daily four factors |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| `ffDaily.pkl` | Fama-French-Carhart 日度四因子数据 |'
- en: '| `ffcDaily.pkl` | Fama-French daily five factors |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| `ffcDaily.pkl` | Fama-French 日度五因子数据 |'
- en: '| `ffDaily5.pkl` | Fama-French monthly four factors |'
  id: totrans-170
  prefs: []
  type: TYPE_TB
  zh: '| `ffDaily5.pkl` | Fama-French 月度四因子数据 |'
- en: '| `usGDPquarterly.pkl` | Quarterly US GDP data |'
  id: totrans-171
  prefs: []
  type: TYPE_TB
  zh: '| `usGDPquarterly.pkl` | 美国季度GDP数据 |'
- en: '| `usDebt.pkl` | US national debt level |'
  id: totrans-172
  prefs: []
  type: TYPE_TB
  zh: '| `usDebt.pkl` | 美国国债水平 |'
- en: '| `usCPImonthly.pkl` | Consumer Price Index (CPI) data |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| `usCPImonthly.pkl` | 消费者价格指数（CPI）数据 |'
- en: '| `tradingDaysMonthly.pkl` | Trading days for monthly data |'
  id: totrans-174
  prefs: []
  type: TYPE_TB
  zh: '| `tradingDaysMonthly.pkl` | 月度数据的交易日数据 |'
- en: '| `tradingDaysDaily.pkl` | Trading days for daily data |'
  id: totrans-175
  prefs: []
  type: TYPE_TB
  zh: '| `tradingDaysDaily.pkl` | 日度数据的交易日数据 |'
- en: '| `businessCycleIndicator.pkl` | A business cycle indicator |'
  id: totrans-176
  prefs: []
  type: TYPE_TB
  zh: '| `businessCycleIndicator.pkl` | 商业周期指标 |'
- en: '| `businessCycleIndicator2.pkl` | Another business cycle indicator |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| `businessCycleIndicator2.pkl` | 另一个商业周期指标 |'
- en: '| `uniqueWordsBible.pkl` | All unique words from the Bible |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| `uniqueWordsBible.pkl` | 圣经中的所有唯一单词 |'
- en: 'One example of the code is shown here:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 一个示例代码如下所示：
- en: '[PRE26]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'The output is shown here:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下所示：
- en: '![Appendix A – list of related Python datasets](img/B06175_07_40.jpg)'
  id: totrans-182
  prefs: []
  type: TYPE_IMG
  zh: '![附录 A – 相关 Python 数据集列表](img/B06175_07_40.jpg)'
- en: Appendix B – Python program to generate ffMonthly.pkl
  id: totrans-183
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 B – 生成 ffMonthly.pkl 的 Python 程序
- en: 'The following program is used to generate the dataset called `ffMonthly.pkl`:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 以下程序用于生成名为 `ffMonthly.pkl` 的数据集：
- en: '[PRE27]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The first and last several lines are shown here:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 这里显示的是前几行和最后几行：
- en: '![Appendix B – Python program to generate ffMonthly.pkl](img/B06175_07_41.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![附录 B – 生成 ffMonthly.pkl 的 Python 程序](img/B06175_07_41.jpg)'
- en: Appendix C – Python program for Sharpe ratio
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 附录 C – Sharpe 比率的 Python 程序
- en: '[PRE28]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Appendix D – data case #4 – which model is the best, CAPM, FF3, FFC4, or FF5,
    or others?'
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '附录 D – 数据案例 #4 – 哪个模型最佳，CAPM、FF3、FFC4、FF5，还是其他？'
- en: 'Currently, we have many asset pricing models. Among them, the most important
    ones are CAPM, Fama-French three-factor model, Fama-French-Carhart four-factor
    model, or Fama-French five-factor model. The objectives of this data case include
    the following:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们有许多资产定价模型。最重要的模型包括 CAPM、Fama-French 三因子模型、Fama-French-Carhart 四因子模型或 Fama-French
    五因子模型。本数据案例的目标包括以下内容：
- en: Becoming familiar with the method to download data
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 熟悉数据下载方法
- en: Understanding the T-value, F-values, and adjusted R2
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解 T 值、F 值和调整后的 R2
- en: Writing various Python programs to conduct the test
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写各种 Python 程序进行测试
- en: 'Definitions of those four models CAPM:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 这四个模型的定义 CAPM：
- en: '![Appendix D – data case #4 – which model is the best, CAPM, FF3, FFC4, or
    FF5, or others?](img/B06175_07_18.jpg)'
  id: totrans-196
  prefs: []
  type: TYPE_IMG
  zh: '![附录 D – 数据案例 #4 – 哪个模型最佳，CAPM、FF3、FFC4、FF5，还是其他？](img/B06175_07_18.jpg)'
- en: 'Fama-French three-factor model:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: Fama-French 三因子模型：
- en: '![Appendix D – data case #4 – which model is the best, CAPM, FF3, FFC4, or
    FF5, or others?](img/B06175_07_19.jpg)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![附录 D – 数据案例 #4 – 哪个模型最佳，CAPM、FF3、FFC4、FF5，还是其他？](img/B06175_07_19.jpg)'
- en: 'Fama-French-Carhart four-factor model:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: Fama-French-Carhart 四因子模型：
- en: '![Appendix D – data case #4 – which model is the best, CAPM, FF3, FFC4, or
    FF5, or others?](img/B06175_07_20.jpg)'
  id: totrans-200
  prefs: []
  type: TYPE_IMG
  zh: '![附录 D – 数据案例 #4 – 哪个模型最佳，CAPM、FF3、FFC4、FF5，还是其他？](img/B06175_07_20.jpg)'
- en: 'Fama-French five-factor model:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: Fama-French 五因子模型：
- en: '![Appendix D – data case #4 – which model is the best, CAPM, FF3, FFC4, or
    FF5, or others?](img/B06175_07_21.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![附录 D – 数据案例 #4 – 哪个模型最佳，CAPM、FF3、FFC4、FF5，还是其他？](img/B06175_07_21.jpg)'
- en: 'In the preceding equation, RMV is the difference between the returns on diversified
    portfolio of stocks with robust and weak profitability, and CMA is the difference
    between the returns of diversified portfolios of the stocks of low and high investment
    firms, which Fama and French call conservative and aggressive. If the exposures
    to the five factors capture all variation in expected returns, the intercept for
    all securities and portfolio should be zero. The source of the data is as follow:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的方程中，RMV是具有强劲和薄弱盈利能力的多元化股票投资组合回报率的差异，CMA是低投资和高投资公司股票多元化投资组合回报率的差异，Fama和French将其称为保守型和激进型。如果五个因子的曝露能够捕捉到预期回报的所有变动，那么所有证券和投资组合的截距应该为零。数据来源如下：
- en: '[http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html)'
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html)'
- en: '[http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl)'
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl)'
- en: '| `ffMonthly.pkl` | Fama-French monthly three factors |'
  id: totrans-206
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ffMonthly.pkl` | Fama-French 月度三因子 |'
- en: '| `ffcMonthly.pkl` | Fama-French-Carhart monthly four factors |'
  id: totrans-207
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ffcMonthly.pkl` | Fama-French-Carhart 月度四因子 |'
- en: '| `ffMonthly5.pkl` | Fama-French monthly five factors |'
  id: totrans-208
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ffMonthly5.pkl` | Fama-French 月度五因子 |'
- en: '| `yanMonthly.pkl` | Fama-French daily three factors |'
  id: totrans-209
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `yanMonthly.pkl` | Fama-French 日度三因子 |'
- en: '| `yanMonthly.pkl` | A monthly dataset generated by the author |'
  id: totrans-210
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `yanMonthly.pkl` | 作者生成的月度数据集 |'
- en: '| `usGDPannual.pkl` | US GDP annual |'
  id: totrans-211
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `usGDPannual.pkl` | 美国 GDP 年度数据 |'
- en: '| `usCPImonthly.pkl` | Consumer Price Index (CPI) monthly |'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `usCPImonthly.pkl` | 消费者物价指数（CPI）月度数据 |'
- en: 'Several questions:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 若干问题：
- en: Which criterion?
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用哪个标准？
- en: Is the performance time-period independent?
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能是否与时间段无关？
- en: In-sample estimation versus out-sample prediction
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 样本内估计与样本外预测
- en: References
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: 'Please refer to the following articles:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考以下文章：
- en: '*Carhart, Mark M., 1997, On Persistence in Mutual Fund Performance, Journal
    of Finance 52, 57-82*'
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Carhart, Mark M., 1997, On Persistence in Mutual Fund Performance, Journal
    of Finance 52, 57-82*'
- en: '*Fama, Eugene and Kenneth R. French, 2015, A five-factor asset pricing model,
    Journal of Financial Economics 116, 1, 1-22*'
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Fama, Eugene 和 Kenneth R. French, 2015, A five-factor asset pricing model,
    Journal of Financial Economics 116, 1, 1-22*'
- en: '*Fama, Eugene and Kenneth R. French, 1993, Common risk factors in the returns
    on stocks and bonds, Journal of Financial Economics 33, 3056*'
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Fama, Eugene 和 Kenneth R. French, 1993, Common risk factors in the returns
    on stocks and bonds, Journal of Financial Economics 33, 3056*'
- en: '*Fama, Eugene and Kenneth R. French, 1992, The cross-section of expected stock
    returns, Journal of Finance 47, 427-465*'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Fama, Eugene 和 Kenneth R. French, 1992, The cross-section of expected stock
    returns, Journal of Finance 47, 427-465*'
- en: '*Jegadeesh, N., & Titman, S., 1993, Returns to buying winners and selling losers:
    Implications for stock market efficiency, Journal of Finance 48(1): 65–91*'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Jegadeesh, N., & Titman, S., 1993, Returns to buying winners and selling losers:
    Implications for stock market efficiency, Journal of Finance 48(1): 65–91*'
- en: '*Sharpe, W. F., 1966, Mutual Fund Performance, Journal of Business 39 (S1),
    119–138*'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Sharpe, W. F., 1966, Mutual Fund Performance, Journal of Business 39 (S1),
    119–138*'
- en: '*Sharpe, William F., 1994, The Sharpe Ratio, The Journal of Portfolio Management
    21 (1), 49–58*'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Sharpe, William F., 1994, The Sharpe Ratio, The Journal of Portfolio Management
    21 (1), 49–58*'
- en: '*Sortino, F.A., Price, L.N.,1994, Performance measurement in a downside risk
    framework, Journal of Investing 3, 50–8*'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Sortino, F.A., Price, L.N., 1994, Performance measurement in a downside risk
    framework, Journal of Investing 3, 50–8*'
- en: '*Treynor, Jack L., 1965, How to Rate Management of Investment Funds, Harvard
    Business Review 43, pp. 63–75*'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*Treynor, Jack L., 1965, How to Rate Management of Investment Funds, Harvard
    Business Review 43, pp. 63–75*'
- en: Exercises
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 练习
- en: What are the differences between the CAPM and Fama-French 3three-factor models?
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: CAPM和Fama-French三因子模型有什么不同？
- en: What are the meanings of SMB and HML in the Fama-French three-factor model?
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Fama-French三因子模型中，SMB和HML的含义是什么？
- en: What is the meaning of MOM in the Fama-French-Carhart four-factor model?
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Fama-French-Carhart四因子模型中，MOM代表什么？
- en: What are the meanings of RMW and CMA in the Fama-French five-factor model?
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Fama-French五因子模型中，RMW和CMA的含义是什么？
- en: What is the difference between R2 and adjusted R2 when running multifactor models?
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行多因子模型时，R2和调整后的R2有什么区别？
- en: How many OLS functions we could use? Please offer at least two functions from
    different Python modules.
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用多少种OLS函数？请提供至少两个来自不同Python模块的函数。
- en: Which module contains the function called `rolling_kurt`? How can you use the
    function?
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`rolling_kurt`函数包含在哪个模块中？如何使用这个函数？'
- en: Based on daily data downloaded from Yahoo! Finance, find the results for IBM
    based on the last 5 years by running both the CAPM and Fama-French three-factor
    models. Which model is better?
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 基于从Yahoo! Finance下载的每日数据，通过运行CAPM和Fama-French三因子模型，查找IBM过去五年的结果。哪个模型更好？
- en: What is the momentum factor? How do you run a Fama-French-Carhart four-factor
    model? Please use a few tickers as an illustration.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是动量因子？如何运行Fama-French-Carhart四因子模型？请使用几个股票代码进行示例。
- en: What is the definition of the Fama-French 5 factor model? How do you run it
    for Citi Group? The ticker of the financial institution is C.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Fama-French五因子模型的定义是什么？如何在花旗集团运行它？该金融机构的股票代码是C。
- en: For the following stock tickers, IBM, DELL, WMT, ^GSPC, C, A, AA, and MOFT,
    run regression based on CAPM, FF3, FFC4, and FF5\. Which one is the best? Discuss
    your benchmark or criteria to compare.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对以下股票代码进行回归分析：IBM, DELL, WMT, ^GSPC, C, A, AA 和 MOFT，分别基于CAPM、FF3、FFC4和FF5进行回归。哪个模型最好？讨论你用来比较的基准或标准。
- en: Write a Python program to estimate rolling beta on a yearly basis based on the
    Fama-French three-factor model. Use it to show the annual beta for IBM from 1962
    to 2016.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序，根据Fama-French三因子模型每年估算滚动贝塔值。用它来显示IBM从1962年到2016年的年度贝塔值。
- en: 'Update the following Python datasets. The original datasets can be downloaded
    from the author''s web page. For example, in order to download the first dataset,
    called `ffMonthly.pkl`, go to [http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl):'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新以下Python数据集。原始数据集可以从作者的网页下载。例如，为了下载第一个数据集`ffMonthly.pkl`，请访问[http://canisius.edu/~yany/python/ffMonthly.pkl](http://canisius.edu/~yany/python/ffMonthly.pkl)：
- en: '| `ffMonthly.pkl` | Fama-French monthly three factors |'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ffMonthly.pkl` | Fama-French每月三因子数据 |'
- en: '| `ffcMonthly.pkl` | Fama-French-Carhart monthly four factors |'
  id: totrans-243
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ffcMonthly.pkl` | Fama-French-Carhart每月四因子数据 |'
- en: '| `ffMonthly5.pkl` | Fama-French monthly five factors |'
  id: totrans-244
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `ffMonthly5.pkl` | Fama-French每月五因子数据 |'
- en: 'Data source: [http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html).'
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '数据来源: [http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html](http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html)。'
- en: 'Update the following Python datasets:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新以下Python数据集：
- en: '| `usGDPannual.pkl` | US GDP annual |'
  id: totrans-247
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `usGDPannual.pkl` | 美国GDP年数据 |'
- en: '| `usCPImonthly.pkl` | CPI (Consumer price index) monthly |'
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| `usCPImonthly.pkl` | CPI（消费者价格指数）月数据 |'
- en: The Fama-French SMH could be viewed as a portfolio. Download both daily and
    monthly SMB. Then estimate the total returns over 10-, 20-, and 30-year periods.
    Compare the differences between each pair of total returns. For example, compare
    total returns from 1980 to 2000 based on both daily SML and monthly SML. Why they
    are different?
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Fama-French SMH可以视为一个投资组合。下载每日和每月的SMB数据。然后估计10年、20年和30年期间的总回报。比较每对总回报之间的差异。例如，比较1980到2000年期间基于每日SML和每月SML的总回报。为什么它们会不同？
- en: Do the same thing for the market return and compare with SML. Why is the difference
    for market much smaller than the difference for SML portfolio?
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对市场回报做同样的事情并与SML进行比较。为什么市场的差异比SML投资组合的差异要小得多？
- en: Do the same thing for HML and explain.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对HML做同样的事情并解释。
- en: How many ways are there to merge two datasets?
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有多少种方法可以合并两个数据集？
- en: If we have two datasets, sorted by ticker and date, how do you merge them?
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果我们有两个按股票代码和日期排序的数据集，如何合并它们？
- en: Write a function to estimate the Treynor ratio. The format of the function is
    `treynorRatio` (`ticker`, `rf`, `begdate`, `enddate`), where ticker is a stock
    symbol, such as IBM, `rf` is the risk-free rate, `begdate` is the beginning date,
    and `enddate` is the end date.
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个函数来估计Treynor比率。函数的格式为`treynorRatio`(`ticker`, `rf`, `begdate`, `enddate`)，其中ticker是股票代码，例如IBM，`rf`是无风险利率，`begdate`是开始日期，`enddate`是结束日期。
- en: Randomly choose 10 stocks, such as stocks with tickers of IBM, C, WMT, MSFT,
    and so on, and run CAPM to test whether their intercepts are zero or not.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 随机选择10只股票，如IBM、C、WMT、MSFT等，运行CAPM测试它们的截距是否为零。
- en: Write a Python program to calculate the Sortino ratio. The format of the program
    will be `sortinoRatio(ticker,rf,begdate,enddate)`.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编写一个Python程序来计算Sortino比率。程序的格式为`sortinoRatio(ticker,rf,begdate,enddate)`。
- en: How can you replicate the Jagadeesh and Tidman (1993) momentum strategy using
    Python and CRSP data? (Assume that your school has a CRSP subscription.)
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如何使用Python和CRSP数据复制Jagadeesh和Tidman（1993）动量策略？（假设你的学校有CRSP订阅）。
- en: When using the `statsodels.api.ols()` function to run a linear regression, what
    is the consequence when the following line is omitted?
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当使用`statsmodels.api.ols()`函数进行线性回归时，如果省略以下这一行会有什么后果？
- en: '[PRE29]'
  id: totrans-259
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Debug the following program used to estimate LPSD:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 调试以下用于估计LPSD的程序：
- en: '[PRE30]'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: Summary
  id: totrans-262
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have discussed multiple-factor linear models. Those models
    could be viewed as a simple extension of the CAPM, a single one-factor linear
    model. These multifactor models include the Fama-French three-factor, Fama-French-Carhart
    four-factor, and Fama-French five-factor models.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 本章我们讨论了多因子线性模型。这些模型可以看作是CAPM（单一因子线性模型）的简单扩展。这些多因子模型包括Fama-French三因子模型、Fama-French-Carhart四因子模型和Fama-French五因子模型。
- en: In the next chapter, we will discuss various properties for time series. In
    finance and economics, a huge amount of our data is in the format of time series,
    such as stock price and **Gross Domestic Product** (**GDP**), or stocks' monthly
    or daily historical prices. For time series, there exist many issues, such as
    how to estimate returns from historical price data, how to merge datasets with
    the same or different frequencies, seasonality, and detection of auto-correlation.
    Understanding those properties is vitally important for our knowledge development.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论时间序列的各种特性。在金融和经济学中，我们的数据有很大一部分是时间序列格式的，如股价和**国内生产总值**（**GDP**），或者股票的月度或日度历史价格。对于时间序列，存在许多问题，如如何从历史价格数据中估计回报，如何合并具有相同或不同频率的数据集，季节性，以及自相关的检测。理解这些特性对于我们的知识发展至关重要。
