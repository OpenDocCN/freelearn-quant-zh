- en: Time Series Models
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 时间序列模型
- en: In the last chapter, we focused on linear models tailored to cross-sectional
    data where the input data belongs to the same time period as the output they aim
    to explain or predict. In this chapter, we will focus on time series data where
    observations differ by period, which also creates a natural ordering. Our goal
    will be to identify historical patterns in data and leverage these patterns to
    predict how the time series will behave in the future.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们重点关注了适用于横截面数据的线性模型，其中输入数据属于与其旨在解释或预测的输出相同的时间段。在本章中，我们将关注时间序列数据，其中观察值按周期而不同，这也创建了自然的排序。我们的目标是识别数据中的历史模式，并利用这些模式来预测时间序列在未来的行为。
- en: We already encountered panel data with both a cross-sectional and a time series
    dimension in the last chapter and learned how the Fama-Macbeth regression estimates
    the value of taking certain factor risks over time and across assets. However,
    the relationship between returns across time is typically fairly low, so this
    procedure could largely ignore the time dimension. The models in this chapter
    focus on time series models where past values contain predictive signals about
    future developments. Time series models can also predict features that are then
    used in cross-sectional models.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们已经遇到了既有横截面又有时间序列维度的面板数据，并了解了法马-麦克白斯回归如何估计随时间和跨资产采取某些因子风险的价值。然而，随时间的回报之间的关系通常相当低，因此这个过程可能会大部分忽视时间维度。本章的模型侧重于时间序列模型，其中过去的价值包含关于未来发展的预测信号。时间序列模型还可以预测随后用于横截面模型的特征。
- en: More specifically, in this chapter, we focus on models that extract signals
    from previously observed data to predict future values for the same time series. The
    time dimension of trading makes the application of time series models to market,
    fundamental, and alternative data very popular. Time series data will become even
    more prevalent as an ever broader array of connected devices collects regular
    measurements that may contain predictive signals. Key applications include the
    prediction of asset returns, correlations or covariances, or volatility.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，在本章中，我们将重点关注从先前观察到的数据中提取信号以预测同一时间序列未来值的模型。交易的时间维度使得将时间序列模型应用于市场、基本和替代数据变得非常流行。随着越来越广泛的连接设备收集可能包含预测信号的定期测量，时间序列数据将变得更加普遍。关键应用包括资产回报、相关性或协方差、或波动率的预测。
- en: We focus on linear time series models in this chapter as a baseline for non-linear
    models like recurrent or convolutional neural networks that we apply to time series
    data in part 4 of this book. We being by introducing tools to diagnose time series
    characteristics, including stationarity, and extract features that capture potential
    patterns. Then we introduce univariate and multivariate time series models and
    apply them to forecast macro data and volatility patterns. We conclude with the
    concept of cointegration and how to apply it to develop a pairs trading strategy.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将重点关注线性时间序列模型，作为本书第四部分应用于时间序列数据的非线性模型（如递归或卷积神经网络）的基线。我们首先介绍诊断时间序列特征的工具，包括平稳性，并提取捕捉潜在模式的特征。然后，我们介绍单变量和多变量时间序列模型，并将其应用于宏观数据和波动性模式的预测。最后，我们介绍协整概念以及如何应用它来开发配对交易策略。
- en: 'In particular, we will cover the following topics:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 具体来说，我们将涵盖以下主题：
- en: How to use time series analysis to diagnose diagnostic statistics that inform
    the modeling process
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何使用时间序列分析来诊断通知建模过程的诊断统计数据
- en: How to estimate and diagnose autoregressive and moving-average time series models
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何估计和诊断自回归和移动平均时间序列模型
- en: How to build Autoregressive Conditional Heteroskedasticity (ARCH) models to
    predict volatility
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何构建自回归条件异方差（ARCH）模型来预测波动性
- en: How to build vector autoregressive models
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何构建向量自回归模型
- en: How to use cointegration for a pairs trading strategy
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如何利用协整性进行配对交易策略
- en: Analytical tools for diagnostics and feature extraction
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 诊断和特征提取的分析工具
- en: Time series data is a sequence of values separated by discrete time intervals
    that are typically even-spaced (except for missing values). A time series is often
    modeled as a stochastic process consisting of a collection of random variables,
    y(t[1]), ..., y(t[T]), with one variable for each point in time, t[i ], i=1, ...,
    T. A univariate time series consists of a single value, y, at each point in time,
    whereas a multivariate time series consists of several observations that can be
    represented by a vector.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列数据是一系列由离散时间间隔分隔的值，通常是均匀间隔的（除了缺失值）。
- en: The number of periods, Δt= t[i] - t[j], between distinct points in time, t[i], t[j],
    is called lag, with T-1 lags for each time series. Just as relationships between
    different variables at a given point in time is key for cross-sectional models,
    relationships between data points separated by a given lag are fundamental to
    analyzing and exploiting patterns in time series. For cross-sectional models,
    we distinguished between input and output variables, or target and predictors,
    with the labels y and x, respectively. In a time series context, the lagged values
    of the outcome play the role of the input or x values in the cross-section context.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 两个不同时间点t[i]、t[j]之间的周期数Δt= t[i] - t[j]称为滞后，对于每个时间序列有T-1个滞后。
- en: A time series is called white noiseif it is a sequence of independent and identically-distributed
    random variables, ε[t], with finite mean and variance. In particular, the series
    is called a Gaussian white noise if the random variables are normally distributed
    with a mean of zero and a constant variance of σ.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个时间序列是独立同分布的随机变量ε[t]的序列，并且具有有限的均值和方差，则称其为白噪声。
- en: 'A time series is linear if it can be written as a weighted sum of past disturbances,
    ε[t], that are also called innovations, and are here assumed to represent white
    noise, and the mean of the series, μ:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个时间序列可以写成过去扰动ε[t]的加权和，这些扰动也称为创新，这里假设它们代表白噪声，以及序列的均值μ，则该时间序列是线性的。
- en: '![](img/fbe56b58-d93c-4878-ba0a-b61e2e545898.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fbe56b58-d93c-4878-ba0a-b61e2e545898.png)'
- en: A key goal of time series analysis is to understand the dynamic behavior driven
    by the coefficients, a[i]. The analysis of time series offers methods tailored
    to this type of data with the goal of extracting useful patterns that, in turn,
    help us to build predictive models. We will introduce the most important tools
    for this purpose, including the decomposition into key systematic elements, the
    analysis of autocorrelation, and rolling window statistics such as moving averages.
    Linear time series models often make certain assumptions about the data, such
    as stationarity, and we will also introduce both the concept, diagnostic tools,
    and typical transformations to achieve stationarity.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列分析的一个关键目标是理解由系数a[i]驱动的动态行为。
- en: For most of the examples in this chapter, we work with data provided by the
    Federal Reserve that you can access using the `pandas datareader` that we introduced
    in [Chapter 2](e7bd6fc7-7ef7-4c4e-acec-ac1d083f8902.xhtml), *Market and Fundamental
    Data*. The code examples for this section are available in the notebook `tsa_and_arima` notebook.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的大多数示例中，我们使用由美联储提供的数据，您可以使用我们在[第2章](e7bd6fc7-7ef7-4c4e-acec-ac1d083f8902.xhtml)中介绍的`pandas
    datareader`进行访问，*市场和基本数据*。 本节的代码示例可在笔记本`tsa_and_arima`中找到。
- en: How to decompose time series patterns
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何分解时间序列模式
- en: Time series data typically contains a mix of various patterns that can be decomposed
    into several components, each representing an underlying pattern category. In
    particular, time series often consist of the systematic components trend, seasonality
    and cycles, and unsystematic noise. These components can be combined in an additive,
    linear model, in particular when fluctuations do not depend on the level of the
    series, or in a non-linear, multiplicative model.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 时间序列数据通常包含各种模式的混合，可以分解为几个组成部分，每个部分代表一种基本模式类别。特别是，时间序列通常由系统组件趋势、季节性和周期性以及非系统噪声组成。这些组件可以在加法线性模型中组合，特别是当波动不依赖于系列水平时，或者在非线性乘法模型中组合。
- en: 'These components can be split up automatically. `statsmodels` includes a simple
    method to split the time series into a trend, seasonal, and residual component
    using moving averages. We can apply it to monthly data on industrial manufacturing
    production with both a strong trend and seasonality component, as follows:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 这些组件可以自动拆分。`statsmodels`包括一种简单的方法，将时间序列拆分为趋势、季节和残差分量，使用移动平均。我们可以将其应用于工业制造生产的月度数据，该数据具有强烈的趋势和季节性分量，如下所示：
- en: '[PRE0]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The resulting charts show the additive components. The residual component would
    be the focus of additional modeling, assuming that the trend and seasonality components
    are more deterministic and amenable to simple extrapolation:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 结果图显示了加法组件。假设趋势和季节性组件更确定且更适合简单外推，则残差组件将成为额外建模的焦点：
- en: '![](img/088daf58-8022-4521-ad95-6bb39e843681.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](img/088daf58-8022-4521-ad95-6bb39e843681.png)'
- en: There are more sophisticated, model-based approaches that are included in the
    references available on GitHub.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 还有更复杂的基于模型的方法，这些方法包含在GitHub上可用的参考资料中。
- en: How to compute rolling window statistics
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何计算滚动窗口统计量
- en: Given the sequential ordering of time series data, it is natural to compute
    familiar descriptive statistics for periods of a given length to detect stability
    or changes in behavior and obtain a smoothed representation that captures systematic
    aspects while filtering out the noise.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到时间序列数据的顺序排列，自然而然地计算给定长度周期的熟悉描述性统计量，以检测稳定性或行为变化，并获得捕获系统方面的平滑表示，同时过滤噪声。
- en: 'Rolling window statistics serve this process: they produce a new time series
    where each data point represents a summary statistic computed for a certain period
    of the original data. Moving averages are the most familiar example. The original
    data points can enter the computation with equal weights, or using weights to,
    for example, emphasize more recent data points. Exponential moving averages recursively
    compute weights that shrink or decay, for data points further away from the present.
    The new data points are typically a summary of all preceding data points, but
    they can also be computed from a surrounding window.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 滚动窗口统计为此过程服务：它们生成一个新的时间序列，其中每个数据点表示原始数据的一定期间内计算的摘要统计量。移动平均是最熟悉的例子。原始数据点可以以相等的权重进入计算，或者使用权重来，例如，强调最近的数据点。指数移动平均递归地计算权重，使得远离现在的数据点权重缩小或衰减。新的数据点通常是所有前面数据点的摘要，但也可以从周围的窗口计算。
- en: The `pandas` library includes very flexible functionality to define various
    window types, including rolling, exponentially weighted and expanding windows.
    In a second step, you can apply computations to each data captured by a window.
    These computations include built-in standard computations for individual series,
    such as the mean or the sum, the correlation or covariance for several series,
    as well as user-defined functions. The moving average and exponential smoothing
    examples in the following section make use of these tools.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '`pandas`库包括非常灵活的功能来定义各种窗口类型，包括滚动窗口、指数加权窗口和扩展窗口。在第二步中，您可以对由窗口捕获的每个数据应用计算。这些计算包括针对单个系列的内置标准计算，例如平均值或总和，对于几个系列的相关性或协方差，以及用户定义的函数。以下部分中的移动平均和指数平滑示例使用了这些工具。'
- en: Moving averages and exponential smoothing
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 移动平均和指数平滑
- en: Early forecasting models included moving-average models with exponential weights called exponential
    smoothing models. We will encounter moving averages again as key building blocks
    for linear time series.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 早期的预测模型包括带有指数权重的移动平均模型，称为指数平滑模型。我们将在后面的线性时间序列中再次遇到移动平均作为关键的构建块。
- en: Forecasts that rely on exponential smoothing methods use weighted averages of
    past observations, where the weights decay exponentially as the observations get
    older. Hence, a more recent observation receives a higher associated weight. These
    methods are popular for time series that do not have very complicated or abrupt
    patterns.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 依赖指数平滑方法的预测使用过去观测的加权平均值，其中随着观测时间的推移，权重呈指数衰减。因此，更近期的观测获得更高的关联权重。这些方法在时间序列不具有非常复杂或突然的模式时很受欢迎。
- en: Exponential smoothing is a popular technique based on weighted averages of past
    observations, with the weights decaying exponentially as the observations get
    older. In other words, the more recent the observation, the higher the associated
    weight. This framework generates reliable forecasts quickly and for a wide range
    of time series, which is a great advantage and of major importance to applications
    in industry.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 指数平滑是一种流行的技术，基于过去观测的加权平均，随着观测时间的推移，权重呈指数衰减。换句话说，观测越近，相关的权重越高。这个框架可以快速生成可靠的预测，适用于广泛的时间序列，这是一个巨大的优势，对于工业应用至关重要。
- en: How to measure autocorrelation
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何测量自相关
- en: 'Autocorrelation (also called serial correlation) adapts the concept of correlation
    to the time series context: just as the correlation coefficient measures the strength
    of a linear relationship between two variables, the autocorrelation coefficient,
    ρ[k], measures the extent of a linear relationship between time series values
    separated by a given lag, k:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 自相关（也称为串行相关）将相关概念调整为时间序列环境：正如相关系数衡量两个变量之间线性关系的强度一样，自相关系数ρ[k]衡量相隔给定滞后k的时间序列值之间的线性关系的程度：
- en: '![](img/4e519202-2131-436c-91f7-b965dc3cc44e.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4e519202-2131-436c-91f7-b965dc3cc44e.png)'
- en: Hence, we can calculate one autocorrelation coefficient for each of the T-1
    lags in a time series; T is the length of the series. The autocorrelation function
    (ACF) computes the correlation coefficients as a function of the lag.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们可以计算时间序列中T-1个滞后的每个自相关系数；T是序列的长度。自相关函数（ACF）根据滞后计算相关系数。
- en: The autocorrelation for a lag larger than 1 (that is, between observations more
    than one time step apart) reflects both the direct correlation between these observations
    and the indirect influence of the intervening data points. The partial autocorrelation
    removes this influence and only measures the linear dependence between data points
    at the given lag distance. The **partial autocorrelation function** (**PACF**)
    provides all the correlations that result once the effects of a correlation at
    shorter lags have been removed.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 对于大于1的滞后自相关（即，超过一个时间步的观测之间的），反映了这些观测之间的直接相关以及中间数据点的间接影响。偏自相关消除了这种影响，只测量给定滞后距离的数据点之间的线性依赖关系。**偏自相关函数（PACF）**提供了一旦较短滞后的相关性效应被移除后产生的所有相关性。
- en: There are algorithms that estimate the partial autocorrelation from the sample
    autocorrelation based on the exact theoretical relationship between the PACF and
    the ACF.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 有算法根据PACF与ACF之间的确切理论关系来估计样本自相关的偏自相关。
- en: A correlogram is simply a plot of the ACF or PACF for sequential lags, k=0,1,...,n.
    It allows us to inspect the correlation structure across lags at one glance. The
    main usage of correlograms is to detect any autocorrelation after the removal
    of the effects of deterministic trend or seasonality. Both the ACF and the PACF
    are key diagnostic tools for the design of linear time series models and we will
    review examples of ACF and PACF plots in the following section on time series
    transformations.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 自相关图简单地是顺序滞后k=0,1,...,n的ACF或PACF的图。它允许我们一眼就检查各个滞后的相关结构。自相关图的主要用途是在去除确定性趋势或季节性影响后检测任何自相关。ACF和PACF都是线性时间序列模型设计的关键诊断工具，我们将在时间序列转换的以下部分中审查ACF和PACF图的示例。
- en: How to diagnose and achieve stationarity
  id: totrans-41
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何诊断并实现平稳性
- en: The statistical properties, such as the mean, variance, or autocorrelation,
    of a stationary time series are independent of the period, that is, they don't
    change over time. Hence, stationarity implies that a time series does not have
    a trend or seasonal effects and that descriptive statistics, such as the mean
    or the standard deviation, when computed for different rolling windows, are constant
    or do not change much over time. It reverts to its mean, and the deviations have
    constant amplitude, while short-term movements always look the same in the statistical
    sense.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 稳定时间序列的统计特性，如均值、方差或自相关，与时期无关，即它们随时间不变化。因此，稳态意味着时间序列没有趋势或季节效应，而且当为不同的滚动窗口计算描述统计量（如均值或标准差）时，它们是常数或随时间变化不大的。它回归到其均值，偏差具有恒定的幅度，而短期波动在统计意义上总是相同的。
- en: More formally, strict stationarity requires the joint distribution of any subset
    of time series observations to be independent of time with respect to all moments.
    So, in addition to the mean and variance, higher moments such as skew and kurtosis,
    also need to be constant, irrespective of the lag between different observations. In
    most applications, we limit stationarity to first and second moments so that the
    time series is covariance stationary with constant mean, variance, and autocorrelation.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 更正式地说，严格稳态要求任何时间序列观测子集的联合分布与时间无关，而与所有时刻的矩一致。因此，除了均值和方差外，高阶矩，如偏度和峰度，也需要保持不变，而不考虑不同观测之间的滞后。在大多数应用中，我们将稳态限制为一阶和二阶矩，以使时间序列具有恒定的均值、方差和自相关。
- en: Note that we specifically allow for dependence between observations at different
    lags, just like we want the input data for linear regression to be correlated
    with the outcome. Stationarity implies that these relationships are stable, which
    facilitates prediction as the model can focus on learning systematic patterns that
    take place within stable statistical properties. It is important because classical
    statistical models assume that the time series input data is stationary.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，我们特别允许不同滞后观测之间的依赖关系，就像我们希望线性回归的输入数据与结果相关联一样。稳态意味着这些关系是稳定的，这有助于预测，因为模型可以专注于学习发生在稳定统计属性内的系统模式。这很重要，因为经典统计模型假设时间序列输入数据是稳态的。
- en: The following sections introduce diagnostics that help detect when data is not
    stationary, and transformations that help meet these assumptions.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 以下部分介绍了帮助检测数据非稳态的诊断方法，以及帮助满足这些假设的转换方法。
- en: Time series transformations
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 时间序列转换
- en: To satisfy the stationarity assumption of linear time series models, we need
    to transform the original time series, often in several steps. Common transformations
    include the application of the (natural) logarithm to convert an exponential growth
    pattern into a linear trend and stabilize the variance. Deflation implies dividing
    a time series by another series that causes trending behavior, for example dividing
    a nominal series by a price index to convert it into a real measure.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 要满足线性时间序列模型的稳态假设，我们需要转换原始时间序列，通常需要几个步骤。常见的转换包括将（自然）对数应用于将指数增长模式转换为线性趋势并稳定方差。通货紧缩意味着将一个时间序列除以另一个导致趋势行为的系列，例如将名义系列除以价格指数以将其转换为实际测量。
- en: A series is trend-stationary if it reverts to a stable long-run linear trend.
    It can often be made stationary by fitting a trend line using linear regression
    and using the residuals, or by including the time index as an independent variable
    in a regression or AR(I)MA model (see the following section on univariate time
    series models), possibly combined with logging or deflating.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个系列恢复到一个稳定的长期线性趋势，则它是趋势稳定的。通常可以通过使用线性回归拟合趋势线并使用残差，或者通过将时间指数包括为回归或AR(I)MA模型的独立变量（请参阅下一节有关单变量时间序列模型的内容）来使其稳定，可能结合对数化或通货紧缩。
- en: In many cases, de-trending is not sufficient to make the series stationary.
    Instead, we need to transform the original data into a series of period-to-period
    and/or season-to-season differences. In other words, we use the result of subtracting
    neighboring data points or values at seasonal lags from each other. Note that
    when such differencing is applied to a log-transformed series, the results represent
    instantaneous growth rates or returns in a financial context.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多情况下，去趋势化不足以使序列平稳。相反，我们需要将原始数据转换为周期间和/或季节间差异的系列。换句话说，我们使用相邻数据点或季节滞后值相互减去的结果。请注意，当将这种差分应用于对数变换的序列时，结果代表金融背景下的瞬时增长率或收益率。
- en: If a univariate series becomes stationary after differencing d times, it is
    said to be integrated of the order of d, or simply integrated if d=1\. This behavior
    is due to so-called unit roots.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果单变量序列在差分 d 次后变为平稳，则称其为 d 阶整合，如果 d=1，则称其为简单整合。这种行为是由所谓的单位根引起的。
- en: How to diagnose and address unit roots
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何诊断和解决单位根问题
- en: 'Unit roots pose a particular problem for determining the transformation that
    will render a time series stationary. Time series are often modeled as stochastic
    processes of the following autoregressive form that we will explore in more detail
    as a building block for ARIMA models:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 单位根对确定将时间序列变为平稳的转换提出了特殊问题。时间序列通常被建模为我们将更详细地探讨的具有以下自回归形式的随机过程，作为 ARIMA 模型的构建块：
- en: '![](img/0f3427e1-6785-42b4-bd13-5bb27580a047.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0f3427e1-6785-42b4-bd13-5bb27580a047.png)'
- en: 'Where the current value is a weighted sum of past values plus a random disturbance.
    Such a process has a characteristic equation of the following form:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 其中当前值是过去值的加权和加上随机扰动。这样的过程具有以下形式的特征方程：
- en: '![](img/374eda4c-1907-4c05-895e-61937733ba69.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/374eda4c-1907-4c05-895e-61937733ba69.png)'
- en: If one of the roots of this equation equals 1, then the process is said to have
    a unit root. It will be non-stationary but does not necessarily need to have a
    trend. If the remaining roots of the characteristic equation are less than 1 in
    absolute terms, the first difference of the process will be stationary, and the
    process is integrated (of order 1) or I(1). With additional roots larger than
    1 in absolute terms, the order of integration is higher and additional differencing
    will be required.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果此方程的根之一等于 1，则该过程被称为具有单位根。它将是非平稳的，但不一定需要趋势。如果特征方程的剩余根的绝对值小于 1，则过程的一阶差分将是平稳的，并且过程是整合的（阶数为
    1）或 I(1)。如果附加根的绝对值大于 1，则积分的阶数较高，并且将需要额外的差分。
- en: 'In practice, time series of interest rates or asset prices are often not stationary,
    for example, because there does not exist a price level to which the series reverts.
    The most prominent example of a non-stationary series is the random walk for a
    time series of price, p[t], for a given starting price, p[0] (for example, a stock''s
    IPO price) and a white-noise disturbance, ε, that satisfies the following:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在实践中，利率或资产价格的时间序列通常不是平稳的，例如，因为不存在价格水平使序列回归。非平稳序列最突出的例子是给定起始价格 p[0]（例如，股票的首次公开发行价格）和满足以下条件的白噪声扰动
    ε 的价格时间序列的随机游走：
- en: '![](img/5816ce83-e27e-4cff-92fd-1e39ff3715ac.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5816ce83-e27e-4cff-92fd-1e39ff3715ac.png)'
- en: 'Repeated substitution shows that the current value, p[t], is the sum of all
    prior disturbances or innovations, ε, and the initial price, p[0]. If the equation
    includes a constant term, then the random walk is said to have drift. Hence, the
    random walk is an autoregressive stochastic process of the following form:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 重复代换表明，当前值 p[t] 是所有先前扰动或创新 ε 以及初始价格 p[0] 的总和。如果方程包括一个常数项，则随机游走被称为具有漂移。因此，随机游走是以下形式的自回归随机过程：
- en: '![](img/54d1d25c-1e8d-4488-a0bc-9f79338dda70.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](img/54d1d25c-1e8d-4488-a0bc-9f79338dda70.png)'
- en: With the characteristic equation, ![](img/2681505a-2a2e-4c17-90fb-865d2d7c55e7.png),
    that has a unit root and is both non-stationary and integrated of order 1. On
    the one hand, given the i.i.d. nature of ε, the variance of the time series equals σ²,
    which is not second-order stationary and implies that, in principle, the series
    could, over time, assume any variable. On the other hand, taking the first difference, Δp[t=]p[t]-p[t-1],
    leaves Δp[t]=ε [t], which is stationary, given the statistical assumption about ε.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 具有特征方程 ![](img/2681505a-2a2e-4c17-90fb-865d2d7c55e7.png)，该方程具有单位根并且既不稳定也不是一阶积分。一方面，鉴于 ε
    的 i.i.d. 性质，时间序列的方差等于 σ²，这不是二阶稳定的，并且暗示着原则上，该系列随时间可能采用任何变量。另一方面，进行第一次差分，Δp[t]=p[t]-p[t-1]，留下
    Δp[t]=ε [t]，这是稳定的，鉴于对 ε 的统计假设。
- en: 'The defining characteristic of a unit-root non-stationary series is long memory:
    since current values are the sum of past disturbances, large innovations persist
    for much longer than for a mean-reverting, stationary series.'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 单位根非平稳系列的定义特征是长期记忆：因为当前值是过去扰动的总和，所以大的创新持续的时间比均值回归、平稳的系列长得多。
- en: In addition to using the difference between neighboring data points to remove
    a constant pattern of change, it can be used to apply seasonal differencing to
    remove patterns of seasonal change. This involves taking the difference of values
    at a lag distance that represents the length of a seasonal pattern, which is four
    quarters, or 12 months, apart to remove both seasonality and linear trend.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用相邻数据点之间的差异来消除恒定变化模式之外，还可以应用季节性差分来消除季节性变化的模式。这涉及到以表示季节模式长度的滞后距离为单位，相隔四个季度或
    12 个月的值之间的差异，以消除季节性和线性趋势。
- en: 'Identifying the correct transformation, and in particular, the appropriate
    number and lags for differencing is not always clear-cut. Some rules have been
    suggested, summarized as follows:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 识别正确的转换，尤其是差分的适当数量和滞后期并不总是明确的。一些规则已经被提出，总结如下：
- en: '**Positive autocorrelations up to 10+ lags**: Probably needs higher-order differencing.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**10+滞后期的正自相关**: 可能需要更高阶的差分。'
- en: '**Lag-1 autocorrelation close to zero or negative, or generally small and patternless**:
    No need for higher-order differencing.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**滞后期接近零或为负，或一般较小且无规律**: 不需要更高阶的差分。'
- en: '**Lag-1 autocorrelation < -0.5**: Series may be over-differenced.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**滞后期-1的自相关< -0.5**: 系列可能存在过多的差分。'
- en: Slightly over- or under-differencing can be corrected with AR or MA terms.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 轻微的过度或不足的差分可以通过 AR 或 MA 项进行修正。
- en: Optimal differencing often produces the lowest standard deviation, but not always.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最优差分通常会产生最低的标准差，但并非总是如此。
- en: A model without differencing assumes that the original series is stationary,
    including mean-reverting. It normally includes a constant term to allow for a
    non-zero mean.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无差分的模型假设原始系列是平稳的，包括均值回归。通常包括一个常数项，以允许非零均值。
- en: A model with one order of differencing assumes that the original series has
    a constant average trend and should include a constant term.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有一次差分次序的模型假设原始系列具有恒定的平均趋势，并且应包括一个常数项。
- en: A model with two orders of differencing assumes that the original series has
    a time-varying trend and should not include a constant.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有两个差分次序的模型假设原始系列具有时变趋势，不应包括一个常数。
- en: Some authors recommend fractional differencing as a more flexible approach to
    rendering an integrated series stationary and may be able to keep more information
    or signal than simple or seasonal differences at discrete intervals (see references
    on GitHub).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 一些作者推荐分数差分作为使集成系列保持稳定的更灵活的方法，可能能够在离散间隔中保留比简单或季节性差异更多的信息或信号（参见 GitHub 上的参考资料）。
- en: Unit root tests
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 单位根检验
- en: Statistical unit root tests are a common way to determine objectively whether
    (additional) differencing is necessary. These are statistical hypothesis tests
    of stationarity that are designed to determine whether differencing is required.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 统计单位根检验是一种常见的客观确定（额外）差分是否必要的方法。这些是用于确定是否需要差分的平稳性的统计假设检验。
- en: The augmented Dickey-Fuller (ADF) test evaluates the null hypothesis that a
    time series sample has unit root against the alternative of stationarity. It regresses
    the differenced time series on a time trend, the first lag, and all lagged differences,
    and computes a test statistic from the value of the coefficient on the lagged
    time series value. `statsmodels` makes it easy to implement (see companion notebook).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 增广 Dickey-Fuller (ADF) 检验评估一个时间序列样本是否具有单位根的零假设，对比平稳性的备择假设。它对时间趋势、第一滞后和所有滞后差异的差异化时间序列进行回归，并根据滞后时间序列值的系数值计算一个检验统计量。
    `statsmodels` 使得实现变得容易（参见伴随的笔记本）。
- en: 'Formally, the ADF test for a time series, y[t], runs the linear regression:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 形式上，时间序列 y[t] 的 ADF 测试运行线性回归：
- en: '![](img/8315a158-09a5-4724-bf8e-54157d7c6344.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8315a158-09a5-4724-bf8e-54157d7c6344.png)'
- en: Where α is a constant, β is a coefficient on a time trend, and p refers to the
    number of lags used in the model. The α=β =0 constraint implies a random walk,
    whereas only β=0 implies a random walk with drift. The lag order is usually decided
    using the AIC and BIC information criteria introduced in [Chapter 7](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml),
    *Linear Models*.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 α 是一个常数，β 是时间趋势的系数，p 是模型中使用的滞后数。α=β =0 约束意味着一个随机游走，而只有 β=0 意味着有漂移的随机游走。滞后顺序通常使用在[第
    7 章](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml) 中介绍的 AIC 和 BIC 信息标准来决定，*线性模型*。
- en: The ADF test statistics uses the sample coefficient, γ, that, under the null
    hypothesis of unit-root non-stationarity equals zero, and is negative otherwise.
    It intends to demonstrate that, for an integrated series, the lagged series value
    should not provide useful information in predicting the first difference above
    and beyond lagged differences.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: ADF 检验统计量使用样本系数 γ，在单位根非平稳的零假设下等于零，在其他情况下为负。它旨在证明，对于一个积分序列，滞后的系列值不应该在预测超出滞后差异的第一差异时提供有用的信息。
- en: How to apply time series transformations
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何应用时间序列变换
- en: 'The following chart shows time series for the NASDAQ stock index and industrial
    production for the 30 years through 2017 in original form, as well as the transformed
    versions after applying the logarithm and subsequently applying first and seasonal
    differences (at lag 12), respectively. The charts also display the ADF p-value,
    which allows us to reject the hypothesis of unit-root non-stationarity after all
    transformations in both cases:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了纳斯达克股票指数和工业生产在原始形式下的 30 年时间序列，以及应用对数和随后应用第一和季节性差异（在滞后 12 ）之后的转换版本。图表还显示了
    ADF p 值，这使得我们可以在两种情况下拒绝单位根非平稳的假设：
- en: '![](img/2dd91936-2438-49d2-90f2-b7c80bc85a9a.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2dd91936-2438-49d2-90f2-b7c80bc85a9a.png)'
- en: We can further analyze the relevant time series characteristics for the transformed
    series using a Q-Q plot that compares the quantiles of the distribution of the
    time series observation to the quantiles of the normal distribution and the correlograms
    based on the ACF and PACF.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以进一步分析转换后时间序列的相关特征，使用一个 Q-Q 图来比较时间序列观测值的分布的分位数和正态分布的分位数，以及基于 ACF 和 PACF 的自相关图。
- en: 'For the NASDAQ plot, we notice that while there is no trend, the variance is
    not constant but rather shows clustered spikes around periods of market turmoil
    in the late 1980s, 2001, and 2008\. The Q-Q plot highlights the fat tails of the
    distribution with extreme values more frequent than the normal distribution would
    suggest. The ACF and the PACF show similar patterns with autocorrelation at several
    lags appearing significant:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 对于纳斯达克图表，我们注意到虽然没有趋势，但方差不是恒定的，而是在 1980 年代末、2001 年和 2008 年的市场动荡时期附近显示出集群的尖峰。Q-Q
    图突出显示了分布的尾部肥大，极端值比正态分布所暗示的更频繁。ACF 和 PACF 显示出类似的模式，多个滞后处的自相关显著：
- en: '![](img/1238bca1-4c4f-490c-b75b-fd6fc84a22f1.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1238bca1-4c4f-490c-b75b-fd6fc84a22f1.png)'
- en: 'For the monthly time series on industrial manufacturing production, we notice
    a large negative outlier following the 2008 crisis as well as the corresponding
    skew in the Q-Q plot. The autocorrelation is much higher than for the NASDAQ returns
    and declines smoothly. The PACF shows distinct positive autocorrelation patterns
    at lag 1 and 13, and significant negative coefficients at lags 3 and 4:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 对于工业生产的月度时间序列，我们注意到 2008 年危机后出现了一个大的负异常值，以及 Q-Q 图中相应的偏斜。自相关远高于纳斯达克回报，并且平稳下降。PACF
    在滞后 1 和 13 处显示出明显的正自相关模式，并且在滞后 3 和 4 处有显著的负系数：
- en: '![](img/b5f655fd-0f48-43ad-949a-5f4205ae9053.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b5f655fd-0f48-43ad-949a-5f4205ae9053.png)'
- en: Univariate time series models
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 单变量时间序列模型
- en: Multiple linear-regression models expressed the variable of interest as a linear
    combination of predictors or input variables. Univariate time series models relate the
    value of the time series at the point in time of interest to a linear combination
    of lagged values of the series and possibly past disturbance terms.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 多元线性回归模型将感兴趣的变量表达为预测变量或输入变量的线性组合。单变量时间序列模型将感兴趣时间点的时间序列值与系列滞后值的线性组合以及可能的过去干扰项相关联。
- en: 'While exponential smoothing models are based on a description of the trend
    and seasonality in the data, ARIMA models aim to describe the autocorrelations
    in the data. ARIMA(p, d, q) models require stationarity and leverage two building
    blocks:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然指数平滑模型是基于数据中的趋势和季节性的描述，但 ARIMA 模型旨在描述数据中的自相关性。ARIMA(p, d, q) 模型需要稳定性，并利用两个构建块：
- en: '**Autoregressive** (**AR**) terms consisting of p-lagged values of the time
    series'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自回归** (**AR**) 项由时间序列的 p 滞后值组成'
- en: '**Moving average** (**MA**) terms that contain q-lagged disturbances'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移动平均** (**MA**) 项包含 q 滞后干扰'
- en: The I stands for integrated because the model can account for unit-root non-stationarity
    by differentiating the series d times. The term autoregression underlines that
    ARIMA models imply a regression of the time series on its own values.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: I 代表积分，因为模型可以通过对系列进行 d 次微分来考虑单位根非平稳性。自回归术语强调 ARIMA 模型意味着时间序列对其自身值的回归。
- en: We will introduce the ARIMA building blocks, simple autoregressive (AR) and
    moving average (MA) models, and explain how to combine them in autoregressive
    moving-average (ARMA) models that may account for series integration as ARIMA
    models or include exogenous variables as AR(I)MAX models. Furthermore, we will
    illustrate how to include seasonal AR and MA terms to extend the toolbox to also
    include SARMAX models.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将介绍 ARIMA 构建块，简单的自回归 (AR) 和移动平均 (MA) 模型，并解释如何将它们结合在自回归移动平均 (ARMA) 模型中，该模型可以作为
    ARIMA 模型考虑系列集成，或者包含外生变量作为 AR(I)MAX 模型。此外，我们将说明如何包含季节性 AR 和 MA 项以扩展工具箱，以便还包括 SARMAX
    模型。
- en: How to build autoregressive models
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何构建自回归模型
- en: 'An AR model of order p aims to capture the linear dependence between time series
    values at different lags and can be written as follows:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 顺序 p 的 AR 模型旨在捕捉不同滞后时间序列值之间的线性相关性，并可写为：
- en: '![](img/8d109ce0-3b57-4272-8300-100fd7a34f4f.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8d109ce0-3b57-4272-8300-100fd7a34f4f.png)'
- en: 'This closely resembles a multiple linear regression on lagged values of y[t].
    This model has the following characteristic equation:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 这与 y[t] 的滞后值的多重线性回归非常相似。该模型具有以下特征方程：
- en: '![](img/b808a63c-e313-459c-a1d4-499779ce1ad3.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b808a63c-e313-459c-a1d4-499779ce1ad3.png)'
- en: The inverses of the solution to this equation in x are the characteristic roots,
    and the AR(p) process is stationary if these roots are all less than 1 in absolute
    terms, and unstable otherwise. For a stationary series, multi-step forecasts will
    converge to the mean of the series.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 解此方程的 x 的解的倒数是特征根，如果这些根在绝对值上都小于 1，则 AR(p) 过程是稳定的，否则是不稳定的。对于稳态系列，多步预测将收敛到系列的平均值。
- en: We can estimate the model parameters with the familiar least squares method
    using the p+1, ..., T observations to ensure there is data for each lagged term
    and the outcome.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用熟悉的最小二乘法估计模型参数，使用 p+1，..., T 观测数据以确保每个滞后项和结果都有数据。
- en: How to identify the number of lags
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何确定滞后数量
- en: In practice, the challenge consists in deciding on the appropriate order p of
    lagged terms. The time series analysis tools for serial correlation play a key
    role. The ACF estimates the autocorrelation between observations at different
    lags, which in turn results from both direct and indirect linear dependence.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 实际上，挑选适当的滞后项顺序 p 是一个挑战。用于串行相关性的时间序列分析工具起着关键作用。ACF 估计不同滞后观测之间的自相关性，这反过来是直接和间接线性相关性的结果。
- en: Hence, for an AR model of order k, the ACF will show a significant serial correlation
    up to lag k and, due to the inertia caused by the indirect effects of the linear
    relationship, will extend to subsequent lags and eventually trail off as the effect
    was weakened. On the other hand, the PACF only measures the direct linear relationship
    between observations a given lag apart so that it will not reflect correlation
    for lags beyond *k*.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，对于阶数为 k 的 AR 模型，ACF 将显示出一直到滞后 k 的显著串行相关，并且由于线性关系间接影响所导致的惯性，将延伸到后续滞后，最终因效应减弱而逐渐消失。另一方面，PACF
    仅度量观察值之间的直接线性关系，间隔给定滞后，因此不会反映超过 *k* 的滞后的相关性。
- en: How to diagnose model fit
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何诊断模型拟合度
- en: If the model captures the linear dependence across lags, then the residuals
    should resemble white noise.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 如果模型捕获了滞后之间的线性依赖关系，则残差应该类似于白噪声。
- en: 'In addition to inspecting the ACF to verify the absence of significant autocorrelation
    coefficients, the Ljung-Box Q statistic allows us to test the hypothesis that
    the residual series follows white noise. The null hypothesis is that all m serial
    correlation coefficients are zero against the alternative that some coefficients
    are not. The test statistic is computed from the sample autocorrelation coefficients,
    ρ[k], for different lags, k, and follows an Χ² distribution:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 除了检查 ACF 以验证自相关系数的显著性缺失外，Ljung-Box Q 统计量还允许我们测试残差序列是否遵循白噪声的假设。零假设是所有 m 个串行相关系数都为零，而备择假设是一些系数不为零。测试统计量是从不同滞后
    k 的样本自相关系数 ρ[k] 计算得到，并且遵循一个 Χ² 分布：
- en: '![](img/add319bd-5419-4a0d-9c52-8625bb2ca4d2.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](img/add319bd-5419-4a0d-9c52-8625bb2ca4d2.png)'
- en: As we will see, `statsmodels` provides information about the significance of
    coefficients for different lags, and insignificant coefficients should be removed.
    If the Q statistic rejects the null hypothesis of no autocorrelation, you should
    consider additional AR terms.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们将看到的，`statsmodels` 提供了关于不同滞后的系数显著性的信息，不显著的系数应予以删除。如果 Q 统计量拒绝了无自相关的原假设，则应考虑额外的
    AR 项。
- en: How to build moving average models
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何构建移动平均模型
- en: 'An MA model of order q uses q past disturbances rather than lagged values of
    the time series in a regression-like model, as follows:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 阶数为 q 的 MA 模型使用过去 q 个扰动，而不是时间序列的滞后值，如下：
- en: '![](img/013b3331-8be4-462f-89a6-54674e6c988b.png)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](img/013b3331-8be4-462f-89a6-54674e6c988b.png)'
- en: Since we do not observe the white-noise disturbance values, ε[t], MA(q) is not
    a regression model like the ones we have seen so far. Rather than using least
    squares, MA(q) models are estimated using **maximum likelihood** (**MLE**), alternatively
    initializing or estimating the disturbances at the beginning of the series and
    then recursively and iteratively computing the remainder.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们没有观察到白噪声扰动值 ε[t]，MA(q) 不像我们迄今为止见过的那样是一个回归模型。MA(q) 模型不是使用最小二乘法估计的，而是使用最大似然估计（MLE），或者在系列开始时初始化或估计扰动，然后递归和迭代地计算剩余部分。
- en: The MA(q) model gets its name from representing each value of y[t] as a weighted
    moving average of the past q innovations. In other words, current estimates represent
    a correction relative to past errors made by the model. The use of moving averages
    in MA(q) models differs from that of exponential smoothing or the estimation of
    seasonal time series components because an MA(q) model aims to forecast future
    values as opposed to de-noising or estimating the trend cycle of past values.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: MA(q)模型的名称源于将每个 y[t] 的值表示为过去 q 个创新的加权移动平均。换句话说，当前的估计值代表了相对于模型过去错误的修正。与指数平滑或估计季节性时间序列分量不同，MA(q)模型中移动平均的使用旨在预测未来值，而不是去噪声或估计过去值的趋势周期。
- en: MA(q) processes are always stationary because they are the weighted sum of white
    noise variables that are themselves stationary.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: MA(q) 过程始终是平稳的，因为它们是白噪声变量的加权和，而这些变量本身是平稳的。
- en: How to identify the number of lags
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何确定滞后数
- en: A time series generated by an MA(q) process is driven by the residuals from
    the q prior-model predictions. Hence, the ACF for the MA(q) process will show
    significant coefficients for values up to the lag, q, and then decline sharply
    because this is how the series values are assumed to have been generated.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 由 MA(q) 过程产生的时间序列由前 q 个模型预测的残差驱动。因此，MA(q) 过程的 ACF 将显示出到滞后 q 的值的显著系数，然后急剧下降，因为这是假定系列值生成的方式。
- en: The relationship between AR and MA models
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: AR 和 MA 模型之间的关系
- en: An AR(p) model can be expressed as an MA(∞) process using repeated substitution.
    When imposing constraints on the size of its coefficients, an MA(q) process, it
    becomes invertible and can be expressed as an AR(∞) process.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: AR(p) 模型可以使用重复替代表示为 MA(∞) 过程。当对其系数的大小施加约束时，一个 MA(q) 过程，它变得可逆，并且可以表示为 AR(∞) 过程。
- en: How to build ARIMA models and extensions
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何构建 ARIMA 模型及其扩展
- en: Autoregressive integrated moving-average ARIMA(p, d, q) models combine AR(p)
    and MA(q) processes to leverage the complementarity of these building blocks and
    simplify model development by using a more compact form and reducing the number
    of parameters, in turn reducing the risk of overfitting.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 自回归积分移动平均 ARIMA(p, d, q) 模型结合了 AR(p) 和 MA(q) 过程，利用这些构建模块的互补性，并通过使用更紧凑的形式简化模型开发，并减少参数的数量，从而减少过拟合的风险。
- en: 'The models also take care of eliminating unit-root nonstationarity by using
    the d^(th) difference of the time series values. An ARIMA(p, 1, q) model is the
    same as using an ARMA(p, q) model with the first differences of the series. Using
    y'' to denote the original series after non-seasonal differencing d times, the
    ARIMA(p, d, q) model is simply:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 该模型还通过使用时间序列值的 d^(th) 差分来消除单位根非平稳性。ARIMA(p, 1, q) 模型与使用系列的第一次差分的 ARMA(p, q)
    模型相同。使用 y' 表示非季节性差分 d 次后的原始系列，ARIMA(p, d, q) 模型就是：
- en: '![](img/9b7f8efe-736b-496b-9ab8-c57bd417e00a.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9b7f8efe-736b-496b-9ab8-c57bd417e00a.png)'
- en: ARIMA models are also estimated using Maximum Likelihood. Depending on the implementation,
    higher-order models may generally subsume lower-order models. For example, `statsmodels` includes
    all lower-order p and q terms and does not permit removing coefficients for lags
    below the highest value. In this case, higher-order models will always fit better.
    Be careful not to overfit your model to the data by using too many terms.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: ARIMA 模型也是使用最大似然估计的。根据实现的不同，高阶模型通常会包含低阶模型。例如，`statsmodels` 包括所有低阶 p 和 q 项，并且不允许移除小于最高值的滞后项系数。在这种情况下，高阶模型总是拟合得更好。小心不要通过使用过多的项过度拟合模型。
- en: How to identify the number of AR and MA terms
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何确定 AR 和 MA 项的数量
- en: Since AR(p) and MA(q) terms interact, the information provided by the ACF and
    PACF is no longer reliable and can only be used as a starting point.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 AR(p) 和 MA(q) 项相互作用，ACF 和 PACF 提供的信息不再可靠，只能作为起点使用。
- en: Traditionally, the AIC and BIC information criteria have been used to rely on
    in-sample fit when selecting the model design. Alternatively, we can rely on out-of-sample
    tests to cross-validate multiple parameter choices.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，AIC 和 BIC 信息准则一直被用来在选择模型设计时依赖于样本内拟合。或者，我们可以依赖于样本外测试来交叉验证多个参数选择。
- en: 'The following summary provides some generic guidance to choose the model order
    in the case of considering AR and MA models in isolation:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 以下摘要提供了在考虑 AR 和 MA 模型时选择模型阶数的一些通用指导：
- en: The lag beyond which the PACF cuts off is the indicated number of AR terms.
    If the PACF of the differenced series cuts off sharply and/or the lag-1 autocorrelation
    is positive, add one or more AR terms.
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 超过 PACF 截断的滞后是所示的 AR 项的数量。如果差分序列的 PACF 显示出明显的截断和/或滞后 1 的自相关是正的，则添加一个或多个 AR 项。
- en: The lag beyond which the ACF cuts off is the indicated number of MA terms. If
    the ACF of the differenced series displays a sharp cutoff and/or the lag-1 autocorrelation
    is negative, consider adding an MA term to the model.
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 超过 ACF 截断的滞后是所示的 MA 项的数量。如果差分序列的 ACF 显示出明显的截断和/或滞后 1 的自相关是负的，则考虑向模型中添加一个 MA
    项。
- en: AR and MA terms may cancel out each other's effects, so always try to reduce
    the number of AR and MA terms by 1 if your model contains both to avoid overfitting,
    especially if the more complex model requires more than 10 iterations to converge.
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: AR 和 MA 项可能会相互抵消彼此的影响，因此如果您的模型同时包含两者，尝试总是将 AR 和 MA 项的数量减少 1，以避免过度拟合，特别是如果更复杂的模型需要超过
    10 次迭代才能收敛。
- en: If the AR coefficients sum to nearly 1 and suggest a unit root in the AR part
    of the model, eliminate 1 AR term and difference the model once (more).
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果 AR 系数之和接近于 1，并且表明模型的 AR 部分存在单位根，则应消除 1 个 AR 项并再次进行差分。
- en: If the MA coefficients sum to nearly 1 and suggest a unit root in the MA part
    of the model, eliminate 1 MA term and reduce the order of differencing by 1.
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果 MA 系数之和接近于 1，并且表明模型的 MA 部分存在单位根，则应消除 1 个 MA 项，并将差分阶数降低 1。
- en: Unstable long-term forecasts suggest there may be a unit root in the AR or MA
    part of the model.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不稳定的长期预测表明模型的 AR 或 MA 部分可能存在单位根。
- en: Adding features – ARMAX
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加特征 - ARMAX
- en: 'An ARMAX model adds input variables or covariate on the right-hand side of
    the ARMA time series model (assuming the series is stationary so we can skip differencing):'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: ARMAX 模型在 ARMA 时间序列模型的右侧添加输入变量或协变量（假设序列是平稳的，因此我们可以跳过差分）：
- en: '![](img/9f28ac09-95ce-439a-b322-a6804b18a1ad.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9f28ac09-95ce-439a-b322-a6804b18a1ad.png)'
- en: This resembles a linear regression model but is quite difficult to interpret
    because the effect of β on y[t] is not the effect of an increase in x[t] by one
    unit as in linear regression. Instead, the presence of lagged values of y[t ]on
    the right-hand side of the equation implies that the coefficient can only be interpreted
    given the lagged values of the response variable, which is hardly intuitive.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 这类似于线性回归模型，但很难解释，因为 β 对 y[t] 的影响不是像线性回归中 x[t] 增加一个单位那样简单。相反，在方程的右侧存在 y[t] 的滞后值意味着系数只能在考虑到响应变量的滞后值时进行解释，这几乎是不直观的。
- en: Adding seasonal differencing – SARIMAX
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 添加季节性差分 - SARIMAX
- en: For time series with seasonal effects, we can include AR and MA terms that capture
    the seasonality's periodicity. For instance, when using monthly data and the seasonal
    effect length is one year, the seasonal AR and MA terms would reflect this particular
    lag length.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 对于具有季节效应的时间序列，我们可以包括捕捉季节性周期性的 AR 和 MA 项。例如，当使用月度数据且季节效应长度为一年时，季节性 AR 和 MA 项将反映这个特定的滞后长度。
- en: The ARIMAX(p, d, q) model then becomes a SARIMAX(p, d, q) x (P, D, Q)[s ]model,
    which is a bit more complicated to write out, but the references on GitHub, including
    the statsmodels documentation, provide this information in detail.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 然后 ARIMAX(p, d, q) 模型变成了 SARIMAX(p, d, q) x (P, D, Q)[s] 模型，这样写起来稍微复杂一些，但是 GitHub
    上的参考资料，包括 statsmodels 的文档，提供了详细信息。
- en: We will now build a seasonal ARMA model using macro-data to illustrate the implementation.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将使用宏观数据构建一个季节性 ARMA 模型来说明实施过程。
- en: How to forecast macro fundamentals
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何预测宏观基本面
- en: 'We will build a SARIMAX model for monthly data on an industrial production
    time series for the 1988-2017 period. As illustrated in the first section on analytical
    tools, the data has been log-transformed, and we are using seasonal (lag-12) differences.
    We estimate the model for a range of both ordinary and conventional AR and MA
    parameters using a rolling window of 10 years of training data, and evaluate the
    RMSE of the 1-step-ahead forecast, as shown in the following simplified code (see
    GitHub for details):'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将为 1988-2017 年间的工业生产时间序列构建一个 SARIMAX 模型。正如在关于分析工具的第一部分中所说明的，数据已经进行了对数变换，我们正在使用季节性（滞后-12）差分。我们使用一个包括常规
    AR 和 MA 参数范围的滚动窗口对 10 年的训练数据进行模型估计，并评估 1 步预测的 RMSE，如下所示的简化代码（详情请参阅 GitHub）：
- en: '[PRE1]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We also collect the AIC and BIC criteria that show a very high rank correlation
    coefficient of 0.94, with BIC favoring models with slightly fewer parameters than
    AIC. The best five models by RMSE are:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还收集了 AIC 和 BIC 标准，显示了 0.94 的非常高的秩相关系数，其中 BIC 倾向于比 AIC 稍少参数的模型。RMSE 最佳的五个模型为：
- en: '[PRE2]'
  id: totrans-148
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We re-estimate a SARIMA(2, 0 ,3) x (1, 0, 0) model, as follows:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们重新估计了一个 SARIMA(2, 0, 3) x (1, 0, 0) 模型，如下所示：
- en: '[PRE3]'
  id: totrans-150
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We obtain the following summary:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到以下摘要：
- en: '![](img/46e2567f-c100-48b5-b520-724e0a9b629c.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](img/46e2567f-c100-48b5-b520-724e0a9b629c.png)'
- en: 'The coefficients are significant, and the Q statistic rejects the hypothesis
    of further autocorrelation. The correlogram similarly indicates that we have successfully
    eliminated the series'' autocorrelation:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 系数是显著的，并且 Q 统计量拒绝了进一步自相关的假设。相关图表同样表明我们已成功消除了序列的自相关性：
- en: '![](img/cb389378-184c-4c24-a4fb-49b6ae0d3d6c.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb389378-184c-4c24-a4fb-49b6ae0d3d6c.png)'
- en: How to use time series models to forecast volatility
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何使用时间序列模型来预测波动性
- en: A particularly important area of application for univariate time series models
    is the prediction of volatility. The volatility of financial time series is usually
    not constant over time but changes, with bouts of volatility clustering together.
    Changes in variance create challenges for time series forecasting using the classical
    ARIMA models. To address this challenge, we will now model volatility so that
    we can predict changes in variance.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 单变量时间序列模型的一个特别重要的应用领域是波动率的预测。金融时间序列的波动率通常随时间而变化，但是波动率的变化会聚集在一起。方差的变化对于使用经典的
    ARIMA 模型进行时间序列预测构成挑战。为了解决这一挑战，我们现在将对波动率进行建模，以便我们可以预测方差的变化。
- en: Heteroskedasticity is the technical term for changes in a variable's variance.
    The **autoregressive conditional heteroskedasticity** (**ARCH**) model expresses
    the variance of the error term as a function of the errors in previous periods.
    More specifically, it assumes that the error variance follows an AR(p) model.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 异方差性是变量方差变化的技术术语。自回归条件异方差（ARCH）模型将误差项的方差表达为前期误差的函数。更具体地说，它假定误差方差遵循一个 AR(p) 模型。
- en: The **generalized autoregressive conditional heteroskedasticity **(**GARCH**)
    model broadens the scope to ARMA models. Time series forecasting often combines
    ARIMA models for the expected mean and ARCH/GARCH models for the expected variance
    of a time series. The 2003 Nobel Prize in Economics was awarded to Robert Engle
    and Clive Granger for developing this class of models. The former also runs the
    Volatility Lab at New York University's Stern School (see GitHub references) with
    numerous online examples and tools concerning the models we will discuss and their
    numerous extensions.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 广义自回归条件异方差（GARCH）模型将范围扩展到 ARMA 模型。时间序列预测通常将 ARIMA 模型用于时间序列的预期均值，并将 ARCH/GARCH
    模型用于时间序列的预期方差。2003 年诺贝尔经济学奖授予了罗伯特·恩格尔和克莱夫·格兰杰，以表彰他们开发了这类模型。前者还在纽约大学斯特恩商学院（参见 GitHub
    引用）运营着波动性实验室，提供了许多关于我们将讨论的模型及其众多扩展的在线示例和工具。
- en: The autoregressive conditional heteroskedasticity (ARCH) model
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自回归条件异方差（ARCH）模型
- en: 'The ARCH(p) model is simply an AR(p) model applied to the variance of the residuals
    of a time series model that makes this variance at time t conditional on lagged
    observations of the variance. More specifically, the error terms, ε[t], are residuals
    of a linear model, such as ARIMA, on the original time series and are split into
    a time-dependent standard deviation, σ[t], and a disturbance, *z[t]*, as follows:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: ARCH(p) 模型简单地是将 AR(p) 模型应用于时间序列模型的残差方差，该模型使得时间 t 的方差条件于方差的滞后观测。更具体地说，误差项 ε[t]
    是原始时间序列上线性模型（如 ARIMA）的残差，并分为一个时间相关的标准差 σ[t] 和一个扰动 *z[t]*，如下所示：
- en: '![](img/09c5df89-b9d8-46e7-b2b2-81c276a9ba01.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/09c5df89-b9d8-46e7-b2b2-81c276a9ba01.png)'
- en: An ARCH(p) model can be estimated using OLS. Engle proposed a method to identify
    the appropriate ARCH order using the Lagrange multiplier test that corresponds
    to the F-test of the hypothesis that all coefficients in linear regression are
    zero (see [Chapter 7](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml), *Linear Models*).
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: ARCH(p) 模型可以使用 OLS 进行估计。Engle 提出了一种使用拉格朗日乘子检验来确定适当的 ARCH 阶数的方法，该检验对应于线性回归中所有系数为零的假设的
    F 检验（参见 [第 7 章](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml)，*线性模型*）。
- en: One strength of the model is that it produces volatility, estimates positive
    excess kurtosis—that is, fat tails relative to the normal distribution—which in
    turn is in line with empirical observations about returns. Weaknesses include
    that the model assumes the same effect for positive and negative volatility shocks because
    it depends on the square of the previous shocks, whereas asset prices are known
    to respond differently to positive and negative shocks. The ARCH model also does
    not offer new insight into the source of variations of a financial time series
    because it just mechanically describes the conditional variance. Finally, ARCH
    models are likely to overpredict the volatility because they respond slowly to
    large, isolated shocks to the return series.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 该模型的一个优点是它产生波动率，并估计正的超额峰度——即，相对于正态分布有厚尾，这与关于回报的经验观察一致。弱点包括模型假设正和负波动冲击具有相同的效应，因为它依赖于前一冲击的平方，而资产价格已知对正和负冲击有不同的反应。ARCH
    模型也没有提供关于金融时间序列变化源的新见解，因为它只是机械地描述条件方差。最后，ARCH 模型很可能会过度预测波动性，因为它对回报系列的大规模孤立冲击反应缓慢。
- en: For a properly-specified ARCH model, the standardized residuals (divided by
    the model estimate for the period of standard deviation) should resemble white
    noise and can be subjected to a Ljung-Box Q test.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 对于正确规范的 ARCH 模型，标准化残差（除以标准偏差期间的模型估计）应类似于白噪声，并且可以进行 Ljung-Box Q 检验。
- en: Generalizing ARCH – the GARCH model
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 泛化 ARCH —— GARCH 模型
- en: 'The ARCH model is relatively simple but often requires many parameters to capture
    the volatility patterns of an asset-return series. The **generalized ARCH** (**GARCH**)
    model applies to a log-return series, r[t], with disturbances, ε[t] = r[t ]- μ,
    that follow a GARCH(p, q) model if:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: ARCH 模型相对简单，但通常需要许多参数来捕获资产收益系列的波动性模式。**广义ARCH**（**GARCH**）模型适用于对数收益系列 r[t]，具有扰动项
    ε[t] = r[t ]- μ，如果遵循 GARCH(p, q) 模型：
- en: '![](img/2db414cb-f0fc-4ff1-bb1e-a326cc6df19e.png)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2db414cb-f0fc-4ff1-bb1e-a326cc6df19e.png)'
- en: The GARCH(p, q) model assumes an ARMA(p, q) model for the variance of the error
    term, ε[t].
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: GARCH(p, q) 模型假设误差项 ε[t] 的方差服从 ARMA(p, q) 模型。
- en: Similar to ARCH models, the tail distribution of a GARCH(1,1) process is heavier
    than that of a normal distribution. The model encounters the same weaknesses as
    the ARCH model. For instance, it responds equally to positive and negative shocks.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于 ARCH 模型，GARCH(1,1) 过程的尾部分布比正态分布更重。该模型面临与 ARCH 模型相同的弱点。例如，它对正负冲击的反应一样。
- en: Selecting the lag order
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 选择滞后阶数
- en: To configure the lag order for ARCH and GARCH models, use the squared residuals
    of the time series trained to predict the mean of the original series. The residuals
    are zero-centered so that their squares are also the variance. Then inspect the
    ACF and PACF plots of the squared residuals to identify autocorrelation patterns
    in the variance of the time series.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 要为 ARCH 和 GARCH 模型配置滞后阶数，使用训练以预测原始系列均值的时间序列的平方残差。残差是零中心化的，因此它们的平方也是方差。然后检查平方残差的
    ACF 和 PACF 图以识别时间序列方差中的自相关模式。
- en: How to build a volatility-forecasting model
  id: totrans-172
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何构建波动率预测模型
- en: 'The development of a volatility model for an asset-return series consists of
    four steps:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 为资产收益序列开发波动率模型包括四个步骤：
- en: Build an ARMA time series model for the financial time series based on the serial
    dependence revealed by the ACF and PACF.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 基于 ACF 和 PACF 显示的序列依赖性构建金融时间序列的 ARMA 时间序列模型。
- en: Test the residuals of the model for ARCH/GARCH effects, again relying on the
    ACF and PACF for the series of the squared residual.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次依靠残差序列的 ACF 和 PACF 检查模型的残差是否具有 ARCH/GARCH 效应。
- en: Specify a volatility model if serial correlation effects are significant, and
    jointly estimate the mean and volatility equations.
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果序列相关效应显著，则指定一个波动率模型，并联合估计均值和波动率方程。
- en: Check the fitted model carefully and refine it if necessary.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 仔细检查拟合的模型，如有必要，进行精细调整。
- en: When applying volatility forecasting to return series, the serial dependence
    may be limited so that a constant mean may be used instead of an ARMA model.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 当将波动率预测应用于回报序列时，序列依赖性可能有限，因此可以使用恒定均值代替 ARMA 模型。
- en: The `arch` library provides several options to estimate volatility-forecasting
    models. It offers several options to model the expected mean, including a constant
    mean, the AR(p) model discussed in the section on univariate time series models
    above as well as more recent heterogeneous autoregressive processes (HAR) that
    use daily (1 day), weekly (5 days), and monthly (22 days) lags to capture the
    trading frequencies of short-, medium-, and long-term investors.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '`arch` 库提供了几个选项来估计波动率预测模型。它提供了几个选项来建模预期均值，包括一个常数均值，上面关于单变量时间序列模型的 AR(p) 模型以及更近期的异质自回归过程（HAR），它使用每日（1天）、每周（5天）和每月（22天）的滞后来捕捉短期、中期和长期投资者的交易频率。'
- en: The mean models can be jointly defined and estimated with several conditional
    heteroskedasticity models that include, in addition to ARCH and GARCH, the **exponential
    GARCH** (**EGARCH**) model, which allows for asymmetric effects between positive
    and negative returns and the **heterogeneous ARCH** (**HARCH**) model, which complements
    the HAR mean model.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 可以与几个条件异方差模型一起定义和估计均值模型，除了 ARCH 和 GARCH 外，还包括允许正负收益之间的非对称效应的**指数GARCH**（**EGARCH**）模型，以及**异质ARCH**（**HARCH**）模型，它补充了HAR均值模型。
- en: 'We will use daily NASDAQ returns from 1998-2017 to demonstrate the usage of
    a GARCH model (see the notebook `arch_garch_models` for details):'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 1998 年至 2017 年的每日纳斯达克收益来演示 GARCH 模型的使用情况（有关详细信息，请参阅笔记本 `arch_garch_models`）：
- en: '[PRE4]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The rescaled daily return series exhibits only limited autocorrelation, but
    the squared deviations from the mean do have substantial memory reflected in the
    slowly-decaying ACF and the PACF high for the first two and cutting off only after
    the first six lags:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 重新缩放的日收益率系列仅具有有限的自相关性，但与均值的平方偏差具有显着的记忆，反映在缓慢衰减的ACF和PACF上，前两者的值很高，并且仅在前六个滞后之后才截断：
- en: '[PRE5]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The function `plot_correlogram` produces the following output:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 函数`plot_correlogram`生成了以下输出：
- en: '![](img/4b0ef301-4d8f-4c6f-a179-19b00ac536cb.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4b0ef301-4d8f-4c6f-a179-19b00ac536cb.png)'
- en: 'Hence, we can estimate a GARCH model to capture the linear relationship of
    past volatilities. We will use rolling 10-year windows to estimate a GARCH(p,
    q) model with p and q ranging from 1-4 to generate 1-step out-of-sample forecasts.
    We then compare the RMSE of the predicted volatility relative to the actual squared deviation
    of the return from its mean to identify the most predictive model. We are using
    winsorized data to limit the impact of extreme return values reflected in the
    very high positive skew of the volatility:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们可以估计一个GARCH模型来捕捉过去波动率的线性关系。我们将使用滚动10年窗口来估计一个GARCH(p, q)模型，其中p和q的范围为1-4，以生成1步的外样本预测。然后，我们将比较预测波动性的RMSE与实际收益偏离其均值的平方之间的RMSE，以确定最具预测性的模型。我们使用修剪数据来限制极端收益值的影响，这些值反映在波动性的非常高的正偏度中：
- en: '[PRE6]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The GARCH(2, 2) model achieves the lowest RMSE (same value as GARCH(4, 2) but
    with fewer parameters), so we go ahead and estimate this model to inspect the
    summary:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: GARCH(2, 2)模型实现了最低的RMSE（与GARCH(4, 2)的值相同，但参数较少），因此我们继续估计此模型以检查摘要：
- en: '[PRE7]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The output shows the maximized log-likelihood as well as the AIC and BIC criteria
    that are commonly minimized when selecting models based on in-sample performance
    (see [Chapter 7](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml), *Linear Models*).
    It also displays the result for the mean model, which in this case is just a constant
    estimate, as well as the GARCH parameters for the constant omega, the AR parameters,
    α, and the MA parameters, β, all of which are statistically significant:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 输出显示了最大化的对数似然以及通常在选择基于样本内表现的模型时要最小化的AIC和BIC准则（见[第7章](0cf85bb4-8b3f-4f83-b004-f980f348028b.xhtml)，*线性模型*）。它还显示了均值模型的结果，本例中只是一个常数估计，以及常数omega的GARCH参数、AR参数α和MA参数β，所有这些参数都具有统计学意义：
- en: '![](img/95155d6b-b1c4-453c-ba62-25af43f0421c.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](img/95155d6b-b1c4-453c-ba62-25af43f0421c.png)'
- en: Let's now explore models for multiple time series and the concept of cointegration,
    which will enable a new trading strategy.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们探讨多个时间序列模型和协整概念，这将实现新的交易策略。
- en: Multivariate time series models
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多元时间序列模型
- en: Multivariate time series models are designed to capture the dynamic of multiple
    time series simultaneously and leverage dependencies across these series for more
    reliable predictions.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 多元时间序列模型旨在同时捕捉多个时间序列的动态，并利用这些序列之间的依赖关系进行更可靠的预测。
- en: Systems of equations
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 方程组
- en: 'Univariate time series models like the ARMA approach, we just discussed are
    limited to statistical relationships between a target variable and its lagged
    values or lagged disturbances and exogenous series in the ARMAX case. In contrast,
    multivariate time series models also allow for lagged values of other time series
    to affect the target. This effect applies to all series, resulting in complex
    interactions, as illustrated in the following diagram:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 像我们刚刚讨论的ARMA方法这样的单变量时间序列模型仅限于目标变量与其滞后值或滞后扰动以及在ARMAX情况下的外生序列之间的统计关系。相比之下，多元时间序列模型还允许其他时间序列的滞后值影响目标。这种效应适用于所有系列，导致复杂的相互作用，如下图所示：
- en: '![](img/005cd921-cfd5-4fe0-bffa-3f6e674927f8.png)'
  id: totrans-198
  prefs: []
  type: TYPE_IMG
  zh: '![](img/005cd921-cfd5-4fe0-bffa-3f6e674927f8.png)'
- en: In addition to potentially better forecasting, multivariate time series are
    also used to gain insights into cross-series dependencies. For example, in economics,
    multivariate time series are used to understand how policy changes to one variable,
    for example, an interest rate, may affect other variables over different horizons.
    The impulse-response function produced by the multivariate model we will look
    at serves this purpose and allows us to simulate how one variable responds to
    a sudden change in other variables. The concept of Granger causality analyzes
    whether one variable is useful in forecasting another (in the least squares sense).
    Furthermore, multivariate time series models allow for a decomposition of the
    prediction error variance to analyze how other series contribute.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 除了可能更好的预测之外，多变量时间序列还用于获得跨系列依赖关系的洞察。例如，在经济学中，多变量时间序列用于了解对某一变量的政策变化，例如利率，可能在不同的视角下如何影响其他变量。我们将要看的多变量模型产生的冲击-响应函数就是为此目的而服务的，并且允许我们模拟一个变量如何对其他变量的突然变化做出响应。格兰杰因果分析的概念分析了一个变量是否对另一个变量的预测有用（在最小二乘意义上）。此外，多变量时间序列模型允许对预测误差方差进行分解，以分析其他系列的贡献。
- en: The vector autoregressive (VAR) model
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 向量自回归 (VAR) 模型
- en: 'We will see how the vector autoregressive VAR(p) model extends the AR(p) model
    to k series by creating a system of k equations where each contains p lagged values
    of all k series. In the simplest case, a VAR(1) model for *k=2* takes the following
    form:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将看到向量自回归 VAR(p) 模型如何通过创建包含所有 k 系列的 p 拖后值的 k 方程系统来扩展 AR(p) 模型。在最简单的情况下，*k=2*
    的 VAR(1) 模型如下所示：
- en: '![](img/38b71b86-ca76-451d-b80d-0979d26f6050.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/38b71b86-ca76-451d-b80d-0979d26f6050.png)'
- en: 'This model can be expressed somewhat more concisely in matrix form:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 这个模型可以用矩阵形式更加简洁地表示：
- en: '![](img/c9167a29-e14b-41e3-9a12-750d39ea3e40.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/c9167a29-e14b-41e3-9a12-750d39ea3e40.png)'
- en: 'The coefficients on the own lags provide information about the dynamics of
    the series itself, whereas the cross-variable coefficients offer some insight
    into the interactions across the series. This notation extends to the k series
    and order p, as follows:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 自身滞后的系数提供了有关系列动态的信息，而交叉变量系数则提供了有关系列间交互的一些见解。此符号扩展到 k 系列和阶数 p，如下所示：
- en: '![](img/f68272ad-74f3-46a5-810e-206582d3cecd.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![图片](img/f68272ad-74f3-46a5-810e-206582d3cecd.png)'
- en: VAR(p) models also require stationarity, so that the initial steps from univariate
    time series modeling carry over. First, explore the series and determine the necessary
    transformations, then apply the Augmented Dickey-Fuller test to verify that the
    stationarity criterion is met for each series and apply further transformations
    otherwise. It can be estimated with OLS conditional on initial information or
    with maximum likelihood, which is equivalent for normally-distributed errors but
    not otherwise.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: VAR(p) 模型还需要平稳性，以便从单变量时间序列建模的初始步骤延续下来。首先，探索系列并确定必要的转换，然后应用增广迪基-富勒检验来验证每个系列是否满足平稳性标准，并在否则应用进一步的转换。它可以通过有条件的
    OLS 进行估计，初始信息或最大似然，对于正态分布的误差是等效的，但对于其他情况不是。
- en: If some or all of the k series are unit-root non-stationary, they may be co-integrated.
    This extension of the unit root concept to multiple time series means that a linear
    combination of two or more series is stationary and, hence, mean-reverting. The
    VAR model is not equipped to handle this case without differencing, instead use
    the Vector Error Correction model (VECM, see references on GitHub). We will further
    explore cointegration because, if present and assumed to persist, it can be leveraged
    for a pairs-trading strategy.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一些或所有的 k 系列是单位根非平稳的，则它们可能是协整的。将单位根概念扩展到多个时间序列意味着两个或多个系列的线性组合是平稳的，因此是均值回归的。VAR
    模型没有能力处理这种情况而不进行差分，*而应使用向量误差校正模型 (VECM，请参阅 GitHub 上的参考资料)*。我们将进一步探讨协整性，因为如果存在并且被假定为持续存在，它可以用于配对交易策略。
- en: The determination of the lag order also takes its cues from the ACF and PACF
    for each series but is constrained by the fact that the same lag order applies
    to all series. After model estimation, residual diagnostics also call for a result
    resembling white noise, and model selection can use in-sample information criteria
    or, preferably, out-of-sample predictive performance to cross-validate alternative
    model designs if the ultimate goal is to use the model for prediction.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 滞后阶数的确定也从每个系列的ACF和PACF中获得线索，但受到同一滞后阶数适用于所有系列的约束。在模型估计之后，残差诊断也要求产生类似白噪声的结果，并且模型选择可以使用样本内信息准则或更好地使用样本外预测性能来交叉验证备选模型设计，如果最终目标是使用模型进行预测。
- en: As mentioned in the univariate case, predictions of the original time series
    require us to reverse the transformations applied to make a series stationary
    before training the model.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 如在单变量情况中提到的那样，对原始时间序列的预测要求我们在训练模型之前撤消应用于使系列稳态的转换。
- en: How to use the VAR model for macro fundamentals forecasts
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何使用VAR模型进行宏观基本面预测
- en: 'We will extend the univariate example of a single time series of monthly data
    on industrial production and add a monthly time series on consumer sentiment,
    both provided by the Federal Reserve''s data service. We will use the familiar `pandas-datareader` library
    to retrieve data from 1970 through 2017:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将扩展单变量示例，将一系列工业生产的月度数据和美联储数据服务提供的一系列消费者情绪的月度时间序列加入，我们将使用熟悉的`pandas-datareader`库从1970年到2017年检索数据：
- en: '[PRE8]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Log-transforming the industrial production series and seasonal differencing
    using lag 12 of both series yields stationary results:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 对工业生产系列进行对数转换，并使用这两个系列的滞后12个月进行季节性差分产生稳态结果：
- en: '[PRE9]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'This leaves us with the following series:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 这使我们得到以下系列：
- en: '![](img/5f0588ac-69f2-441b-be7d-20ef8cb7cbdc.png)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5f0588ac-69f2-441b-be7d-20ef8cb7cbdc.png)'
- en: 'To limit the size of the output, we will just estimate a VAR(1) model using
    the `statsmodels` `VARMAX` implementation (which allows for optional exogenous
    variables) with a constant trend using the first 480 observations:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 为了限制输出大小，我们将仅使用前480个观测值使用`statsmodels`的`VARMAX`实现（允许使用可选的外生变量）来估计一个VAR(1)模型，使用恒定的趋势：
- en: '[PRE10]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'This results in the following summary:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 这导致以下摘要：
- en: '![](img/2513f5d7-cc0d-4629-afbb-ee527bb8c1ac.png)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2513f5d7-cc0d-4629-afbb-ee527bb8c1ac.png)'
- en: 'The output contains the coefficients for both time series equations, as outlined
    in the preceding VAR(1) illustration. statsmodels provides diagnostic plots to
    check whether the residuals meet the white noise assumptions, which are not exactly
    met in this simple case:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 输出包含两个时间序列方程的系数，如前述的VAR(1)示例所述。statsmodels提供了诊断图来检查残差是否满足白噪声假设，在这种简单情况下并不完全符合：
- en: '![](img/a39b5eca-c0a2-4dc7-9ca1-badc44655fdf.png)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a39b5eca-c0a2-4dc7-9ca1-badc44655fdf.png)'
- en: 'Out-of-sample predictions can be generated as follows:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 外样本预测可按以下方式生成：
- en: '[PRE11]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'A visualization of actual and predicted values shows how the prediction lags
    the actual values and does not capture non-linear out-of-sample patterns well:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 实际值和预测值的可视化显示了预测滞后于实际值，并且无法很好地捕捉非线性的外样本模式：
- en: '![](img/67bf14a1-9fb1-49ba-ae8c-9f9b755c6300.png)'
  id: totrans-227
  prefs: []
  type: TYPE_IMG
  zh: '![](img/67bf14a1-9fb1-49ba-ae8c-9f9b755c6300.png)'
- en: Cointegration – time series with a common trend
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 共整合 - 具有共同趋势的时间序列
- en: The concept of an integrated multivariate series is complicated by the fact
    that all the component series of the process may be individually integrated but
    the process is not jointly integrated in the sense that one or more linear combinations
    of the series exist that produce a new stationary series.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 综合多变量系列的概念因该过程的所有组成系列可能是单独集成的，但该过程在一个或多个线性组合产生新的稳态系列的意义上并非联合集成而复杂化。
- en: In other words, a combination of two co-integrated series has a stable mean
    to which this linear combination reverts. A multivariate series with this characteristic
    is said to be co-integrated. This also applies when the individual series are
    integrated of a higher order and the linear combination reduces the overall order
    of integration.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 换句话说，两个共整合系列的组合具有一个稳定的均值，这个线性组合会恢复到该均值。具有这种特性的多变量系列被称为共整合。当个别系列积分的次序较高且线性组合减少了积分的总次序时，这也适用。
- en: 'cointegration is different from correlation: two series can be highly correlated but
    need not be co-integrated. For example, if two growing series are constant multiples
    of each other, their correlation will be high but any linear combination will
    also grow rather than revert to the mean.'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 协整与相关性不同：两个系列可能高度相关，但不一定是协整的。例如，如果两个增长系列是彼此的恒定倍数，它们的相关性将很高，但任何线性组合也将增长而不是回归到均值。
- en: The VAR analysis can still be applied to integrated processes using the error-correction
    form of a VAR model that uses the first differences of the individual series plus
    an error correction term in levels.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 仍然可以将 VAR 分析应用于使用 VAR 模型的误差校正形式的集成过程，该模型使用各个系列的一阶差异加上水平的误差校正项。
- en: Testing for cointegration
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试协整
- en: 'There are two major approaches to testing for cointegration:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 测试协整有两种主要方法：
- en: The Engle–Granger two-step method
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Engle-Granger 两步法
- en: The Johansen procedure
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Johansen 程序
- en: The Engle–Granger method involves regressing one series on another, and then
    applying an ADF unit-root test to the regression residual. If the null hypothesis
    can be rejected so that we assume the residuals are stationary, then the series
    are co-integrated. A key benefit of this approach is that the regression coefficient
    represents the multiplier that renders the combination stationary, that is, mean-reverting. We
    will return to this aspect when leveraging cointegration for a pairs-trading strategy. On
    the other hand, this approach is limited to identifying cointegration for pairs
    of series as opposed to larger groups of series.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: Engle-Granger 方法涉及将一个系列回归到另一个系列，然后对回归残差应用 ADF 单位根检验。如果能拒绝原假设，假设残差是平稳的，那么这些系列就是协整的。这种方法的一个关键优势是，回归系数表示使组合平稳的乘数，即均值回归。当利用协整进行配对交易策略时，我们将回到这个方面。另一方面，这种方法仅限于识别成对系列的协整，而不是更大范围的系列组合。
- en: 'The Johansen procedure, in contrast, tests the restrictions imposed by cointegration
    on a **vector autoregression** (**VAR**) model as discussed in the previous section.
    More specifically, after subtracting the target vector from both sides of the
    generic VAR(p) preceding equation, we obtain the **error correction model** (**ECM**)
    formulation:'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 相比之下，Johansen 程序测试了前一节讨论的矢量自回归（VAR）模型受协整约束的限制。更具体地说，从通用 VAR(p) 前述方程两边减去目标向量后，我们得到误差校正模型（ECM）公式
- en: '![](img/ba15f49f-69df-4173-a288-fb3e8fbc8fe1.png)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ba15f49f-69df-4173-a288-fb3e8fbc8fe1.png)'
- en: The resulting modified VAR(p) equation has only one vector term in levels, that
    is, not expressed as difference using the operator, Δ. The nature of cointegration
    depends on the properties of the coefficient matrix, Π, of this term, in particular
    on its rank. While this equation appears structurally similar to the ADF test
    setup, there are now several potential constellations of common trends and orders
    of integration because there are multiple series involved. For details, see the
    references listed on GitHub, including with respect to practical challenges regarding
    the scaling of individual series.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 结果修改后的 VAR(p) 方程只有一个向量项在水平上，即不使用算子 Δ 表示差异。协整的性质取决于系数矩阵 Π 的特性，特别是其秩。虽然这个方程在结构上与
    ADF 测试设置相似，但现在存在多个共同趋势和积分阶数的潜在星座，因为涉及到多个系列。有关详细信息，请参阅 GitHub 上列出的参考文献，包括关于个别系列尺度化的实际挑战。
- en: How to use cointegration for a pairs-trading strategy
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何利用协整进行配对交易策略
- en: Pairs-trading relies on a stationary, mean-reverting relationship between two
    asset prices. In other words, the ratio or difference between the two prices,
    also called the spread, may over time diverge but should ultimately return to
    the same level. Given such a pair, the strategy consists of going long (that is,
    purchasing) the under-performing asset because it would require a period of outperformance
    to close the gap. At the same time, one would short the asset that has moved away
    from the price anchor in the positive direction to fund the purchase.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 配对交易依赖于两个资产价格之间的稳定、均值回归关系。换句话说，两个价格之间的比率或差异，也称为价差，随时间可能会发散，但最终应返回到相同水平。鉴于这样的一对，该策略包括做多（即购买）表现不佳的资产，因为它需要一段时间的表现优异来填补差距。同时，应做空价格向正方向移动而远离价格锚点的资产，以筹集购买资产的资金。
- en: cointegration represents precisely this type of stable relationship between
    two price series anchored by a common mean. Assuming cointegration persists, convergence
    must ultimately ensue, either by the underperforming stock rising or the outperforming
    stock coming down. The strategy would be profitable regardless, which has the
    added advantage of being hedged against general market movements either way.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 协整正是由一个共同均值锚定的两个价格系列之间的这种稳定关系。假设协整持续存在，最终必须发生收敛，无论是表现不佳的股票上涨还是表现良好的股票下跌。该策略无论如何都将是有利可图的，这具有对一般市场动态进行对冲的额外优势。
- en: However, the spread will constantly change, sometimes widening and sometimes
    narrowing, or remain unchanged as both assets move in unison. The challenge of
    pairs-trading consists of maintaining a hedged position by adjusting the relative
    holdings as the spread changes.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，价差将不断变化，有时扩大，有时缩小，或者保持不变，因为两种资产同时移动。配对交易的挑战在于通过调整相对持仓来维持对冲头寸，因为价差变化。
- en: In practice, given a universe of assets, a pairs-trading strategy will search
    for co-integrated pairs by running a statistical test on each pair. The key challenge
    here is to account for multiple testing biases, as outlined in [Chapter 6](3efbd9df-a459-406a-a86e-1cb5512a9122.xhtml),
    *Machine Learning Workflow*. The `statsmodels` library implements both the Engle-Granger
    cointegration test and the Johansen test.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 在实践中，鉴于一组资产，配对交易策略将通过对每对运行统计测试来寻找协整对。这里的关键挑战是考虑到多重测试偏差，如[第6章](3efbd9df-a459-406a-a86e-1cb5512a9122.xhtml)，*机器学习工作流*中概述的那样。`statsmodels`库实现了Engle-Granger协整测试和Johansen测试。
- en: In order to estimate the spread, run a linear regression to get the coefficient
    for the linear combination of two integrated asset price series that produce a
    stationary combined series. As mentioned, using linear regression to estimate
    the coefficient is known as the Engle-Granger test of cointegration.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 为了估算价差，运行线性回归以获得两个集成资产价格系列的线性组合的系数，以产生一个平稳的组合系列。如前所述，使用线性回归来估算系数被称为协整的Engle-Granger检验。
- en: Summary
  id: totrans-247
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we explored linear time series models for the univariate case
    of individual series as well as multivariate models for several interacting series.
    We encountered applications that predict macro fundamentals, models that forecast
    asset or portfolio volatility with widespread use in risk management, as well
    as multivariate VAR models that capture the dynamics of multiple macro series,
    as well as the concept of cointegration, which underpins the popular pair-trading
    strategy.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了用于单个系列的单变量情况的线性时间序列模型以及用于几个交互系列的多变量模型。我们遇到了预测宏观基本面的应用，用于风险管理的预测资产或组合波动性的模型以及捕获多个宏观系列动态的多元VAR模型，以及协整的概念，这是支撑流行的配对交易策略的基础。
- en: Similar to the previous chapter, we saw how linear models add a lot of structure
    to the model, that is, they make strong assumptions that potentially require transformations
    and extensive testing to verify that these assumptions are met. If they are, model-training
    and -interpretation is straightforward, and the models provide a good baseline
    case that more complex models may be able to improve on, as we will see in the
    following chapters.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于前一章，我们看到线性模型为模型增加了许多结构，即它们做出了强有力的假设，这些假设可能需要转换和广泛测试来验证这些假设是否成立。如果是这样，模型的训练和解释就是直接的，而且模型提供了一个很好的基准案例，更复杂的模型可能会改进，我们将在接下来的章节中看到。
