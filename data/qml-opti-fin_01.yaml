- en: '3'
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '3'
- en: Quadratic Unconstrained Binary Optimisation
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 二次无约束二进制优化
- en: 'Undoubtedly, Quadratic Unconstrained Binary Optimisation (QUBO) is a flagship
    use case of quantum annealing. We only need to have a closer look at the name
    of this class of optimisation problems to see why:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 毋庸置疑，二次无约束二进制优化（QUBO）是量子退火的旗舰应用。只需要仔细观察这一类优化问题的名称，就能理解其原因：
- en: Quantum annealers operate on binary spin variables. It is straightforward to
    perform mapping between binary decision variables (represented by the logical
    qubits) and spin variables.
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 量子退火器操作在二进制自旋变量上。二进制决策变量（由逻辑量子比特表示）与自旋变量之间的映射非常直接。
- en: The objective functions of quadratic optimisation problems have only linear
    and quadratic terms. This significantly simplifies the models and allows their
    embedding on existing quantum annealing hardware.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 二次优化问题的目标函数只有线性项和二次项。这大大简化了模型，并允许其嵌入现有的量子退火硬件中。
- en: Unconstrained optimisation means that although QUBO allows us to specify conditions
    that must be satisfied, they are not hard constraints. The violation of constraints
    is penalised through the additional terms in the QUBO objective function, but
    it is still possible to find solutions that violate specified constraints.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无约束优化意味着尽管 QUBO 允许我们指定必须满足的条件，但这些条件并不是硬性约束。约束的违反通过 QUBO 目标函数中的附加项来惩罚，但仍然有可能找到违反指定约束的解。
- en: All these features make QUBO problems solvable on quantum annealers. At the
    same time, the QUBO formulation exists for many important NP-hard combinatorial
    optimisation problems, such as graph partitioning, job-shop scheduling, binary
    integer linear programming, and many others. This class also includes the discrete
    portfolio optimisation problem, which we consider in this chapter. We should also
    mention here some of the recent attempts to address the problem of discrete portfolio
    optimisation using classical methods, such as the knapsack problem formulation
    by Vaezi *et* *al.*  [[289](Biblography.xhtml#XVaezi2019)] and the application
    of evolutionary search methods such as genetic algorithms by Anagnostopoulos and
    Mamanis  [[12](Biblography.xhtml#XAnagnostopoulos2010)]. Both the knapsack problem
    with integer weights and genetic algorithms are discussed in this chapter.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些特性使得 QUBO 问题可以在量子退火器上求解。同时，QUBO 形式也适用于许多重要的 NP 难的组合优化问题，如图划分、作业车间调度、二进制整数线性规划等。此类问题还包括我们在本章中考虑的离散投资组合优化问题。我们还应在此提到一些最近使用经典方法解决离散投资组合优化问题的尝试，例如
    Vaezi *等*人提出的背包问题形式 [[289](Biblography.xhtml#XVaezi2019)]，以及 Anagnostopoulos 和
    Mamanis 使用遗传算法等进化搜索方法的应用 [[12](Biblography.xhtml#XAnagnostopoulos2010)]。背包问题和遗传算法将在本章中讨论。
- en: 3.1 Principles of Quadratic Unconstrained Binary Optimisation
  id: totrans-7
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.1 二次无约束二进制优化原理
- en: QUBO represents optimisation problems in which a quadratic function of *N* binary
    variables, *q*[1]*,…,q*[N], has to be minimised over all possible 2^N assignments
    of its variables. The function to be minimised is referred to as the *cost function*,
    and it can be written as
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: QUBO 表示需要在所有可能的 2^N 个变量赋值中最小化 *N* 个二进制变量 *q*[1]*,…,q*[N] 的二次函数的优化问题。需要最小化的函数称为
    *成本函数*，可以表示为
- en: '| ![ N N N ∑ ∑ ∑ LQUBO (q ) = aiqi + bijqiqj, i=1 i=1 j=i+1 ](img/file329.jpg)
    |  |'
  id: totrans-9
  prefs: []
  type: TYPE_TB
  zh: '| ![ N N N ∑ ∑ ∑ LQUBO (q ) = aiqi + bijqiqj, i=1 i=1 j=i+1 ](img/file329.jpg)
    |  |'
- en: where q := (*q*[1]*,…,q*[N]) ∈{0*,*1}^N represents the assignment of *N* binary
    decision variables.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 q := (*q*[1]*,…,q*[N]) ∈{0*,*1}^N 表示 *N* 个二进制决策变量的赋值。
- en: A broad class of optimisation problems with many practical applications admits
    a QUBO formulation  [[197](Biblography.xhtml#XLucas)]. To solve hard QUBO instances
    in an exact way, known classical algorithms require exponential time (in the problem
    size defined as the number of binary decision variables, *N*)  [[120](Biblography.xhtml#XGuerreschi2021)].
    Several approximate classical methods have been devised to reduce the computational
    cost; however, it is the fast maturing quantum annealing that aspires to demonstrate
    material speedup on the hardest QUBO instances, such as NP-hard discrete portfolio
    optimisation problems  [[175](Biblography.xhtml#XKondratyev2019), [296](Biblography.xhtml#XVenturelli2019)].
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 一类具有许多实际应用的优化问题可以采用 QUBO 公式化 [[197](Biblography.xhtml#XLucas)]。为了精确求解困难的 QUBO
    问题，已知的经典算法需要指数级的时间（时间复杂度以二进制决策变量数量 *N* 为基础）[[120](Biblography.xhtml#XGuerreschi2021)]。已经有几种近似经典方法被设计出来以降低计算成本；然而，快速发展的量子退火技术旨在证明在最困难的
    QUBO 问题上，如 NP-hard 离散投资组合优化问题，能够显著提高计算速度 [[175](Biblography.xhtml#XKondratyev2019),
    [296](Biblography.xhtml#XVenturelli2019)]。
- en: 3.1.1 QUBO to Ising transformation
  id: totrans-12
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1.1 QUBO 到 Ising 转换
- en: A QUBO problem can be easily translated into a corresponding Ising problem solvable
    on a quantum annealer. The Ising cost function of *N* spin variables s := (*s*[1]*,…,s*[N])
    ∈{−1*,*+1}^N is given by
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: QUBO 问题可以很容易地转化为一个可以在量子退火机上求解的 Ising 问题。*N* 个自旋变量 s := (*s*[1]*,…,s*[N]) ∈{−1*,*+1}^N
    的 Ising 代价函数为：
- en: '| ![ N N N ∑ ∑ ∑ LIsing(s) = gisi + Jijsisj. i=1 i=1 j=i+1 ](img/file330.jpg)
    |  |'
  id: totrans-14
  prefs: []
  type: TYPE_TB
  zh: '| ![ N N N ∑ ∑ ∑ LIsing(s) = gisi + Jijsisj. i=1 i=1 j=i+1 ](img/file330.jpg)
    |  |'
- en: The Ising and QUBO models are related through the transformation *s*[i] = 2*q*[i]
    − 1, hence the relationship with ([3.1](#x1-640001)) is
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Ising 模型和 QUBO 模型通过转换 *s*[i] = 2*q*[i] − 1 相关联，因此与 ([3.1](#x1-640001)) 的关系为：
- en: '![ (i∑−1 ∑N ) Jij = 1bij and gi = 1ai + 1- bki + bil 4 2 4 k=1 l=i+1 ](img/file331.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![ (i∑−1 ∑N ) Jij = 1bij and gi = 1ai + 1- bki + bil 4 2 4 k=1 l=i+1 ](img/file331.jpg)'
- en: disregarding an unimportant constant offset for the optimisation.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 忽略优化中不重要的常数偏移量。
- en: 3.1.2 QUBO problem examples
  id: totrans-18
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.1.2 QUBO 问题示例
- en: There are many examples of important QUBO problems that can be directly applied
    to practical use cases arising in finance. Here, following Lucas  [[197](Biblography.xhtml#XLucas)],
    we mention a few of them in their traditional formulation.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多重要的 QUBO 问题示例可以直接应用于金融领域的实际案例。这里，按照 Lucas [[197](Biblography.xhtml#XLucas)]
    的做法，我们列举了其中一些传统的公式化问题。
- en: Number Partitioning
  id: totrans-20
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 数字划分
- en: Given a set of *N* positive numbers {*n*[1]*,…,n*[N]}, is there a partition
    of this set of numbers into two disjoint subsets such that the sum of the elements
    in both sets is the same? For example, we can think about the set {*n*[1]*,…,n*[N]}
    as a collection of assets that must be divided equally between two parties. The
    Ising formulation of this problem is
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 给定一组 *N* 个正数 {*n*[1]*,…,n*[N]}，是否可以将这组数字划分为两个不相交的子集，使得两个子集中的元素和相等？例如，我们可以将这组数字
    {*n*[1]*,…,n*[N]} 看作必须平等分配给两个方的资产。该问题的 Ising 公式化为：
- en: '| ![ ( )2 ∑N L(s) = sini , i=1 ](img/file332.jpg) |  |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| ![ ( )2 ∑N L(s) = sini , i=1 ](img/file332.jpg) |  |'
- en: where spin variables (*s*[i])[i=1,…,N] ∈{−1*,*+1} are the decision variables.
    If there is a solution to the Ising model with *L* = 0, then there is a configuration
    of spins where the sum of the *n*[i] for the +1 spins is the same for the sum
    of the *n*[i] for the −1 spins. The number partitioning problem finds numerous
    applications in economics and finance, from routing and scheduling problems  [[71](Biblography.xhtml#XCoslovich2006)]
    to signal detection and time series analysis  [[148](Biblography.xhtml#XJackson2005)].
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 其中自旋变量 (*s*[i])[i=1,…,N] ∈{−1*,*+1} 是决策变量。如果 Ising 模型有解且 *L* = 0，那么就存在一种自旋配置，使得对于
    +1 自旋的 *n*[i] 的和与 −1 自旋的 *n*[i] 的和相同。数字划分问题在经济学和金融中有广泛的应用，从路由和调度问题 [[71](Biblography.xhtml#XCoslovich2006)]
    到信号检测和时间序列分析 [[148](Biblography.xhtml#XJackson2005)]。
- en: Graph Partitioning
  id: totrans-24
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 图划分
- en: Consider an undirected graph
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一个无向图
- en: '![G = (V,E ), ](img/file333.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![G = (V,E ), ](img/file333.jpg)'
- en: 'where *V* stands for the set of vertices and *E* stands for the set of edges,
    with an even number *N* of vertices. The task is to partition the set *V* into
    two subsets of equal size *N∕*2, such that the number of edges connecting the
    two subsets is minimised. This problem has many applications: finding these partitions
    can allow us to run some graph algorithms in parallel on the two partitions, and
    then make some modifications due to the few connecting edges at the end  [[36](Biblography.xhtml#XBillionnet1989)].
    The spin variables represent the graph vertices, with values +1 and −1 denoting
    the vertex being in either the {+} set or the {−} set. The problem is solved with
    the cost function consisting of two components:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 *V* 代表顶点集合，*E* 代表边集合，且顶点数 *N* 为偶数。任务是将集合 *V* 划分为两个大小相等的子集 *N∕*2，使得连接这两个子集的边的数量最小化。这个问题有许多应用：找到这些划分可以让我们在两个划分上并行运行一些图算法，然后根据连接边数较少的情况进行一些修改
    [[36](Biblography.xhtml#XBillionnet1989)]。自旋变量表示图的顶点，值 +1 和 −1 表示顶点属于 {+} 集合或
    {−} 集合。该问题通过由两个部分组成的成本函数来求解：
- en: '| ![L(s) = LA(s)+ LB (s), ](img/file334.jpg) |  |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| ![L(s) = LA(s)+ LB (s), ](img/file334.jpg) |  |'
- en: where
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 其中
- en: '| ![ N∑ LA(s) = A si i=1 ](img/file335.jpg) |  |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: '| ![ N∑ LA(s) = A si i=1 ](img/file335.jpg) |  |'
- en: provides a penalty if the number of elements in the {+} set is not equal to
    the number in the {−} set, and
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 {+} 集合中的元素数量与 {−} 集合中的元素数量不相等，则会提供惩罚，且
- en: '| ![ ∑ LB (s) = B 1-−-susv (u,v)∈E 2 ](img/file336.jpg) |  |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| ![ ∑ LB (s) = B 1-−-susv (u,v)∈E 2 ](img/file336.jpg) |  |'
- en: is a term that provides a penalty for each time that an edge connects vertices
    from different subsets. If *B >* 0, then we wish to minimise the number of edges
    between the two subsets; if *B <* 0, we will choose to maximise this number. Should
    we choose *B <* 0, we must ensure that *B* is small enough so that it is never
    favorable to violate the *L*[A] constraint. The graph partitioning problem can
    be applied to studying clustering in financial markets  [[271](Biblography.xhtml#XSorensen2014)].
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 是一个术语，每当一条边连接来自不同子集的顶点时，都会提供惩罚。如果 *B >* 0，则我们希望最小化两个子集之间的边数；如果 *B <* 0，则我们会选择最大化这个数字。如果选择
    *B <* 0，必须确保 *B* 足够小，以便永远不会违反 *L*[A] 约束。图划分问题可应用于研究金融市场中的聚类 [[271](Biblography.xhtml#XSorensen2014)]。
- en: Both problems, number and graph partitioning, are NP-hard problems  [[155](Biblography.xhtml#XKarp)].
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这两个问题，数目问题和图划分问题，都是 NP-困难问题 [[155](Biblography.xhtml#XKarp)]。
- en: Binary Integer Linear Programming
  id: totrans-35
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 二进制整数线性规划
- en: Let q := (*q*[1]*,…,q*[N]) be a vector of *N* binary variables. The task is
    to maximise c ⋅ q, for some vector c, given the constraint
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 令 q := (*q*[1]*,…,q*[N]) 为 *N* 个二进制变量的向量。任务是最大化 c ⋅ q，对于某个向量 c，给定约束条件
- en: '| ![Sq = b ](img/file337.jpg) |  |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| ![Sq = b ](img/file337.jpg) |  |'
- en: with S ∈ℳ[m,N](ℝ) and b ∈ℝ^m. Many problems can be posed as binary integer linear
    programming, for example, a maximisation of profit subject to regulatory constraints  [[255](Biblography.xhtml#XSchrijver1998)].
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 其中 S ∈ℳ[m,N](ℝ)，b ∈ℝ^m。许多问题可以表述为二进制整数线性规划，例如，在监管约束下最大化利润 [[255](Biblography.xhtml#XSchrijver1998)]。
- en: The cost function *L*(q) corresponding to this problem can be constructed as
    a sum of two terms, *L*(q) = *L*[A](q) + *L*[B](q), where the first term is
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 与该问题相关的成本函数 *L*(q) 可以构造为两项之和，*L*(q) = *L*[A](q) + *L*[B](q)，其中第一项是
- en: '| ![ m ( N )2 ∑ ∑ LA (q) = A bj − Sijqi , j=1 i=1 ](img/file338.jpg) |  |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| ![ m ( N )2 ∑ ∑ LA (q) = A bj − Sijqi , j=1 i=1 ](img/file338.jpg) |  |'
- en: for some constant *A >* 0\. Note that *L*[A] = 0 enforces the constraint Sq
    = b. The second term is
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 对于某个常数 *A >* 0。注意 *L*[A] = 0 强制执行约束 Sq = b。第二项是
- en: '| ![ N∑ LB(q) = − B ciqi, i=1 ](img/file339.jpg) |  |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| ![ N∑ LB(q) = − B ciqi, i=1 ](img/file339.jpg) |  |'
- en: with another positive constant *B < A*.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 另有一个正的常数 *B < A*。
- en: Knapsack with Integer Weights
  id: totrans-44
  prefs:
  - PREF_H5
  type: TYPE_NORMAL
  zh: 背包问题（整数权重）
- en: We have a list of *N* objects, labelled by indices *i* = 1*,…,N*, with the weight
    of each object given by *w*[i] ∈ℕ, and its value given by *c*[i], and we have
    a knapsack that can only carry some weight up to *W*[max] ∈ℕ. If *q*[i] is a binary
    variable denoting whether (*q*[i] = 1) or not (*q*[i] = 0) object *i* is contained
    in the knapsack, the total weight in the knapsack is
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有一个 *N* 个对象的列表，按索引 *i* = 1*,…,N* 标记，每个对象的权重为 *w*[i] ∈ℕ，值为 *c*[i]，并且我们有一个只能容纳最大重量
    *W*[max] ∈ℕ 的背包。如果 *q*[i] 是一个二进制变量，表示对象 *i* 是否包含在背包中（*q*[i] = 1），则背包中的总重量为
- en: '| ![ ∑N W = wiqi, i=1 ](img/file340.jpg) |  |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| ![ ∑N W = wiqi, i=1 ](img/file340.jpg) |  |'
- en: and the total value is
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 总值为
- en: '| ![ N C = ∑ c q. i=1 i i ](img/file341.jpg) |  |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| ![ N C = ∑ c q. i=1 i i ](img/file341.jpg) |  |'
- en: The task is to maximise *C* subject to the constraint that *W* ≤ *W*[max]. The
    knapsack problem finds multiple applications in economics and finance  [[159](Biblography.xhtml#XKellerer2004), [289](Biblography.xhtml#XVaezi2019)].
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 任务是最大化*C*，同时约束*W* ≤ *W*[max]。背包问题在经济学和金融中有多种应用[[159](Biblography.xhtml#XKellerer2004), [289](Biblography.xhtml#XVaezi2019)]。
- en: We introduce a binary variable, *y*[n], for each *n* = 1*,…,W*[max], which is
    1 if the final weight of the knapsack is *n*, and 0 otherwise. As before, the
    cost function consists of two terms, *L*(q) = *L*[A](q) + *L*[B](q), with
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 我们为每个*n* = 1*,…,W*[max]引入一个二进制变量，*y*[n]，当背包的最终重量为*n*时，*y*[n]为1，否则为0。如前所述，成本函数由两项组成，*L*(q)
    = *L*[A](q) + *L*[B](q)，其中
- en: '| ![ ( )2 ( )2 W∑max Wm∑ax ∑N LA (q) = A 1 − yn + A nyn − wiqi , n=1 n=1 i=1
    ](img/file342.jpg) |  |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| ![ ( )2 ( )2 W∑max Wm∑ax ∑N LA (q) = A 1 − yn + A nyn − wiqi , n=1 n=1 i=1
    ](img/file342.jpg) |  |'
- en: which enforces that the weight can only take on one value and that the weight
    of the objects in the knapsack equals the value we claimed it did, and
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 这确保了重量只能取一个值，并且背包中物品的重量等于我们声明的值，且
- en: '| ![ N∑ LB(q) = − B ciqi. i=1 ](img/file343.jpg) |  |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: '| ![ N∑ LB(q) = − B ciqi. i=1 ](img/file343.jpg) |  |'
- en: As we require that it should not be possible to find a solution where *L*[A]
    is weakly violated at the expense of *L*[B] becoming more negative, we require
    0 *< B* max[i=1,…,N]*c*[i] *< A* (adding an item to the knapsack, which makes
    it too heavy, is not allowed).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们要求不能找到一个解，其中*L*[A]在*L*[B]变得更加负的情况下被弱违反，因此我们要求0 *< B* max[i=1,…,N]*c*[i]
    *< A*（即不允许向背包中添加一个使其过重的物品）。
- en: Many other famous NP-hard optimisation problems can be solved on quantum annealers.
    Here, we can mention the Map Colouring Problem  [[76](Biblography.xhtml#XDahl2013)]
    and the Job-Shop Scheduling Problem  [[295](Biblography.xhtml#XVenturelli2015)],
    which were successfully solved on the D-Wave quantum annealers. In this chapter,
    we provide detailed description and analysis of an important finance-related QUBO
    problem – a discrete portfolio optimisation problem investigated by Venturelli
    and Kondratyev  [[175](Biblography.xhtml#XKondratyev2019), [296](Biblography.xhtml#XVenturelli2019)].
    This is a hard, fully connected graph problem that can be best addressed using
    a newly developed technique of reverse quantum annealing.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 许多其他著名的NP-hard优化问题可以在量子退火器上解决。在这里，我们可以提到图着色问题[[76](Biblography.xhtml#XDahl2013)]和作业车间调度问题[[295](Biblography.xhtml#XVenturelli2015)]，它们已在D-Wave量子退火器上成功解决。在本章中，我们详细描述并分析了一个与金融相关的重要QUBO问题——Venturelli和Kondratyev研究的离散投资组合优化问题[[175](Biblography.xhtml#XKondratyev2019), [296](Biblography.xhtml#XVenturelli2019)]。这是一个困难的完全连接图问题，最适合使用新开发的反向量子退火技术来解决。
- en: Many famous NP-hard problems can be solved with practical efficiency on quantum
    annealers in their QUBO formulation, up to a non-trivial number of variables.
    This makes quantum annealing a useful tool in dealing with classically hard optimisation
    problems.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 许多著名的NP-hard问题可以在量子退火器上通过QUBO形式有效解决，即使是包含非平凡数量变量的情况。这使得量子退火成为处理经典难度优化问题的有用工具。
- en: 3.2 Forward and Reverse Quantum Annealing
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.2 正向和反向量子退火
- en: Having defined the QUBO problem, we now review how quantum annealing can act
    as an efficient solver.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在定义了QUBO问题之后，我们现在回顾量子退火如何作为一种高效的求解器。
- en: 3.2.1 Forward quantum annealing
  id: totrans-59
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.1 正向量子退火
- en: The quantum annealing protocol, inspired by the adiabatic principle of quantum
    mechanics detailed in Chapter [2](Chapter_2.xhtml#x1-480002), dictates driving
    the system from an easy-to-prepare ground state of an initial Hamiltonian ℋ[0]
    to the unknown low-energy subspace of states of the problem Hamiltonian ℋ[F] ,
    ideally to the lowest energy state corresponding to the global minimum of the
    objective function. This *forward* quantum annealing procedure can be ideally
    described as attempting to drive the evolution of the time-dependent Hamiltonian
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 量子退火协议受到量子力学中绝热原理的启发，详细内容见第[2章](Chapter_2.xhtml#x1-480002)，它要求将系统从初始哈密顿量ℋ[0]的易于准备的基态驱动到问题哈密顿量ℋ[F]的未知低能量子空间，理想情况下达到与目标函数全局最小值对应的最低能量状态。这一*正向*量子退火过程可以理想地描述为试图驱动时间依赖哈密顿量的演化
- en: '| ![ℋ (t) = A (t)ℋ0 + B (t)ℋF , ](img/file344.jpg) |  |'
  id: totrans-61
  prefs: []
  type: TYPE_TB
  zh: '| ![ℋ (t) = A (t)ℋ0 + B (t)ℋF , ](img/file344.jpg) |  |'
- en: starting from
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 从以下开始
- en: '| ![ ∑N ( ∑Nc ) ℋ0 = σic , i=1 c=1 x ](img/file345.jpg) |  |'
  id: totrans-63
  prefs: []
  type: TYPE_TB
  zh: '| ![ ∑N ( ∑Nc ) ℋ0 = σic , i=1 c=1 x ](img/file345.jpg) |  |'
- en: where ℋ[0] is a Hamiltonian describing an independent collection of local transverse
    fields for each spin of the system (*σ*[x] is the Pauli X spin operator, or the
    quantum NOT gate, detailed in Section [6.3.3](Chapter_6.xhtml#x1-1300003)).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，ℋ[0]是描述每个自旋系统中独立局部横向磁场的哈密顿量（*σ*[x]是保利X自旋算符，或量子NOT门，详见第[6.3.3](Chapter_6.xhtml#x1-1300003)节）。
- en: In expression ([3.2.1](#x1-720001)), the first sum runs over all *logical qubits*
    representing binary decision variables in the QUBO formulation of the optimisation
    problem, and the second sum runs over all *physical qubits* in the chain that
    represents a logical qubit. The construction of a logical qubit from a chain of
    physical qubits is explained in Chapter [2](Chapter_2.xhtml#x1-480002) and a sample
    embedding of the qubit chain on the quantum chip is shown in Figure [2.3](Chapter_2.xhtml#2.3)
    for the *Chimera* graph. No physical qubit can be an element of more than one
    qubit chain. Assuming the most dense embedding scheme, we have *N* × *N*[c] =
    *K*, where *K* is the total number of physical qubits in the quantum chip. However,
    in practice we have *N* × *N*[c] *< K* for most problems of realistic size that
    require full connectivity between the logical qubits. For example, in the case
    of a D-Wave 2000Q *Chimera* graph consisting of *K* = 2,048 physical qubits, the
    maximum number of fully connected logical qubits is 64 and the maximum number
    of physical qubits in a chain is 17, meaning that *N* × *N*[c] = 1,088.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在表达式([3.2.1](#x1-720001))中，第一个求和符号遍历所有*逻辑量子比特*，它们代表QUBO优化问题中二进制决策变量，而第二个求和符号遍历所有代表逻辑量子比特的链中的*物理量子比特*。从一链物理量子比特构建逻辑量子比特的过程在第[2](Chapter_2.xhtml#x1-480002)章中有详细说明，图[2.3](Chapter_2.xhtml#2.3)展示了在*Chimera*图上的量子比特链的示例嵌入。任何物理量子比特不能属于多个量子比特链。假设采用最密集的嵌入方案，我们有*N*
    × *N*[c] = *K*，其中*K*是量子芯片中物理量子比特的总数。然而，在实际应用中，对于大多数需要逻辑量子比特间完全连接的现实规模问题，*N* ×
    *N*[c] *< K*。例如，在一个由*K* = 2,048个物理量子比特构成的D-Wave 2000Q *Chimera*图中，最大数量的完全连接逻辑量子比特为64，链中物理量子比特的最大数量为17，这意味着*N*
    × *N*[c] = 1,088。
- en: Figure [3.1](#3.1) shows how *A*(*t*) and *B*(*t*) vary over the scale of total
    *annealing time* *τ*.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图[3.1](#3.1)展示了*A*(*t*)和*B*(*t*)在总退火时间*τ*尺度上是如何变化的。
- en: '![Figurex1-72002r1: Schematic forward annealing schedule. A(t) indicates the
    strength of the transverse magnetic field and B(t) indicates the strength of the
    longitudinal magnetic field. ](img/file346.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图x1-72002r1：正向退火计划示意图。A(t)表示横向磁场的强度，B(t)表示纵向磁场的强度。](img/file346.jpg)'
- en: 'Figure 3.1: Schematic forward annealing schedule. A(t) indicates the strength
    of the transverse magnetic field and B(t) indicates the strength of the longitudinal
    magnetic field.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.1：正向退火计划示意图。A(t)表示横向磁场的强度，B(t)表示纵向磁场的强度。
- en: At the end of the annealing run, *A*(*τ*) = 0 and the system is projected on
    the computational basis by a measurement of each qubit magnetisation. The duration
    of the anneal, *τ*, is a free parameter, hence it is often useful to define the
    fractional completion of the annealing schedule *s* = *t∕τ*.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在退火过程结束时，*A*(*τ*) = 0，系统通过对每个量子比特的磁化测量投影到计算基上。退火的持续时间*τ*是一个自由参数，因此通常有必要定义退火进度的分数完成度*s*
    = *t∕τ*。
- en: 3.2.2 Reverse quantum annealing
  id: totrans-70
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.2.2 反向量子退火
- en: Figure [3.2](#3.2) illustrates the quantum annealing protocol when the quantum
    annealer is set to operate as a reverse annealer.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图[3.2](#3.2)展示了当量子退火机被设置为反向退火机时的量子退火协议。
- en: '![Figurex1-73002r2: Schematic reverse annealing schedule. A(t) indicates the
    strength of the transverse magnetic field and B(t) indicates the strength of the
    longitudinal magnetic field. ](img/file347.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图x1-73002r2：反向退火计划示意图。A(t)表示横向磁场的强度，B(t)表示纵向磁场的强度。](img/file347.jpg)'
- en: 'Figure 3.2: Schematic reverse annealing schedule. A(t) indicates the strength
    of the transverse magnetic field and B(t) indicates the strength of the longitudinal
    magnetic field.'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.2：反向退火计划示意图。A(t)表示横向磁场的强度，B(t)表示纵向磁场的强度。
- en: 'The system is initialised with *B*(0) = max{*B*} and *A*(0) = 0, with spins
    set to a classical bitstring. The evolution then undergoes an inverse schedule
    up to a point where the Hamiltonian time-dependence is temporarily paused. With
    reference to the Hamiltonian evolution in ([3.2.1](#x1-720001)), the transverse
    field evolution that we program for this protocol is the following three-phase
    function (analogous equations for *B*(*t*)):'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 系统初始化时，*B*(0) = max{*B*}，*A*(0) = 0，且自旋设置为经典的比特串。随后，演化过程进行逆过程调度，直到哈密顿量的时间依赖性被暂时暂停。参考哈密顿量演化（见[3.2.1](#x1-720001)），我们为该协议编程的横场演化是以下的三阶段函数（对于*B*(*t*)的类比方程）：
- en: '![ AR (t) := A(τ + (sp − 1)t) Reverse Annealing: t ∈ [0,τ ], AP (t) := A (spτ)
    Annealing Pause: t ∈ [τ,τ + ρ], F A (t) := A ((1− sp)(t− ρ)− (1 − 2sp)τ) Forward
    Annealing: t ∈ [τ + ρ,2τ + ρ], ](img/file348.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![ AR (t) := A(τ + (sp − 1)t) 逆退火：t ∈ [0,τ ], AP (t) := A (spτ) 退火暂停：t ∈ [τ,τ
    + ρ], F A (t) := A ((1− sp)(t− ρ)− (1 − 2sp)τ) 前向退火：t ∈ [τ + ρ,2τ + ρ], ](img/file348.jpg)'
- en: where *ρ* is the duration of the pause and *s*[p] ∈ [0*,*1] indicates the location
    of the forward schedule where the pause is implemented. The total duration of
    the selected reverse anneal protocol is 2*τ* + *ρ* as opposed to *τ* for the forward
    anneal. While the theory of reverse annealing is just starting to be investigated,
    the physics rationale of reverse annealing is to be found in the oversimplified
    idea that, if the system is initialised in a state 𝒮 corresponding to a local
    minimum of the objective function, the interplay of quantum and thermal fluctuations
    might help the state *tunnel* out of the energy trap during the reverse annealing,
    while the annealing pause (and to some extent the final forward annealing) allows
    the system to thermalise and relax in the neighborhood of the newfound minimum.
    The quality of the initial state 𝒮 is likely to influence dramatically the reverse
    annealing process. For the portfolio optimisation use case presented in this chapter,
    a classical greedy algorithm to set 𝒮 can be used as described in  [[296](Biblography.xhtml#XVenturelli2019)].
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，*ρ*是暂停的持续时间，*s*[p] ∈ [0*,*1]表示实施暂停的前向调度的位置。所选的逆退火协议的总持续时间为2*τ* + *ρ*，而前向退火的持续时间为*τ*。尽管逆退火的理论才刚刚开始被研究，逆退火的物理学原理可以在这个过于简化的观点中找到：如果系统初始化为状态𝒮，该状态对应于目标函数的局部最小值，那么量子波动和热波动的相互作用可能有助于在逆退火过程中让状态从能量陷阱中“隧穿”出来，而退火暂停（以及在某种程度上最终的前向退火）则允许系统在新发现的最小值邻域内热化并放松。初始状态𝒮的质量可能会显著影响逆退火过程。对于本章介绍的投资组合优化应用案例，可以使用经典的贪婪算法来设定𝒮，具体方法见[[296](Biblography.xhtml#XVenturelli2019)]。
- en: The combination of reverse quantum annealing with a classical greedy search
    algorithm has the potential to massively speed up a QUBO solver, thus realising
    a promising hybrid quantum-classical algorithm.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 逆量子退火与经典贪婪搜索算法的结合有潜力大幅加速QUBO求解器，从而实现一种有前景的混合量子-经典算法。
- en: 3.3 Discrete Portfolio Optimisation
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 3.3 离散投资组合优化
- en: The optimal portfolio construction problem is one of the most extensively studied
    problems in quantitative finance. The Modern Portfolio Theory (MPT)  [[202](Biblography.xhtml#XMarkowitz1952)]
    has laid the foundation for highly influential mean-variance portfolio optimisation
    approach. According to the MPT, a typical portfolio optimisation problem can be
    formulated as follows. Let *N* be the number of assets, *μ*[i] be the expected
    return of asset *i*, Σ[ij] be the covariance between the returns for assets *i*
    and *j*, and *R* be the target portfolio return. Then the decision variables are
    the weights *w*[i], i.e., the investment associated with the asset *i* (*w*[i]
    ∈ℝ). The standard Markowitz mean-variance approach consists in the constrained,
    quadratic optimisation problem
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 最优投资组合构建问题是量化金融中最广泛研究的问题之一。现代投资组合理论（MPT）[[202](Biblography.xhtml#XMarkowitz1952)]为极具影响力的均值-方差投资组合优化方法奠定了基础。根据MPT，典型的投资组合优化问题可以表述如下。令*N*为资产数量，*μ*[i]为资产*i*的预期回报，Σ[ij]为资产*i*和资产*j*之间的回报协方差，*R*为目标投资组合回报。那么决策变量为权重*w*[i]，即与资产*i*相关的投资额（*w*[i]
    ∈ℝ）。标准的马科维茨均值-方差方法包括受约束的二次优化问题。
- en: '| ![ ∑N ∑N N∑ N∑ min wiwjΣij, subject to wi = 1 and wiμi = R. i=1j=1 i=1 i=1
    ](img/file349.jpg) |  |'
  id: totrans-80
  prefs: []
  type: TYPE_TB
  zh: '| ![ ∑N ∑N N∑ N∑ min wiwjΣij, 约束条件：wi = 1 和 wiμi = R. i=1j=1 i=1 i=1 ](img/file349.jpg)
    |  |'
- en: Quadratic problems of this form are efficiently solvable by standard computational
    means (e.g., quadratic programming with linear constraints) if the covariance
    matrix is positive definite. However, related discrete portfolio optimisation
    problems (with discrete weights *w*[i]) are much harder to solve. In fact, they
    are known to be NP-complete  [[158](Biblography.xhtml#XKellerer2000selecting)].
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 这种形式的二次问题可以通过标准计算方法（例如，带线性约束的二次规划）有效求解，前提是协方差矩阵是正定的。然而，相关的离散投资组合优化问题（带有离散权重*w*[i]）则更难解决。事实上，它们被认为是NP完全的[[158](Biblography.xhtml#XKellerer2000selecting)]。
- en: Interestingly, the problem can also be cast into an unconstrained quadratic
    optimisation problem, which is a suitable formulation for quantum annealers  [[116](Biblography.xhtml#XGrant2020), [205](Biblography.xhtml#XMarzec2016), [234](Biblography.xhtml#XPhillipson2021), [251](Biblography.xhtml#XRosenberg2016)].
    The problem we are trying to solve here is a construction of the optimal portfolio
    from the universe of assets with known characteristics, such as asset returns,
    volatilities, and pairwise correlations. A stylised portfolio optimisation problem
    consists of selecting *M* assets from the universe of *N* investable assets. These
    *M* assets should ideally be the best possible choice according to some criteria.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 有趣的是，这个问题也可以转化为一个无约束的二次优化问题，这对于量子退火器是一个合适的模型[[116](Biblography.xhtml#XGrant2020),
    [205](Biblography.xhtml#XMarzec2016), [234](Biblography.xhtml#XPhillipson2021),
    [251](Biblography.xhtml#XRosenberg2016)]。我们要解决的问题是从已知特征（如资产回报率、波动率和成对相关性）的资产集合中构建最优投资组合。一个典型的投资组合优化问题是从*N*个可投资资产中选择*M*个资产。这些*M*个资产应该根据某些标准，理想地是最优选择。
- en: The scenario we target is a Fund of Funds portfolio manager who is facing a
    task of selecting the best funds that follow particular trading strategies in
    order to maximise the risk-adjusted returns according to some model  [[175](Biblography.xhtml#XKondratyev2019)]
    with a constraint that the assets are selected with equal preference weights  [[82](Biblography.xhtml#XDeMiguel2009)].
    Should we want to generalise the portfolio with larger allocation to a given asset,
    we could allow for multiples of the reference weight by cloning an asset and treating
    it as a new one.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 我们所针对的场景是一个基金组合经理，他面临着选择最佳基金的任务，这些基金遵循特定的交易策略，以根据某个模型最大化风险调整后的回报[[175](Biblography.xhtml#XKondratyev2019)]，并且有一个约束条件，即资产选择时要赋予相等的偏好权重[[82](Biblography.xhtml#XDeMiguel2009)]。如果我们希望通过更大比例的分配给某一特定资产来推广投资组合，我们可以通过克隆资产并将其视为新资产，从而允许参考权重的倍数。
- en: 3.3.1 QUBO encoding
  id: totrans-84
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.3.1 QUBO编码
- en: 'The task of encoding the relationship among the choices of *M* funds (*without*
    *replacement*) from the universe of *N* funds can then be formulated as a quadratic
    form:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 选择*M*个基金（*无* *替换*）的问题可以通过二次形式进行编码：
- en: '| ![ N∑ ∑N ∑N L(q) = aiqi + bijqiqj, i=1 i=1j=i+1 ](img/file350.jpg) |  |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| ![ N∑ ∑N ∑N L(q) = aiqi + bijqiqj, i=1 i=1j=i+1 ](img/file350.jpg) |  |'
- en: 'where *q*[i] = 1 means that asset *i* is selected and *q*[i] = 0 means that
    asset *i* is not selected. The task is then to find a configuration of q := (*q*[1]*,…,q*[N])
    that minimises *L*(q) subject to satisfying the cardinality constraint (i.e.,
    selection of exactly *M* assets). A common way to deal with the cardinality constraint
    would be to add a term *L*[penalty](q) to the cost function given by ([3.3.1](#x1-750001))
    such that the unsatisfying selections would be penalised by a large value *P*
    ≫ 1, which would force the global minimum to be such that ∑ [i=1]^N*q*[i] = *M*:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 其中，*q*[i] = 1表示选择了资产*i*，*q*[i] = 0表示未选择资产*i*。任务就是找到一个q := (*q*[1]*,…,q*[N])的配置，使得*L*(q)最小化，并满足基数约束（即选择恰好*M*个资产）。解决基数约束的常见方法是，在成本函数中添加一个项*L*[penalty](q)，根据([3.3.1](#x1-750001))，使得不满足约束的选择会受到一个大值*P*
    ≫ 1的惩罚，从而迫使全局最小值满足∑ [i=1]^N*q*[i] = *M*：
- en: '| ![ ( N )2 L (q) = P M − ∑ q . penalty i i=1 ](img/file351.jpg) |  |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '| ![ ( N )2 L (q) = P M − ∑ q . penalty i i=1 ](img/file351.jpg) |  |'
- en: The coefficients (*a*[i])[1≤i≤N] reflect asset attractiveness on a standalone
    basis and can be derived from the individual assets’ expected risk-adjusted returns.
    Assets with large expected risk-adjusted returns should be rewarded with negative
    values of *a*[i], while assets with small expected risk-adjusted returns should
    be penalised with positive values of *a*[i]. The coefficients (*b*[ij])[1≤i<j≤N]
    reflect pairwise diversification penalties (positive values) and rewards (negative
    values). These coefficients can be derived from the pairwise correlations.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 系数(*a*[i])[1≤i≤N] 反映了资产的独立吸引力，可以通过单个资产的预期风险调整回报来推导得出。具有较大预期风险调整回报的资产应该通过负值的*a*[i]来奖励，而具有较小预期风险调整回报的资产则应该通过正值的*a*[i]来惩罚。系数(*b*[ij])[1≤i<j≤N]
    反映了成对的多样化惩罚（正值）和奖励（负值）。这些系数可以通过成对的相关性来推导得出。
- en: The minimisation of the QUBO cost function given by ([3.3.1](#x1-750001)) and ([3.3.1](#x1-750001))
    should optimise the risk-adjusted returns by the use of the metrics of the Sharpe
    ratio. The Sharpe ratio (excess asset return measured in the asset volatility
    units) is calculated as (*r* − *r*[0])*∕σ*, where *r* is the expected annualised
    asset return, *r*[0] is the applicable risk-free interest rate, and *σ* is asset
    volatility (annualised standard deviation of the asset returns). The higher the
    fund’s Sharpe ratio, the better the fund’s returns have been relative to the risk
    it has taken on. Volatility can be estimated as the historical annualised standard
    deviation of the net asset value returns (per share). Expected return can be either
    estimated as the historical return on fund investment or derived independently
    by the analyst/portfolio manager taking into account different considerations
    about the future fund performance.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 给定的 QUBO 代价函数的最小化（见[3.3.1](#x1-750001)和[3.3.1](#x1-750001)）应通过使用夏普比率的度量优化风险调整后的回报。夏普比率（以资产波动率单位衡量的超额资产回报）计算公式为(*r*
    − *r*[0])*∕σ*，其中 *r* 是预期的年化资产回报，*r*[0] 是适用的无风险利率，*σ* 是资产波动率（资产回报的年化标准差）。基金的夏普比率越高，意味着基金相对于其承担的风险所获得的回报越好。波动率可以通过净资产价值回报（每股）的历史年化标准差来估算。预期回报可以通过基金投资的历史回报来估算，或者由分析师/投资组合经理独立推算，考虑未来基金表现的不同因素。
- en: 3.3.2 The coarse-grained encoding scheme
  id: totrans-91
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.3.2 粗粒度编码方案
- en: Instead of using the raw real numbers obtained from the financial data for the
    QUBO coefficients, we opt to coarse-grain the individual funds Sharpe ratios and
    their mutual correlations down to integer values by grouping intervals in buckets
    (the sample mapping schemes are shown in Table [3.1](#x1-76001r1)). By using bucketed
    values, we define a scorecard, which is loosely based on the past fund performances
    but can be easily adjusted by portfolio managers according to their personal views
    and any new information not yet reflected in the funds reports.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 与其使用从金融数据中获得的原始实数作为 QUBO 系数，我们选择将单个基金的夏普比率及其相互相关性粗粒度化为整数值，方法是将区间分组到桶中（样本映射方案见表[3.1](#x1-76001r1)）。通过使用桶化值，我们定义了一个评分卡，该评分卡松散地基于过去的基金表现，但可以由投资组合经理根据他们的个人观点以及任何尚未反映在基金报告中的新信息进行轻松调整。
- en: '| Sharpe ratio bucket | Coefficient a[i] |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '| 夏普比率桶 | 系数 a[i] |'
- en: '| Equally spaced buckets, | Mapping scheme: |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '| 等间距桶， | 映射方案： |'
- en: '| from worst to best | A | B | C |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '| 从最差到最好 | A | B | C |'
- en: '| 1st | 15 | 25 | 30 |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '| 第一 | 15 | 25 | 30 |'
- en: '| 2nd | 12 | 16 | 24 |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '| 第二 | 12 | 16 | 24 |'
- en: '| 3rd | 9 | 9 | 18 |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '| 第三 | 9 | 9 | 18 |'
- en: '| 4th | 6 | 4 | 12 |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '| 第四 | 6 | 4 | 12 |'
- en: '| 5th | 3 | 1 | 6 |'
  id: totrans-100
  prefs: []
  type: TYPE_TB
  zh: '| 第五 | 3 | 1 | 6 |'
- en: '| 6th | 0 | 0 | 0 |'
  id: totrans-101
  prefs: []
  type: TYPE_TB
  zh: '| 第六 | 0 | 0 | 0 |'
- en: '| 7th | −3 | −1 | −6 |'
  id: totrans-102
  prefs: []
  type: TYPE_TB
  zh: '| 第七 | −3 | −1 | −6 |'
- en: '| 8th | −6 | −4 | −12 |'
  id: totrans-103
  prefs: []
  type: TYPE_TB
  zh: '| 第八 | −6 | −4 | −12 |'
- en: '| 9th | −9 | −9 | −18 |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| 第九 | −9 | −9 | −18 |'
- en: '| 10th | −12 | −16 | −24 |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| 第十 | −12 | −16 | −24 |'
- en: '| 11th | −15 | −25 | −30 |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| 第十一 | −15 | −25 | −30 |'
- en: '| Correlation bucket | Coefficient b[ij] |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 相关性桶 | 系数 b[ij] |'
- en: '|  | Mapping scheme: |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '|  | 映射方案： |'
- en: '|  | D | E | F |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '|  | D | E | F |'
- en: '| −1.00 ≤ρ[ij] < −0.25 | −5 | −9 | −10 |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| −1.00 ≤ρ[ij] < −0.25 | −5 | −9 | −10 |'
- en: '| −0.25 ≤ρ[ij] < −0.15 | −3 | −4 | −6 |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| −0.25 ≤ρ[ij] < −0.15 | −3 | −4 | −6 |'
- en: '| −0.15 ≤ρ[ij] < −0.05 | −1 | −1 | −2 |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| −0.15 ≤ρ[ij] < −0.05 | −1 | −1 | −2 |'
- en: '| −0.05 ≤ρ[ij] < 0.05 | 0 | 0 | 0 |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| −0.05 ≤ρ[ij] < 0.05 | 0 | 0 | 0 |'
- en: '| 0.05 ≤ρ[ij] < 0.15 | 1 | 1 | 2 |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| 0.05 ≤ρ[ij] < 0.15 | 1 | 1 | 2 |'
- en: '| 0.15 ≤ρ[ij] < 0.25 | 3 | 4 | 6 |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| 0.15 ≤ρ[ij] < 0.25 | 3 | 4 | 6 |'
- en: '| 0.25 ≤ρ[ij] ≤1.00 | 5 | 9 | 10 |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| 0.25 ≤ρ[ij] ≤1.00 | 5 | 9 | 10 |'
- en: 'Table 3.1: Specification of the sample QUBO coefficients from NAV time series
    market data.'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 表 3.1：来自净资产值时间序列市场数据的样本 QUBO 系数规格。
- en: The choice of QUBO coefficients as small integer numbers is dictated by the
    technical realisation of the existing quantum annealer architecture (precision
    of the superconducting chip circuitry). Within this restriction, the portfolio
    manager may choose any linear or non-linear scale for QUBO coefficients. For example,
    the quadratic mapping scheme B strongly penalises low Sharpe ratio funds and strongly
    rewards high Sharpe ratio funds. The linear mapping schemes A and C distinguish
    better between funds with average performances. Similarly, the mapping scheme E
    penalises large positive correlations and rewards large negative correlations
    stronger than the mapping scheme D.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: QUBO系数选择为小整数是由现有量子退火器架构的技术实现所决定的（超导芯片电路的精度）。在这一限制下，投资组合经理可以为QUBO系数选择任何线性或非线性比例。例如，二次映射方案B强烈惩罚低夏普比率基金，并且强烈奖励高夏普比率基金。线性映射方案A和C则能更好地区分表现一般的基金。类似地，映射方案E比映射方案D更强烈地惩罚大正相关，并奖励大负相关。
- en: 3.3.3 Construction of the instance set for numerical experiments
  id: totrans-119
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.3.3 数值实验的实例集构建
- en: The instance set used for our case study is obtained by simulating asset values
    with the help of correlated geometric Brownian motion processes with a constant
    correlation *ρ*, drift *μ*, and log-normal volatility *σ*. The specific values
    of these parameters were derived from a wide range of fund industry researches
    (see  [[79](Biblography.xhtml#XDarolles2010conditionally)] for the Sharpe ratio
    distributions) and, therefore, can be viewed as representative of the industry.
    The simulation time horizon was chosen to be one year and the time step was set
    at one month.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 我们案例研究中使用的实例集是通过模拟资产价值获得的，借助于相关几何布朗运动过程，具有常数相关性*ρ*、漂移*μ*和对数正态波动率*σ*。这些参数的具体值来源于广泛的基金行业研究（见[[79](Biblography.xhtml#XDarolles2010conditionally)]，关于夏普比率分布的部分），因此，可以视为行业的代表。模拟的时间范围选择为一年，时间步长设为一个月。
- en: Every simulated (or "realised") portfolio scenario consists of 12 monthly returns
    for each asset. From these returns, we calculated the total realised return and
    realised volatility for each asset (which, obviously, differ from their expected
    values *μ* and *σ*) and for the portfolio as a whole. We also calculated realised
    pairwise correlations between all assets according to the input uniform correlation
    *ρ*. Finally, we calculated individual assets and portfolio Sharpe ratios. For
    reference, with *ρ* = 0*.*1, *μ* = 0*.*075, *σ* = 0*.*15, and the constant risk-free
    interest rate set at *r*[0] = 0*.*015, the expected Sharpe ratio for each asset
    in the portfolio is 0.4\. The expected Sharpe ratio for the portfolio of *N* assets
    is significantly larger due to the diversification and low correlation between
    the assets, e.g., for a 48-asset portfolio we would expect Sharpe ratio values
    from 0.5 (25th percentile) to 2.1 (75th percentile) with a mean around 1.4\.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 每个模拟（或“实际”）的投资组合场景都包含每个资产的12个月回报率。根据这些回报率，我们计算了每个资产的总实际回报和实际波动率（显然，它们与其预期值*μ*和*σ*不同），以及整个投资组合的总回报和波动率。我们还根据输入的统一相关性*ρ*计算了所有资产之间的实际成对相关性。最后，我们计算了单个资产和投资组合的夏普比率。作为参考，当*ρ*
    = 0.1，*μ* = 0.075，*σ* = 0.15，且常数无风险利率设定为*r*[0] = 0.015时，投资组合中每个资产的预期夏普比率为0.4。由于资产之间的多样化和低相关性，*N*资产投资组合的预期夏普比率要显著更高，例如，对于一个48个资产的投资组合，我们预计夏普比率的值将在0.5（第25百分位）到2.1（第75百分位）之间，均值约为1.4。
- en: 3.3.4 Classical benchmark – Genetic Algorithm
  id: totrans-122
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.3.4 经典基准 – 遗传算法
- en: We selected Genetic Algorithm (GA) as a classical benchmark heuristic, which
    is a popular choice for solving hard combinatorial optimisation problems. GAs
    are adaptive methods of searching a solution space by applying operators modelled
    after natural genetic inheritance and simulating the Darwinian struggle for survival.
    There is a rich history of GA applications to portfolio optimisation problems,
    including  [[172](Biblography.xhtml#XKondratyev2017), [179](Biblography.xhtml#XKshatriya2018)]
    recently.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 我们选择遗传算法（GA）作为经典基准启发式方法，GA是解决难度较大的组合优化问题的流行选择。遗传算法是一种通过应用模仿自然遗传继承的算子并模拟达尔文生存斗争来搜索解空间的自适应方法。遗传算法在投资组合优化问题中的应用有着丰富的历史，最近的研究包括[[172](Biblography.xhtml#XKondratyev2017)，[179](Biblography.xhtml#XKshatriya2018)]。
- en: In the case of portfolio optimisation, the solution (chromosome) is a vector
    q := (*q*[1]*,…,q*[N]) consisting of *N* elements (genes) that can take binary
    values in {0*,*1}. The task is to find a combination of genes that minimises the
    cost (fitness) function *L*(q). Due to the solution being represented by a relatively
    short bit string, we do not use the crossover recombination mechanism as it provides
    very little value in improving the algorithm convergence. Algorithm [1](#x1-78010r1)
    provides a detailed description of the GA procedure.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在投资组合优化的情况下，解（染色体）是一个向量 q := (*q*[1]*,…,q*[N])，由 *N* 个元素（基因）组成，这些元素可以取二进制值 {0*,*1}。任务是找到一种基因组合，最小化代价（适应度）函数
    *L*(q)。由于解由相对较短的比特字符串表示，我们不使用交叉重组机制，因为它对提高算法收敛性几乎没有价值。算法 [1](#x1-78010r1) 对 GA
    程序进行了详细描述。
- en: '![--------------------------------------------------------------------- Algorithm
    1: GA − portfolio optimisation with cardinality con- -straint--------------------------------------------------------------
    Result: Optimal portfolio. 1: Generate L initial solutions by populating solutions
    with random draws from a pool of possible element values {0, 1}, with the restriction
    that "1" is assigned to the values of exactly M elements and "0" is assigned to
    the values of remaining N − M elements. 2: Evaluate the cost (fitness) function
    for each solution. 3: Rank the solutions from "best" to "worst" according to the
    cost function evaluation results. for i from 0 to number of iterations − 1 do
    | | | a) Select K best solutions from the previous generation and produce L |
    new | | solutions by randomly swapping the values of two elements with | opposite
    | | values. With L = mK, every one of the "best" solutions will be used to | produce
    m new solutions. | | | b) Evaluate the cost (fitness) function for each solution.
    | | c) Rank the solutions from "best" to "worst" according to the cost | function
    | | evaluation results. end ---------------------------------------------------------------------
    ](img/file352.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![--------------------------------------------------------------------- 算法
    1：GA − 具有基数约束的投资组合优化 ------------------------------------------------------------
    结果：最优投资组合。 1：通过从可能的元素值池 {0, 1} 中随机抽取生成 L 个初始解，要求“1”分配给恰好 M 个元素的值，“0”分配给剩余 N −
    M 个元素的值。 2：评估每个解的代价（适应度）函数。 3：根据代价函数评估结果将解从“最好”到“最差”进行排序。 对于从 0 到迭代次数 − 1 的每次迭代，执行
    | | | a) 从上一代选择 K 个最佳解，并通过随机交换两个具有相反值的元素的值来生成 L 个新解。若 L = mK，则每个“最佳”解都会用来生成 m
    个新解。 | | | b) 评估每个解的代价（适应度）函数。 | | c) 根据代价函数评估结果将解从“最好”到“最差”进行排序。 结束 ---------------------------------------------------------------------
    ](img/file352.jpg)'
- en: The optimal values of the parameters *L* and *K* depend on the problem size
    and the specific QUBO coefficient mapping scheme, and can be found through trial
    and error. The objective here is to achieve the target convergence with the smallest
    number of objective function calls.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 参数 *L* 和 *K* 的最佳值依赖于问题规模和具体的 QUBO 系数映射方案，可以通过反复试验来找到。这里的目标是通过最少的目标函数调用次数实现目标收敛。
- en: Our first task is to verify that the proposed mapping schemes are sensible in
    the sense that the minimisation of the objective functions ([3.3.1](#x1-750001))
    and ([3.3.1](#x1-750001)) indeed leads to the construction of optimal portfolios.
    One possible approach to the problem of selecting *M* best assets from the universe
    of *N* investable assets is to select *M* individually best assets according to
    their individual Sharpe ratios. This approach would ignore the potential negative
    impact on diversification due to a probable large positive correlation between
    some of individually best assets, and there is no reason to believe that such
    a portfolio would be optimal. Therefore, we should demand that the optimal portfolio
    constructed by minimising *L*(q) + *L*[penalty](q) should outperform the portfolio
    of *M* individually best assets.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的首要任务是验证所提出的映射方案是否合理，即最小化目标函数（[3.3.1](#x1-750001)）和（[3.3.1](#x1-750001)）是否确实能够构建最优投资组合。选择从
    *N* 个可投资资产中挑选出 *M* 个最佳资产的问题的一个可能方法是根据各自的 Sharpe 比率选择 *M* 个单独最佳的资产。此方法忽视了某些单独最佳资产之间可能存在的较大正相关性对多样化的负面影响，因此没有理由相信这样的投资组合是最优的。因此，我们应该要求，通过最小化
    *L*(q) + *L*[penalty](q) 构建的最优投资组合应优于 *M* 个单独最佳资产的投资组合。
- en: 'For example, we can compare the results for the optimal 24-asset portfolio
    selected from the universe of 48 assets (for 10,000 portfolio instances simulated
    with *ρ* = 0*.*1, *μ* = 0*.*075, *σ* = 0*.*15; as before, we assumed a constant
    risk-free interest rate *r*[0] = 0*.*015). Table [3.2](#x1-78012r2) displays the
    Sharpe ratio distribution statistics obtained for the sample QUBO coefficient
    mapping schemes provided by Table [3.1](#x1-76001r1)  [[296](Biblography.xhtml#XVenturelli2019)].
    The results are presented in the format: **mean** (25th percentile; 75th percentile).'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们可以比较从48个资产的集合中选择的最优24资产投资组合的结果（对于10,000个投资组合实例，模拟条件为*ρ* = 0*.*1，*μ* = 0*.*075，*σ*
    = 0*.*15；如前所述，假设一个恒定的无风险利率*r*[0] = 0*.*015）。表[3.2](#x1-78012r2)显示了根据表[3.1](#x1-76001r1)提供的样本QUBO系数映射方案获得的夏普比率分布统计[[296](Biblography.xhtml#XVenturelli2019)]。结果以以下格式呈现：**平均值**（第25百分位；第75百分位）。
- en: '|  |  |'
  id: totrans-129
  prefs: []
  type: TYPE_TB
  zh: '|  |  |'
- en: '* * *'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '|  |  | Mapping schemes for b [ij] |'
  id: totrans-136
  prefs: []
  type: TYPE_TB
  zh: '|  |  | b [ij] 映射方案 |'
- en: '|  |  |'
  id: totrans-137
  prefs: []
  type: TYPE_TB
  zh: '|  |  |'
- en: '* * *'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '|  |  | D | E | F |'
  id: totrans-144
  prefs: []
  type: TYPE_TB
  zh: '|  |  | D | E | F |'
- en: '|  |  |  |  |  |'
  id: totrans-145
  prefs: []
  type: TYPE_TB
  zh: '|  |  |  |  |  |'
- en: '| Mapping | A | 4.7 (2.5; 6.4) | 4.5 (2.1; 6.1) | 4.0 (1.7; 5.5) |'
  id: totrans-146
  prefs: []
  type: TYPE_TB
  zh: '| 映射 | A | 4.7 (2.5; 6.4) | 4.5 (2.1; 6.1) | 4.0 (1.7; 5.5) |'
- en: '|  |'
  id: totrans-147
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '* * *'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| schemes | B | 4.8 (2.7; 6.5) | 4.3 (2.0; 5.9) | 4.2 (2.0; 5.8) |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 方案 | B | 4.8 (2.7; 6.5) | 4.3 (2.0; 5.9) | 4.2 (2.0; 5.8) |'
- en: '|  |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '|  |'
- en: '* * *'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '* * *'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: '|'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| for a[i] | C | 5.0 (3.0; 6.7) | 4.8 (2.6; 6.3) | 4.6 (2.5; 6.1) |'
  id: totrans-166
  prefs: []
  type: TYPE_TB
  zh: '| 对于a[i] | C | 5.0 (3.0; 6.7) | 4.8 (2.6; 6.3) | 4.6 (2.5; 6.1) |'
- en: '|  |  |  |  |  |'
  id: totrans-167
  prefs: []
  type: TYPE_TB
  zh: '|  |  |  |  |  |'
- en: 'Table 3.2: Sharpe ratio distribution statistics for different mapping schemes.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 表3.2：不同映射方案的夏普比率分布统计。
- en: 'For the portfolio of individually best assets, the Sharpe ratio distribution
    statistics look as follows:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 对于个别最佳资产的投资组合，夏普比率分布统计如下：
- en: 'mean: 3.8 25th percentile: 2.6 75th percentile: 4.7'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 平均值：3.8，第25百分位：2.6，第75百分位：4.7
- en: On average, the Sharpe ratio of the optimal portfolio is larger than that of
    the portfolio of individually best assets by 0*.*8, although some QUBO coefficient
    mapping schemes produce better results than others. Figure [3.3](#3.3) illustrates
    a better performance of the optimal portfolio found through the minimisation of
    the cost function *L*(q) + *L*[penalty](q) in comparison with the portfolio consisting
    of 24 individually best assets for the mapping schemes A and D.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 平均而言，最优投资组合的夏普比率比个别最佳资产的投资组合高0*.*8，尽管一些QUBO系数映射方案的结果优于其他方案。图[3.3](#3.3)展示了通过最小化成本函数*L*(q)
    + *L*[penalty](q)找到的最优投资组合相对于由24个个别最佳资产组成的投资组合，在映射方案A和D中的表现更好。
- en: Our second task is to understand how the time to solution scales with the problem
    size and whether quantum annealing can demonstrate a material speedup compared
    with the classical algorithm. It would be interesting to see what happens when
    we remove the constraint on the number of assets in the optimal portfolio. The
    portfolio optimisation results shown in Figure [3.3](#3.3) were obtained for *M*
    = *N∕*2, which is arguably the hardest combinatorial problem with a constraint
    on the number of assets, based on the size of the search space  [[175](Biblography.xhtml#XKondratyev2019)].
    From a brute force approach perspective, the problem becomes even harder computationally
    if we remove this constraint due to the solution space growing with *N* as 2^N
    instead of ![---N!---- M!(N− M)!](img/file353.jpg).
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的第二个任务是了解解决方案所需的时间如何随着问题规模的变化而变化，以及量子退火是否能与经典算法相比表现出显著的加速效果。移除最优投资组合中资产数量的约束将会是一个有趣的实验。图[3.3](#3.3)中展示的投资组合优化结果是针对*M*
    = *N∕*2的情况获得的，这可能是最难的组合优化问题之一，因为它涉及到资产数量的约束，基于搜索空间的大小[[175](Biblography.xhtml#XKondratyev2019)]。从蛮力方法的角度来看，如果我们去掉这个约束，问题将变得更加困难，因为解空间会随着*N*的增加而增长，变成2^N，而不是![---N!----
    M!(N− M)!](img/file353.jpg)。
- en: '![Figurex1-78014r3: Sharpe ratio histogram (QUBO coefficients mapping schemes
    A and D). M = N∕2\. ](img/file354.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![Figurex1-78014r3: 夏普比率直方图（QUBO系数映射方案A和D）。M = N∕2\。](img/file354.jpg)'
- en: 'Figure 3.3: Sharpe ratio histogram (QUBO coefficients mapping schemes A and
    D). M = N∕2\.'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.3：夏普比率直方图（QUBO系数映射方案A和D）。M = N∕2\。
- en: The removal of the cardinality constraint is also warranted by the fact that
    a large energy scale *P* in expression ([3.3.1](#x1-750001)) is typically associated
    with precision issues connected to the analog nature of the quantum annealing
    machine and the fact that there is a physical maximum to the energy that can be
    controllably programmed on local elements of the quantum chip. However, several
    hybrid quantum-classical strategies can be put in place to overcome this limitation.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 去除基数约束也是必要的，因为表达式([3.3.1](#x1-750001))中的大能量尺度 *P* 通常与量子退火机器的模拟性质相关，并且与量子芯片局部元件上可控编程的最大能量物理限制有关。然而，可以采取多种混合量子-经典策略来克服这一限制。
- en: For instance, we observe that shifting artificially the Sharpe ratio values
    by a constant amount ±Δ (and adding buckets according to the prescription chosen,
    e.g., Table [3.1](#x1-76001r1)) will essentially amount to forcing the ground
    state solution of the unconstrained problem to have more or less a desired number
    of assets selected. Hence, while not solving the same problem, we could imagine
    a solver of a similarly constrained problem that will enclose the quantum annealing
    runs in a classical loop that checks for the number of selected assets *m*(Δ)
    in the best found solution with Δ = 0, then increases or decreases the individual
    desirability of the assets according to whether *m* is larger or smaller than
    *M* and runs again until *m*(Δ) = *M* for Δ = Δ^⋆. While in this case it is an
    approximation of the original problem, this sort of hybridisation scheme is not
    uncommon for quantum-assisted solvers  [[285](Biblography.xhtml#XTran2016)] and
    the number of expected rounds of runs should scale proportionally to log [2](Δ^⋆)
    as per a binary search, introducing a prefactor over the time-to-solution complexity
    that should stay manageable. Other hybrid approaches could also be put forward
    to deal with the constraint, such as fixing some asset selections in pre-processing
    via sample persistence  [[154](Biblography.xhtml#XKarimi2017)].
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，我们观察到，通过常量±Δ人为地调整夏普比率值（并根据所选的规定添加桶，例如表[3.1](#x1-76001r1)），本质上相当于迫使无约束问题的基态解选出大致期望数量的资产。因此，尽管没有解决相同的问题，我们可以想象一种解算器，它可以解决类似约束的问题，将量子退火过程封装在一个经典循环中，检查最优解中选定的资产数量
    *m*(Δ)，并且当Δ = 0时，根据 *m* 大于或小于 *M* 来增加或减少资产的单独期望值，并再次运行，直到 *m*(Δ) = *M* 且 Δ = Δ^⋆。尽管在这种情况下这是对原始问题的一种近似，但这种混合方案在量子辅助解算器中并不少见[[285](Biblography.xhtml#XTran2016)]，且预期的运行轮次应按二分查找的方式与
    log [2](Δ^⋆) 成比例增长，这为解决时间复杂度引入了一个常数因子，应该能够保持可管理。也可以提出其他混合方法来应对约束，例如在预处理过程中通过样本持久性来固定一些资产选择[[154](Biblography.xhtml#XKarimi2017)]。
- en: As per the preceding arguments, in our benchmark case study, we focus on running
    the unconstrained problem, setting Δ = 0\. Table [3.3](#x1-78016r3) provides the
    characteristics of the benchmark instance set  [[296](Biblography.xhtml#XVenturelli2019)].
    For a problem of the given size, the table reports the median number of assets
    in the optimal portfolio (and the minimum and the maximum in parenthesis), over
    30 instances, for the unconstrained portfolio optimisation problem.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 根据前述论点，在我们的基准案例研究中，我们集中精力运行无约束问题，设置 Δ = 0。表[3.3](#x1-78016r3)提供了基准实例集的特征[[296](Biblography.xhtml#XVenturelli2019)]。对于给定大小的问题，该表报告了在30个实例中，无约束投资组合优化问题的最优投资组合中资产的中位数（括号中为最小值和最大值）。
- en: '| Problem | Number of assets |'
  id: totrans-178
  prefs: []
  type: TYPE_TB
  zh: '| 问题 | 资产数量 |'
- en: '| size | in the optimal portfolio |'
  id: totrans-179
  prefs: []
  type: TYPE_TB
  zh: '| 大小 | 在最优投资组合中 |'
- en: '| N | (unconstrained problem) |'
  id: totrans-180
  prefs: []
  type: TYPE_TB
  zh: '| N | （无约束问题） |'
- en: '| 42 | 16 (−7,+6) |'
  id: totrans-181
  prefs: []
  type: TYPE_TB
  zh: '| 42 | 16 (−7,+6) |'
- en: '| 48 | 17 (−6,+5) |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '| 48 | 17 (−6,+5) |'
- en: '| 54 | 19 (−7,+12) |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| 54 | 19 (−7,+12) |'
- en: '| 60 | 23 (−13,+15) |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '| 60 | 23 (−13,+15) |'
- en: 'Table 3.3: Benchmark instance set characterisation.'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 表3.3：基准实例集特征。
- en: 3.3.5 Establishing quantum speedup
  id: totrans-186
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 3.3.5 建立量子加速
- en: The aim is to solve representative portfolio instances at the limit of programmability
    for the D-Wave 2000Q quantum annealer. D-Wave 2000Q features 2,048 physical qubits;
    however, due to the limited connectivity of the D-Wave 2000Q *Chimera* graph,
    we can embed a maximum of 64 logical binary variables on a fully connected graph.
    Practically, we limit ourselves by working with up to 60 logical qubits, which
    means that the largest search space for our benchmarks is around 60!*∕*(30!)²
    ≃ 10^(17) if *M* = *N∕*2\. This constraint dictates the configuration of the instance
    set, which consists of 30 randomly generated instances for *N* = {42*,*48*,*54*,*60}
    assets.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 目标是解决在D-Wave 2000Q量子退火器编程能力极限下的代表性投资组合实例。D-Wave 2000Q拥有2,048个物理量子比特；然而，由于D-Wave
    2000Q的*Chimera*图的连接性有限，我们最多可以在完全连接的图上嵌入64个逻辑二进制变量。实际上，我们将自己限制为最多使用60个逻辑量子比特，这意味着我们基准测试的最大搜索空间约为60!*∕*(30!)²
    ≃ 10^(17)，如果*M* = *N∕*2。这个限制决定了实例集的配置，实例集由30个随机生成的实例组成，*N* = {42*,*48*,*54*,*60}个资产。
- en: 'As mentioned in Chapter [2](Chapter_2.xhtml#x1-480002), a common metric to
    benchmark the performance of non-deterministic iterative heuristics against quantum
    annealing is the Time-to-Solution (TTS)   [[250](Biblography.xhtml#XRonnow2014)].
    The latter is defined as the expected number of independent runs of the annealer
    in order to find the ground state with probability (confidence level) *α* ∈ (0*,*1):'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 如第[2](Chapter_2.xhtml#x1-480002)章所述，一个常用的衡量非确定性迭代启发式方法与量子退火性能的标准是解决时间（TTS）[[250](Biblography.xhtml#XRonnow2014)]。后者定义为在给定概率（置信水平）*α*
    ∈ (0*,*1)下，找到基态所需的量子退火器独立运行次数的期望值。
- en: '| ![ log(1−-α-) TTS = trunlog(1− p), ](img/file355.jpg) |  |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| ![log(1−α) TTS = trunlog(1− p),](img/file355.jpg) |  |'
- en: where *t*[run] is the running time elapsed for a single run – either *τ* for
    forward annealing (see Section [3.2.1](#x1-720001)), or 2*τ* + *ρ* for reverse
    annealing (see Section [3.2.2](#x1-730002)) – and *p* is the probability of finding
    the optimum of the objective function in that single shot.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 其中*t*[run]是单次运行的运行时间——对于正向退火是*τ*（见第[3.2.1](#x1-720001)节），对于反向退火是2*τ* + *ρ*（见第[3.2.2](#x1-730002)节）——而*p*是该单次实验中找到目标函数最优解的概率。
- en: Figure [3.4](#3.4) displays the TTS results for the GA, the forward QA solver,
    and the reverse QA solver for the unconstrained portfolio optimisation problem
    encoded using the mapping schemes A and D  [[296](Biblography.xhtml#XVenturelli2019)].
    In the figure, the markers are the median values and the error bars indicate the
    30th and the 70th percentiles over the 30-instance set. All TTS are measured,
    not counting the time required to run the greedy descent that initialises the
    initial ansatz 𝒮, nor the overhead times for operating the quantum annealer.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 图[3.4](#3.4)显示了GA、正向量子退火求解器（QA）和反向量子退火求解器（QA）对于使用映射方案A和D编码的无约束投资组合优化问题的TTS结果[[296](Biblography.xhtml#XVenturelli2019)]。图中，标记表示中位数值，误差条表示在30实例集上的第30和第70百分位数。所有TTS都已测量，但不包括运行初始化初始假设𝒮的贪婪下降所需的时间，也不包括操作量子退火器的开销时间。
- en: '![Figurex1-79003r4: Time-to-solution (99% confidence level): GA, forward and
    reverse quantum annealing. Unconstrained portfolio optimisation problem encoded
    using the mapping schemes A and D. ](img/file356.jpg)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![图x1-79003r4: 解决时间（99%置信水平）：GA、正向和反向量子退火。使用映射方案A和D对无约束投资组合优化问题进行编码。](img/file356.jpg)'
- en: 'Figure 3.4: Time-to-solution (99% confidence level): GA, forward and reverse
    quantum annealing. Unconstrained portfolio optimisation problem encoded using
    the mapping schemes A and D.'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.4：解决时间（99%置信水平）：GA、正向和反向量子退火。使用映射方案A和D对无约束投资组合优化问题进行编码。
- en: The GA can also be initialised by the greedy search heuristics, and this also
    decreases the TTS required for the GA to find the global minimum. As was experimentally
    established in  [[296](Biblography.xhtml#XVenturelli2019)], the best results are
    obtained for the smallest possible annealing time and pause time (1 µs). In the
    median case, we observe one to three orders of magnitude in speedup when applying
    reverse quantum annealing with respect to forward quantum annealing or classical
    benchmark.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: GA也可以通过贪婪搜索启发式方法初始化，这也减少了GA找到全局最小值所需的TTS。实验研究表明，最佳结果出现在最小可能的退火时间和暂停时间（1微秒）下[[296](Biblography.xhtml#XVenturelli2019)]。在中位数情况下，应用反向量子退火相比正向量子退火或经典基准，能观察到一到三个数量级的加速。
- en: It is likely that the non-monotonic behaviour of the reverse quantum annealing
    TTS for *N* = 54 is not of fundamental significance but is due to the noise associated
    with the finite, small size of our instance set. Although the small size of the
    instance set makes it difficult to draw a definite conclusion about the scaling
    of QA with the problem size, it appears that reverse quantum annealing displays
    similar scaling to GAs for portfolios of up to *N* = 54 assets – as illustrated
    by the dashed regression lines. A worse scaling for the limit case of *N* = 60
    assets is probably due to the fact that, in this case, the physical qubit chains
    become too long and more likely to be broken. It is worth noting that for the
    same reason, *N* = 60 is also a very hard case for forward annealing. Reverse
    annealing displays significantly better scaling in comparison with forward annealing.
    While parameter *β* in ([2.3.2](Chapter_2.xhtml#x1-570002)) for forward annealing
    is equal to 0.3, it becomes 0.1 for reverse annealing.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 很可能，*N* = 54时反向量子退火TTS的非单调行为并非具有根本意义，而是由于我们实例集的有限、小规模噪声所致。尽管实例集的规模较小使得很难对量子退火与问题规模之间的扩展性做出明确结论，但似乎反向量子退火在*N*
    = 54个资产的投资组合中显示出与遗传算法类似的扩展性——如虚线回归线所示。对于*N* = 60个资产的极限情况，表现较差的扩展性可能是由于此时物理量子比特链条过长，且更容易断裂。值得注意的是，出于同样的原因，*N*
    = 60也是正向退火的一个非常困难的情况。与正向退火相比，反向退火显示出显著更好的扩展性。当正向退火中的参数*β*为0.3时，反向退火中的*β*为0.1。
- en: Discrete portfolio optimisation is an NP-hard problem that can be solved on
    a quantum annealer using a hybrid quantum-classical reverse annealing technique
    with several orders of magnitude in quantum speedup (ignoring the measurement
    and system reset computational overheads). Although it is too early to say whether
    quantum annealing can become a widely adopted portfolio optimisation tool, there
    are indications that as technology and theory progress, it could represent a viable
    choice.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 离散投资组合优化是一个NP难度问题，可以通过量子退火器使用混合量子-经典反向退火技术来解决，量子加速比可达到几个数量级（忽略测量和系统重置的计算开销）。尽管目前还为时过早，无法确定量子退火是否能成为一种广泛应用的投资组合优化工具，但有迹象表明，随着技术和理论的进步，它可能会成为一个可行的选择。
- en: Summary
  id: totrans-197
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we applied quantum annealing to solving a discrete portfolio
    optimisation problem. We started with the principles of quadratic unconstrained
    binary optimisation and looked at several examples of NP-hard optimisation problems
    and their QUBO formulations.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章中，我们应用量子退火解决离散投资组合优化问题。我们从二次无约束二进制优化的原理开始，研究了几个NP难度优化问题及其QUBO表述。
- en: 'Then, we introduced the concept of a quantum annealing protocol and specified
    two such protocols: forward annealing and reverse annealing. We also specified
    the classical benchmark: the genetic algorithm, an evolutionary search heuristic
    ideally suited for operations on binary variables.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们引入了量子退火协议的概念，并指定了两种此类协议：正向退火和反向退火。我们还指定了经典基准：遗传算法，一种理想适用于二进制变量操作的进化搜索启发式方法。
- en: Once we had all the necessary building blocks, we translated a sample discrete
    portfolio optimisation problem into QUBO and experimented with solving its instances
    on a D-Wave 2000Q quantum annealer. We collected sufficient statistics on various
    problem sizes to compare the performance of forward and reverse quantum annealing
    with the classical benchmark. We obtained encouraging results in terms of TTS,
    especially for the reverse quantum annealing protocol.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们拥有所有必要的构建模块，我们将一个样本离散投资组合优化问题转化为QUBO，并在D-Wave 2000Q量子退火器上尝试解决它的实例。我们收集了足够的统计数据，涵盖了各种问题规模，以便将正向和反向量子退火的表现与经典基准进行比较。在TTS方面，我们特别对反向量子退火协议取得的令人鼓舞的结果表示满意。
- en: In the next chapter, we will learn how to apply quantum annealing to the problem
    of construction of a robust classifier. The proposed solution – quantum boosting
    – is a hybrid quantum-classical classifier (trained quantumly and run classically)
    that performs on a par with the standard classical models and, sometimes, outperforms
    them.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将学习如何将量子退火应用于构建一个强健分类器的问题。所提的解决方案——量子提升——是一种混合量子-经典分类器（量子训练，经典运行），其性能与标准的经典模型相当，且有时能够超越它们。
- en: Join our book’s Discord space
  id: totrans-202
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 加入我们书籍的Discord空间
- en: 'Join our Discord community to meet like-minded people and learn alongside more
    than 2000 members at: [https://packt.link/quantum](https://packt.link/quantum)'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 加入我们的 Discord 社区，与志同道合的人一起学习，和超过 2000 名成员共同成长，网址：[https://packt.link/quantum](https://packt.link/quantum)
- en: '![PIC](img/file1.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![PIC](img/file1.png)'
